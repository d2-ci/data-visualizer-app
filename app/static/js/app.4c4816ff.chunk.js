(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[127],{2054:function(e,t,n){"use strict";(function(e){t.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"undefined"!==typeof e.Intl&&Intl.DateTimeFormat?new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"}).format(new Date(t)):t.substr(0,19).replace("T"," ")}}).call(this,n(217))},2197:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAAB9CAYAAACI7nB1AAAABGdBTUEAALGPC/xhBQAADWVJREFUeAHtnVtsFOcVx8eLsYONMSFOEAUXNVikuBfSlMQNVQqq1AdAqsQDSJG4FMxN8IKQiIAnngBFPPEAQtwKsrDEO/BQVCAIqIAUOUlTYUAk1NSBBNc2YINtTP9nMt9qPDvX3W9mz47PSPbcvjnfufzmfJeZ3S0zsLS0tEwbGBj4tKysbD7tv3r16kJFRcUny5Yt66B9WUanB8osMNpg/iSHC7oAyGwBxOGVUbSboYzhAga5YJJ1bhS5Q0y1eyCjmhL7QbXtd06VkXV6PZBB/2KKl3l+57yukePp8UAmPaaIJbo9IHDo9miK5AkcKQqmblMEDt0eTZE8gSNFwdRtisCh26MpkidwpCiYuk0ROHR7NEXyBI4UBVO3KQKHbo+mSJ7AkaJg6jZF4NDt0RTJEzhSFEzdpggcuj2aInkCR4qCqdsUgUO3R1MkT+BIUTB1myJw6PZoiuQJHCkKpm5TBA7dHk2RPIEjRcHUbYrAodujKZIncKQomLpNETh0ezRF8gSOFAVTtykCh26PpkiewJGiYOo2ReDQ7dEUyRM4UhRM3aYIHLo9miJ5AkeKgqnblHLdAkUefw+cOnVqzLNnz2pevnxZi+9gqS0vL6d11dDQECn/ENvt69ev7xM4+MeyIA3Pnz9ffvfu3QkEgQLh6dOnNcPDw2UkGN/eZAASs45MxmxI6lHuzYMHD14WOApyPa+LEdCx0Ki2srKyFsE3YQAY40lLgoD+cDxQaZR7DUuDwBHoKp4F9u3bVzlx4sRaahoUCNC0irS1moeCFMeXBU4WOApyYTIXo48wDn2ELATUPNDdjQDGqoDAEat78xdOTQQ6im8DhGm9vb1mRlDSqHmIe0H/45HAYXl5wYIFf4TTdyMYjVh/jfX2s2fP/j3uILjJP3ny5OTnz5+/i+aiwu183Mdg+3M0V7dlngOeXrRo0UoA8Tc45QPsjqc17dPxuAPhlH/8+PGpfX19HxQDDNj9EvX+B3+XZShrgQGnHMXfiBvF2j8KQIzTp08fdwYxjv0jR47UDA4OvhuHbKdMwD8EG3txvAdNSA+2u5ubm5/i+CtVlm2zQhM1aGunQdHJUHgiaC6HEUNYk0Eda9aseWA3RBkUZU2ZAU7JgjFjxgxj27Ztxp49ewwMAekHAgiYxACBPb+y6oxiRmBZ+G0Acnsh34Rg7NixPcuXL+9z+g9wjJBVdvTo0SwpI85YO6tXr46/9+Oo+NChQ9PQGZuFdu81xyn7bt+YMWM+X7VqVbf9YNhtNzB2795tjB8/3sAkkbF9+3YTEJIHJw7jb3WcGQTNyRvIGnPD6u9VDnq+wFC2B/7rpoyAEU0vNRFe5f2Os4KDZvPu3bv3a2SHqX5Kq3O4G6iNvAbjf1DHwqz9wFDXJw0IbtK5sOUNVX+YNcr34wYxIcC6p66urmfhwoUvwlwbpgwbOPbv3/86fsLjPSg9YtgWZAScQnO/V8JmkDBgqDqTAgTD1jrY8aGq121NGQF/P1A2ePHiRQ/K9OCmGHQrq+tY0eHA3V+GjtgMGP1z3Al5NWG4bgDOvYI284mfY6KAoeQkAUiYrAH7LoW9AZTuha5H9NALFRb1+jNnzlQePny4CdfNyhcMqhOOy+Bu8u1c5wMGyaY+CPVFqLNKC3UY8UedVC3DXMoasD2oOXmYNBhka9HgOHDgwFsdHR3zkSrfJEXyXXD9EMD4x8aNG//nJSNfMJS8OAEB2O+oerzWKNPudS7O44nDsXPnzgzSaCOGU01oSgqaAUwCDOX8OAChrAH5zp9PU1WqdVGyBlWeKBwnTpyonj59+u+RRn/M0cr84PVDwHSFYFBFdYPx6NEjY926dUZra6uqImetG5AwWWPChAm3chRJ6EBicNDcBdL/PMxdTIxg2zDa968w4XVt5cqVjwHEDVxLcw7am5K2tjYDzZxx7tw5X/V0AYLnJ6GyxtKlS2lkUpQldjho7gKdzt8goPQ3JqyVKPsUL5xcWrt27T11DSbkvsdw93rcfQxVn9daByB4fhLY18CNVLSsQbbHCgemwGvv3LnzB9RD0+ChF2SLb2tqaj7Dz5bSVPmIZcWKFY/8Op+YBPoLjSbwZ9pGoww18zlCUIE7XoBQ/UGi0eeiTrhvXwNNzneYxyha1iAbYoMDDni7u7v7I2SA6iBn2c4P4m65gWzxBdLpjy822k4GbVqBORI3GEoPN0Bw7kgQIOhz1SoZXmtMexdlhGLXRzsc9PoawGiCA36B0UiUSa0udL4u4m7ptCsYdjtpMJRe+QACO+8hMzxXMpxrDlmDdNIKB3Wyqqur5wGMt5wG++0ju7RjdvMKskW/Xzmvc8UCQ+kTFRDKishuD9T1zjWHrEE6aYGD5i4wGpmFTtaHMLrSaazXPjILwXAZYNwCIL5Ph71k0BtcOJdYU+Klhxcgln45lyE7PMw5iAO4sYre11B6FQwHJnKq6uvr5yK4DUpomDXKd+IR9UUMU7vClPcpsyepPoaPDuYpD0D2uF03btw41+dAVVVVRR2h2HX1fR5hL+i2jQdmP8Hx2QhOFDn0wYmvkC2+dZOZx7FZ6pqtW7eaz0LUfjHWBAjpsWHDBlV9Vj91wFrndLjphnEboTmuS2w3r8yBZqQcYBAUv40CBso+gQM+Q7bQBQY56t/KW3v37jVf1FH7xVjTU1zSw7Zk9bMdo82cOR98GKnoIxS7jpHhaGlpmYBm5CME+qd2QUHbaGO/qa2tvYSM4ZpOg673Ob8NwFE2MjCnYuzYsaNogBAYVD/pQYul1zZzx/Gvv7+/xn6IW9Yg3SLBgU7nz/DKPIFhfsTObpzP9iDAuI5Hzl/mM3fhI9c8ZX18oLlQQHDXmvIwKxtUpet5DzCavT7egPmcyXZB3LIG6RYKDsx0Vhw7dux9BOCXYa8xhWcyj/GS8EWA8R3tx7XgvZC/QnZBgDQ1NRlLliwxH75F1dMLDEuvHHH08jRusOysMcesQUoHvgmGu74O4+73YECkWwpDsluY6byN6/IaouZ4NMQB53xHQ0ODsWvXrlg7qVHBIDPwMvFMjNSyz1bgowsxNLchPOZfxDdzgG6D3oiOAoaau8Dj7/YkwSAzdWQQf3eNPJsPGDRRiCZlppIEH3VyBIP084SDwIi6kKGa5i6iVp0tny8guM5YvHixsXnz5lAd2nzAoJeo0RF9H1nV/liBzbxG1onWRg4cBEVUMND00Jj9C9wBN+J+I9ppgNt+PoDgjjbwKoDR3t5uXL161U1s9li+YKDT+Tv4NjsnhO3/cs0aZGwOHFkPhNyAgU9wJ1zSPHcRsnbvYlEBaWxsNIXhjTNj5sxs1s+pQBcYJBhNMKt5Daex2Q6pV7bA8T87L1L7NHeBB21fxzFEVXUUug7bSUU/wLh586YxdepUY8qUKa7V6gSDsgY67J+7VsTkIL1mH7kZge6xzl3o9E3YDALQjTlz5iQCBtnHPWuYOkYNBIxKZO4iql5+5d0Aoc/CUiYIs1A5Ku+Y+Wy25LqKoM6ns4+hClLW4NzXUHpmMMJQ24FrtMe3MKF1dcuWLfSovaQWJyD0KfowgCgwqDwt8BdN1ecNBskohaxh6knNStACYwiGy3gDPPG5iyDdopyPCkhMYDwohaxBfg0crXCYu4gCQFDZsIDEAQbphkf6rEcodv+ZoxW/7AHKw7c7dsnMt52jGPtb6vmAgWdP9AUz9CZcdh7D6QJk4Af4eMU/nce57o/IHPb+B23b97kakK9eXhnk/v37OV/cgjp8+xgAogwzw4EvPZVS1iC/Zuc5vJxcjG/28dIljuPODGKvAzdHYOeTXpPEY/7XAQd9t4jnUmpZgwwZkTk8LUvxCWcGUaaGAYOGq/h6pXlBYJDMUssapPOoh4OcQICgafgTNq/jjyY/rtO+BQ52cxe/eYzc0kYHZpHDTaq4XFysQ56dp2IpVKx6rTe26HtIA5eIYNADvduBQhkWkMwRMShRwYD4jk2bNpVc1iC3CBwR4MgDjD589PFfEapgVVTgiBAOjEpm+s1j2EVhdDKATu019DUG7MdLaVvgiBAtjDhu0GsKQZegzPcA42KpTJN72SMdUi/PuBy33lv5Eh/o+gbBr8eMaB3W1XgXZBhADGBY+xiXPcB3iHThePBDK5c6OB0a9ZNgnILBTRdpVrhFhJE+AgejYHBTReDgFhFG+ggcjILBTRWBg1tEGOkjcDAKBjdVBA5uEWGkj8DBKBjcVBE4uEWEkT4CB6NgcFNF4OAWEUb6CByMgsFNFYGDW0QY6SNwMAoGN1UEDm4RYaSPwMEoGNxUETi4RYSRPgIHo2BwU0Xg4BYRRvoIHIyCwU0VgYNbRBjpI3AwCgY3VQQObhFhpI/AwSgY3FQROLhFhJE+AgejYHBTReDgFhFG+gR+VpaRrqJKjB7AB7878fUSFyoqKj7Bz5d2UFWSOWJ0eCmJBhj0UxEf4yfb2vALoObvzwkcpRTBZHSdBEA+paoEjmQcXlK1oImZTwrTryZ0lpTmomxiHqAf47mQWG1SUUl4QDGRod4pNO4qCa1FySQ80GUxYWRo2IKd2ai1VZqYJHzPsw4r9q3EghrK/h8bdfv7WZPoogAAAABJRU5ErkJggg=="},2198:function(e,t,n){},2199:function(e,t,n){},2209:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"SET_VISUALIZATION",(function(){return H})),n.d(r,"CLEAR_VISUALIZATION",(function(){return z})),n.d(r,"DEFAULT_VISUALIZATION",(function(){return W})),n.d(r,"default",(function(){return X})),n.d(r,"sGetVisualization",(function(){return q})),n.d(r,"sGetInterpretations",(function(){return Q}));var a={};n.r(a),n.d(a,"SET_UI",(function(){return Re})),n.d(a,"SET_UI_FROM_VISUALIZATION",(function(){return Ce})),n.d(a,"SET_UI_TYPE",(function(){return Le})),n.d(a,"SET_UI_OPTIONS",(function(){return ke})),n.d(a,"SET_UI_LAYOUT",(function(){return Ue})),n.d(a,"ADD_UI_LAYOUT_DIMENSIONS",(function(){return Me})),n.d(a,"REMOVE_UI_LAYOUT_DIMENSIONS",(function(){return Ve})),n.d(a,"SET_UI_ITEMS",(function(){return Be})),n.d(a,"ADD_UI_ITEMS",(function(){return Ye})),n.d(a,"REMOVE_UI_ITEMS",(function(){return Ge})),n.d(a,"SET_UI_PARENT_GRAPH_MAP",(function(){return Fe})),n.d(a,"ADD_UI_PARENT_GRAPH_MAP",(function(){return He})),n.d(a,"SET_UI_ACTIVE_MODAL_DIALOG",(function(){return ze})),n.d(a,"SET_UI_YEAR_ON_YEAR_SERIES",(function(){return We})),n.d(a,"SET_UI_YEAR_ON_YEAR_CATEGORY",(function(){return Xe})),n.d(a,"CLEAR_UI",(function(){return qe})),n.d(a,"TOGGLE_UI_RIGHT_SIDEBAR_OPEN",(function(){return Qe})),n.d(a,"SET_UI_RIGHT_SIDEBAR_OPEN",(function(){return Ke})),n.d(a,"SET_UI_INTERPRETATION",(function(){return Ze})),n.d(a,"CLEAR_UI_INTERPRETATION",(function(){return Je})),n.d(a,"SET_AXES",(function(){return $e})),n.d(a,"DEFAULT_UI",(function(){return et})),n.d(a,"default",(function(){return tt})),n.d(a,"sGetUi",(function(){return nt})),n.d(a,"sGetUiType",(function(){return rt})),n.d(a,"sGetUiOptions",(function(){return at})),n.d(a,"sGetUiLayout",(function(){return it})),n.d(a,"sGetUiItems",(function(){return ot})),n.d(a,"sGetUiYearOverYearSeries",(function(){return ct})),n.d(a,"sGetUiYearOverYearCategory",(function(){return st})),n.d(a,"sGetUiParentGraphMap",(function(){return lt})),n.d(a,"sGetUiActiveModalDialog",(function(){return ut})),n.d(a,"sGetUiRightSidebarOpen",(function(){return pt})),n.d(a,"sGetUiInterpretation",(function(){return dt})),n.d(a,"sGetAxes",(function(){return mt})),n.d(a,"getAxisIdByDimensionId",(function(){return ft})),n.d(a,"sGetUiItemsByDimension",(function(){return bt})),n.d(a,"sGetDimensionIdsFromLayout",(function(){return ht})),n.d(a,"sGetAxisSetup",(function(){return Ot}));var i={};n.r(i),n.d(i,"SET_CURRENT",(function(){return Rt})),n.d(i,"SET_CURRENT_FROM_UI",(function(){return Ct})),n.d(i,"CLEAR_CURRENT",(function(){return Lt})),n.d(i,"DEFAULT_CURRENT",(function(){return kt})),n.d(i,"default",(function(){return Mt})),n.d(i,"sGetCurrent",(function(){return Vt})),n.d(i,"sGetCurrentFromUi",(function(){return Bt}));var o={};n.r(o),n.d(o,"SET_DIMENSIONS",(function(){return Ft})),n.d(o,"SET_SELECTED_DIMENSION",(function(){return Ht})),n.d(o,"default",(function(){return zt})),n.d(o,"sGetDimensions",(function(){return Wt}));var c={};n.r(c),n.d(c,"SET_RECOMMENDED_IDS",(function(){return Xt})),n.d(c,"DEFAULT_RECOMMENDED_IDS",(function(){return qt})),n.d(c,"default",(function(){return Qt})),n.d(c,"sGetRecommendedIds",(function(){return Kt}));var s={};n.r(s),n.d(s,"SET_SETTINGS",(function(){return rn})),n.d(s,"ADD_SETTINGS",(function(){return an})),n.d(s,"DEFAULT_SETTINGS",(function(){return on})),n.d(s,"default",(function(){return cn})),n.d(s,"sGetSettings",(function(){return sn})),n.d(s,"sGetSettingsDisplayNameProperty",(function(){return ln})),n.d(s,"sGetRootOrgUnit",(function(){return un})),n.d(s,"sGetRelativePeriod",(function(){return pn})),n.d(s,"sGetUiLocale",(function(){return dn}));var l={};n.r(l),n.d(l,"acSetVisualization",(function(){return Ln})),n.d(l,"acClear",(function(){return kn}));var u={};n.r(u),n.d(u,"acSetCurrent",(function(){return Un})),n.d(u,"acClear",(function(){return Mn})),n.d(u,"acSetCurrentFromUi",(function(){return Vn})),n.d(u,"tSetCurrentFromUi",(function(){return Bn}));var p={};n.r(p),n.d(p,"acSetDimensions",(function(){return Wn})),n.d(p,"tSetDimensions",(function(){return Xn}));var d={};n.r(d),n.d(d,"acSetUi",(function(){return qn})),n.d(d,"acClear",(function(){return Qn})),n.d(d,"acSetUiFromVisualization",(function(){return Kn})),n.d(d,"acSetUiType",(function(){return Zn})),n.d(d,"acSetUiOptions",(function(){return Jn})),n.d(d,"acSetUiLayout",(function(){return $n})),n.d(d,"acAddUiLayoutDimensions",(function(){return er})),n.d(d,"acRemoveUiLayoutDimensions",(function(){return tr})),n.d(d,"acSetUiItems",(function(){return nr})),n.d(d,"acAddUiItems",(function(){return rr})),n.d(d,"acRemoveUiItems",(function(){return ar})),n.d(d,"acSetUiYearOverYearSeries",(function(){return ir})),n.d(d,"acSetUiYearOverYearCategory",(function(){return or})),n.d(d,"acAddParentGraphMap",(function(){return cr})),n.d(d,"acSetParentGraphMap",(function(){return sr})),n.d(d,"acSetUiActiveModalDialog",(function(){return lr})),n.d(d,"acToggleUiRightSidebarOpen",(function(){return ur})),n.d(d,"acSetUiRightSidebarOpen",(function(){return pr})),n.d(d,"acSetUiInterpretation",(function(){return dr})),n.d(d,"acClearUiInterpretation",(function(){return mr})),n.d(d,"acSetAxes",(function(){return fr}));var m={};n.r(m),n.d(m,"acAddMetadata",(function(){return br}));var f={};n.r(f),n.d(f,"acSetSettings",(function(){return gr})),n.d(f,"acAddSettings",(function(){return Er})),n.d(f,"tAddSettings",(function(){return vr}));var b={};n.r(b),n.d(b,"acReceivedUser",(function(){return Ir}));var h={};n.r(h),n.d(h,"acReceivedSnackbarMessage",(function(){return Sr})),n.d(h,"acCloseSnackbar",(function(){return Dr}));var O=n(0),y=n.n(O),g=n(203),E=n(187),v=n(16),I=n(444),j=n(21),S=n(13),D=n.n(S),x=n(18),w=n(15),A=n(271),_=["keyDateFormat","keyAnalysisRelativePeriod","keyAnalysisDigitGroupSeparator"],T=function(e){return{displayNameProperty:"name"===e.keyAnalysisDisplayProperty?"displayName":"displayShortName",uiLocale:e.keyUiLocale}},P=function(e){return console.log("Error: ",e)},N=function(){var e="".concat("/organisationUnits","?paging=false&userDataViewFallback=true&fields=").concat(["id","displayName","name"].join(","));return Object(A.getInstance)().then((function(t){return t.Api.getApi().get(e)})).then((function(e){return e.organisationUnits[0]})).catch(P)},R=function(){var e="".concat("/organisationUnitLevels","?paging=false&fields=").concat(["id","name","displayName","level"].join(","));return Object(A.getInstance)().then((function(t){return t.Api.getApi().get(e)})).then((function(e){return e.organisationUnitLevels})).catch(P)},C=n(2205),L=Object(C.a)();function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(){var e=Object(x.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.config.i18n.sources.add("./i18n_old/i18n_module_en.properties");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(D.a.mark((function e(t,n){var r,a,i,o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.baseUrl,a=t.apiVersion,e.next=3,Object(A.init)(U({},n,{baseUrl:"".concat(r,"/api/").concat(a)}));case 3:return i=e.sent,e.t0=T,e.next=7,Object(A.getUserSettings)();case 7:return e.t1=e.sent,o=(0,e.t0)(e.t1),e.next=11,M(o);case 11:return e.next=13,R();case 13:return c=e.sent,e.abrupt("return",{location:L.location,baseUrl:r,d2:i,userSettings:o,ouLevels:c});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){var t=e.children,n=Object(I.a)(e,["children"]),r=Object(w.b)(),a=Object(O.useState)(null),i=Object(v.a)(a,2),o=i[0],c=i[1];return Object(O.useEffect)((function(){V(r,n).then(c)}),[]),o?t(o):y.a.createElement("div",null,"...")},Y=n(303),G=n(377),F=(n(590),n(591)),H="SET_VISUALIZATION",z="CLEAR_VISUALIZATION",W=null,X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return t.value;case z:return W;default:return e}},q=function(e){return e.visualization},Q=function(e){return e.visualization?e.visualization.interpretations:[]},K=n(211),Z=n(575);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee={baseLineLabel:{defaultValue:void 0,requestable:!1},baseLineValue:{defaultValue:void 0,requestable:!1},cumulativeValues:{defaultValue:!1,requestable:!1},domainAxisLabel:{defaultValue:void 0,requestable:!1},hideEmptyRowItems:{defaultValue:"NONE",requestable:!1},hideLegend:{defaultValue:!1,requestable:!1},noSpaceBetweenColumns:{defaultValue:!1,requestable:!1},percentStackedValues:{defaultValue:!1,requestable:!1},rangeAxisDecimals:{defaultValue:void 0,requestable:!1},rangeAxisLabel:{defaultValue:void 0,requestable:!1},rangeAxisMaxValue:{defaultValue:void 0,requestable:!1},rangeAxisMinValue:{defaultValue:void 0,requestable:!1},rangeAxisSteps:{defaultValue:void 0,requestable:!1},regressionType:{defaultValue:"NONE",requestable:!1},showData:{defaultValue:!0,requestable:!1},targetLineLabel:{defaultValue:void 0,requestable:!1},targetLineValue:{defaultValue:void 0,requestable:!1},aggregationType:{defaultValue:"DEFAULT",requestable:!0},completedOnly:{defaultValue:!1,requestable:!0},hideSubtitle:{defaultValue:!1,requestable:!1},hideTitle:{defaultValue:!1,requestable:!1},sortOrder:{defaultValue:0,requestable:!1},subtitle:{defaultValue:void 0,requestable:!1},title:{defaultValue:void 0,requestable:!1}},te={baseLine:{defaultValue:!1,requestable:!1},targetLine:{defaultValue:!1,requestable:!1}},ne=ee,re=function(){return Object.entries($({},ee,{},te)).reduce((function(e,t){var n=Object(v.a)(t,2),r=n[0],a=n[1];return e[r]=a.defaultValue,e}),{})},ae=function(e,t){return Boolean(e[t]&&e[t]!==ee[t].defaultValue)},ie=function(e){var t=$({},re(),{},Object(Z.a)(e,Object.keys(ee)));return t.baseLine=ae(t,"baseLineLabel")||ae(t,"baseLineValue"),t.targetLine=ae(t,"targetLineLabel")||ae(t,"targetLineValue"),t},oe=n(5),ce=n.n(oe),se="dimensions",le=[{axisId:K.AXIS_ID_COLUMNS,name:ce.a.t("Add to series")},{axisId:K.AXIS_ID_ROWS,name:ce.a.t("Add to category")},{axisId:K.AXIS_ID_FILTERS,name:ce.a.t("Add to filter")}],ue={columns:ce.a.t("series"),rows:ce.a.t("category"),filters:ce.a.t("filter")},pe=function(e,t){var n,r=Array.isArray(t)?t:[t];return n={},Object(j.a)(n,K.AXIS_ID_COLUMNS,e[K.AXIS_ID_COLUMNS].filter((function(e){return!r.includes(e)}))),Object(j.a)(n,K.AXIS_ID_ROWS,e[K.AXIS_ID_ROWS].filter((function(e){return!r.includes(e)}))),Object(j.a)(n,K.AXIS_ID_FILTERS,e[K.AXIS_ID_FILTERS].filter((function(e){return!r.includes(e)}))),n},de=function(e){var t=Object.entries(e),n={};return t.forEach((function(e){var t=Object(v.a)(e,2),r=t[0];t[1].forEach((function(e){n[e]=r}))})),n},me=function(e,t){var n=de(e),r=Object.keys(t),a={};return r.forEach((function(r){var i=n[r],o=t[r],c=e[o][0];i&&o!==K.AXIS_ID_FILTERS&&c&&(a[c]=i)})),a};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he,Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return be(Object(j.a)({},"name",e),t)},ye={reportTable:[Oe("cumulative",{option:!0}),Oe("hideEmptyColumns",{option:!0}),Oe("legendDisplayStyle",{option:!0}),Oe("measureCriteria",{option:!0}),Oe("numberType",{option:!0}),Oe("regression",{option:!0}),Oe("reportParams",{option:!0}),Oe("skipRounding",{option:!0})],chart:[Oe("category",{excluded:!0}),Oe("series",{excluded:!0}),Oe("yearlySeries")],eventReport:[Oe("dataType")],reportTable_eventReport:[Oe("colSubTotals",{option:!0}),Oe("colTotals",{option:!0}),Oe("displayDensity",{option:!0}),Oe("fontSize",{option:!0}),Oe("hideEmptyRows",{option:!0}),Oe("rowSubTotals",{option:!0}),Oe("rowTotals",{option:!0}),Oe("showDimensionLabels",{option:!0}),Oe("showHierarchy",{option:!0})],chart_eventChart:[Oe("baseLineLabel",{option:!0}),Oe("baseLineValue",{option:!0}),Oe("colorSet",{option:!0}),Oe("cumulativeValues",{option:!0}),Oe("domainAxisLabel",{option:!0}),Oe("hideEmptyRowItems",{option:!0}),Oe("hideLegend",{option:!0}),Oe("noSpaceBetweenColumns",{option:!0}),Oe("percentStackedValues",{option:!0}),Oe("rangeAxisDecimals",{option:!0}),Oe("rangeAxisLabel",{option:!0}),Oe("rangeAxisMaxValue",{option:!0}),Oe("rangeAxisMinValue",{option:!0}),Oe("rangeAxisSteps",{option:!0}),Oe("regressionType",{option:!0}),Oe("seriesItems"),Oe("showData",{option:!0}),Oe("targetLineLabel",{option:!0}),Oe("targetLineValue",{option:!0}),Oe("type",{option:!0})],eventReport_eventChart:[Oe("attributeValueDimension"),Oe("collapseDataDimensions"),Oe("dataElementValueDimension"),Oe("endDate"),Oe("eventStatus",{option:!0}),Oe("hideNaData",{option:!0}),Oe("outputType",{option:!0}),Oe("program"),Oe("programStage"),Oe("programStatus",{option:!0}),Oe("startDate"),Oe("value")],reportTable_chart_eventReport:[Oe("legendDisplayStrategy",{option:!0}),Oe("legendSet",{option:!0})],reportTable_eventReport_eventChart:[Oe("columnDimensions",{excluded:!0}),Oe("rowDimensions",{excluded:!0})],reportTable_chart_eventReport_eventChart:[Oe("access"),Oe("aggregationType",{option:!0}),Oe("attributeDimensions",{excluded:!0}),Oe("attributeValues",{excluded:!0}),Oe("categoryDimensions",{excluded:!0}),Oe("categoryOptionGroupSetDimensions",{excluded:!0}),Oe("code",{excluded:!0}),Oe("columns"),Oe("completedOnly",{option:!0}),Oe("created"),Oe("dataDimensionItems",{excluded:!0}),Oe("dataElementDimensions",{excluded:!0}),Oe("dataElementGroupSetDimensions",{excluded:!0}),Oe("description"),Oe("digitGroupSeparator"),Oe("displayDescription"),Oe("displayName"),Oe("displayShortName"),Oe("externalAccess",{excluded:!0}),Oe("favorite"),Oe("favorites"),Oe("filterDimensions",{excluded:!0}),Oe("filters"),Oe("hideSubtitle",{option:!0}),Oe("hideTitle",{option:!0}),Oe("href",{excluded:!0}),Oe("id"),Oe("interpretations"),Oe("itemOrganisationUnitGroups",{excluded:!0}),Oe("lastUpdated"),Oe("lastUpdatedBy"),Oe("name"),Oe("organisationUnitGroupSetDimensions",{excluded:!0}),Oe("organisationUnitLevels",{excluded:!0}),Oe("organisationUnits",{excluded:!0}),Oe("parentGraphMap"),Oe("periods",{excluded:!0}),Oe("programIndicatorDimensions",{excluded:!0}),Oe("publicAccess"),Oe("relativePeriods",{excluded:!0}),Oe("rows"),Oe("shortName"),Oe("sortOrder",{option:!0}),Oe("subscribed"),Oe("subscribers"),Oe("subtitle",{option:!0}),Oe("timeField"),Oe("title",{option:!0}),Oe("topLimit",{option:!0}),Oe("translations"),Oe("user"),Oe("userAccesses"),Oe("userGroupAccesses"),Oe("userOrganisationUnit",{excluded:!0}),Oe("userOrganisationUnitChildren",{excluded:!0}),Oe("userOrganisationUnitGrandChildren",{excluded:!0})]},ge=function(e){return e.name},Ee=function(e){return!0===e.excluded?be({},e,Object(j.a)({},"name","!".concat(e.name))):e},ve=function(e,t,n,r){return!e&&(e=r.slice()),"!"===t.charAt(0)&&e.push(e.shift()),e},Ie=function(e){return Object.entries(ye).reduce((function(t,n){var r=Object(v.a)(n,2),a=r[0],i=r[1];return a.includes(e)?t.concat(i):t}),[])},je=function(e){var t,n=e[K.AXIS_ID_COLUMNS].slice(),r=e[K.AXIS_ID_ROWS].slice();return t={},Object(j.a)(t,K.AXIS_ID_COLUMNS,[n.shift()||r.shift()]),Object(j.a)(t,K.AXIS_ID_ROWS,[]),Object(j.a)(t,K.AXIS_ID_FILTERS,[].concat(Object(Y.a)(e[K.AXIS_ID_FILTERS]),Object(Y.a)(n),Object(Y.a)(r))),t},Se=function(e){var t;return t={},Object(j.a)(t,K.AXIS_ID_COLUMNS,[]),Object(j.a)(t,K.AXIS_ID_ROWS,[]),Object(j.a)(t,K.AXIS_ID_FILTERS,[].concat(Object(Y.a)(e[K.AXIS_ID_FILTERS]),Object(Y.a)(e[K.AXIS_ID_COLUMNS]),Object(Y.a)(e[K.AXIS_ID_ROWS])).filter((function(e){return e!==K.DIMENSION_ID_PERIOD}))),t},De=function(e){var t,n=e[K.AXIS_ID_COLUMNS].slice(),r=e[K.AXIS_ID_ROWS].slice();return t={},Object(j.a)(t,K.AXIS_ID_COLUMNS,[K.DIMENSION_ID_DATA]),Object(j.a)(t,K.AXIS_ID_ROWS,[]),Object(j.a)(t,K.AXIS_ID_FILTERS,[].concat(Object(Y.a)(e[K.AXIS_ID_FILTERS]),Object(Y.a)(n),Object(Y.a)(r)).filter((function(e){return e!==K.DIMENSION_ID_DATA}))),t},xe=function(e){return!!K.ouIdHelper.hasLevelPrefix(e)&&Number.isInteger(parseInt(K.ouIdHelper.removePrefix(e),10))},we=function(e,t){var n=Object(K.layoutGetDimension)(t,K.DIMENSION_ID_ORGUNIT);if(n&&Object(K.dimensionGetItems)(n).some((function(e){return xe(e.id)}))){var r=function(e){return function(t){if(!xe(t.id))return t;var n=parseInt(K.ouIdHelper.removePrefix(t.id),10),r=e.find((function(e){return parseInt(e.level,10)===n})).id;return Object.assign({},t,{id:K.ouIdHelper.addLevelPrefix(r)})}}(e),a=Object(K.dimensionGetItems)(n).map(r);return Object(K.layoutReplaceDimension)(t,K.DIMENSION_ID_ORGUNIT,a)}return t},Ae=function(e){return 1===e.match(/\//g).length?e:e.substr(0,e.lastIndexOf("/"))},_e=function(e,t,n){return t[e]&&t[e].path?t[e].path:n[e]===e||""===n[e]?"/".concat(e):n[e]?"/".concat(n[e],"/").concat(e):void 0},Te=n(1595);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re="SET_UI",Ce="SET_UI_FROM_VISUALIZATION",Le="SET_UI_TYPE",ke="SET_UI_OPTIONS",Ue="SET_UI_LAYOUT",Me="ADD_UI_LAYOUT_DIMENSIONS",Ve="REMOVE_UI_LAYOUT_DIMENSIONS",Be="SET_UI_ITEMS",Ye="ADD_UI_ITEMS",Ge="REMOVE_UI_ITEMS",Fe="SET_UI_PARENT_GRAPH_MAP",He="ADD_UI_PARENT_GRAPH_MAP",ze="SET_UI_ACTIVE_MODAL_DIALOG",We="SET_UI_YEAR_ON_YEAR_SERIES",Xe="SET_UI_YEAR_ON_YEAR_CATEGORY",qe="CLEAR_UI",Qe="TOGGLE_UI_RIGHT_SIDEBAR_OPEN",Ke="SET_UI_RIGHT_SIDEBAR_OPEN",Ze="SET_UI_INTERPRETATION",Je="CLEAR_UI_INTERPRETATION",$e="SET_AXES",et={type:K.VIS_TYPE_COLUMN,options:re(),layout:{columns:[K.DIMENSION_ID_DATA],rows:[K.DIMENSION_ID_PERIOD],filters:[K.DIMENSION_ID_ORGUNIT]},itemsByDimension:(he={},Object(j.a)(he,K.DIMENSION_ID_ORGUNIT,[]),Object(j.a)(he,K.DIMENSION_ID_PERIOD,[]),he),yearOverYearSeries:["THIS_YEAR","LAST_YEAR"],yearOverYearCategory:["MONTHS_THIS_YEAR"],parentGraphMap:{},activeModalDialog:null,rightSidebarOpen:!1,interpretation:{},axes:null},tt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Re:return Ne({},n.value);case Ce:return vt(n.value,t);case Le:return Ne({},t,{type:n.value});case ke:return Ne({},t,{options:Ne({},t.options,{},n.value)});case Ue:return Ne({},t,{layout:Ne({},n.value)});case Me:var r=Ne({},n.value,{},me(t.layout,n.value)),a=pe(t.layout,Object.keys(r));return Object.entries(r).forEach((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];[K.AXIS_ID_COLUMNS,K.AXIS_ID_ROWS].includes(r)?a[r]=[n]:a[r].push(n)})),Ne({},t,{layout:a});case Ve:return Ne({},t,{layout:pe(t.layout,n.value)});case Be:var i=n.value,o=i.dimensionId,c=i.itemIds;return Ne({},t,{itemsByDimension:Ne({},t.itemsByDimension,Object(j.a)({},o,c))});case Ye:var s=n.value,l=s.dimensionId,u=s.itemIds,p=t.itemsByDimension[l]||[],d=Object(Y.a)(new Set([].concat(Object(Y.a)(p),Object(Y.a)(u))));return Ne({},t,{itemsByDimension:Ne({},t.itemsByDimension,Object(j.a)({},l,d))});case Ge:var m=n.value,f=m.dimensionId,b=m.itemIdsToRemove,h=(t.itemsByDimension[f]||[]).filter((function(e){return!b.includes(e)}));return Ne({},t,{itemsByDimension:Ne({},t.itemsByDimension,Object(j.a)({},f,h))});case We:return Ne({},t,{yearOverYearSeries:n.value||et.yearOverYearSeries});case Xe:return Ne({},t,{yearOverYearCategory:n.value?Object(Te.a)(n.value):et.yearOverYearCategory});case Fe:return Ne({},t,{parentGraphMap:n.value});case He:return Ne({},t,{parentGraphMap:Ne({},t.parentGraphMap,{},n.value)});case ze:return Ne({},t,{activeModalDialog:n.value||et.activeModalDialog});case qe:var O=n.value,y=O.rootOrganisationUnit,g=O.relativePeriod;return Ne({},et,{itemsByDimension:Ne({},et.itemsByDimension,(e={},Object(j.a)(e,K.DIMENSION_ID_ORGUNIT,[y.id]),Object(j.a)(e,K.DIMENSION_ID_PERIOD,[g]),e)),parentGraphMap:Ne({},et.parentGraphMap,Object(j.a)({},y.id,""))});case Qe:return Ne({},t,{rightSidebarOpen:!t.rightSidebarOpen});case Ke:return Ne({},t,{rightSidebarOpen:!0});case Ze:return Ne({},t,{interpretation:n.value});case Je:return Ne({},t,{interpretation:et.interpretation});case $e:return Ne({},t,{axes:n.value});default:return t}},nt=function(e){return e.ui},rt=function(e){return nt(e).type},at=function(e){return nt(e).options},it=function(e){return nt(e).layout},ot=function(e){return nt(e).itemsByDimension},ct=function(e){return nt(e).yearOverYearSeries},st=function(e){return nt(e).yearOverYearCategory},lt=function(e){return nt(e).parentGraphMap},ut=function(e){return nt(e).activeModalDialog},pt=function(e){return nt(e).rightSidebarOpen},dt=function(e){return nt(e).interpretation},mt=function(e){return nt(e).axes},ft=function(e,t){return(de(it(e))||{})[t]},bt=function(e,t){return ot(e)[t]||et.itemsByDimension[t]},ht=function(e){return Object.values(it(e)).reduce((function(e,t){return e.concat(t)}),[])},Ot=function(e){var t=it(e).columns,n=ot(e),r=mt(e)||{};return Array.isArray(n[t[0]])&&n[t[0]].length?n[t[0]].map((function(e){return{id:e,axis:e in r?r[e]:0}})):[]},yt=function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return"number"===typeof e.axis})).reduce((function(e,t){return e[t.series]=t.axis,e}),{}):et.axes};function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Et({},t,{type:e.type||K.defaultVisType,options:ie(e),layout:Object(K.layoutGetAxisIdDimensionIdsObject)(e),itemsByDimension:Object(K.layoutGetDimensionIdItemIdsObject)(e),parentGraphMap:e.parentGraphMap||jt(e)||t.parentGraphMap,yearOverYearSeries:Object(K.isYearOverYear)(e.type)&&e.yearlySeries?e.yearlySeries:t.yearOverYearSeries,yearOverYearCategory:Object(K.isYearOverYear)(e.type)?e.rows[0].items.map((function(e){return e.id})):t.yearOverYearCategory,axes:yt(e.seriesItems)})},It=function(e){switch(e.type){case K.VIS_TYPE_YEAR_OVER_YEAR_LINE:case K.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return function(e){var t=Object.assign({},e),n=Object.assign({},t.itemsByDimension);return delete n[K.DIMENSION_ID_PERIOD],Et({},t,{layout:Se(e.layout),itemsByDimension:n})}(e);case K.VIS_TYPE_PIE:case K.VIS_TYPE_GAUGE:return function(e){return Et({},e,{layout:je(e.layout)})}(e);case K.VIS_TYPE_SINGLE_VALUE:return function(e){return Et({},e,{layout:De(e.layout)})}(e);default:return e}},jt=function(e){var t=Object(K.layoutGetAxisIdDimensionIdsObject)(e),n=de(t)[K.DIMENSION_ID_ORGUNIT];if(!n)return{};var r={};return e[n].find((function(e){return e.dimension===K.DIMENSION_ID_ORGUNIT})).items.filter((function(e){return e.path})).forEach((function(e){if("/"+e.id===e.path)r[e.id]="";else{var t=Ae(e.path);r[e.id]="/"===t[0]?t.substr(1):t}})),r};function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt=function(e){return Object.entries(e.layout).reduce((function(t,n){var r=Object(v.a)(n,2),a=r[0],i=r[1];return Dt({},t,Object(j.a)({},a,i.map((function(t){return n=e.itemsByDimension,r=t,n.hasOwnProperty(r)&&Array.isArray(n[r])&&n[r].length?Object(K.dimensionCreate)(t,e.itemsByDimension[t]):null;var n,r})).filter((function(e){return null!==e}))))}),{})},wt=function(e){var t=Object(Z.a)(e.options,Object.keys(ne));return!1===e.options.targetLine&&(t.targetLineLabel=ne.targetLineLabel.defaultValue,t.targetLineValue=ne.targetLineValue.defaultValue),!1===e.options.baseLine&&(t.baseLineLabel=ne.baseLineLabel.defaultValue,t.baseLineValue=ne.baseLineValue.defaultValue),t},At=function(e){var t,n,r,a={};return t=a,n=e.axes,r="axis",Object.keys(n||{}).forEach((function(e){e in t||(t[e]={}),t[e][r]=n[e]})),Object.entries(a).reduce((function(e,t){var n=Object(v.a)(t,2),r=n[0],a=n[1];return a.series=r,e.push(a),e}),[])},_t=function(e,t){var n=Dt({},t.value,{layout:Dt({},De(t.value.layout))}),r=xt(n),a=Object(K.layoutGetDimensionItems)(r,K.DIMENSION_ID_DATA),i=Object(K.layoutReplaceDimension)(r,K.DIMENSION_ID_DATA,[a[0]]);return Dt({},e,Object(j.a)({},"type",n.type),i,{},wt(n))},Tt=function(e,t){var n=Dt({},t.value,{layout:Dt({},je(t.value.layout))});return Dt({},e,Object(j.a)({},"type",n.type),xt(n),{},wt(n))},Pt=function(e,t){var n,r=t.value,a=r.itemsByDimension[K.DIMENSION_ID_DATA]?[r.itemsByDimension[K.DIMENSION_ID_DATA][0]]:[];return Dt({},e,(n={},Object(j.a)(n,"type",r.type),Object(j.a)(n,K.AXIS_ID_COLUMNS,[Object(K.dimensionCreate)(K.DIMENSION_ID_DATA,a)]),Object(j.a)(n,K.AXIS_ID_ROWS,[Object(K.dimensionCreate)(K.DIMENSION_ID_PERIOD,r.yearOverYearCategory)]),Object(j.a)(n,K.AXIS_ID_FILTERS,xt(r).filters.filter((function(e){return![K.DIMENSION_ID_DATA,K.DIMENSION_ID_PERIOD].includes(e.dimension)}))),Object(j.a)(n,["yearlySeries"],r.yearOverYearSeries),n),wt(r))};function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rt="SET_CURRENT",Ct="SET_CURRENT_FROM_UI",Lt="CLEAR_CURRENT",kt=null,Ut=function(e,t){var n=xt(t.value),r=wt(t.value),a=At(t.value);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(j.a)({},"type",t.value.type),n,{},r,{seriesItems:a})},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rt:return t.value;case Ct:switch(t.value.type){case K.VIS_TYPE_PIE:case K.VIS_TYPE_GAUGE:return Tt(e,t);case K.VIS_TYPE_SINGLE_VALUE:return _t(e,t);case K.VIS_TYPE_YEAR_OVER_YEAR_LINE:case K.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return Pt(e,t);default:return Ut(e,t)}case Lt:return kt;default:return e}},Vt=function(e){return e.current},Bt=function(e){var t=e.ui;switch(t.type){case K.VIS_TYPE_PIE:case K.VIS_TYPE_GAUGE:return Tt(e,{value:t});case K.VIS_TYPE_SINGLE_VALUE:return _t(e,{value:t});case K.VIS_TYPE_YEAR_OVER_YEAR_LINE:case K.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return Pt(e,{value:t});default:return Ut(e,{value:t})}};function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft="SET_DIMENSIONS",Ht="SET_SELECTED_DIMENSION",zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.FIXED_DIMENSIONS,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:return Gt({},K.FIXED_DIMENSIONS,{},t.value);default:return e}},Wt=function(e){return e.dimensions},Xt="SET_RECOMMENDED_IDS",qt=[],Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xt:return t.value||qt;default:return e}},Kt=function(e){return e.recommendedIds};function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $t={},en=function(e){return e.metadata};function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rn="SET_SETTINGS",an="ADD_SETTINGS",on={keyDateFormat:"yyyy-MM-dd",keyAnalysisRelativePeriod:"LAST_12_MONTHS",keyAnalysisDigitGroupSeparator:"SPACE",displayNameProperty:"displayName",uiLocale:"en",rootOrganisationUnit:{}},cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rn:return Object.assign({},t.value);case an:return nn({},e,{},t.value);default:return e}},sn=function(e){return e.settings},ln=function(e){return sn(e).displayNameProperty},un=function(e){return sn(e).rootOrganisationUnit},pn=function(e){return sn(e).keyAnalysisRelativePeriod},dn=function(e){return sn(e).uiLocale},mn={id:"",username:"",uiLocale:"",isSuperuser:!1};function fn(e){return{id:e.id,username:e.username,uiLocale:e.settings.keyUiLocale,isSuperuser:e.authorities.has("ALL")}}var bn=n(793),hn=n.n(bn),On=n(794),yn=n.n(On),gn=n(394),En=n.n(gn),vn=n(344),In=n.n(vn),jn="name,displayName,displayShortName",Sn="dimensionItem~rename(".concat("id",")"),Dn="legendSet[".concat("id",",").concat(jn,"]"),xn="user[".concat(jn,",userCredentials[username]]"),wn="items[".concat(Sn,",").concat(jn,",dimensionItemType]"),An="comments[".concat("id",",").concat(xn,",lastUpdated,text"),_n="dimension,filter,".concat(Dn,",").concat(wn),Tn={columns:_n,rows:_n,filters:_n,user:xn,comments:An,interpretations:"id,created"},Pn=function(e){return"".concat(e).concat(Tn[e]?"[".concat(Tn[e],"]"):"")},Nn=function(e){return Ie(e).map(Ee).map(ge).sort().reduce(ve,null).map(Pn).join(",")},Rn=function(e,t){return Object(A.getInstance)().then((function(n){return n.models[e].get(t,{fields:Nn(e)})}))},Cn=function(e,t){return Object(A.getInstance)().then((function(t){return t.models[e]})).then((function(e){var n=e.api,r=e.apiEndpoint,a="?"+Object.entries({skipTranslations:!0,skipSharing:!0}).reduce((function(e,t){var n=Object(v.a)(t,2),r=n[0],a=n[1];return e.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(a))),e}),[]).join("&");return t.id?n.update("".concat(r,"/").concat(t.id).concat(a),t,!1):n.post("".concat(r).concat(a),t)}))},Ln=function(e){return{type:H,value:e}},kn=function(){return{type:z}},Un=function(e){return{type:Rt,value:e}},Mn=function(){return{type:Lt}},Vn=function(e){return{type:Ct,value:e}},Bn=function(){return function(){var e=Object(x.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Vn(nt(n())));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Yn=n(2204),Gn=n(2202),Fn=function(e,t,n){return"function"===typeof n?n(e):e[t]},Hn=function(e){var t="fields=id,".concat(e,"~rename(name),dimensionType"),n="order=".concat(e,":asc");return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.selectorFn,a="/".concat(e,"?").concat(t,"&paging=false");return Object(A.getInstance)().then((function(e){return e.Api.getApi().get(a)})).then((function(t){return Fn(t,e,r)})).catch(P)}("dimensions","".concat(t,"&").concat(n))},zn=function(e,t){var n="dimension=";if(e.length)n=n.concat("dx:".concat(e.join(";"))),t.length&&(n=n.concat("&dimension=ou:".concat(t.join(";"))));else{if(!t.length)return Promise.resolve([]);n=n.concat("ou:".concat(t.join(";")))}var r="/dimensions/recommendations?".concat(n,"&fields=id");return Object(A.getInstance)().then((function(e){return e.Api.getApi().get(r)})).then((function(e){return e.dimensions.map((function(e){return e.id}))})).catch(P)},Wn=function(e){return{type:Ft,value:Object(Yn.a)(Object(Gn.a)(e,[function(e){return e.name.toLowerCase()}]),"id")}},Xn=function(){return function(){var e=Object(x.a)(D.a.mark((function e(t,n){var r,a,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){t(Wn(e))},a=function(e){return console.log("Error (apiFetchDimensions): ",e),e},e.prev=2,i=ln(n()),e.next=6,Hn(i);case 6:return o=e.sent,e.abrupt("return",r(o));case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",a(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()},qn=function(e){return{type:Re,value:e}},Qn=function(e){return{type:qe,value:e}},Kn=function(e){return{type:Ce,value:e}},Zn=function(e){return{type:Le,value:e}},Jn=function(e){return{type:ke,value:e}},$n=function(e){return{type:Ue,value:e}},er=function(e){return{type:Me,value:e}},tr=function(e){return{type:Ve,value:e}},nr=function(e){return{type:Be,value:e}},rr=function(e){return{type:Ye,value:e}},ar=function(e){return{type:Ge,value:e}},ir=function(e){return{type:We,value:e}},or=function(e){return{type:Xe,value:e}},cr=function(e){return{type:He,value:e}},sr=function(e){return{type:Fe,value:e}},lr=function(e){return{type:ze,value:e}},ur=function(){return{type:Qe}},pr=function(){return{type:Ke}},dr=function(e){return{type:Ze,value:e}},mr=function(){return{type:Je}},fr=function(e){return{type:$e,value:e}},br=function(e){return{type:"ADD_METADATA",value:e}},hr=function(){var e="".concat("/systemSettings","?").concat(_.map((function(e){return"key=".concat(e)})).join("&"));return Object(A.getInstance)().then((function(t){return t.Api.getApi().get(e)})).catch(P)};function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gr=function(e){return{type:rn,value:e}},Er=function(e){return{type:an,value:e}},vr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){var e=Object(x.a)(D.a.mark((function e(n){var r,a,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){n(Er(Object.assign.apply(Object,[{},e].concat(t))))},a=function(e){return console.log("Error (apiFetchSystemSettings): ",e),e},e.prev=2,e.next=5,hr();case 5:return i=e.sent,e.next=8,N();case 8:return o=e.sent,e.abrupt("return",r(yr({},i,{rootOrganisationUnit:o})));case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",a(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},Ir=function(e){return{type:"RECEIVED_USER",value:e}},jr=function(e){return e.chart},Sr=function(e){return{type:Yr,value:e}},Dr=function(){return{type:Gr}};function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ar={isLoading:!1,loadingError:null},_r=function(e){return e.loader.loadingError},Tr=function(e){return{type:"SET_LOAD_ERROR",value:e}},Pr=function(){return{type:"CLEAR_LOAD_ERROR"}};function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cr=function(e,t){return console.log("Error in action ".concat(e,": ").concat(t)),t},Lr=function(e){var t=e.type,n=e.id,r=e.interpretationId,a=e.ouLevels;return function(){var e=Object(x.a)(D.a.mark((function e(i,o){var c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){var e=Object(x.a)(D.a.mark((function e(t){var n,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=we(a,t.toJSON()),r&&(o=n.interpretations.find((function(e){return e.id===r})))&&(i(dr(o)),i(pr())),i(Ln(n)),i(Un(n)),i(Kn(n)),i({type:"CLEAR_LOAD_ERROR"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=1,e.t0=c,e.next=5,Rn(t,n);case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.prev=9,e.t2=e.catch(1),kr(i,o,e.t2),e.abrupt("return",Cr("tDoLoadVisualization",e.t2));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},kr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(n?Tr(n):{type:"CLEAR_LOAD_ERROR"}),e(kn()),e(Mn());var r=un(t()),a=pn(t());e(Qn({rootOrganisationUnit:r,relativePeriod:a}))},Ur=n(1),Mr=Object(g.connect)((function(e){var t=Hr(e),n=t.variant,r=t.message,a=t.duration;return{variant:n,open:t.open,message:r,duration:a}}),(function(e){return{onClose:function(){return e((function(e,t){e(Sr({open:!1})),setTimeout((function(){return e(Dr())}),250)}))}}}))(Object(E.withStyles)((function(e){return{container:{display:"flex",alignItems:"center"},icon:{marginRight:8},closeIcon:{marginLeft:8,width:18,height:18,cursor:"pointer"},warning:{backgroundColor:Ur.a.yellow500,color:Ur.a.black},error:{backgroundColor:Ur.a.red500,color:Ur.a.white}}}))((function(e){var t=e.classes,n=e.variant,r=e.open,a=e.message,i=e.duration,o=e.onClose;return y.a.createElement(hn.a,{open:r,autoHideDuration:i,onClose:o},y.a.createElement(yn.a,{className:t[n],message:y.a.createElement("span",{className:t.container},"error"===n?y.a.createElement(En.a,{className:t.icon}):null,a,"warning"===n?y.a.createElement(In.a,{className:t.closeIcon,onClick:o}):null)}))})));function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yr="RECEIVED_SNACKBAR_MESSAGE",Gr="CLOSE_SNACKBAR",Fr={message:null,duration:null,open:!1,variant:"information"},Hr=function(e){return e.snackbar};function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Wr=Object(G.c)({visualization:X,current:Mt,dimensions:zt,recommendedIds:Qt,ui:tt,metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_METADATA":return Jt({},e,{},t.value);default:return e}},settings:cn,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_USER":return fn(t.value);default:return e}},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yr:return Br({},e,{},t.value);case Gr:return Fr;default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOAD_ERROR":return wr({},e,{loadingError:t.value});case"CLEAR_LOAD_ERROR":return wr({},e,{loadingError:Ar.loadingError});case"SET_LOADING":return wr({},e,{isLoading:t.value});default:return e}},chart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHART":return t.value;default:return e}}}),Xr=function(e){return Ot(e).map((function(t){var n=en(e)[t.id];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{name:n?n.name:""})}))},qr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[F.default].concat(t),a="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"data-visualizer-app"}):G.d;return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Object(G.e)(Wr,a(G.a.apply(void 0,Object(Y.a)(r))))},Qr=n(8),Kr=n(10),Zr=n(12),Jr=n(9),$r=n(7),ea=n(11),ta=n(528),na=n(2),ra=n.n(na),aa=Ur.a.grey050,ia=Ur.a.grey500,oa=Ur.a.black,ca=Ur.a.grey700,sa={mask:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"auto",overflowY:"auto",color:oa,backgroundColor:aa,display:"flex",minWidth:640,minHeight:480,alignItems:"center",justifyContent:"center"},container:{textAlign:"center",color:"black"},icon:{width:96,height:96,color:ia,marginBottom:24},message:{fontSize:"24px",marginBottom:24},link:{fontSize:"18px",textDecoration:"underline",cursor:"pointer",marginBottom:24},drawerToggle:{fontSize:"12px",color:ca,textDecoration:"underline",cursor:"pointer",marginBottom:12},drawerVisible:{padding:8,display:"block",height:150,width:500,overflow:"auto",overflowY:"auto",border:"1px solid ".concat(ca),textAlign:"left"},drawerHidden:{display:"none"},errorIntro:{fontSize:"12px",lineHeight:1.2,color:ca,marginBottom:8,fontFamily:"Menlo, Courier, monospace !important"},errorDetails:{fontSize:"12px",lineHeight:1.2,color:"red",fontFamily:"Menlo, Courier, monospace !important"}};var la=ce.a.t("An error occurred in the DHIS2 Data Visualizer application."),ua=function(e){function t(e){var n,r,a,i;return Object(Qr.a)(this,t),n=Object(Zr.a)(this,Object(Jr.a)(t).call(this,e)),r=Object($r.a)(n),i=function(){n.setState({drawerOpen:!n.state.drawerOpen})},(a="toggleTechInfoDrawer")in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,n.state={error:null,errorInfo:null,drawerOpen:!1},n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e,t=this.props,n=t.classes,r=t.children;return this.state.error?y.a.createElement("div",{className:n.mask},y.a.createElement("div",{className:n.container},y.a.createElement(En.a,{className:n.icon}),y.a.createElement("div",{className:n.message},ce.a.t("Something went wrong")),y.a.createElement("div",{className:n.link,onClick:function(){return window.location.reload()}},ce.a.t("Refresh to try again")),y.a.createElement("div",{className:n.drawerToggle,onClick:this.toggleTechInfoDrawer},this.state.drawerOpen?ce.a.t("Hide technical details"):ce.a.t("Show technical details")),y.a.createElement("div",{className:this.state.drawerOpen?n.drawerVisible:n.drawerHidden},y.a.createElement("div",{className:n.errorIntro},la,y.a.createElement("br",null),ce.a.t("The following information may be requested by technical support.")),y.a.createElement("div",{className:n.errorDetails},[(e=this.state.error.stack+"\n---"+this.state.errorInfo.componentStack,e.split("\n").reduce((function(e,t,n){return[].concat(Object(Y.a)(e),[t,y.a.createElement("br",{key:n})])}),[]))])))):r}}]),t}(O.Component),pa=(Object(E.withStyles)(sa)(ua),n(1603)),da=n.n(pa),ma=n(207),fa=n.n(ma),ba={flat:{backgroundColor:Ur.a.primary600,color:Ur.a.white,fontSize:"13px",padding:"6px 15px",boxShadow:"none"}},ha="currentAnalyticalObject",Oa=function(){var e=Object(x.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.currentUser.dataStore.has("analytics");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ya=function(){var e=Object(x.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,t.currentUser.dataStore.get("analytics");case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,t.currentUser.dataStore.create("analytics");case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ga=function(){var e=Object(x.a)(D.a.mark((function e(t,n,r){var a,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(A.getInstance)();case 3:if(a=e.sent,e.t0=r,e.t0){e.next=14;break}return e.t1=ya,e.t2=a,e.next=10,Oa(a);case 10:return e.t3=e.sent,e.next=13,(0,e.t1)(e.t2,e.t3);case 13:e.t0=e.sent;case 14:return i=e.t0,e.abrupt("return",i.set(n,t));case 18:return e.prev=18,e.t4=e.catch(0),e.abrupt("return",P(e.t4));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Ea=function(){var e=Object(x.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(A.getInstance)();case 3:if(r=e.sent,e.t0=n,e.t0){e.next=14;break}return e.t1=ya,e.t2=r,e.next=10,Oa(r);case 10:return e.t3=e.sent,e.next=13,(0,e.t1)(e.t2,e.t3);case 13:e.t0=e.sent;case 14:return a=e.t0,e.abrupt("return",a.get(t));case 18:return e.prev=18,e.t4=e.catch(0),e.abrupt("return",P(e.t4));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}(),va=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ha;return ga(e,t)},Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha;return Ea(e)},ja=K.FIXED_DIMENSIONS[K.DIMENSION_ID_DATA].name,Sa={defaultSeries:ce.a.t("Please add at least one {{series}} dimension",{series:Object(K.getAxisName)(K.AXIS_ID_COLUMNS)}),defaultCategory:ce.a.t("Please add at least one {{category}} dimension",{category:Object(K.getAxisName)(K.AXIS_ID_ROWS)}),defaultPe:ce.a.t("Please add at least one period as {{series}}, {{category}} or {{filter}}",{series:Object(K.getAxisName)(K.AXIS_ID_COLUMNS),category:Object(K.getAxisName)(K.AXIS_ID_ROWS),filter:Object(K.getAxisName)(K.AXIS_ID_FILTERS)}),pie:{dx:ce.a.t("Please add {{data}} as {{category}} or {{filter}}",{data:ja,category:Object(K.getAxisName)(K.AXIS_ID_ROWS),filter:Object(K.getAxisName)(K.AXIS_ID_FILTERS)}),pe:ce.a.t("Please add at least one period as {{series}} or {{filter}}",{series:Object(K.getAxisName)(K.AXIS_ID_COLUMNS),filter:Object(K.getAxisName)(K.AXIS_ID_FILTERS)}),filter:ce.a.t("Please add at least one {{filter}} dimension",{filter:Object(K.getAxisName)(K.AXIS_ID_FILTERS)})},yearOverYear:{seriesPeriod:ce.a.t("Please add at least one period as a {{series}} dimension",{series:Object(K.getAxisName)(K.AXIS_ID_COLUMNS)}),categoryPeriod:ce.a.t("Please add at least one period as a {{category}} dimension",{category:Object(K.getAxisName)(K.AXIS_ID_ROWS)}),dx:ce.a.t("Please add {{data}} as a filter dimension",{data:ja})},singleValue:{dx:ce.a.t("Please add one {{series}} dimension",{series:Object(K.getAxisName)(K.AXIS_ID_COLUMNS)}),pe:ce.a.t("Please add at least one period as {{filter}}",{filter:Object(K.getAxisName)(K.AXIS_ID_FILTERS)})}},Da=function(e,t){if(!e||!Object(K.dimensionIsValid)(e,{requireItems:!0}))throw new Error(t)},xa=function(e,t){if(!function(e){return K.AXIS.isValid(e)&&Object(K.dimensionIsValid)(e[0],{requireItems:!0})}(e))throw new Error(t)},wa=function(e){switch(e.type){case K.VIS_TYPE_PIE:case K.VIS_TYPE_GAUGE:return function(e){xa(e.columns,Sa.defaultSeries),xa(e.filters,Sa.pie.filter),Da(Object(K.layoutGetDimension)(e,K.DIMENSION_ID_PERIOD),Sa.pie.pe)}(e);case K.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:case K.VIS_TYPE_YEAR_OVER_YEAR_LINE:return function(e){if(!Array.isArray(e.yearlySeries)||"string"!==typeof e.yearlySeries[0])throw new Error(Sa.yearOverYear.seriesPeriod);xa(e.rows,Sa.yearOverYear.categoryPeriod),xa(e.columns,Sa.yearOverYear.dx)}(e);case K.VIS_TYPE_SINGLE_VALUE:return function(e){xa(e.columns,Sa.singleValue.dx),Da(Object(K.layoutGetDimension)(e,K.DIMENSION_ID_PERIOD),Sa.singleValue.pe)}(e);default:return function(e){xa(e.columns,Sa.defaultSeries),xa(e.rows,Sa.defaultCategory),Da(Object(K.layoutGetDimension)(e,K.DIMENSION_ID_PERIOD),Sa.defaultPe)}(e)}},Aa=function(e){var t=e.classes,n=e.acClearLoadError,r=e.acSetLoadError,a=e.onUpdate,i=e.ui,o=e.current,c=e.currentFromUi,s=e.onClick,l=e.flat,u=Object(I.a)(e,["classes","acClearLoadError","acSetLoadError","onUpdate","ui","current","currentFromUi","onClick","flat"]);return y.a.createElement(fa.a,Object.assign({"data-test":"update-button"},u,{className:l?"".concat(t.flat," ").concat(u.className):u.className,variant:"contained",color:"primary",onClick:function(){try{wa(c),n()}catch(l){r(l&&l.message?l.message:ce.a.t("Error validating layout"))}a(i);var e=L.location.pathname==="/"+ha,t=o&&o.id?"/".concat(o.id):"/";e||L.location.pathname===t||L.push(t),s()},disableRipple:!0,disableFocusRipple:!0}),ce.a.t("Update"))},_a={onUpdate:u.acSetCurrentFromUi,acSetLoadError:Tr,acClearLoadError:Pr};Aa.defaultProps={onClick:Function.prototype,flat:!1};var Ta=Object(g.connect)((function(e){return{ui:nt(e),current:Vt(e),currentFromUi:Bt(e)}}),_a)(Object(E.withStyles)(ba)(Aa)),Pa=n(326),Na=n.n(Pa),Ra=n(259),Ca=n.n(Ra),La=n(204),ka=n.n(La),Ua=n(253),Ma=n.n(Ua),Va=n(247),Ba=n.n(Va),Ya=n(2030),Ga=n.n(Ya),Fa=n(2035),Ha=n.n(Fa),za=n(2032),Wa=n.n(za),Xa=n(2033),qa=n.n(Xa),Qa=n(2034),Ka=n.n(Qa),Za=n(2036),Ja=n.n(Za),$a={arrowIcon:{marginLeft:"auto"},menuAnchorOrigin:{vertical:"bottom",horizontal:"left"},submenuAnchorOrigin:{vertical:"top",horizontal:"right"}},ei=function(){var e=Object(x.a)(D.a.mark((function e(t,n){var r,a,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.getInstance)();case 2:return r=e.sent,a=r.Api.getApi(),i="".concat(a.baseUrl,"/svg.").concat(t),e.abrupt("return",a.fetch(i,{method:"POST",body:n,headers:new Headers(a.defaultHeaders)}).then((function(e){return e.blob()})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ti=function(){var e=Object(x.a)(D.a.mark((function e(t,n,r,a){var i,o,c,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.getInstance)();case 2:return i=e.sent,o=i.Api.getApi(),c=(new i.analytics.request).fromModel(t,"dataValueSet"===a).withFormat(n),a&&(c=c.withPath(a)),r&&(c=c.withOutputIdScheme(r)),s=new URL("".concat(o.baseUrl,"/").concat(c.buildUrl()),"".concat(window.location.origin).concat(window.location.pathname)),Object.entries(c.buildQuery()).forEach((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return s.searchParams.append(n,r)})),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ri=function(e){function t(e){var n;return Object(Qr.a)(this,t),n=Object(Zr.a)(this,Object(Jr.a)(t).call(this,e)),ni(Object($r.a)(n),"toggleMenu",(function(e){return n.setState({anchorEl:e||null})})),ni(Object($r.a)(n),"toggleSubmenu",(function(e,t,r){var a="".concat(e,"Submenu"),i={anchorEl:t||null};"scheme"===e&&(i.dataType=r||null),n.setState(Object(j.a)({},a,i))})),ni(Object($r.a)(n),"downloadImage",(function(e){return Object(x.a)(D.a.mark((function t(){var r,a,i,o,c,s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.props,a=r.current,i=r.chart,(o=new URLSearchParams).append("filename",a.name),i&&o.append("svg",i),t.next=6,ei(e,o);case 6:c=t.sent,s=URL.createObjectURL(c),n.toggleMenu(),window.open(s,"_blank");case 10:case"end":return t.stop()}}),t)})))})),ni(Object($r.a)(n),"downloadData",(function(e,t,r){return Object(x.a)(D.a.mark((function a(){var i,o;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=n.props.current,a.next=3,ti(i,e,t,r);case 3:o=a.sent,t?n.toggleSubmenu("scheme"):n.toggleSubmenu("advanced"),n.toggleMenu(),window.open(o,e.match(/(xls|csv)/)?"_top":"_blank");case 7:case"end":return a.stop()}}),a)})))})),n.state={anchorEl:null,schemeSubmenu:{anchorEl:null,dataType:null},advancedSubmenu:{anchorEl:null}},n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this;return y.a.createElement(O.Fragment,null,y.a.createElement(fa.a,{className:this.props.className,onClick:function(t){return e.toggleMenu(t.currentTarget)},disableRipple:!0,disableFocusRipple:!0,disabled:!Boolean(this.props.current)},ce.a.t("Download")),y.a.createElement(Ca.a,{open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,anchorOrigin:$a.menuAnchorOrigin,getContentAnchorEl:null,onClose:function(){return e.toggleMenu()}},y.a.createElement(Ga.a,{component:"div"},ce.a.t("Graphics")),y.a.createElement(ka.a,{onClick:this.downloadImage("png")},y.a.createElement(Ma.a,null,y.a.createElement(Wa.a,null)),y.a.createElement(Ba.a,null,ce.a.t("Image (.png)"))),y.a.createElement(ka.a,{onClick:this.downloadImage("pdf")},y.a.createElement(Ma.a,null,y.a.createElement(qa.a,null)),y.a.createElement(Ba.a,null,ce.a.t("PDF (.pdf)"))),y.a.createElement(Na.a,null),y.a.createElement(Ga.a,{component:"div"},ce.a.t("Plain data source")),y.a.createElement(ka.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"json")}},y.a.createElement(Ma.a,null,y.a.createElement(Ka.a,null)),y.a.createElement(Ba.a,null,"JSON"),y.a.createElement(Ha.a,{style:$a.arrowIcon})),y.a.createElement(ka.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"xml")}},y.a.createElement(Ma.a,null,y.a.createElement(Ka.a,null)),y.a.createElement(Ba.a,null,"XML"),y.a.createElement(Ha.a,{style:$a.arrowIcon})),y.a.createElement(ka.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"xls")}},y.a.createElement(Ma.a,null,y.a.createElement(Ka.a,null)),y.a.createElement(Ba.a,null,"Excel"),y.a.createElement(Ha.a,{style:$a.arrowIcon})),y.a.createElement(ka.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"csv")}},y.a.createElement(Ma.a,null,y.a.createElement(Ka.a,null)),y.a.createElement(Ba.a,null,"CSV"),y.a.createElement(Ha.a,{style:$a.arrowIcon})),y.a.createElement(ka.a,{onClick:function(t){return e.toggleSubmenu("advanced",t.currentTarget)}},y.a.createElement(Ma.a,null,y.a.createElement(Ja.a,null)),y.a.createElement(Ba.a,null,ce.a.t("Advanced")),y.a.createElement(Ha.a,{style:$a.arrowIcon}))),y.a.createElement(Ca.a,{open:Boolean(this.state.schemeSubmenu.anchorEl),anchorEl:this.state.schemeSubmenu.anchorEl,anchorOrigin:$a.submenuAnchorOrigin,onClose:function(t){return e.toggleSubmenu("scheme")}},y.a.createElement(Ga.a,{component:"div"},ce.a.t("Metadata ID scheme")),y.a.createElement(ka.a,{onClick:this.downloadData(this.state.schemeSubmenu.dataType,"UID")},"ID"),y.a.createElement(ka.a,{onClick:this.downloadData(this.state.schemeSubmenu.dataType,"CODE")},"Code"),y.a.createElement(ka.a,{onClick:this.downloadData(this.state.schemeSubmenu.dataType,"NAME")},"Name")),y.a.createElement(Ca.a,{open:Boolean(this.state.advancedSubmenu.anchorEl),anchorEl:this.state.advancedSubmenu.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},onClose:function(t){return e.toggleSubmenu("advanced")}},y.a.createElement(Ga.a,{component:"div"},ce.a.t("Data value set")),y.a.createElement(ka.a,{onClick:this.downloadData("json",null,"dataValueSet")},"JSON"),y.a.createElement(ka.a,{onClick:this.downloadData("xml",null,"dataValueSet")},"XML"),y.a.createElement(Na.a,null),y.a.createElement(Ga.a,{component:"div"},ce.a.t("Other formats")),y.a.createElement(ka.a,{onClick:this.downloadData("jrxml")},"JRXML"),y.a.createElement(ka.a,{onClick:this.downloadData("sql",null,"debug/sql")},"Raw data SQL")))}}]),t}(O.Component),ai=Object(g.connect)((function(e){return{current:Vt(e),chart:jr(e)}}),{})(ri),ii=n(2038),oi=n.n(ii),ci=n(2037),si=n.n(ci),li=Object(g.connect)((function(e){return{rightSidebarOpen:pt(e),id:(Vt(e)||{}).id}}),(function(e){return{onClick:function(){return e(ur())}}}))(Object(E.withStyles)((function(e){return{icon:{marginRight:e.spacing.unit,marginTop:2}}}))((function(e){return y.a.createElement(fa.a,{className:e.className,size:"small",disabled:!Boolean(e.id),disableRipple:!0,disableFocusRipple:!0,onClick:e.onClick},e.rightSidebarOpen?y.a.createElement(si.a,{className:e.classes.icon}):y.a.createElement(oi.a,{className:e.classes.icon}),ce.a.t("Interpretations"))}))),ui=n(240),pi=n.n(ui),di=n(241),mi=n.n(di),fi=n(218),bi=n.n(fi),hi=n(221),Oi=n.n(hi),yi=n(2042),gi=n.n(yi),Ei=n(2044),vi=n.n(Ei),Ii=n(2051),ji=n.n(Ii),Si=n(373),Di=n.n(Si),xi=n(513),wi=n.n(xi),Ai=n(562),_i=n.n(Ai),Ti=Object(g.connect)((function(e,t){return{value:at(e)[t.option.name]}}),(function(e,t){return{onChange:function(n){return e(Jn(Object(j.a)({},t.option.name,n)))}}}))((function(e){var t=e.className,n=e.option,r=e.value,a=e.onChange;return y.a.createElement(_i.a,{className:t,control:y.a.createElement(wi.a,{checked:r,color:"primary",onChange:function(e){return a(e.target.checked)}}),label:n.label})})),Pi={dialogContent:{flex:"1 1 550px"},tabsBar:{height:"48px",backgroundColor:Ur.a.white,borderBottom:"1px solid ".concat(Ur.a.grey300)},tab:{width:"33.33%"},dataTabFormGroup:{paddingTop:"8px"},axisTabFormGroup:{height:"325px",justifyContent:"space-around"},dataTabCheckbox:{height:"35px"},selectBaseOption:{margin:"15px 0px 10px"},regressionType:{margin:"10px 0px 10px"},targetLineRoot:{position:"relative",top:"8px"},baseLineRoot:{position:"relative",top:"8px",marginRight:"25px"},checkboxRoot:{position:"relative",top:"10px",marginLeft:"5px"},targetLine:{justifyContent:"space-between",marginBottom:"8px"},baseLine:{marginBottom:"5px",justifyContent:"space-between"},aggregationType:{marginTop:"10px"},rangeAxisMin:{marginRight:"15px"},titleFormGroup:{marginBottom:"12px"}},Ni=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Ti,{className:t.dataTabCheckbox,option:{name:"cumulativeValues",label:ce.a.t("Use cumulative values")}})})),Ri=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Ti,{className:t.dataTabCheckbox,option:{name:"percentStackedValues",label:ce.a.t("Use 100% stacked values")}})})),Ci=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Ti,{className:t.dataTabCheckbox,option:{name:"showData",label:ce.a.t("Show values")}})})),Li=n(231),ki=n.n(Li),Ui=n(258),Mi=n.n(Ui),Vi=n(243),Bi=n.n(Vi),Yi=Object(g.connect)((function(e,t){return{value:at(e)[t.option.name]}}),(function(e,t){return{onChange:function(n){return e(Jn(Object(j.a)({},t.option.name,n)))}}}))((function(e){var t=e.className,n=e.option,r=e.value,a=e.onChange;return y.a.createElement(Mi.a,{className:t},y.a.createElement(Bi.a,null,n.label),y.a.createElement(ki.a,{displayEmpty:!0,onChange:function(e){return a(e.target.value)},value:r},n.items.map((function(e){var t=e.id,n=e.label;return y.a.createElement(ka.a,{key:t,value:t},n)}))))})),Gi=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Yi,{className:t.selectBaseOption,option:{name:"hideEmptyRowItems",label:ce.a.t("Hide empty categories"),items:[{id:"NONE",label:ce.a.t("None")},{id:"BEFORE_FIRST",label:ce.a.t("Before first")},{id:"AFTER_LAST",label:ce.a.t("After last")},{id:"BEFORE_FIRST_AFTER_LAST",label:ce.a.t("Before first and after last")},{id:"ALL",label:ce.a.t("All")}]}})})),Fi=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Yi,{className:t.regressionType,option:{name:"regressionType",label:ce.a.t("Trend line"),items:[{id:"NONE",label:ce.a.t("None")},{id:"LINEAR",label:ce.a.t("Linear")},{id:"POLYNOMIAL",label:ce.a.t("Polynomial")},{id:"LOESS",label:ce.a.t("Loess")}]}})})),Hi=n(936),zi=n.n(Hi),Wi=n(269),Xi=n.n(Wi),qi=function(e){var t=e.className,n=e.enabled,r=e.type,a=e.option,i=e.value,o=e.onChange;return y.a.createElement(Xi.a,{className:t,disabled:!n,type:r,label:a.label,onChange:function(e){return o(e.target.value)},value:i,helperText:a.helperText})};qi.defaultProps={enabled:!0};var Qi=Object(g.connect)((function(e,t){return{value:at(e)[t.option.name]||""}}),(function(e,t){return{onChange:function(n){return e(Jn(Object(j.a)({},t.option.name,n)))}}}))(qi),Ki=function(e){var t=e.enabled;return y.a.createElement(Qi,{enabled:t,type:"number",option:{name:"targetLineValue",label:ce.a.t("Target line value")}})},Zi=function(e){var t=e.enabled;return y.a.createElement(Qi,{enabled:t,type:"text",option:{name:"targetLineLabel",label:ce.a.t("Target line title")}})},Ji=Object(g.connect)((function(e){return{enabled:at(e).targetLine}}),(function(e){return{onChange:function(t){return e(Jn({targetLine:t}))}}}))(Object(E.withStyles)(Pi)((function(e){var t=e.classes,n=e.enabled,r=e.onChange;return y.a.createElement(Di.a,{className:t.targetLine,row:!0},y.a.createElement(_i.a,{className:t.targetLineRoot,control:y.a.createElement(zi.a,{checked:n,onChange:function(e){return r(e.target.checked)}}),label:ce.a.t("Target line")}),y.a.createElement(O.Fragment,null,y.a.createElement(Ki,{enabled:n}),y.a.createElement(Zi,{enabled:n})))}))),$i=function(e){var t=e.enabled;return y.a.createElement(Qi,{enabled:t,type:"number",option:{name:"baseLineValue",label:ce.a.t("Base line value")}})},eo=function(e){var t=e.enabled;return y.a.createElement(Qi,{enabled:t,type:"text",option:{name:"baseLineLabel",label:ce.a.t("Base line title")}})},to=Object(g.connect)((function(e){return{enabled:at(e).baseLine}}),(function(e){return{onChange:function(t){return e(Jn({baseLine:t}))}}}))(Object(E.withStyles)(Pi)((function(e){var t=e.classes,n=e.enabled,r=e.onChange;return y.a.createElement(Di.a,{className:t.baseLine,row:!0},y.a.createElement(_i.a,{className:t.baseLineRoot,control:y.a.createElement(zi.a,{checked:n,onChange:function(e){return r(e.target.checked)}}),label:ce.a.t("Base line")}),y.a.createElement(O.Fragment,null,y.a.createElement($i,{enabled:n}),y.a.createElement(eo,{enabled:n})))}))),no=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Yi,{className:t.selectBaseOption,option:{name:"sortOrder",label:ce.a.t("Sort order"),items:[{id:0,label:ce.a.t("None")},{id:-1,label:ce.a.t("Low to high")},{id:1,label:ce.a.t("High to low")}]}})})),ro=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Yi,{className:t.aggregationType,option:{name:"aggregationType",label:ce.a.t("Aggregation type"),items:[{id:"DEFAULT",label:ce.a.t("By data element")},{id:"COUNT",label:ce.a.t("Count")},{id:"AVERAGE",label:ce.a.t("Average")},{id:"AVERAGE_SUM_ORG_UNIT",label:ce.a.t("Average (sum in org unit hierarchy)")},{id:"SUM",label:ce.a.t("Sum")},{id:"LAST",label:ce.a.t("Last value")},{id:"LAST_AVERAGE_ORG_UNIT",label:ce.a.t("Last value (average in org unit hierarchy)")},{id:"MIN",label:ce.a.t("Min")},{id:"MAX",label:ce.a.t("Max")},{id:"STDDEV",label:ce.a.t("Standard deviation")},{id:"VARIANCE",label:ce.a.t("Variance")}]}})})),ao=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Di.a,{className:t.dataTabFormGroup},y.a.createElement(Ci,null),y.a.createElement(Ri,null),y.a.createElement(Ni,null),y.a.createElement(Gi,null),y.a.createElement(Fi,null),y.a.createElement(Ji,null),y.a.createElement(to,null),y.a.createElement(no,null),y.a.createElement(ro,null))})),io=function(){return y.a.createElement(Ti,{option:{name:"noSpaceBetweenColumns",label:ce.a.t("No space between columns/bars")}})},oo=function(){return y.a.createElement(Ti,{option:{name:"hideLegend",label:ce.a.t("Hide chart legend")}})},co=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Ti,{className:t.checkboxRoot,option:{name:"hideTitle",label:ce.a.t("Hide title")}})})),so=function(){return y.a.createElement(Qi,{type:"text",option:{name:"title",label:ce.a.t("Chart title")}})},lo=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Ti,{className:t.checkboxRoot,option:{name:"hideSubtitle",label:ce.a.t("Hide subtitle")}})})),uo=function(){return y.a.createElement(Qi,{type:"text",option:{name:"subtitle",label:ce.a.t("Chart subtitle")}})},po=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Di.a,null,y.a.createElement(io,null),y.a.createElement(oo,null),y.a.createElement(Di.a,{className:t.titleFormGroup,row:!0},y.a.createElement(so,null),y.a.createElement(co,null)),y.a.createElement(Di.a,{row:!0},y.a.createElement(uo,null),y.a.createElement(lo,null)))})),mo=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Qi,{className:t.rangeAxisMin,type:"number",option:{name:"rangeAxisMinValue",label:ce.a.t("Range axis min")}})})),fo=function(){return y.a.createElement(Qi,{type:"number",option:{name:"rangeAxisMaxValue",label:ce.a.t("Range axis max")}})},bo=Object(g.connect)((function(e){var t=at(e);return{showHelperText:Boolean(t.rangeAxisSteps&&t.rangeAxisMaxValue)}}))((function(e){var t=e.showHelperText;return y.a.createElement(Qi,{type:"number",option:{name:"rangeAxisSteps",label:ce.a.t("Range axis tick steps"),helperText:t?ce.a.t("Tick steps may extend the chart beyond 'Range axis max'"):null}})})),ho=function(){return y.a.createElement(Qi,{type:"number",option:{name:"rangeAxisDecimals",label:ce.a.t("Range axis decimals")}})},Oo=function(){return y.a.createElement(Qi,{type:"text",option:{name:"rangeAxisLabel",label:ce.a.t("Range axis title")}})},yo=function(){return y.a.createElement(Qi,{type:"text",option:{name:"domainAxisLabel",label:ce.a.t("Domain axis title")}})},go=Object(E.withStyles)(Pi)((function(e){var t=e.classes;return y.a.createElement(Di.a,{className:t.axisTabFormGroup},y.a.createElement(Di.a,{row:!0},y.a.createElement(mo,null),y.a.createElement(fo,null)),y.a.createElement(bo,null),y.a.createElement(ho,null),y.a.createElement(Oo,null),y.a.createElement(yo,null))}));function Eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vo=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),Eo(Object($r.a)(n),"state",{activeTab:0}),Eo(Object($r.a)(n),"selectTab",(function(e){n.setState({activeTab:e})})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.activeTab;return y.a.createElement(O.Fragment,null,y.a.createElement(gi.a,{position:"sticky",className:t.tabsBar,elevation:0},y.a.createElement(vi.a,{indicatorColor:"primary",onChange:function(t,n){return e.selectTab(n)},textColor:"primary",value:n},y.a.createElement(ji.a,{className:t.tab,label:ce.a.t("Data")}),y.a.createElement(ji.a,{className:t.tab,label:ce.a.t("Axis & legend")}),y.a.createElement(ji.a,{className:t.tab,label:ce.a.t("Style")}))),0===n&&y.a.createElement(ao,null),1===n&&y.a.createElement(go,null),2===n&&y.a.createElement(po,null))}}]),t}(O.Component),Io=Object(E.withStyles)(Pi)(vo);function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var So=function(e){function t(e){var n;return Object(Qr.a)(this,t),n=Object(Zr.a)(this,Object(Jr.a)(t).call(this,e)),jo(Object($r.a)(n),"onClose",(function(e){n.toggleVisualizationOptionsDialog()})),jo(Object($r.a)(n),"toggleVisualizationOptionsDialog",(function(){n.setState({dialogIsOpen:!n.state.dialogIsOpen})})),n.state={dialogIsOpen:!1},n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){return y.a.createElement(O.Fragment,null,y.a.createElement(fa.a,{className:this.props.className,onClick:this.toggleVisualizationOptionsDialog},ce.a.t("Options")),y.a.createElement(pi.a,{open:this.state.dialogIsOpen,onClose:this.onClose,maxWidth:"md"},y.a.createElement(Oi.a,null,ce.a.t("Chart options")),y.a.createElement(bi.a,{className:this.props.classes.dialogContent},y.a.createElement(Io,null)),y.a.createElement(mi.a,null,y.a.createElement(fa.a,{color:"primary",onClick:this.onClose},ce.a.t("Hide")),y.a.createElement(Ta,{onClick:this.onClose}))))}}]),t}(O.Component),Do=Object(E.withStyles)(Pi)(So),xo=function(e){var t="/".concat(e);L.location.pathname===t?L.replace(t):L.push(t)},wo=function(){return L.push("/")},Ao=function(e){return function(t){return e.onRenameVisualization(t,!1)}},_o=function(e){return function(t){return e.onSaveVisualization(t,!1)}},To=function(e){return function(t){return e.onSaveVisualization(t,!0)}},Po=function(e){return function(){return e.onDeleteVisualization()}},No=function(e){return function(t){return e.onError(t)}},Ro=function(e,t){var n=e.classes,r=Object(I.a)(e,["classes"]);return y.a.createElement("div",{className:n.menuBar},y.a.createElement(Ta,{flat:!0,size:"small",className:n.updateButton}),y.a.createElement(da.a,{d2:t.d2,fileId:r.id||null,fileType:r.apiObjectName,onOpen:xo,onNew:wo,onRename:Ao(r),onSave:_o(r),onSaveAs:To(r),onDelete:Po(r),onError:No(r)}),y.a.createElement(Do,{className:n.label}),y.a.createElement(ai,{className:n.label}),y.a.createElement("div",{className:n.grow}),y.a.createElement(li,{className:n.label}))};Ro.contextTypes={d2:ra.a.object};var Co=Object(g.connect)((function(e){return{id:(Vt(e)||{}).id}}),(function(e,t){return{onRenameVisualization:function(n){return e(function(e,t){var n=t.name,r=t.description;return function(e,t){var a=t(),i=q(a),o=Vt(a),c=Rr({},i),s=Rr({},o);n&&(c.name=s.name=n),r&&(c.description=s.description=r),e(Ln(c)),e(Un(i===o?c:s)),e(Sr({message:ce.a.t("Rename successful"),open:!0,duration:2e3}))}}(t.apiObjectName,n))},onSaveVisualization:function(n,r){return e(function(e,t,n){var r=t.name,a=t.description;return function(){var t=Object(x.a)(D.a.mark((function t(i,o){var c,s;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(e){"OK"===e.status&&e.response.uid&&(n?L.push("/".concat(e.response.uid)):L.replace("/".concat(e.response.uid)))},t.prev=1,s=Rr({},Vt(o())),n&&delete s.id,r&&(s.name=r),a&&(s.description=a),t.t0=c,t.next=9,Cn(e,s);case 9:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 13:return t.prev=13,t.t2=t.catch(1),t.abrupt("return",Cr("tDoSaveVisualization",t.t2));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n){return t.apply(this,arguments)}}()}(t.apiObjectName,n,r))},onDeleteVisualization:function(){return e((function(e,t){var n=Vt(t());e(Sr({message:ce.a.t('"{{what}}" successfully deleted.',{what:n.name}),open:!0,duration:2e3})),L.push("/")}))},onError:function(t){var n=function(e){var t=e.message,n=e.httpStatusCode;return{message:t,type:String(n).match(/50\d/)?"error":"warning"}}(t),r=n.type,a=n.message;e(h.acReceivedSnackbarMessage({variant:r,message:a,open:!0}))}}}))(Object(E.withStyles)((function(e){return{menuBar:{background:Ur.a.white,display:"flex",alignItems:"center",padding:"0 ".concat(e.spacing.unit,"px"),height:"38px"},updateButton:{marginRight:e.spacing.unit},label:{fontSize:"15px",fontWeight:400,textTransform:"none"},grow:{flex:"1 1 0%"}}}))(Ro)),Lo=n(2054),ko=function(){return y.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},y.a.createElement("g",{id:"Exp",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",{id:"2---Home-+-Selected-Intp.",transform:"translate(-522.000000, -169.000000)"},y.a.createElement("rect",{fill:"#F4F6F8",x:"0",y:"0",width:"1280",height:"850"}),y.a.createElement("g",{id:"title-area",transform:"translate(298.000000, 165.000000)"},y.a.createElement("g",{id:"name-badge",transform:"translate(220.000000, 0.000000)"},y.a.createElement("rect",{id:"Rectangle-4",fill:"#FFFFFF",opacity:"0.700613839",x:"0",y:"0",width:"260",height:"24",rx:"4"}),y.a.createElement("g",{id:"undo",transform:"translate(4.000000, 4.000000)"},y.a.createElement("rect",{id:"frame",x:"0",y:"0",width:"16",height:"16"}),y.a.createElement("polyline",{id:"Path",stroke:"#494949",strokeLinecap:"round",strokeLinejoin:"round",points:"2.375 2.374 2.375 6.124 6.125 6.124"}),y.a.createElement("path",{d:"M8,13.624 C10.8610015,13.6256787 13.2674888,11.4795583 13.5919996,8.63701982 C13.9165103,5.79448132 12.0556517,3.16119082 9.2678875,2.51799333 C6.48012327,1.87479584 3.65366782,3.42662163 2.7,6.124",id:"Path",stroke:"#494949",strokeLinecap:"round",strokeLinejoin:"round"}),y.a.createElement("path",{d:"M9,7.29289322 L11.1819805,9.47487373 C11.3772427,9.67013588 11.3772427,9.98671837 11.1819805,10.1819805 C10.9867184,10.3772427 10.6701359,10.3772427 10.4748737,10.1819805 L8.01023174,7.71733852 L8,7.7144165 L8,5.5 C8,5.22385763 8.22385763,5 8.5,5 C8.77614237,5 9,5.22385763 9,5.5 L9,7.29289322 Z",id:"Combined-Shape",fill:"#494949"})))))))},Uo={titleBar:{display:"flex",justifyContent:"center"},cell:{display:"flex",alignItems:"center",background:Ur.a.white,padding:"6px",borderRadius:"5px",margin:"4px"},title:{fontSize:"14px"},suffix:{paddingLeft:"4px"},interpretation:{fontSize:"12px",color:Ur.a.grey700},interpretationIcon:{display:"flex",alignItems:"center",height:"14px",width:"14px",marginRight:"3px"},titleUnsaved:{color:Ur.a.grey500,fontStyle:"italic"},titleDirty:{color:Ur.a.grey700}};function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bo=ce.a.t("Unsaved chart"),Yo=ce.a.t("Edited"),Go=Vo({},Uo.cell,{},Uo.title),Fo=Vo({},Uo.cell,{},Uo.interpretation),Ho=function(e,t){switch(e){case"UNSAVED":return Bo;case"SAVED":case"DIRTY":return t.name;default:return""}},zo=Object(g.connect)((function(e){return{visualization:q(e),current:Vt(e),interpretation:dt(e),uiLocale:dn(e)}}),null,(function(e,t,n){var r=e.visualization,a=e.current,i=e.interpretation,o=e.uiLocale,c=function(e,t){return t===kt?"EMPTY":e===W?"UNSAVED":t===e?"SAVED":"DIRTY"}(r,a);return Vo({},t,{},n,{titleState:c,titleText:Ho(c,r),interpretationDate:i&&i.created?Object(Lo.a)(i.created,o):null})}))((function(e){var t=e.titleState,n=e.titleText,r=e.interpretationDate,a=Vo({},Go,{},function(e){switch(e){case"UNSAVED":return Uo.titleUnsaved;default:return null}}(t));return n?y.a.createElement("div",{"data-test":"chart-title",style:Uo.titleBar},y.a.createElement("div",{style:a},n,function(e){switch(e){case"DIRTY":return y.a.createElement("div",{style:Vo({},Uo.suffix,{},Uo.titleDirty)},"- ".concat(Yo));default:return""}}(t)),r&&y.a.createElement("div",{style:Fo},y.a.createElement("div",{style:Uo.interpretationIcon},y.a.createElement(ko,null)),y.a.createElement("div",null,ce.a.t("Viewing interpretation from {{interpretationDate}}",{interpretationDate:r})))):null})),Wo=n(937),Xo=n.n(Wo);function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ko=function(e,t){if(void 0!==t[e.id])return""===t[e.id]?"/"+e.id:"/"+t[e.id]+"/"+e.id},Zo=function(e,t,n){return function(e,t){var n=t.parentGraphMap;return Qo({},e,{parentGraphMap:Qo({},e.parentGraphMap,{},n)})}(function(e,t){var n=Object(K.layoutGetAxisIdDimensionIdsObject)(e),r=de(n)[K.DIMENSION_ID_ORGUNIT],a=t.parentGraphMap;return r?Qo({},e,Object(j.a)({},r,e[r].map((function(e){return Qo({},e,{items:e.items.map((function(e){return Qo({},e,{path:Ko(e,a)})}))})})))):e}(function(e,t){var n=function(e){return Qo({},e,{items:e.items.map((function(e){return Qo({},e,{name:t[e.id]?t[e.id].name:void 0})}))})};return Qo({},e,{columns:e.columns.map(n),filters:e.filters.map(n),rows:e.rows.map(n)})}(function(e){return Qo({},e,{id:void 0,name:void 0,displayName:void 0})}(e),t),n),n)},Jo=n(682),$o=n.n(Jo),ec=n(795),tc=n.n(ec),nc=n(796),rc=n.n(nc),ac=n(213),ic=n.n(ac),oc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("rect",{fill:"#63A4FF",x:"6",y:"14",width:"10",height:"32"}),y.a.createElement("rect",{fill:"#1976D2",x:"20",y:"24",width:"10",height:"22"}),y.a.createElement("rect",{fill:"#004BA0",x:"36",y:"4",width:"10",height:"42"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},cc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("rect",{fill:"#63A4FF",x:"6",y:"14",width:"10",height:"32"}),y.a.createElement("rect",{fill:"#9EC6FF",transform:"translate(11.000000, 16.500000) scale(1, -1) translate(-11.000000, -16.500000) ",x:"6",y:"7",width:"10",height:"19"}),y.a.createElement("rect",{fill:"#1976D2",x:"20",y:"20",width:"10",height:"26"}),y.a.createElement("rect",{fill:"#63A4FF",transform:"translate(25.000000, 15.500000) scale(1, -1) translate(-25.000000, -15.500000) ",x:"20",y:"11",width:"10",height:"9"}),y.a.createElement("rect",{fill:"#004BA0",x:"36",y:"33",width:"10",height:"13"}),y.a.createElement("rect",{fill:"#1976D2",transform:"translate(41.000000, 23.500000) scale(1, -1) translate(-41.000000, -23.500000) ",x:"36",y:"14",width:"10",height:"19"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},sc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("rect",{fill:"#63A4FF",x:"2",y:"4",width:"17",height:"10"}),y.a.createElement("rect",{fill:"#1976D2",x:"2",y:"18",width:"34",height:"10"}),y.a.createElement("rect",{fill:"#004BA0",x:"2",y:"32",width:"40",height:"10"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},lc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("rect",{fill:"#63A4FF",x:"2",y:"4",width:"17",height:"10"}),y.a.createElement("rect",{fill:"#9EC6FF",transform:"translate(23.500000, 9.000000) scale(-1, 1) translate(-23.500000, -9.000000) ",x:"19",y:"4",width:"9",height:"10"}),y.a.createElement("rect",{fill:"#1976D2",x:"2",y:"18",width:"34",height:"10"}),y.a.createElement("rect",{fill:"#63A4FF",x:"13",y:"18",width:"23",height:"10"}),y.a.createElement("rect",{fill:"#004BA0",x:"2",y:"32",width:"40",height:"10"}),y.a.createElement("rect",{fill:"#1976D2",x:"33",y:"32",width:"9",height:"10"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},uc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("defs",null,y.a.createElement("mask",{id:"mask-4",fill:"white"},y.a.createElement("circle",{cx:"24",cy:"24",r:"24"}))),y.a.createElement("g",{stroke:"none",strokeWidth:"0",fill:"none",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(24.000000, 24.000000) rotate(-135.000000) translate(-24.000000, -24.000000) "},y.a.createElement("g",{stroke:"none",fill:"none",strokeDasharray:"30.17142857142857,240",mask:"url(#mask-4)",strokeWidth:"48"},y.a.createElement("path",{stroke:"#63A4FF",d:"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z"})),y.a.createElement("g",{stroke:"none",fill:"none",strokeDasharray:"82.97142857142858,240",mask:"url(#mask-4)",transform:"translate(24.000000, 24.000000) rotate(-72.000000) translate(-24.000000, -24.000000) ",strokeWidth:"48"},y.a.createElement("path",{stroke:"#1976D2",d:"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z"})),y.a.createElement("g",{stroke:"none",fill:"none",strokeDasharray:"37.71428571428572,240",mask:"url(#mask-4)",transform:"translate(24.000000, 24.000000) rotate(-270.000000) translate(-24.000000, -24.000000) ",strokeWidth:"48"},y.a.createElement("path",{stroke:"#004BA0",d:"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z"})))))},pc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",{transform:"translate(0.000000, -12.000000)"},y.a.createElement("path",{d:"M2,36 C2,23.8497355 11.8497355,14 24,14 C36.1502645,14 46,23.8497355 46,36 L48,36 C48,22.745166 37.254834,12 24,12 C10.745166,12 0,22.745166 0,36 L2,36 Z",fill:"#9E9E9E",fillRule:"nonzero"}),y.a.createElement("path",{d:"M39.5630877,20.4405157 C39.0656993,19.9377314 38.5441136,19.4570095 38,19 C34.2678935,15.9151064 29.3575953,14 24,14 C11.8497355,14 2,23.8497355 2,36 L8,36 C8,27.163444 15.163444,20 24,20 C27.7876065,20 31.3827316,21.3146632 34.1773496,23.6246453 C34.5775703,23.9608232 34.9595684,24.3130995 35.3225781,24.6801975 L39.5630877,20.4405157 Z",fill:"#63A4FF",fillRule:"nonzero"}))))},dc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",null,y.a.createElement("mask",{id:"mask-2",fill:"white"},y.a.createElement("rect",{x:"0",y:"0",width:"48",height:"48"})),y.a.createElement("polygon",{stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",points:"4 28 16 16 26.7935166 26.7935166 33.0558406 20.5311926 53 36 53 51 0 51 0 28"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"}))))},mc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",null,y.a.createElement("mask",{id:"mask-2",fill:"white"},y.a.createElement("rect",{x:"0",y:"0",width:"48",height:"48"})),y.a.createElement("g",null),y.a.createElement("polygon",{stroke:"#1976D2",strokeWidth:"2",fill:"#63A4FF",mask:"url(#mask-2)",points:"4 28 16 16 26.7935166 26.7935166 33.0558406 20.5311926 53 36 53 51 0 51 0 28"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"}))))},fc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("circle",{stroke:"#9E9E9E",strokeWidth:"2",cx:"24",cy:"24",r:"23"}),y.a.createElement("circle",{stroke:"#9E9E9E",strokeWidth:"2",cx:"24",cy:"24",r:"15"}),y.a.createElement("circle",{stroke:"#9E9E9E",strokeWidth:"2",cx:"24",cy:"24",r:"5"}),y.a.createElement("circle",{fill:"#1976D2",cx:"24",cy:"9",r:"2"}),y.a.createElement("circle",{fill:"#1976D2",cx:"11",cy:"31",r:"2"}),y.a.createElement("circle",{fill:"#63A4FF",cx:"24",cy:"39",r:"2"}),y.a.createElement("circle",{fill:"#004BA0",cx:"39",cy:"24",r:"2"}),y.a.createElement("circle",{fill:"#004BA0",cx:"40",cy:"40",r:"2"})))},bc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",null,y.a.createElement("mask",{id:"mask-2",fill:"white"},y.a.createElement("rect",{x:"0",y:"0",width:"48",height:"48"})),y.a.createElement("polygon",{stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",points:"1 28 10 35 18 16 34 35 50 36 50 51 -3 51 -3 28"}),y.a.createElement("polygon",{stroke:"#004BA0",strokeWidth:"2",mask:"url(#mask-2)",points:"1 20 8 20 19 29 36 17 50 28 50 51 -3 51 -3 20"}),y.a.createElement("polygon",{stroke:"#63A4FF",strokeWidth:"2",mask:"url(#mask-2)",points:"1 35 19 39 28 31 38 28 50 43 50 66 -3 66 -3 35"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),y.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"}))))},hc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",null,y.a.createElement("polygon",{points:"0 0 48 0 48 48 0 48"}),y.a.createElement("polygon",{fill:"#63A4FF",points:"6 14 11 14 11 46 6 46"}),y.a.createElement("polygon",{fill:"#63A4FF",points:"20 23 25 23 25 46 20 46"}),y.a.createElement("polygon",{fill:"#63A4FF",points:"34 30 39 30 39 46 34 46"}),y.a.createElement("polygon",{fill:"#004BA0",points:"11 26 16 26 16 46 11 46"}),y.a.createElement("polygon",{fill:"#004BA0",points:"25 16 30 16 30 46 25 46"}),y.a.createElement("polygon",{fill:"#004BA0",points:"39 9 44 9 44 46 39 46"}),y.a.createElement("polygon",{fill:"#9E9E9E",points:"0 0 2 0 2 48 0 48"}),y.a.createElement("polygon",{fill:"#9E9E9E",points:"0 46 48 46 48 48 0 48"}))))},Oc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("path",{d:"M45,9.59a2,2,0,0,1,2,2v25a2,2,0,0,1-2,2H3a2,2,0,0,1-2-2v-25a2,2,0,0,1,2-2H45m0-1H3a3,3,0,0,0-3,3v25a3,3,0,0,0,3,3H45a3,3,0,0,0,3-3v-25a3,3,0,0,0-3-3Z",fill:"#9e9e9e"}),y.a.createElement("path",{d:"M13.06,31H10.82V20.16L7.51,21.29V19.4l5.26-1.94h.29Z",fill:"#1976d2"}),y.a.createElement("path",{d:"M27,31H18V29.46l4.5-4.91a10.45,10.45,0,0,0,1.38-1.81,2.91,2.91,0,0,0,.42-1.46,2.2,2.2,0,0,0-.55-1.56,1.86,1.86,0,0,0-1.46-.59,2.2,2.2,0,0,0-1.7.66,2.65,2.65,0,0,0-.6,1.83H17.69a4.36,4.36,0,0,1,.56-2.22,3.9,3.9,0,0,1,1.6-1.54,5.19,5.19,0,0,1,2.41-.54,4.54,4.54,0,0,1,3.1,1A3.41,3.41,0,0,1,26.5,21a4.66,4.66,0,0,1-.57,2.12,11.88,11.88,0,0,1-1.87,2.52l-3.3,3.53H27Z",fill:"#1976d2"}),y.a.createElement("path",{d:"M32.68,23.23h1.38a2.47,2.47,0,0,0,1.64-.54,1.9,1.9,0,0,0,.61-1.53,2.1,2.1,0,0,0-.51-1.5,2,2,0,0,0-1.54-.53,2.13,2.13,0,0,0-1.49.52A1.76,1.76,0,0,0,32.18,21H29.93a3.39,3.39,0,0,1,.55-1.89A3.74,3.74,0,0,1,32,17.79a5.15,5.15,0,0,1,2.21-.47,4.68,4.68,0,0,1,3.18,1,3.57,3.57,0,0,1,1.15,2.83A2.87,2.87,0,0,1,38,22.87a3.53,3.53,0,0,1-1.49,1.21,3.28,3.28,0,0,1,1.69,1.2,3.24,3.24,0,0,1,.58,1.95,3.63,3.63,0,0,1-1.25,2.89,4.82,4.82,0,0,1-3.28,1.08,4.82,4.82,0,0,1-3.19-1,3.44,3.44,0,0,1-1.24-2.77h2.25a1.88,1.88,0,0,0,.6,1.45,2.29,2.29,0,0,0,1.61.56,2.34,2.34,0,0,0,1.65-.56,2.09,2.09,0,0,0,.6-1.61,2.13,2.13,0,0,0-.63-1.65A2.7,2.7,0,0,0,34,25H32.68Z",fill:"#1976d2"}))},yc=function(e){var t=e.style,n=void 0===t?{width:24,height:24,paddingRight:"8px"}:t;return y.a.createElement(ic.a,{viewBox:"0 0 48 48",style:n},y.a.createElement("title",null,"icon_chart_GIS"),y.a.createElement("desc",null,"Created with Sketch."),y.a.createElement("defs",null,y.a.createElement("rect",{id:"path-1",x:"0",y:"0",width:"48",height:"48"})),y.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",{id:"Icon/48x48/chart_GIS"},y.a.createElement("g",{id:"icon_chart_GIS"},y.a.createElement("mask",{id:"mask-2",fill:"white"},y.a.createElement("use",{xlinkHref:"#path-1"})),y.a.createElement("g",{id:"Bounds"}),y.a.createElement("circle",{id:"Oval-4",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",cx:"24",cy:"24",r:"23"}),y.a.createElement("polyline",{id:"Path-6",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",points:"1 21 4 24 8 26 9 24 6 19 11 18 18 12 14 9 16 6 15 3"}),y.a.createElement("polyline",{id:"Path-7",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",points:"47 25 45 21 43 19 40 18 37 18 34 17 32 18 30 23 33 27 37 27 38 30 38 38 38.5 42"}),y.a.createElement("polyline",{id:"Path-5",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",points:"38 6 37 7 34 6 32 8 34 10 33 12 33 15 37 14 39 15 43 12"}),y.a.createElement("polyline",{id:"Path-8",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-2)",points:"18 46 16 41 15 36 13 34 10 31 11 28 14 26 18 27 20 29 23 30 25 32 25 36 23 40 21 47"})))))},gc=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return y.a.createElement(ic.a,{viewBox:"0,0,48,48",style:n},y.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("polygon",{points:"0 0 48 0 48 48 0 48"}),y.a.createElement("rect",{stroke:"#4A5768",strokeWidth:"2",x:"7",y:"11",width:"34",height:"26"}),y.a.createElement("rect",{fill:"#4A5768",x:"8",y:"18",width:"32",height:"2"}),y.a.createElement("rect",{fill:"#4A5768",x:"19",y:"11",width:"2",height:"26"}),y.a.createElement("rect",{fill:"#4A5768",x:"8",y:"24",width:"32",height:"2"}),y.a.createElement("rect",{fill:"#4A5768",x:"8",y:"30",width:"32",height:"2"})))},Ec=function(e){var t=e.iconType,n=e.style;switch(t){case K.VIS_TYPE_STACKED_COLUMN:return y.a.createElement(cc,{style:n});case K.VIS_TYPE_BAR:return y.a.createElement(sc,{style:n});case K.VIS_TYPE_STACKED_BAR:return y.a.createElement(lc,{style:n});case K.VIS_TYPE_PIE:return y.a.createElement(uc,{style:n});case K.VIS_TYPE_GAUGE:return y.a.createElement(pc,{style:n});case K.VIS_TYPE_LINE:return y.a.createElement(dc,{style:n});case K.VIS_TYPE_AREA:return y.a.createElement(mc,{style:n});case K.VIS_TYPE_RADAR:return y.a.createElement(fc,{style:n});case K.VIS_TYPE_YEAR_OVER_YEAR_LINE:return y.a.createElement(bc,{style:n});case K.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return y.a.createElement(hc,{style:n});case K.VIS_TYPE_SINGLE_VALUE:return y.a.createElement(Oc,{style:n});case"MAP":return y.a.createElement(yc,{style:n});case K.VIS_TYPE_PIVOT_TABLE:return y.a.createElement(gc,{style:n});case K.VIS_TYPE_COLUMN:default:return y.a.createElement(oc,{style:n})}},vc=function(e){var t=e.iconType,n=e.styles,r=e.label,a=e.isSelected,i=Object(I.a)(e,["iconType","styles","label","isSelected"]);return y.a.createElement($o.a,Object.assign({selected:Boolean(a),style:n.menuItem,disableRipple:!0},i),y.a.createElement(tc.a,{style:n.listItemIcon},y.a.createElement(Ec,{iconType:t,style:n.listItemSvg})),y.a.createElement(rc.a,{primary:r,disableTypography:!0,style:n.listItemText}))},Ic={button:{padding:"6px",color:Ur.a.black,fontSize:"15px",textTransform:"none",fontWeight:"normal",backgroundColor:Ur.a.white,justifyContent:"flex-start"},dropDownArrow:{marginLeft:"auto"},menu:{maxWidth:"600px",padding:0},menuDivider:{border:"none",borderBottom:"1px solid",borderColor:Ur.a.grey300},menuItem:{height:120,width:126,margin:"8px",padding:"0 4px",display:"flex",flexDirection:"column",justifyContent:"center",borderRadius:"8px",float:"left"},listItemIcon:{margin:0,marginBottom:15},listItemSvg:{width:48,height:48},listItemText:{fontSize:14,flex:"none",padding:0,whiteSpace:"normal",textAlign:"center"},clearFix:{clear:"both"}};function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sc="dhis-web-maps",Dc={anchorEl:null},xc=function(e){function t(e,n){var r;return Object(Qr.a)(this,t),r=Object(Zr.a)(this,Object(Jr.a)(t).call(this,e)),jc(Object($r.a)(r),"handleButtonClick",(function(e){r.setState({anchorEl:e.currentTarget})})),jc(Object($r.a)(r),"handleMenuItemClick",(function(e){return function(){r.props.onTypeSelect(e),r.handleClose()}})),jc(Object($r.a)(r),"handleOpenAsMapClick",Object(x.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Zo(r.props.current,r.props.metadata,r.props.ui),e.next=3,va(t);case 3:window.location.href="".concat(r.baseUrl,"/").concat(Sc,"?").concat(ha,"=true");case 4:case"end":return e.stop()}}),e)})))),jc(Object($r.a)(r),"handleClose",(function(){r.setState({anchorEl:null})})),jc(Object($r.a)(r),"getVisTypes",(function(){return Object.keys(K.visTypeDisplayNames)})),r.state=Dc,r.baseUrl=n.baseUrl,r}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,n=this.props.visualizationType;return y.a.createElement(O.Fragment,null,y.a.createElement(fa.a,{onClick:this.handleButtonClick,disableRipple:!0,disableFocusRipple:!0,fullWidth:!0,size:"small",style:Ic.button},y.a.createElement(Ec,{iconType:n}),K.visTypeDisplayNames[n],y.a.createElement(Xo.a,{style:Ic.dropDownArrow})),y.a.createElement(Ca.a,{open:Boolean(t),anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:this.handleClose,getContentAnchorEl:null,MenuListProps:{style:Ic.menu}},this.getVisTypes().map((function(t){return y.a.createElement(vc,{key:t,iconType:t,label:K.visTypeDisplayNames[t],isSelected:t===n,styles:Ic,onClick:e.handleMenuItemClick(t)})})),y.a.createElement("div",{style:Ic.clearFix}),y.a.createElement("hr",{style:Ic.menuDivider}),y.a.createElement(vc,{key:"MAP",iconType:"MAP",label:ce.a.t("Open as Map"),styles:Ic,onClick:this.handleOpenAsMapClick,disabled:!this.props.current})))}}]),t}(O.Component);xc.contextTypes={baseUrl:ra.a.string};var wc=Object(g.connect)((function(e){return{visualizationType:rt(e),current:Vt(e),metadata:en(e),ui:nt(e)}}),(function(e){return{onTypeSelect:function(t){return e(Zn(t))}}}))(xc),Ac=n(980),_c=n(563),Tc=Object(g.connect)(null,{closeDialog:lr})((function(e){var t=e.className,n=e.closeDialog;return y.a.createElement(fa.a,{className:t,color:"primary",onClick:function(){return n(null)},disableRipple:!0,disableFocusRipple:!0},ce.a.t("Hide"))})),Pc=n(2055),Nc=n.n(Pc),Rc={arrowDown:{borderRadius:"0px 2px 2px 0px",padding:"0px",height:"36px",minWidth:"40px"},arrowIcon:{fill:Ur.a.white}},Cc=Object(E.withStyles)(Rc)((function(e){var t=e.classes,n=e.onClick,r=e.open;return y.a.createElement(fa.a,{className:t.arrowDown,color:"primary",variant:"contained",disableRipple:!0,disableFocusRipple:!0,onClick:n},r?y.a.createElement(Nc.a,{className:t.arrowIcon}):y.a.createElement(Xo.a,{className:t.arrowIcon}))})),Lc=function(e){var t=e.anchorEl,n=e.classes,r=e.onClick,a=e.onClose,i=e.menuItems,o=e.addToButtonRef.offsetWidth-5,c=t&&t.getBoundingClientRect().bottom+100>window.innerHeight,s=c?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"},l=c?{vertical:"bottom",horizontal:"right"}:{vertical:"top",horizontal:"right"};return y.a.createElement(O.Fragment,null,y.a.createElement(Cc,{onClick:r,open:Boolean(t)}),y.a.createElement(Ca.a,{open:Boolean(t),onClose:a,anchorEl:t,getContentAnchorEl:null,MenuListProps:{style:{minWidth:o},className:n.menuList},anchorOrigin:s,transformOrigin:l},i))};Lc.defaultProps={anchorEl:null};var kc=Object(E.withStyles)({menuList:{display:"flex",flexDirection:"column"}})(Lc);function Uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mc=function(e){function t(e){var n;return Object(Qr.a)(this,t),n=Object(Zr.a)(this,Object(Jr.a)(t).call(this,e)),Uc(Object($r.a)(n),"state",{anchorEl:null}),Uc(Object($r.a)(n),"onClose",(function(){return n.setState({anchorEl:null})})),Uc(Object($r.a)(n),"onToggle",(function(e){return n.state.anchorEl?n.onClose():n.setState({anchorEl:e.currentTarget})})),Uc(Object($r.a)(n),"onUpdate",(function(e){n.props.onAddDimension(Object(j.a)({},n.props.dialogId,e)),n.props.onUpdate(),n.props.closeDialog(null)})),Uc(Object($r.a)(n),"getAxisMeta",(function(e){return e.map((function(e){return le.find((function(t){return t.axisId===e}))}))})),Uc(Object($r.a)(n),"renderMenuItems",(function(){return n.getAxisMeta(Object(K.getAvailableAxes)(n.props.visType)).slice(1).map((function(e){return y.a.createElement(fa.a,{className:n.props.classes.menuItem,component:"li",key:e.axisId,onClick:function(){return n.onUpdate(e.axisId)}},e.name)}))})),Uc(Object($r.a)(n),"renderAddToLayoutButton",(function(){var e=n.getAxisMeta(Object(K.getAvailableAxes)(n.props.visType));return y.a.createElement("div",{ref:function(e){return n.buttonRef=e}},y.a.createElement(fa.a,{className:n.props.classes.button,variant:"contained",color:"primary",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return n.onUpdate(e[0].axisId)}},e[0].name),e.length>1?y.a.createElement(kc,{onClose:n.onClose,onClick:n.onToggle,anchorEl:n.state.anchorEl,menuItems:n.renderMenuItems(),addToButtonRef:n.buttonRef}):null)})),Uc(Object($r.a)(n),"renderUpdateButton",(function(){return y.a.createElement(Ta,{className:n.props.className,onClick:function(){return n.props.closeDialog(null)}})})),Uc(Object($r.a)(n),"layoutHasDimension",(function(e){return n.props.dimensionIdsInLayout.includes(e)})),n.buttonRef=y.a.createRef(),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){return this.layoutHasDimension(this.props.dialogId)?this.renderUpdateButton():this.renderAddToLayoutButton()}}]),t}(O.Component),Vc=Object(g.connect)((function(e){return{visType:rt(e),dialogId:ut(e),dimensionIdsInLayout:ht(e)}}),{onAddDimension:er,onUpdate:Bn,closeDialog:lr})(Object(E.withStyles)({button:{borderRadius:"2px 0px 0px 2px",marginLeft:"5px",fontSize:"12px"},menuItem:{fontSize:"15px",textTransform:"initial",whiteSpace:"nowrap",justifyContent:"start",flexWrap:"nowrap",padding:"8px",fontWeight:"400"}})(Mc));function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yc=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),Bc(Object($r.a)(n),"state",{onMounted:!1}),Bc(Object($r.a)(n),"componentDidUpdate",(function(e){(!Object(_c.a)(e.dxIds,n.props.dxIds)||!Object(_c.a)(e.ouIds,n.props.ouIds))&&n.fetchRecommended(),n.props.dialogId!==K.DIMENSION_ID_ORGUNIT||n.state.ouMounted||n.setState({ouMounted:!0})})),Bc(Object($r.a)(n),"fetchRecommended",Object(Ac.a)(Object(x.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(n.props.dxIds,n.props.ouIds);case 2:t=e.sent,n.props.setRecommendedIds(t);case 4:case"end":return e.stop()}}),e)}))),1e3)),Bc(Object($r.a)(n),"onSelect",(function(e){var t=e.dimensionId,r=e.items;switch(n.props.setUiItems({dimensionId:t,itemIds:r.map((function(e){return e.id}))}),t){case K.DIMENSION_ID_ORGUNIT:var a={},i={};r.forEach((function(e){var t=K.ouIdHelper.removePrefix(e.id);if(a[t]={id:t,name:e.name||e.displayName,displayName:e.displayName},e.path){var n=Ae(e.path);i[e.id]=n==="/".concat(e.id)?"":n.replace(/^\//,"")}})),n.props.addMetadata(a),n.props.addParentGraphMap(i);break;default:n.props.addMetadata(r.reduce((function(e,t){return e[t.id]={id:t.id,name:t.name||t.displayName,displayName:t.displayName},e}),{}))}})),Bc(Object($r.a)(n),"getSelectedItems",(function(e){return n.props.selectedItems[e]?n.props.selectedItems[e].filter((function(e){return n.props.metadata[e]})).map((function(e,t){return{id:e,name:n.props.metadata[e].name}})):[]})),Bc(Object($r.a)(n),"getOrgUnitsFromIds",(function(e,t,n){return e.filter((function(e){return void 0!==t[K.ouIdHelper.removePrefix(e)]})).map((function(e){var r=K.ouIdHelper.removePrefix(e);return{id:e,name:t[r].displayName||t[r].name,path:_e(r,t,n)}}))})),Bc(Object($r.a)(n),"renderPersistedContent",(function(e){var t=n.props,r=t.displayNameProperty,a=t.ouIds,i=t.metadata,o=t.parentGraphMap,c=t.dialogId;if(n.state.ouMounted){var s=n.getOrgUnitsFromIds(a,i,o),l=K.DIMENSION_ID_ORGUNIT===c?"block":"none";return y.a.createElement("div",{key:K.DIMENSION_ID_ORGUNIT,style:{display:l}},y.a.createElement(K.OrgUnitDimension,Object.assign({displayNameProperty:r,ouItems:s},e)))}return null})),Bc(Object($r.a)(n),"renderDialogContent",(function(){var e=n.props,t=e.displayNameProperty,r=e.dialogId,a=e.type,i=e.dimensions,o=e.removeUiItems,c=e.setUiItems,s={d2:n.context.d2,onSelect:n.onSelect,onDeselect:o,onReorder:c};return y.a.createElement(O.Fragment,null,n.renderPersistedContent(s),r&&function(){var e,o=n.getSelectedItems(r),c=n.props.getAxisIdByDimensionId(r),l=a,u=o.length,p=Object(K.getMaxNumberOfItemsPerAxis)(l,c);if(!!p&&u>p&&(e=1===p?ce.a.t("'{{visualiationType}}' is intended to show a single data item. Only the first item will be used and saved.",{visualiationType:Object(K.getDisplayNameByVisType)(l)}):ce.a.t("'{{visualiationType}}' is intended to show maximum {{maxNumber}} number of items. Only the first {{maxNumber}} items will be used and saved.",{visualiationType:Object(K.getDisplayNameByVisType)(l),maxNumber:p}),o.forEach((function(e,t){e.isActive=t<p}))),r===K.DIMENSION_ID_DATA)return y.a.createElement(K.DataDimension,Object.assign({displayNameProp:t,selectedDimensions:o,infoBoxMessage:e},s));if(r===K.DIMENSION_ID_PERIOD)return y.a.createElement(K.PeriodDimension,Object.assign({selectedPeriods:o},s));if(Object(K.filterOutFixedDimensions)(Object.keys(n.props.dimensions)).includes(r)){var d=i[r]&&i[r].name;return y.a.createElement(K.DynamicDimension,Object.assign({selectedItems:o,dialogId:r,dialogTitle:d},s))}return null}())})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.dialogId,r=t.dimensions,a=!n||n===K.DIMENSION_ID_ORGUNIT;return y.a.createElement(pi.a,{"data-test":"dialog-manager",open:n in r,onClose:function(){return e.props.closeDialog(null)},maxWidth:"lg",disableEnforceFocus:!0,keepMounted:a},this.renderDialogContent(),y.a.createElement(mi.a,null,y.a.createElement(Tc,null),n&&y.a.createElement(Vc,{dialogId:n})))}}]),t}(O.Component);Yc.contextTypes={d2:ra.a.object},Yc.defaultProps={dialogId:null,dxIds:[]};var Gc=Object(g.connect)((function(e){return{displayNameProperty:ln(e),dialogId:ut(e),dimensions:Wt(e),metadata:en(e),parentGraphMap:lt(e),dxIds:bt(e,K.DIMENSION_ID_DATA),ouIds:bt(e,K.DIMENSION_ID_ORGUNIT),selectedItems:ot(e),type:rt(e),getAxisIdByDimensionId:function(t){return ft(e,t)}}}),{closeDialog:lr,setRecommendedIds:function(e){return{type:Xt,value:e}},setUiItems:nr,addMetadata:br,addUiItems:rr,removeUiItems:ar,addParentGraphMap:cr})(Yc),Fc=function(e,t){e.dataTransfer.setData("text",JSON.stringify({dimensionId:e.target.dataset.dimensionid,source:t}))},Hc=function(e){return JSON.parse(e.dataTransfer.getData("text"))},zc={divContainer:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:Ur.a.grey050}},Wc=n(2056),Xc=n.n(Wc),qc=n(800),Qc=n.n(qc),Kc=n(804),Zc=n.n(Kc),Jc=n(807),$c=n.n(Jc),es=n(529),ts=n.n(es),ns=n(802),rs=n.n(ns),as={tableContainer:{marginTop:"20px"},nameColumn:{width:"80%"},axisColumn:{width:"10%"},coloredColumn:{backgroundColor:Ur.a.grey100},tableCell:{padding:"4px 24px",borderBottom:"1px solid ".concat(Ur.a.grey300)},head:{borderBottom:"none"},axisRadio:{padding:"0px 10px"},dialogContent:{marginBottom:"0px"},helpText:{lineHeight:"1.5"},dialogActions:{border:"none"}};function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ss=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),cs(Object($r.a)(n),"state",{items:void 0}),cs(Object($r.a)(n),"setItems",(function(e){var t=e.reduce((function(e,t){return e[t.id]=t,e}),{});n.setState({items:t})})),cs(Object($r.a)(n),"onAxisChange",(function(e,t){n.setState({items:os({},n.state.items,Object(j.a)({},e.id,os({},e,{axis:t})))})})),cs(Object($r.a)(n),"getAxes",(function(){var e=Object.keys(n.state.items).reduce((function(e,t){var r=n.state.items[t].axis;return r>0&&(e[t]=r),e}),{});return Object.keys(e).length>0?e:et.axes})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"componentDidMount",value:function(){this.setItems(this.props.items)}},{key:"componentDidUpdate",value:function(e){var t=e.items,n=this.props.items;Object(_c.a)(t,n)||this.setItems(n)}},{key:"renderTable",value:function(){var e=this,t=this.props.classes;return y.a.createElement(Qc.a,null,y.a.createElement("colgroup",null,y.a.createElement("col",{className:t.nameColumn}),y.a.createElement("col",{className:"".concat(t.axisColumn," ").concat(t.coloredColumn)}),y.a.createElement("col",{className:t.axisColumn})),y.a.createElement(Zc.a,null,y.a.createElement($c.a,null,y.a.createElement(ts.a,{className:t.head}),y.a.createElement(ts.a,{className:"".concat(t.tableCell," ").concat(t.head),align:"center"},ce.a.t("Axis 1")),y.a.createElement(ts.a,{className:"".concat(t.tableCell," ").concat(t.head),align:"center"},ce.a.t("Axis 2")))),y.a.createElement(rs.a,null,Object.keys(this.state.items).map((function(n){var r=e.state.items[n];return y.a.createElement($c.a,{key:"multiaxis-table-row-".concat(n)},y.a.createElement(ts.a,{className:t.tableCell},r.name),y.a.createElement(ts.a,{className:t.tableCell,align:"center"},y.a.createElement(Xc.a,{onClick:function(){return e.onAxisChange(r,0)},checked:0===r.axis,className:t.axisRadio})),y.a.createElement(ts.a,{className:t.tableCell,align:"center"},y.a.createElement(Xc.a,{onClick:function(){return e.onAxisChange(r,1)},checked:1===r.axis,className:t.axisRadio})))}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.isOpen,a=t.dialogMaxWidth,i=t.onCancelClick;return y.a.createElement(pi.a,{open:r,maxWidth:a,onClose:i,disableEnforceFocus:!0},y.a.createElement(Oi.a,null,ce.a.t("Manage axes")),y.a.createElement(bi.a,{className:n.dialogContent},y.a.createElement("p",{className:n.helpText},ce.a.t("A chart can have two axes. Each axis will have its own scale. Set the axis for each data selection below.")),y.a.createElement("div",{className:n.tableContainer},this.state.items&&this.renderTable())),y.a.createElement(mi.a,{className:n.dialogActions},y.a.createElement(fa.a,{color:"primary",disableRipple:!0,disableFocusRipple:!0,onClick:i},ce.a.t("Cancel")),y.a.createElement(fa.a,{color:"primary",variant:"contained",onClick:function(){return e.props.onUpdateClick(e.getAxes(),e.props.ui)}},ce.a.t("Update"))))}}]),t}(O.Component);ss.defaultProps={classes:{},isOpen:!1,items:[],onUpdateClick:Function.prototype,onCancelClick:Function.prototype,dialogMaxWidth:"md"};var ls=Object(g.connect)((function(e){return{isOpen:"axisSetup"===ut(e),items:Xr(e),ui:nt(e)}}),(function(e){return{onUpdateClick:function(t,n){e(fr(t)),e(Vn(os({},n,{axes:t}))),e(lr())},onCancelClick:function(){return e(lr())}}}))(Object(E.withStyles)(as)(ss));function us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ps=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),us(Object($r.a)(n),"state",{dimensionMenuAnchorEl:null,dimensionId:null}),us(Object($r.a)(n),"onDimensionOptionsClick",(function(e,t){e.stopPropagation(),n.setState({dimensionMenuAnchorEl:e.currentTarget,dimensionId:t})})),us(Object($r.a)(n),"onDimensionOptionsClose",(function(){return n.setState({dimensionMenuAnchorEl:null,dimensionId:null})})),us(Object($r.a)(n),"onDimensionDragStart",(function(e){Fc(e,se)})),us(Object($r.a)(n),"disabledDimension",(function(e){return n.props.disallowedDimensions.includes(e)})),us(Object($r.a)(n),"lockedDimension",(function(e){return n.props.lockedDimensions.includes(e)})),us(Object($r.a)(n),"getUiAxisId",(function(){var e=It(n.props.ui);return de(e.layout)[n.state.dimensionId]})),us(Object($r.a)(n),"getNumberOfDimensionItems",(function(){return(n.props.itemsByDimension[n.state.dimensionId]||[]).length})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this;return y.a.createElement("div",{style:zc.divContainer},y.a.createElement(K.DimensionsPanel,{dimensions:this.props.dimensions,selectedIds:this.props.selectedIds,disabledDimension:this.disabledDimension,lockedDimension:this.lockedDimension,recommendedDimension:function(t){return e.props.recommendedIds.includes(t)},onDimensionOptionsClick:this.onDimensionOptionsClick,onDimensionDragStart:this.onDimensionDragStart,onDimensionClick:this.props.onDimensionClick}),y.a.createElement(K.DimensionMenu,{dimensionId:this.state.dimensionId,currentAxisId:this.getUiAxisId(),visType:this.props.ui.type,numberOfDimensionItems:this.getNumberOfDimensionItems(),dualAxisItemHandler:this.props.dualAxisItemHandler,axisItemHandler:this.props.axisItemHandler,removeItemHandler:this.props.removeItemHandler,anchorEl:this.state.dimensionMenuAnchorEl,onClose:this.onDimensionOptionsClose}),y.a.createElement(Gc,null))}}]),t}(O.Component),ds=Object(ta.a)([rt],(function(e){return Object(K.getDisallowedDimensions)(e)})),ms=Object(ta.a)([rt],(function(e){return Object(K.getLockedDimensions)(e)})),fs=Object(g.connect)((function(e){return{ui:a.sGetUi(e),dimensions:o.sGetDimensions(e),selectedIds:a.sGetDimensionIdsFromLayout(e),recommendedIds:c.sGetRecommendedIds(e),layout:a.sGetUiLayout(e),itemsByDimension:a.sGetUiItems(e),disallowedDimensions:ds(e),lockedDimensions:ms(e)}}),(function(e){return{onDimensionClick:function(t){return e(d.acSetUiActiveModalDialog(t))},dualAxisItemHandler:function(){return e(lr("axisSetup"))},axisItemHandler:function(t,n,r){e(er(Object(j.a)({},t,n))),r>0&&e(lr(t))},removeItemHandler:function(t){e(tr(t))}}}))(ps),bs=n(2060),hs=n.n(bs),Os={wrapper:{position:"relative",width:"380px"},container:{position:"absolute",height:"100%",width:"100%"}};var ys=function(e){function t(){var e,n,r,a,i;Object(Qr.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(c))),r=Object($r.a)(n),i=function(e){if(e){var t="/".concat(n.props.id,"/interpretation/").concat(e.id);L.location.pathname!==t&&(L.push(t),n.props.acSetUiInterpretation({id:e.id,created:e.created}))}else L.push("/".concat(n.props.id))},(a="onInterpretationChange")in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.id,r=e.interpretationId;return n?y.a.createElement("div",{style:Os.wrapper},y.a.createElement("div",{style:Os.container},y.a.createElement(hs.a,{d2:this.context.d2,type:t,id:n,currentInterpretationId:r,onCurrentInterpretationChange:this.onInterpretationChange}))):null}}]),t}(O.Component);ys.defaultProps={type:"chart"},ys.contextTypes={d2:ra.a.object};var gs=Object(g.connect)((function(e){return{interpretationId:dt(e).id||null}}),{acSetUiInterpretation:dr,acClearUiInterpretation:mr})(ys),Es={chartCanvas:{display:"flex",justifyContent:"center",height:"100%"}},vs=n(2195),Is=n.n(vs),js=n(178),Ss=n.n(js),Ds=n(184),xs=n.n(Ds),ws=n(321),As=n.n(ws);function _s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ps(e,t,n){return t&&Ts(e.prototype,t),n&&Ts(e,n),e}function Ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(n),!0).forEach((function(t){Ns(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ls(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Us(e,t)}function ks(e){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Us(e,t){return(Us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ms(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?Ms(e):t}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ys="yearlySeries",Gs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cs(Ns({},"name",e),t)},Fs={reportTable:[Gs("cumulative",{option:!0}),Gs("hideEmptyColumns",{option:!0}),Gs("legendDisplayStyle",{option:!0}),Gs("measureCriteria",{option:!0}),Gs("numberType",{option:!0}),Gs("regression",{option:!0}),Gs("reportParams",{option:!0}),Gs("skipRounding",{option:!0})],chart:[Gs("category",{excluded:!0}),Gs("series",{excluded:!0}),Gs(Ys)],eventReport:[Gs("dataType")],reportTable_eventReport:[Gs("colSubTotals",{option:!0}),Gs("colTotals",{option:!0}),Gs("displayDensity",{option:!0}),Gs("fontSize",{option:!0}),Gs("hideEmptyRows",{option:!0}),Gs("rowSubTotals",{option:!0}),Gs("rowTotals",{option:!0}),Gs("showDimensionLabels",{option:!0}),Gs("showHierarchy",{option:!0})],chart_eventChart:[Gs("baseLineLabel",{option:!0}),Gs("baseLineValue",{option:!0}),Gs("colorSet",{option:!0}),Gs("cumulativeValues",{option:!0}),Gs("domainAxisLabel",{option:!0}),Gs("hideEmptyRowItems",{option:!0}),Gs("hideLegend",{option:!0}),Gs("noSpaceBetweenColumns",{option:!0}),Gs("percentStackedValues",{option:!0}),Gs("rangeAxisDecimals",{option:!0}),Gs("rangeAxisLabel",{option:!0}),Gs("rangeAxisMaxValue",{option:!0}),Gs("rangeAxisMinValue",{option:!0}),Gs("rangeAxisSteps",{option:!0}),Gs("regressionType",{option:!0}),Gs("showData",{option:!0}),Gs("targetLineLabel",{option:!0}),Gs("targetLineValue",{option:!0}),Gs("type",{option:!0})],eventReport_eventChart:[Gs("attributeValueDimension"),Gs("collapseDataDimensions"),Gs("dataElementValueDimension"),Gs("endDate"),Gs("eventStatus",{option:!0}),Gs("hideNaData",{option:!0}),Gs("outputType",{option:!0}),Gs("program"),Gs("programStage"),Gs("programStatus",{option:!0}),Gs("startDate"),Gs("value")],reportTable_chart_eventReport:[Gs("legendDisplayStrategy",{option:!0}),Gs("legendSet",{option:!0})],reportTable_eventReport_eventChart:[Gs("columnDimensions",{excluded:!0}),Gs("rowDimensions",{excluded:!0})],reportTable_chart_eventReport_eventChart:[Gs("access"),Gs("aggregationType",{option:!0}),Gs("attributeDimensions",{excluded:!0}),Gs("attributeValues",{excluded:!0}),Gs("categoryDimensions",{excluded:!0}),Gs("categoryOptionGroupSetDimensions",{excluded:!0}),Gs("code",{excluded:!0}),Gs("columns"),Gs("completedOnly",{option:!0}),Gs("created"),Gs("dataDimensionItems",{excluded:!0}),Gs("dataElementDimensions",{excluded:!0}),Gs("dataElementGroupSetDimensions",{excluded:!0}),Gs("description"),Gs("digitGroupSeparator"),Gs("displayDescription"),Gs("displayName"),Gs("displayShortName"),Gs("externalAccess",{excluded:!0}),Gs("favorite"),Gs("favorites"),Gs("filterDimensions",{excluded:!0}),Gs("filters"),Gs("hideSubtitle",{option:!0}),Gs("hideTitle",{option:!0}),Gs("href",{excluded:!0}),Gs("id"),Gs("interpretations"),Gs("itemOrganisationUnitGroups",{excluded:!0}),Gs("lastUpdated"),Gs("lastUpdatedBy"),Gs("name"),Gs("organisationUnitGroupSetDimensions",{excluded:!0}),Gs("organisationUnitLevels",{excluded:!0}),Gs("organisationUnits",{excluded:!0}),Gs("parentGraphMap"),Gs("periods",{excluded:!0}),Gs("programIndicatorDimensions",{excluded:!0}),Gs("publicAccess"),Gs("relativePeriods",{excluded:!0}),Gs("rows"),Gs("shortName"),Gs("sortOrder",{option:!0}),Gs("subscribed"),Gs("subscribers"),Gs("subtitle",{option:!0}),Gs("timeField"),Gs("title",{option:!0}),Gs("topLimit",{option:!0}),Gs("translations"),Gs("user"),Gs("userAccesses"),Gs("userGroupAccesses"),Gs("userOrganisationUnit",{excluded:!0}),Gs("userOrganisationUnitChildren",{excluded:!0}),Gs("userOrganisationUnitGrandChildren",{excluded:!0})]},Hs=function(e){return e.name},zs=function(e){return!0===e.excluded?Cs({},e,Ns({},"name","!".concat(e.name))):e},Ws=function(e,t,n,r){return!e&&(e=r.slice()),"!"===t.charAt(0)&&e.push(e.shift()),e},Xs="name,displayName,displayShortName",qs="dimensionItem~rename(".concat("id",")"),Qs="legendSet[".concat("id",",").concat(Xs,"]"),Ks="user[".concat(Xs,",userCredentials[username]]"),Zs="items[".concat(qs,",").concat(Xs,",dimensionItemType]"),Js="comments[".concat("id",",").concat(Ks,",lastUpdated,text"),$s="dimension,filter,".concat(Qs,",").concat(Zs),el={columns:$s,rows:$s,filters:$s,user:Ks,comments:Js,interpretations:"id,created"},tl=function(e){return"".concat(e).concat(el[e]?"[".concat(el[e],"]"):"")},nl=function(e){return function(e){return Object.entries(Fs).reduce((function(t,n){var r=Bs(n,2),a=r[0],i=r[1];return a.includes(e)?t.concat(i):t}),[])}(e).map(zs).map(Hs).sort().reduce(Ws,null).map(tl).join(",")},rl=function(e,t,n){return e.models[t].get(n,{fields:nl(t)})},al=function(e,t,n){var r,a;return D.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=(new e.analytics.request).fromModel(t).withParameters(n),i.next=3,D.a.awrap(e.analytics.aggregate.get(r));case 3:return a=i.sent,i.abrupt("return",[new e.analytics.response(a)]);case 5:case"end":return i.stop()}}))},il=function(e,t,n){var r,a,i,o,c,s,l;return D.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=(new e.analytics.request).addPeriodDimension(t.yearlySeries).withSkipData(!0).withSkipMeta(!1).withIncludeMetadataDetails(!0),n.relativePeriodDate&&(r=r.withRelativePeriodDate(n.relativePeriodDate)),u.next=4,D.a.awrap(e.analytics.aggregate.fetch(r));case 4:return a=u.sent,i=[],o=[],c=new Date,s=(""+c.getDate()).padStart(2,0),l=(""+(c.getMonth()+1)).padStart(2,0),a.metaData.dimensions.pe.forEach((function(r){o.push(a.metaData.items[r].name);var c="".concat(r,"-").concat(l,"-").concat(s),u=(new e.analytics.request).fromModel(t).withParameters(n).withRelativePeriodDate(c);i.push(e.analytics.aggregate.get(u))})),u.abrupt("return",Promise.all(i).then((function(t){return{responses:t.map((function(t){return new e.analytics.response(t)})),yearlySeriesLabels:o}})));case 12:case"end":return u.stop()}}))},ol={baseLineLabel:{defaultValue:void 0,requestable:!1},baseLineValue:{defaultValue:void 0,requestable:!1},cumulativeValues:{defaultValue:!1,requestable:!1},domainAxisLabel:{defaultValue:void 0,requestable:!1},hideEmptyRowItems:{defaultValue:"NONE",requestable:!1},hideLegend:{defaultValue:!1,requestable:!1},noSpaceBetweenColumns:{defaultValue:!1,requestable:!1},percentStackedValues:{defaultValue:!1,requestable:!1},rangeAxisDecimals:{defaultValue:void 0,requestable:!1},rangeAxisLabel:{defaultValue:void 0,requestable:!1},rangeAxisMaxValue:{defaultValue:void 0,requestable:!1},rangeAxisMinValue:{defaultValue:void 0,requestable:!1},rangeAxisSteps:{defaultValue:void 0,requestable:!1},regressionType:{defaultValue:"NONE",requestable:!1},showData:{defaultValue:!0,requestable:!1},targetLineLabel:{defaultValue:void 0,requestable:!1},targetLineValue:{defaultValue:void 0,requestable:!1},aggregationType:{defaultValue:"DEFAULT",requestable:!0},completedOnly:{defaultValue:!1,requestable:!0},hideSubtitle:{defaultValue:!1,requestable:!1},hideTitle:{defaultValue:!1,requestable:!1},sortOrder:{defaultValue:0,requestable:!1},subtitle:{defaultValue:void 0,requestable:!1},title:{defaultValue:void 0,requestable:!1}},cl=function(){return Object.entries(ol).filter((function(e){var t=Bs(e,2);t[0];return t[1].requestable}))},sl=function(e){var t=e.reduce((function(e,t){return e.metaData?t.metaData.dimensions.pe.length>e.metaData.dimensions.pe.length&&(e=t):e=t,e}),{}).metaData;return t.dimensions.pe.reduce((function(e,n){var r=t.items[n].name;return e.push(r.replace(/\s+\d{4}$/,"")),e}),[])};function ll(e){var t=e.classes;return Is.a.createElement("div",{className:t.outer},Is.a.createElement(As.a,{className:t.progress}))}ll.propTypes={classes:Ss.a.object.isRequired};var ul=Object(E.withStyles)((function(e){return{progress:{margin:2*e.spacing.unit,maxWidth:200,textAlign:"center",alignSelf:"center"},outer:{display:"flex",justifyContent:"center",height:"100%"}}}))(ll),pl=function(e){function t(e){var n;return _s(this,t),Ns(Ms(n=Vs(this,ks(t).call(this,e))),"getRequestOptions",(function(e,t){var n=cl().reduce((function(t,n){var r=Bs(n,2),a=r[0],i=r[1];return void 0!==e[a]&&e[a]!==i.defaultValue&&(t[a]=e[a]),t}),{});if(t.relativePeriodDate&&(n.relativePeriodDate=t.relativePeriodDate),t.userOrgUnit&&t.userOrgUnit.length){var r=t.userOrgUnit.map((function(e){return e.split("/").slice(-1)[0]}));n.userOrgUnit=r.join(";")}return n})),Ns(Ms(n),"getConfigById",(function(e){return rl(n.props.d2,"chart",e)})),Ns(Ms(n),"renderChart",(function(){var e,t,r,a,i,o,c,s,l,u,p,d,m;return D.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(e=n.props,t=e.config,r=e.filters,a=e.forDashboard,i=e.onResponsesReceived,o=e.onChartGenerated,c=e.onError,f.prev=1,1!==Object.keys(t).length||!t.id){f.next=8;break}return f.next=5,D.a.awrap(n.getConfigById(t.id));case 5:f.t0=f.sent,f.next=9;break;case 8:f.t0=t;case 9:if(s=f.t0,l=n.getRequestOptions(s,r),u={dashboard:a,noData:{text:xs.a.t("No data")}},p=[],!Object(K.isYearOverYear)(s.type)){f.next=24;break}return d=[],f.next=17,D.a.awrap(il(n.props.d2,s,l));case 17:m=f.sent,p=m.responses,d=m.yearlySeriesLabels,u[Ys]=d,u.xAxisLabels=sl(p),f.next=27;break;case 24:return f.next=26,D.a.awrap(al(n.props.d2,s,l));case 26:p=f.sent;case 27:p.length&&i(p),n.recreateVisualization=function(e){var t=Object(K.createVisualization)(p,s,n.canvasRef.current,Cs({},u,{animation:e}),void 0,void 0,Object(K.isSingleValue)(s.type)?"dhis":"highcharts");Object(K.isSingleValue)(s.type)?o(t.visualization):o(t.visualization.getSVGForExport({sourceHeight:768,sourceWidth:1024}))},n.recreateVisualization(),n.setState({isLoading:!1}),f.next=36;break;case 33:f.prev=33,f.t1=f.catch(1),c(f.t1);case 36:case"end":return f.stop()}}),null,null,[[1,33]])})),n.canvasRef=Is.a.createRef(),n.recreateVisualization=Function.prototype,n.state={isLoading:!0},n}return Ls(t,e),Ps(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e){Object(_c.a)(this.props.config,e.config)&&Object(_c.a)(this.props.filters,e.filters)?this.props.id===e.id&&Object(_c.a)(this.props.style,e.style)||this.recreateVisualization(0):this.renderChart()}},{key:"render",value:function(){return Is.a.createElement(vs.Fragment,null,this.state.isLoading?Is.a.createElement(ul,null):null,Is.a.createElement("div",{ref:this.canvasRef,style:this.props.style}))}}]),t}(vs.Component);pl.defaultProps={config:{},filters:{},forDashboard:!1,style:{},animation:200,onError:Function.prototype,onChartGenerated:Function.prototype,onResponsesReceived:Function.prototype},pl.propTypes={id:Ss.a.number,d2:Ss.a.object.isRequired,animation:Ss.a.number,config:Ss.a.object.isRequired,filters:Ss.a.object,forDashboard:Ss.a.bool,style:Ss.a.object,onError:Ss.a.func.isRequired,onChartGenerated:Ss.a.func,onResponsesReceived:Ss.a.func};var dl=["YEAR_OVER_YEAR_LINE","YEAR_OVER_YEAR_COLUMN"],ml=function(e){return dl.includes(e)},fl=function(e){return"SINGLE_VALUE"===e},bl=function(e){function t(e){var n;return _s(this,t),Ns(Ms(n=Vs(this,ks(t).call(this,e))),"getRequestOptions",(function(e,t){var n=cl().reduce((function(t,n){var r=Bs(n,2),a=r[0],i=r[1];return void 0!==e[a]&&e[a]!==i.defaultValue&&(t[a]=e[a]),t}),{});if(t.relativePeriodDate&&(n.relativePeriodDate=t.relativePeriodDate),t.userOrgUnit&&t.userOrgUnit.length){var r=t.userOrgUnit.map((function(e){return e.split("/").slice(-1)[0]}));n.userOrgUnit=r.join(";")}return n})),Ns(Ms(n),"getConfigById",(function(e){return rl(n.props.d2,"chart",e)})),Ns(Ms(n),"renderChart",(function(){var e,t,r,a,i,o,c,s,l,u,p,d,m;return D.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(e=n.props,t=e.config,r=e.filters,a=e.forDashboard,i=e.onResponsesReceived,o=e.onChartGenerated,c=e.onError,f.prev=1,1!==Object.keys(t).length||!t.id){f.next=8;break}return f.next=5,D.a.awrap(n.getConfigById(t.id));case 5:f.t0=f.sent,f.next=9;break;case 8:f.t0=t;case 9:if(s=f.t0,l=n.getRequestOptions(s,r),u={dashboard:a,noData:{text:xs.a.t("No data")}},p=[],!ml(s.type)){f.next=24;break}return d=[],f.next=17,D.a.awrap(il(n.props.d2,s,l));case 17:m=f.sent,p=m.responses,d=m.yearlySeriesLabels,u[Ys]=d,u.xAxisLabels=sl(p),f.next=27;break;case 24:return f.next=26,D.a.awrap(al(n.props.d2,s,l));case 26:p=f.sent;case 27:p.length&&i(p),n.recreateVisualization=function(e){var t=Object(K.createVisualization)(p,s,n.canvasRef.current,Cs({},u,{animation:e}),void 0,void 0,fl(s.type)?"dhis":"highcharts");fl(s.type)?o(t.visualization):o(t.visualization.getSVGForExport({sourceHeight:768,sourceWidth:1024}))},n.recreateVisualization(),n.setState({isLoading:!1}),f.next=36;break;case 33:f.prev=33,f.t1=f.catch(1),c(f.t1);case 36:case"end":return f.stop()}}),null,null,[[1,33]])})),n.canvasRef=Is.a.createRef(),n.recreateVisualization=Function.prototype,n.state={isLoading:!0},n}return Ls(t,e),Ps(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e){Object(_c.a)(this.props.config,e.config)&&Object(_c.a)(this.props.filters,e.filters)?this.props.id===e.id&&Object(_c.a)(this.props.style,e.style)||this.recreateVisualization(0):this.renderChart()}},{key:"render",value:function(){return Is.a.createElement(vs.Fragment,null,this.state.isLoading?Is.a.createElement(ul,null):null,Is.a.createElement("div",{ref:this.canvasRef,style:this.props.style}))}}]),t}(vs.Component);bl.defaultProps={config:{},filters:{},forDashboard:!1,style:{},animation:200,onError:Function.prototype,onChartGenerated:Function.prototype,onResponsesReceived:Function.prototype},bl.propTypes={id:Ss.a.number,d2:Ss.a.object.isRequired,animation:Ss.a.number,config:Ss.a.object.isRequired,filters:Ss.a.object,forDashboard:Ss.a.bool,style:Ss.a.object,onError:Ss.a.func.isRequired,onChartGenerated:Ss.a.func,onResponsesReceived:Ss.a.func};var hl=function(e){return e.config.type&&"PIVOT_TABLE"!==e.config.type?Is.a.createElement(pl,e):Is.a.createElement(bl,e)};function Ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ol(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ol(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl={fontWeight:"bold",marginTop:"30px",lineHeight:"22px"},El={outer:{display:"flex",justifyContent:"center",height:"100%"},inner:{maxWidth:500,textAlign:"center",alignSelf:"center",position:"relative",top:"-20%"},title:yl({},gl,{color:Ur.a.grey700}),description:yl({},gl,{color:Ur.a.grey500})},vl=n(2197),Il=n.n(vl),jl=ce.a.t("Create a new visualization by adding dimensions to the layout"),Sl=function(e){return y.a.createElement("p",{style:El.title},e)},Dl=Object(g.connect)((function(e){return{error:_r(e)}}))((function(e){var t=e.error,n=t?y.a.createElement("div",null,y.a.createElement("img",{src:Il.a,alt:ce.a.t("Chart error")}),Sl(t)):Sl(jl);return y.a.createElement("div",{style:El.outer},y.a.createElement("div",{style:El.inner},n))}));function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wl=function(e){function t(e){var n;return Object(Qr.a)(this,t),n=Object(Zr.a)(this,Object(Jr.a)(t).call(this,e)),xl(Object($r.a)(n),"onError",(function(e){var t=e&&e.message||ce.a.t("Error generating chart, please try again");n.props.acSetLoadError(t)})),xl(Object($r.a)(n),"onChartGenerated",(function(e){return n.props.acSetChart(e)})),xl(Object($r.a)(n),"onResponsesReceived",(function(e){var t={};e.forEach((function(e){return Object.entries(e.metaData.items).forEach((function(e){var n=Object(v.a)(e,2),r=n[0],a=n[1];t[r]={id:r,name:a.name||a.displayName,displayName:a.displayName}}))})),n.props.acAddMetadata(t)})),xl(Object($r.a)(n),"getNewRenderId",(function(){return n.setState({renderId:"number"===typeof n.state.renderId?n.state.renderId+1:1})})),xl(Object($r.a)(n),"addResizeHandler",(function(){window.addEventListener("resize",Object(Ac.a)((function(){n.getNewRenderId()}),300))})),n.state={renderId:null},n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"componentDidMount",value:function(){this.addResizeHandler()}},{key:"componentDidUpdate",value:function(e){this.props.rightSidebarOpen!==e.rightSidebarOpen&&this.getNewRenderId()}},{key:"render",value:function(){var e=this.props,t=e.visConfig,n=e.visFilters,r=e.error,a=this.state.renderId;return Boolean(!t||r)?y.a.createElement(Dl,null):y.a.createElement(hl,{id:a,d2:this.context.d2,config:t,filters:n,onChartGenerated:this.onChartGenerated,onResponsesReceived:this.onResponsesReceived,onError:this.onError,style:Es.chartCanvas})}}]),t}(O.Component);wl.contextTypes={d2:ra.a.object};var Al=Object(ta.a)([Vt,q,dt],(function(e,t,n){return n.id?t:e})),_l=Object(ta.a)([dt],(function(e){return e.created?{relativePeriodDate:e.created}:{}})),Tl=Object(g.connect)((function(e){return{visConfig:Al(e),visFilters:_l(e),rightSidebarOpen:pt(e),error:_r(e)}}),{acAddMetadata:br,acSetChart:function(e){return{type:"SET_CHART",value:e}},acSetLoadError:Tr})(wl),Pl=n(970),Nl=n.n(Pl),Rl=n(523),Cl=n.n(Rl),Ll=n(244),kl=n.n(Ll);function Ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ul(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ul(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vl=function(e){var t=e.style;return y.a.createElement("svg",{style:Ml({},t),xmlns:"http://www.w3.org/2000/svg",width:"22",height:"24",viewBox:"0 0 24 24"},y.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),y.a.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))},Bl={icon:{width:22,height:22,background:"none",color:Ur.a.black,padding:0}};function Yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gl=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),Yl(Object($r.a)(n),"state",{anchorEl:null}),Yl(Object($r.a)(n),"handleClick",(function(e){e.stopPropagation(),n.setState({anchorEl:e.currentTarget})})),Yl(Object($r.a)(n),"handleClose",(function(e){n.setState({anchorEl:null})})),Yl(Object($r.a)(n),"getMenuId",(function(){return"menu-for-".concat(n.props.id)})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(kl.a,{"aria-owns":this.state.anchorEl?this.getMenuId():null,"aria-haspopup":"true",onClick:this.handleClick,style:Bl.icon},y.a.createElement(Vl,{style:Bl.icon})),y.a.createElement(K.DimensionMenu,{dimensionId:this.props.dimensionId,currentAxisId:this.props.currentAxisId,visType:this.props.visType,numberOfDimensionItems:this.props.numberOfDimensionItems,dualAxisItemHandler:this.props.dualAxisItemHandler,axisItemHandler:this.props.axisItemHandler,removeItemHandler:this.props.removeItemHandler,anchorEl:this.state.anchorEl,onClose:this.handleClose}))}}]),t}(y.a.Component),Fl=Object(g.connect)(null,(function(e){return{dualAxisItemHandler:function(){return e(lr("axisSetup"))},axisItemHandler:function(t,n,r){e(er(Object(j.a)({},t,n)))},removeItemHandler:function(t){e(tr(t))}}}))(Gl),Hl=n(278),zl=n.n(Hl),Wl=n(239),Xl=n.n(Wl),ql={tooltip:{fontFamily:"roboto",padding:"7px 9px",color:Ur.a.white,fontSize:"12px",backgroundColor:Ur.a.grey900,boxShadow:"none",borderRadius:"3px",position:"relative",top:"5px"},list:{listStyleType:"none",margin:"0px",marginBottom:"-3px",padding:"0px"},item:{marginBottom:"3px"},icon:{fontSize:"13px",marginRight:"6px"},iconWrapper:{display:"flex",alignItems:"center",marginBottom:"5px"}};function Ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kl={noneSelected:ce.a.t("None selected"),onlyOneInUse:function(e){return ce.a.t("Only '{{name}}' in use",{name:e})},onlyLimitedNumberInUse:function(e){return ce.a.t("Only '{{number}}' in use",{number:e})}},Zl=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),Ql(Object($r.a)(n),"renderTooltip",(function(e,t){return y.a.createElement(zl.a,{anchorEl:n.props.anchorEl,open:n.props.open,placement:"bottom-start"},y.a.createElement(Xl.a,{style:ql.tooltip},y.a.createElement("ul",{style:ql.list},t&&y.a.createElement("li",{style:ql.item},y.a.createElement("div",{style:ql.iconWrapper},y.a.createElement(Nl.a,{style:ql.icon}),y.a.createElement("span",null,t))),n.props.lockedLabel&&y.a.createElement("li",{style:ql.item},y.a.createElement("div",{style:ql.iconWrapper},y.a.createElement(Cl.a,{style:ql.icon}),y.a.createElement("span",null,n.props.lockedLabel))),e.map((function(e){return y.a.createElement("li",{key:"".concat(n.props.dimensionId,"-").concat(e),style:ql.item},e)})))))})),Ql(Object($r.a)(n),"getLimitedLabel",(function(e,t){return 1===e.length?Kl.onlyOneInUse(t[e[0]]?t[e[0]].name:e[0]):Kl.onlyLimitedNumberInUse(e.length)})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this.props,t=e.itemIds,n=e.metadata,r=e.displayLimitedAmount,a=[],i=r?this.getLimitedLabel(t,n):null;return t.length&&!r?a.push.apply(a,Object(Y.a)(t.map((function(e){return n[e]?n[e].name:e})))):t.length||a.push(Kl.noneSelected),this.renderTooltip(a,i)}}]),t}(y.a.Component),Jl=Object(g.connect)((function(e,t){return{metadata:en(e)}}))(Zl),$l=function(){return y.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},y.a.createElement("g",{id:"Exp",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("g",{id:"Artboard",transform:"translate(-80.000000, -9.000000)"},y.a.createElement("g",{id:"icon_dimension_new",transform:"translate(80.000000, 9.000000)"},y.a.createElement("rect",{id:"frame",x:"0",y:"0",width:"16",height:"16"}),y.a.createElement("g",{id:"module",transform:"translate(4.000000, 4.000000)",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round"},y.a.createElement("path",{d:"M0.33209728,1.1742111 L3.16308174,0.0641666694 C3.37911767,-0.0213888898 3.61963794,-0.0213888898 3.83567387,0.0641666694 L6.66665833,1.1742111 C6.87300668,1.26220739 7.00497003,1.467 6.99984343,1.69127776 L6.99984343,5.30887771 C7.00517859,5.53285411 6.87376309,5.73756106 6.66790272,5.82594437 L3.83691826,6.93629991 C3.62076407,7.02123336 3.38048032,7.02123336 3.16432613,6.93629991 L0.333341668,5.82594437 C0.126993317,5.73794808 -0.00497002591,5.53315547 0.000156574133,5.30887771 L0.000156574133,1.69127776 C-0.00517858533,1.46730136 0.126236906,1.26259441 0.33209728,1.1742111 Z",id:"Shape"}),y.a.createElement("path",{d:"M3.5,2.72795833 L0.322,1.48195833",id:"Shape"}),y.a.createElement("path",{d:"M3.5,2.72795833 L6.678,1.48195833",id:"Shape"}),y.a.createElement("path",{d:"M3.5,6.78125 L3.5,2.72795833",id:"Shape"}))))))},eu=Ur.a.grey300,tu=Ur.a.white,nu=Ur.a.grey900;function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iu={chipWrapper:{display:"flex",margin:"4px",backgroundColor:Ur.d.secondary200,borderRadius:"2px",alignItems:"center"},chip:{padding:"1px 6px",fontSize:"14px",fontWeight:400,color:nu,cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minHeight:24,userSelect:"none"},chipEmpty:{backgroundColor:Ur.a.grey300},fixedDimensionIcon:{paddingRight:"6px"},iconWrapper:{paddingRight:"6px",display:"flex",alignItems:"center"},warningIcon:{fontSize:"14px"},warningIconWrapper:{paddingLeft:"6px",display:"flex",alignItems:"center"},lockIcon:{fontSize:"14px"},lockIconWrapper:{paddingLeft:"6px",display:"flex",alignItems:"center"}};function ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}iu.chipLeft=au({},iu.chip,{display:"flex",borderTopRightRadius:"0px",borderBottomRightRadius:"0px",alignItems:"center"}),iu.chipRight=au({},iu.chip,{paddingLeft:"0px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"});var su=500,lu=[],uu=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),cu(Object($r.a)(n),"state",{tooltipOpen:!1}),cu(Object($r.a)(n),"id",Math.random().toString(36)),cu(Object($r.a)(n),"timeout",null),cu(Object($r.a)(n),"handleMouseOver",(function(){null===n.timeout&&(n.timeout=setTimeout((function(){return n.setState({tooltipOpen:!0})}),su))})),cu(Object($r.a)(n),"handleMouseOut",(function(){"number"===typeof n.timeout&&(clearTimeout(n.timeout),n.timeout=null,n.setState({tooltipOpen:!1}))})),cu(Object($r.a)(n),"handleClick",(function(e){n.props.onClick(e),n.handleMouseOut()})),cu(Object($r.a)(n),"getDragStartHandler",(function(e){return function(t){n.handleMouseOut(),Fc(t,e)}})),cu(Object($r.a)(n),"getIconByDimension",(function(){if(K.FIXED_DIMENSIONS[n.props.dimensionId]){var e=K.FIXED_DIMENSIONS[n.props.dimensionId].icon;return y.a.createElement(e,{style:iu.fixedDimensionIcon})}return y.a.createElement($l,{style:iu.dynamicDimensionIcon})})),cu(Object($r.a)(n),"renderChip",(function(){var e=n.props.axisId,t=n.props.type,r=n.props.items.length,a=Object(K.getLockedDimensionAxis)(t,n.props.dimensionId).includes(e),i=a?ce.a.t("{{dimensionName}} is locked to {{axisName}} for {{visTypeName}}",{dimensionName:n.props.dimensionName,axisName:Object(K.getDisplayNameByVisType)(t),visTypeName:Object(K.getAxisName)(e)}):null,o=Object(K.getMaxNumberOfItemsPerAxis)(t,e),c=!!o,s=c&&r>o?ce.a.t("{{total}} of {{maxNumberOfItemsPerAxis}} selected",{total:r,maxNumberOfItemsPerAxis:o}):ce.a.t("{{total}} selected",{total:r}),l=c?n.props.items.slice(0,o):n.props.items,u="".concat(n.props.dimensionName).concat(r>0?": ".concat(s):""),p=document.getElementById(n.id),d=n.getIconByDimension(),m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ou(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ou(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},iu.chipWrapper,{},r?{}:iu.chipEmpty),f=Object(K.hasTooManyItemsPerAxis)(t,e,r)?y.a.createElement("div",{style:iu.warningIconWrapper},y.a.createElement(Nl.a,{style:iu.warningIcon})):null,b=a?y.a.createElement("div",{style:iu.lockIconWrapper},y.a.createElement(Cl.a,{style:iu.lockIcon})):null;return y.a.createElement("div",{style:m,"data-dimensionid":n.props.dimensionId,draggable:!a,onDragStart:n.getDragStartHandler(n.props.axisId)},y.a.createElement("div",{id:n.id,style:iu.chipLeft,onClick:n.handleClick,onMouseOver:n.handleMouseOver,onMouseOut:n.handleMouseOut},y.a.createElement("div",{style:iu.iconWrapper},d),u,f,b),!a&&y.a.createElement("div",{style:iu.chipRight},y.a.createElement(Fl,{dimensionId:n.props.dimensionId,currentAxisId:n.props.axisId,visType:n.props.type,numberOfDimensionItems:n.props.items.length})),p&&y.a.createElement(Jl,{dimensionId:n.props.dimensionId,itemIds:l,lockedLabel:i,displayLimitedAmount:n.props.items.length>l.length,open:n.state.tooltipOpen,anchorEl:p}))})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){return this.props.dimensionId?this.renderChip():""}}]),t}(y.a.Component),pu=Object(g.connect)((function(e,t){return{dimensionName:(Wt(e)[t.dimensionId]||{}).name,items:bt(e,t.dimensionId)||lu,metadata:en(e),type:rt(e)}}))(uu),du={ct:{display:"flex",minHeight:"78px"},axisGroup:{display:"flex",flexDirection:"column"},axisGroupLeft:{flexBasis:"".concat(100-parseInt("67%",10),"%")},axisGroupRight:{flexBasis:"67%"},columns:{flexBasis:"50%"},rows:{flexBasis:"50%"},filters:{flexBasis:"100%"}},mu={axisContainer:{display:"flex",backgroundColor:tu,borderColor:eu,borderStyle:"solid",borderWidth:"0px 0px 1px 1px",padding:"4px 4px 2px 6px"},axisContainerLeft:{borderLeftWidth:0},label:{minWidth:55,maxWidth:55,padding:"2px 0px 0px 0px",fontSize:11,color:Ur.a.grey700,userSelect:"none",letterSpacing:"0.2px"},content:{display:"flex",alignItems:"flex-start",alignContent:"flex-start",flexWrap:"wrap",minHeight:du.DIMENSION_AXIS_CONTENT_HEIGHT}};function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fu(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ou=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),hu(Object($r.a)(n),"onDragOver",(function(e){e.preventDefault()})),hu(Object($r.a)(n),"onDrop",(function(e){e.preventDefault();var t=Hc(e),r=t.dimensionId,a=t.source;n.props.onAddDimension(Object(j.a)({},r,n.props.axisId));var i=n.props.itemsByDimension[r],o=Boolean(!i||!i.length);a===se&&o&&n.props.onDropWithoutItems(r)})),hu(Object($r.a)(n),"isMoveSupported",(function(){return!Object(K.isYearOverYear)(n.props.type)})),hu(Object($r.a)(n),"getAxisMenuItems",(function(e){return K.DEFAULT_AXIS_IDS.filter((function(e){return e!==n.props.axisId})).map((function(t){return y.a.createElement(ka.a,{key:"".concat(e,"-to-").concat(t),onClick:n.props.getMoveHandler(Object(j.a)({},e,t))},"".concat(ce.a.t("Move to")," ").concat(ue[t]))}))})),hu(Object($r.a)(n),"isSeries",(function(){return n.props.axisId===K.AXIS_ID_COLUMNS})),hu(Object($r.a)(n),"isData",(function(e){return e===K.DIMENSION_ID_DATA})),hu(Object($r.a)(n),"getItemsArrayByDimension",(function(e){return n.props.itemsByDimension[e]||[]})),hu(Object($r.a)(n),"shouldHaveDualAxis",(function(e){return Boolean(n.isSeries()&&n.isData(e)&&Object(K.isDualAxisType)(n.props.type)&&n.getItemsArrayByDimension(n.props.axis[0]).length>1)})),hu(Object($r.a)(n),"getDualAxisItem",(function(e){return y.a.createElement(ka.a,{key:"dual-axis-".concat(e),onClick:n.props.onOpenAxisSetup},ce.a.t("Manage axes"))})),hu(Object($r.a)(n),"getRemoveMenuItem",(function(e){return y.a.createElement(ka.a,{key:"remove-".concat(e),onClick:n.props.getRemoveHandler(e)},ce.a.t("Remove"))})),hu(Object($r.a)(n),"getDividerItem",(function(e){return y.a.createElement(Na.a,{light:!0,key:e})})),hu(Object($r.a)(n),"getMenuItems",(function(e){return[n.shouldHaveDualAxis(e)?n.getDualAxisItem(e):null,n.shouldHaveDualAxis(e)?n.getDividerItem("dual-axis-menu-divider"):null].concat(Object(Y.a)(n.isMoveSupported()?n.getAxisMenuItems(e):[]),[n.getRemoveMenuItem(e)])})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this;return y.a.createElement("div",{id:this.props.axisId,style:bu({},mu.axisContainer,{},this.props.style),onDragOver:this.onDragOver,onDrop:this.onDrop},y.a.createElement("div",{style:mu.label},Object(K.getAxisName)(this.props.axisId)),y.a.createElement("div",{style:mu.content},this.props.axis.map((function(t){return y.a.createElement(pu,{key:"".concat(e.props.axisId,"-").concat(t),onClick:e.props.getOpenHandler(t),axisId:e.props.axisId,dimensionId:t})}))))}}]),t}(y.a.Component),yu=Object(g.connect)((function(e){return{ui:nt(e)}}),(function(e){return{onAddDimension:function(t){return e(er(t))},onDropWithoutItems:function(t){return e(lr(t))},getOpenHandler:function(t){return function(){return e(lr(t))}}}}),(function(e,t,n){var r=It(e.ui);return bu({axis:r.layout[n.axisId],itemsByDimension:r.itemsByDimension,type:r.type},t,{},n)}))(Ou);function gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gu(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vu=function(){return y.a.createElement("div",{id:"layout-ct",style:du.ct},y.a.createElement("div",{id:"axis-group-1",style:Eu({},du.axisGroup,{},du.axisGroupLeft)},y.a.createElement(yu,{axisId:"columns",style:Eu({},du.columns,{},mu.axisContainerLeft)}),y.a.createElement(yu,{axisId:"rows",style:Eu({},du.rows,{},mu.axisContainerLeft)})),y.a.createElement("div",{id:"axis-group-2",style:Eu({},du.axisGroup,{},du.axisGroupRight)},y.a.createElement(yu,{axisId:"filters",style:du.filters})))};vu.displayName="Layout";var Iu=vu,ju={flex:"1 1 0%"};function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xu=Object(g.connect)((function(e){return{yearOverYearSeries:ct(e),yearOverYearCategory:st(e)}}))((function(e){return y.a.createElement("div",{id:e.axisId,style:Du({},mu.axisContainer,{},e.style)},y.a.createElement("div",{className:"label",style:mu.label},Object(K.getAxisName)(e.axisId)),y.a.createElement("div",{className:"content",style:Du({},mu.content,{},ju)},e.children))})),wu={displayProps:{background:"transparent",marginLeft:"4px"}};function Au(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _u=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),Au(Object($r.a)(n),"state",{open:!1}),Au(Object($r.a)(n),"handleClose",(function(){n.setState({open:!1})})),Au(Object($r.a)(n),"handleOpen",(function(){n.setState({open:!0})})),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){return y.a.createElement(ki.a,{disableUnderline:!0,multiple:Boolean(this.props.multiple),open:this.state.open,onChange:this.props.onChange,onClose:this.handleClose,onOpen:this.handleOpen,value:this.props.value,SelectDisplayProps:{style:wu.displayProps}},this.props.options.map((function(e){return y.a.createElement(ka.a,{key:e.id,value:e.id},e.name)})))}}]),t}(y.a.Component),Tu={axisGroupLeft:{flexBasis:"".concat(100-parseInt("67%",10),"%")},axisGroupRight:{flexBasis:"67%"}},Pu=[{id:"THIS_YEAR",name:ce.a.t("This year")},{id:"LAST_YEAR",name:ce.a.t("Last year")},{id:"LAST_5_YEARS",name:ce.a.t("Last 5 years")}].concat(Object(Y.a)(function(e){var t=(new Date).getFullYear();return new Array(e).fill(null).map((function(e){return{id:String(t),name:t--}}))}(10))),Nu=[{id:"LAST_3_DAYS",name:ce.a.t("Last 3 days")},{id:"LAST_7_DAYS",name:ce.a.t("Last 7 days")},{id:"LAST_14_DAYS",name:ce.a.t("Last 14 days")},{id:"LAST_4_WEEKS",name:ce.a.t("Last 4 weeks")},{id:"LAST_12_WEEKS",name:ce.a.t("Last 12 weeks")},{id:"LAST_52_WEEKS",name:ce.a.t("Last 52 weeks")},{id:"WEEKS_THIS_YEAR",name:ce.a.t("Weeks per year")},{id:"LAST_3_MONTHS",name:ce.a.t("Last 3 months")},{id:"LAST_6_MONTHS",name:ce.a.t("Last 6 months")},{id:"LAST_12_MONTHS",name:ce.a.t("Last 12 months")},{id:"MONTHS_THIS_YEAR",name:ce.a.t("Months per year")},{id:"LAST_6_BIMONTHS",name:ce.a.t("Last 6 bimonths")},{id:"BIMONTHS_THIS_YEAR",name:ce.a.t("Bimonths per year")},{id:"LAST_4_QUARTERS",name:ce.a.t("Last 4 quarters")},{id:"QUARTERS_THIS_YEAR",name:ce.a.t("Quarters per year")},{id:"LAST_2_SIXMONTHS",name:ce.a.t("Last 2 six-months")}];function Ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ru(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ru(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lu=function(e){return y.a.createElement("div",{id:"layout-ct",style:du.ct},y.a.createElement("div",{id:"axis-group-1",style:Cu({},du.axisGroup,{},Tu.axisGroupLeft)},y.a.createElement(xu,{axisId:"yearOverYearSeries",style:Cu({},du.columns,{},mu.axisContainerLeft)},y.a.createElement(_u,{multiple:"true",value:e.yearOverYearSeries,onChange:e.onSeriesChange,options:Pu})),y.a.createElement(xu,{axisId:"yearOverYearCategory",style:Cu({},du.rows,{},mu.axisContainerLeft)},y.a.createElement(_u,{value:e.yearOverYearCategory[0],onChange:e.onCategoryChange,options:Nu}))),y.a.createElement("div",{id:"axis-group-2",style:Cu({},du.axisGroup,{},Tu.axisGroupRight)},y.a.createElement(yu,{axisId:K.AXIS_ID_FILTERS,style:du.filters})))};Lu.displayName="Layout";var ku=Object(g.connect)((function(e){return{yearOverYearSeries:ct(e),yearOverYearCategory:st(e)}}),(function(e){return{onSeriesChange:function(t){t.target.value.length&&e(ir(t.target.value))},onCategoryChange:function(t){return e(or(t.target.value))}}}))(Lu);function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vu,Bu=function(){return y.a.createElement("div",{id:"layout-ct",style:du.ct},y.a.createElement("div",{id:"axis-group-1",style:Mu({},du.axisGroup,{},du.axisGroupLeft)},y.a.createElement(yu,{axisId:K.AXIS_ID_COLUMNS,style:Mu({},du.filters,{},mu.axisContainerLeft)})),y.a.createElement("div",{id:"axis-group-2",style:Mu({},du.axisGroup,{},du.axisGroupRight)},y.a.createElement(yu,{axisId:K.AXIS_ID_FILTERS,style:du.filters})))},Yu=(Vu={},Object(j.a)(Vu,K.VIS_TYPE_COLUMN,Iu),Object(j.a)(Vu,K.VIS_TYPE_STACKED_COLUMN,Iu),Object(j.a)(Vu,K.VIS_TYPE_BAR,Iu),Object(j.a)(Vu,K.VIS_TYPE_STACKED_BAR,Iu),Object(j.a)(Vu,K.VIS_TYPE_LINE,Iu),Object(j.a)(Vu,K.VIS_TYPE_AREA,Iu),Object(j.a)(Vu,K.VIS_TYPE_PIE,Bu),Object(j.a)(Vu,K.VIS_TYPE_RADAR,Iu),Object(j.a)(Vu,K.VIS_TYPE_GAUGE,Bu),Object(j.a)(Vu,K.VIS_TYPE_YEAR_OVER_YEAR_LINE,ku),Object(j.a)(Vu,K.VIS_TYPE_YEAR_OVER_YEAR_COLUMN,ku),Object(j.a)(Vu,K.VIS_TYPE_SINGLE_VALUE,Bu),Object(j.a)(Vu,K.VIS_TYPE_PIVOT_TABLE,Iu),Vu),Gu=Object(g.connect)((function(e){return{type:rt(e)}}))((function(e){return function(e,t){var n=Yu[e];return y.a.createElement(n,t)}(e.type)}));function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zu={TODAY:ce.a.t("Today"),YESTERDAY:ce.a.t("Yesterday"),LAST_3_DAYS:ce.a.t("Last 3 days"),LAST_7_DAYS:ce.a.t("Last 7 days"),LAST_14_DAYS:ce.a.t("Last 14 days"),THIS_WEEK:ce.a.t("This week"),LAST_WEEK:ce.a.t("Last week"),LAST_4_WEEKS:ce.a.t("Last 4 weeks"),LAST_12_WEEKS:ce.a.t("Last 12 weeks"),LAST_52_WEEKS:ce.a.t("Last 52 weeks"),WEEKS_THIS_YEAR:ce.a.t("Weeks this year"),THIS_MONTH:ce.a.t("This month"),LAST_MONTH:ce.a.t("Last month"),LAST_3_MONTHS:ce.a.t("Last 3 months"),LAST_6_MONTHS:ce.a.t("Last 6 months"),LAST_12_MONTHS:ce.a.t("Last 12 months"),MONTHS_THIS_YEAR:ce.a.t("Months this year"),THIS_BIMONTH:ce.a.t("This bimonth"),LAST_BIMONTH:ce.a.t("Last bimonth"),LAST_6_BIMONTHS:ce.a.t("Last 6 bimonths"),BIMONTHS_THIS_YEAR:ce.a.t("Bimonths this year"),THIS_QUARTER:ce.a.t("This quarter"),LAST_QUARTER:ce.a.t("Last quarter"),LAST_4_QUARTERS:ce.a.t("Last 4 quarters"),QUARTERS_THIS_YEAR:ce.a.t("Quarters this year"),THIS_SIX_MONTH:ce.a.t("This six-month"),LAST_SIX_MONTH:ce.a.t("Last six-month"),LAST_2_SIXMONTHS:ce.a.t("Last 2 six-months"),THIS_FINANCIAL_YEAR:ce.a.t("This financial year"),LAST_FINANCIAL_YEAR:ce.a.t("Last financial year"),LAST_5_FINANCIAL_YEARS:ce.a.t("Last 5 financial years"),THIS_YEAR:ce.a.t("This year"),LAST_YEAR:ce.a.t("Last year"),LAST_5_YEARS:ce.a.t("Last 5 years")},Wu={USER_ORGUNIT:ce.a.t("User org unit"),USER_ORGUNIT_CHILDREN:ce.a.t("User org unit children"),USER_ORGUNIT_GRANDCHILDREN:ce.a.t("User org unit grand children")},Xu=Object.entries(Hu({},zu,{},Wu)).reduce((function(e,t){var n=Object(v.a)(t,2),r=n[0],a=n[1];return Hu({},e,Object(j.a)({},r,{name:a}))}),{});n(2198),n(2199);function qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qu(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zu=function(e){function t(){var e,n;Object(Qr.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(Zr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a))),Ku(Object($r.a)(n),"unlisten",null),Ku(Object($r.a)(n),"state",{previousLocation:null}),Ku(Object($r.a)(n),"refetch",(function(e){return!n.state.previousLocation||(e.pathname.slice(1).split("/")[0]!==n.state.previousLocation.slice(1).split("/")[0]||n.state.previousLocation===e.pathname)})),Ku(Object($r.a)(n),"loadVisualization",function(){var e=Object(x.a)(D.a.mark((function e(t){var r,a,i,o,c,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.context.store,!(t.pathname.length>1)){e.next=20;break}if(a=t.pathname.slice(1).split("/"),i=a[0],o=a[2],!(c=i===ha)){e.next=14;break}return e.next=9,Ia();case 9:s=e.sent,n.props.addParentGraphMap(jt(s)),n.props.setVisualization(s),n.props.setUiFromVisualization(s),n.props.setCurrentFromUi(n.props.ui);case 14:if(c||!n.refetch(t)){e.next=17;break}return e.next=17,r.dispatch(Lr({type:n.props.apiObjectName,id:i,interpretationId:o,ouLevels:n.props.ouLevels}));case 17:o||r.dispatch(d.acClearUiInterpretation()),e.next=22;break;case 20:kr(r.dispatch,r.getState),d.acClearUiInterpretation(r.dispatch);case 22:n.setState({previousLocation:t.pathname});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ku(Object($r.a)(n),"componentDidMount",Object(x.a)(D.a.mark((function e(){var t,r,a,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.context.store,r=n.props,a=r.d2,i=r.userSettings,e.next=4,t.dispatch(f.tAddSettings(i));case 4:t.dispatch(b.acReceivedUser(a.currentUser)),t.dispatch(p.tSetDimensions()),o=n.props.settings.rootOrganisationUnit,t.dispatch(m.acAddMetadata(Qu({},Xu,Object(j.a)({},o.id,Qu({},o,{path:"/".concat(o.id)}))))),n.loadVisualization(n.props.location),n.unlisten=L.listen((function(e){n.loadVisualization(e)})),document.body.addEventListener("keyup",(function(e){return"Enter"===e.key&&!0===e.ctrlKey&&n.props.setCurrentFromUi(n.props.ui)}));case 11:case"end":return e.stop()}}),e)})))),n}return Object(ea.a)(t,e),Object(Kr.a)(t,[{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"getChildContext",value:function(){return{baseUrl:this.props.baseUrl,i18n:ce.a,d2:this.props.d2}}},{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(ls,null),y.a.createElement("div",{className:"data-visualizer-app flex-ct flex-dir-col"},y.a.createElement("div",{className:"section-toolbar flex-ct"},y.a.createElement("div",{className:"toolbar-type"},y.a.createElement(wc,null)),y.a.createElement("div",{className:"toolbar-menubar flex-grow-1"},y.a.createElement(Co,{apiObjectName:this.props.apiObjectName}))),y.a.createElement("div",{className:"section-main flex-grow-1 flex-ct"},y.a.createElement("div",{className:"main-left"},y.a.createElement(fs,null)),y.a.createElement("div",{className:"main-center flex-grow-1 flex-basis-0 flex-ct flex-dir-col"},y.a.createElement("div",{className:"main-center-layout"},y.a.createElement(Gu,null)),y.a.createElement("div",{className:"main-center-titlebar"},y.a.createElement(zo,null)),y.a.createElement("div",{className:"main-center-canvas flex-grow-1"},y.a.createElement(Tl,null))),this.props.ui.rightSidebarOpen&&this.props.current&&y.a.createElement("div",{className:"main-right"},y.a.createElement(gs,{type:this.props.apiObjectName,id:this.props.current.id})))),y.a.createElement(Mr,null))}}]),t}(O.Component),Ju=Object(ta.a)([rt],(function(e){return e===K.VIS_TYPE_PIVOT_TABLE?"reportTable":"chart"}));Zu.contextTypes={store:ra.a.object},Zu.childContextTypes={d2:ra.a.object,baseUrl:ra.a.string,i18n:ra.a.object};var $u=Object(g.connect)((function(e){return{settings:s.sGetSettings(e),current:i.sGetCurrent(e),interpretations:r.sGetInterpretations(e),ui:a.sGetUi(e),apiObjectName:Ju(e)}}),(function(e){return{setCurrentFromUi:function(t){return e(u.acSetCurrentFromUi(t))},setVisualization:function(t){return e(l.acSetVisualization(t))},setUiFromVisualization:function(t){return e(d.acSetUiFromVisualization(t))},addParentGraphMap:function(t){return e(d.acAddParentGraphMap(t))}}}))(Zu),ep=n(2200);function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var np=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.n(ep).a),rp=Object(E.createMuiTheme)(np),ap=qr((function(e){var t=e.dispatch;return function(e){return function(n){"object"===typeof n.metadata&&!Array.isArray(n.metadata)&&t(br(n.metadata)),e(n)}}}));window.Cypress&&(window.store=ap);t.default=function(){return y.a.createElement(g.Provider,{store:ap},y.a.createElement(E.MuiThemeProvider,{theme:rp},y.a.createElement(B,null,(function(e){return y.a.createElement($u,Object.assign({apiObjectName:"chart"},e))}))))}}}]);
//# sourceMappingURL=app.4c4816ff.chunk.js.map