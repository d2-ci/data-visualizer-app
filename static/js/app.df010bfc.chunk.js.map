{"version":3,"sources":["D2App/components/VisualizationTypeSelector/styles/VisualizationTypeSelector.module.css","D2App/components/Snackbar/styles/Snackbar.module.css","D2App/components/MenuButton/styles/MenuButton.module.css","D2App/components/Interpretations/styles/InterpretationsButton.module.css","D2App/components/VisualizationOptions/styles/VisualizationOptionsManager.module.css","D2App/components/VisualizationOptions/styles/TextStyle.module.css","D2App/components/VisualizationOptions/styles/SeriesTable.module.css","D2App/components/VisualizationOptions/styles/AxisRange.module.css","D2App/components/VerticalTabBar/styles/VerticalTabBar.module.css","D2App/components/VerticalTabBar/styles/VerticalTab.module.css","D2App/components/AxesTabs/styles/AxesTabs.module.css","D2App/components/VisualizationOptions/styles/Outliers.module.css","D2App/components/MenuBar/styles/MenuBar.module.css","D2App/modules/formatDate.js","D2App/components/DimensionsPanel/Dialogs/styles/DialogManager.module.css","D2App/components/DimensionsPanel/styles/DndDimensionItem.module.css","D2App/components/DimensionsPanel/styles/DndDimensionList.module.css","D2App/components/DimensionsPanel/styles/DndDimensionsPanel.module.css","D2App/components/Visualization/styles/StartScreen.module.css","D2App/widgets/styles/LoadingMask.module.css","D2App/components/Layout/DefaultLayout/styles/DefaultAxis.module.css","D2App/components/IconButton/styles/IconButton.module.css","D2App/modules/history.js","D2App/reducers/visualization.js","D2App/modules/options.js","D2App/modules/layout.js","D2App/modules/fields/baseFields.js","D2App/modules/orgUnit.js","D2App/modules/ui.js","D2App/modules/current.js","D2App/reducers/current.js","D2App/reducers/dimensions.js","D2App/reducers/recommendedIds.js","D2App/reducers/ui.js","D2App/reducers/metadata.js","D2App/reducers/settings.js","D2App/reducers/user.js","D2App/reducers/snackbar.js","D2App/reducers/loader.js","D2App/reducers/chart.js","D2App/reducers/index.js","D2App/configureStore.js","D2App/actions/metadata.js","D2App/middleware/metadata.js","D2App/actions/ui.js","D2App/components/DndContext.js","D2App/actions/snackbar.js","D2App/components/Snackbar/Snackbar.js","D2App/components/UpdateButton/UpdateButton.js","D2App/api/analytics.js","D2App/components/MenuButton/MenuButton.js","D2App/components/DownloadMenu/DownloadMenu.js","D2App/components/Interpretations/InterpretationsButton.js","D2App/components/HideButton/HideButton.js","D2App/modules/fields/nestedFields.js","D2App/api/visualization.js","D2App/modules/fields/index.js","D2App/actions/visualization.js","D2App/actions/current.js","D2App/actions/dimensions.js","D2App/api/index.js","D2App/api/settings.js","D2App/modules/settings.js","D2App/actions/settings.js","D2App/actions/loader.js","D2App/assets/ErrorIcons.js","D2App/modules/error.js","D2App/api/user.js","D2App/actions/user.js","D2App/modules/visualization.js","D2App/api/dataStatistics.js","D2App/actions/index.js","D2App/modules/layoutValidation.js","D2App/api/userDataStore.js","D2App/components/UpdateButton/UpdateVisualizationContainer.js","D2App/components/VisualizationOptions/styles/VisualizationOptions.style.js","D2App/components/VisualizationOptions/NoticeBox.js","D2App/components/VisualizationOptions/Options/SelectBaseOption.js","D2App/components/VisualizationOptions/Options/AggregationType.js","D2App/assets/FontColorIcon.js","D2App/assets/BoldIcon.js","D2App/assets/ItalicIcon.js","D2App/components/VisualizationOptions/Options/TextStyle.js","D2App/components/VisualizationOptions/Options/CheckboxBaseOption.js","D2App/components/VisualizationOptions/Options/ShowDimensionLabels.js","D2App/components/VisualizationOptions/Options/SkipRounding.js","D2App/components/VisualizationOptions/Options/ColTotals.js","D2App/components/VisualizationOptions/Options/ColSubTotals.js","D2App/components/VisualizationOptions/Options/RowTotals.js","D2App/components/VisualizationOptions/Options/RowSubTotals.js","D2App/components/VisualizationOptions/Options/HideEmptyColumns.js","D2App/components/VisualizationOptions/Options/HideEmptyRows.js","D2App/components/VisualizationOptions/Options/NumberType.js","D2App/components/VisualizationOptions/Options/TextBaseOption.js","D2App/components/VisualizationOptions/Options/Title.js","D2App/components/VisualizationOptions/Options/DisplayDensity.js","D2App/components/VisualizationOptions/Options/FontSize.js","D2App/components/VisualizationOptions/Options/DigitGroupSeparator.js","D2App/components/VisualizationOptions/Options/ParamReportingPeriod.js","D2App/components/VisualizationOptions/Options/ParamOrganisationUnit.js","D2App/components/VisualizationOptions/Options/ParamParentOrganisationUnit.js","D2App/components/VisualizationOptions/Options/Regression.js","D2App/components/VisualizationOptions/Options/Cumulative.js","D2App/components/VisualizationOptions/Options/SortOrder.js","D2App/components/VisualizationOptions/Options/TopLimit.js","D2App/components/VisualizationOptions/Options/ApprovalLevel.js","D2App/components/VisualizationOptions/Options/ShowHierarchy.js","D2App/components/VisualizationOptions/Options/CompletedOnly.js","D2App/assets/AxisIcons.js","D2App/components/VisualizationOptions/Options/SeriesTable.js","D2App/modules/options/tabs/series.js","D2App/modules/options/tabs/data.js","D2App/modules/options/sections/templates/advanced.js","D2App/modules/options/sections/templates/display.js","D2App/modules/options/sections/templates/totals.js","D2App/modules/options/sections/templates/emptyData.js","D2App/components/VisualizationOptions/Options/RadioBaseOption.js","D2App/components/VisualizationOptions/Options/LegendDisplayStyle.js","D2App/components/VisualizationOptions/Options/LegendSet.js","D2App/components/VisualizationOptions/Options/LegendDisplayStrategy.js","D2App/components/VisualizationOptions/Options/Legend.js","D2App/modules/options/tabs/legend.js","D2App/modules/options/tabs/style.js","D2App/components/VisualizationOptions/Options/MeasureCriteria.js","D2App/modules/options/tabs/limitValues.js","D2App/components/VisualizationOptions/Options/ColorSet.js","D2App/modules/options/sections/colorSet.js","D2App/modules/options/sections/advanced.js","D2App/components/VisualizationOptions/Options/HideTitle.js","D2App/components/VisualizationOptions/Options/Subtitle.js","D2App/components/VisualizationOptions/Options/HideSubtitle.js","D2App/modules/options/sections/titles.js","D2App/components/VisualizationOptions/Options/NumberBaseType.js","D2App/components/VisualizationOptions/Options/RegressionLineValue.js","D2App/components/VisualizationOptions/Options/RegressionLineTitle.js","D2App/components/VisualizationOptions/Options/RegressionLine.js","D2App/components/VisualizationOptions/Options/TargetLine.js","D2App/components/VisualizationOptions/Options/BaseLine.js","D2App/components/VisualizationOptions/Options/AxisMinValue.js","D2App/components/VisualizationOptions/Options/AxisMaxValue.js","D2App/components/VisualizationOptions/Options/AxisRange.js","D2App/components/VisualizationOptions/Options/AxisLabels.js","D2App/components/VerticalTabBar/VerticalTabBar.js","D2App/components/VerticalTabBar/VerticalTab.js","D2App/components/AxesTabs/AxesTabs.js","D2App/modules/options/tabs/axes.js","D2App/modules/options/sections/templates/verticalAxis.js","D2App/modules/options/sections/templates/lines.js","D2App/modules/options/gaugeConfig.js","D2App/components/VisualizationOptions/Options/RegressionType.js","D2App/components/VisualizationOptions/InfoText.js","D2App/modules/options/sections/lines.js","D2App/components/VisualizationOptions/Options/AxisTitle.js","D2App/components/VisualizationOptions/Options/PositiveNumberBaseType.js","D2App/components/VisualizationOptions/Options/AxisSteps.js","D2App/components/VisualizationOptions/Options/AxisDecimals.js","D2App/modules/options/sections/templates/horizontalAxis.js","D2App/modules/options/sections/rangeAxis.js","D2App/modules/options/sections/domainAxis.js","D2App/components/VisualizationOptions/Options/CumulativeValues.js","D2App/components/VisualizationOptions/Options/HideEmptyRowItems.js","D2App/components/VisualizationOptions/Options/PercentStackedValues.js","D2App/modules/options/sections/display.js","D2App/components/VisualizationOptions/Options/HideLegend.js","D2App/components/VisualizationOptions/Options/NoSpaceBetweenColumns.js","D2App/components/VisualizationOptions/Options/ShowData.js","D2App/modules/options/sections/templates/chartStyle.js","D2App/modules/options/sections/chartStyle.js","D2App/components/VisualizationOptions/Options/OutlierDetectionMethod.js","D2App/components/VisualizationOptions/Options/ExtremeLines.js","D2App/components/VisualizationOptions/Options/Outliers.js","D2App/modules/options/config.js","D2App/modules/options/pieConfig.js","D2App/modules/options/singleValueConfig.js","D2App/modules/options/pivotTableConfig.js","D2App/modules/options/scatterConfig.js","D2App/modules/options/tabs/outliers.js","D2App/modules/options/defaultConfig.js","D2App/components/VisualizationOptions/VisualizationOptions.js","D2App/components/VisualizationOptions/VisualizationOptionsManager.js","D2App/components/MenuBar/MenuBar.js","D2App/assets/InterpretationIcon.js","D2App/components/TitleBar/styles/TitleBar.style.js","D2App/components/TitleBar/TitleBar.js","D2App/modules/currentAnalyticalObject.js","D2App/assets/ArrowDown.js","D2App/assets/ColumnIcon.js","D2App/assets/StackedColumnIcon.js","D2App/assets/BarIcon.js","D2App/assets/StackedBarIcon.js","D2App/assets/PieIcon.js","D2App/assets/GaugeIcon.js","D2App/assets/LineIcon.js","D2App/assets/AreaIcon.js","D2App/assets/StackedAreaIcon.js","D2App/assets/RadarIcon.js","D2App/assets/YearOverYearLineIcon.js","D2App/assets/YearOverYearColumnIcon.js","D2App/assets/SingleValueIcon.js","D2App/assets/GlobeIcon.js","D2App/assets/PivotTableIcon.js","D2App/assets/ScatterIcon.js","D2App/components/VisualizationTypeSelector/ListItemIcon.js","D2App/components/VisualizationTypeSelector/VisualizationTypeListItem.js","D2App/components/VisualizationTypeSelector/VisualizationTypeSelector.js","D2App/components/DimensionsPanel/Dialogs/AddToLayoutButton/AddToLayoutButton.js","D2App/components/DimensionsPanel/Dialogs/DialogManager.js","D2App/actions/recommendedIds.js","D2App/components/DimensionsPanel/DndDimensionItem.js","D2App/components/DimensionsPanel/DndDimensionList.js","D2App/components/DimensionsPanel/DndDimensionsPanel.js","D2App/components/DimensionsPanel/styles/DimensionsPanel.style.js","D2App/components/DimensionsPanel/DimensionsPanel.js","D2App/components/Interpretations/styles/Interpretations.style.js","D2App/components/Interpretations/Interpretations.js","D2App/components/Visualization/styles/Visualization.style.js","../../../../plugin/build/es/api/legendSets.js","../../../../plugin/build/es/assets/ArrowUpwardIcon.js","../../../../plugin/build/es/assets/ArrowDownwardIcon.js","../../../../plugin/build/es/ContextualMenu.js","../../../../plugin/build/es/ChartPlugin.js","../../../../plugin/build/es/PivotPlugin.js","../../../../plugin/build/es/modules/analytics.js","../../../../plugin/build/es/api/analytics.js","../../../../plugin/build/es/modules/options.js","../../../../plugin/build/es/modules/getRequestOptions.js","../../../../plugin/build/es/modules/fetchData.js","../../../../plugin/build/es/styles/VisualizationPlugin.style.js","../../../../plugin/build/es/VisualizationPlugin.js","D2App/components/Visualization/StartScreen.js","D2App/api/mostViewedVisualizations.js","D2App/widgets/LoadingMask.js","D2App/components/Visualization/Visualization.js","D2App/actions/chart.js","D2App/components/Layout/styles/Tooltip.style.js","D2App/components/Layout/TooltipContent.js","D2App/modules/dnd.js","D2App/assets/DynamicDimensionIcon.js","D2App/components/Layout/styles/style.js","D2App/components/Layout/styles/Chip.style.js","D2App/components/Layout/Chip.js","D2App/components/Layout/DefaultLayout/styles/DefaultAxis.style.js","D2App/assets/MoreHorizontalIcon.js","D2App/components/Layout/styles/Menu.style.js","D2App/components/IconButton/IconButton.js","D2App/components/Layout/ChipMenu.js","D2App/components/Layout/DefaultLayout/DefaultAxis.js","D2App/components/Layout/DefaultLayout/styles/DefaultLayout.style.js","D2App/components/Layout/DefaultLayout/DefaultLayout.js","D2App/components/Layout/YearOverYearLayout/styles/YearOverYearAxis.style.js","D2App/components/Layout/YearOverYearLayout/YearOverYearAxis.js","D2App/components/Layout/YearOverYearLayout/YearOverYearSelect.js","D2App/components/Layout/YearOverYearLayout/styles/YearOverYearLayout.style.js","D2App/modules/yearOverYear.js","D2App/components/Layout/YearOverYearLayout/YearOverYearLayout.js","D2App/components/Layout/PieLayout/styles/PieLayout.style.js","D2App/components/Layout/PieLayout/PieLayout.js","D2App/components/Layout/PivotTableLayout/styles/PivotTableLayout.style.js","D2App/components/Layout/PivotTableLayout/PivotTableLayout.js","D2App/components/Layout/ScatterLayout/styles/ScatterAxis.style.js","D2App/assets/VerticalIcon.js","D2App/assets/HorizontalIcon.js","D2App/components/Layout/ScatterLayout/ScatterAxis.js","D2App/components/Layout/ScatterLayout/styles/ScatterLayout.style.js","D2App/components/Layout/ScatterLayout/ScatterLayout.js","D2App/components/Layout/Layout.js","D2App/components/App.js","D2App/modules/metadata.js","D2App/components/UserSettingsProvider.js","D2App/locales/index.js","D2App/AppWrapper.js"],"names":["module","exports","formatDate","value","uiLocale","global","Intl","DateTimeFormat","year","month","day","format","Date","substr","replace","createHashHistory","SET_VISUALIZATION","CLEAR_VISUALIZATION","DEFAULT_VISUALIZATION","sGetVisualization","state","visualization","OPTION_HIDE_LEGEND","OPTION_AXIS_STEPS","OPTION_AXIS_DECIMALS","OPTION_AXIS_MAX_VALUE","OPTION_AXIS_MIN_VALUE","OPTION_AXIS_TITLE","OPTION_AXIS_TITLE_ENABLED","OPTION_BASE_LINE_ENABLED","OPTION_BASE_LINE_TITLE","OPTION_BASE_LINE_VALUE","OPTION_BASE_LINE_TITLE_FONT_STYLE","OPTION_TARGET_LINE_ENABLED","OPTION_TARGET_LINE_TITLE","OPTION_TARGET_LINE_VALUE","OPTION_TARGET_LINE_TITLE_FONT_STYLE","options","axes","requestable","savable","defaultValue","colorSet","COLOR_SET_DEFAULT","cumulativeValues","hideEmptyRowItems","legend","noSpaceBetweenColumns","percentStackedValues","regressionType","showData","aggregationType","completedOnly","hideSubtitle","hideTitle","sortOrder","subtitle","undefined","title","series","fontStyle","outlierAnalysis","colTotals","colSubTotals","rowTotals","rowSubTotals","showDimensionLabels","hideEmptyColumns","hideEmptyRows","skipRounding","numberType","showHierarchy","legendSet","legendDisplayStrategy","legendDisplayStyle","displayDensity","fontSize","digitGroupSeparator","approvalLevel","reportingPeriod","organisationUnit","parentOrganisationUnit","grandParentOrganisationUnit","regression","cumulative","measureCriteria","topLimit","getOptionsForUi","Object","entries","reduce","map","option","props","getOptionsFromVisualization","optionsFromVisualization","pick","keys","axis","targetLine","baseLine","clonedAxis","enabled","reportingParams","forEach","prototype","hasOwnProperty","call","String","SOURCE_DIMENSIONS","getFilteredLayout","layout","excludedIds","_layout$AXIS_ID_COLUM","_layout$AXIS_ID_ROWS","_layout$AXIS_ID_FILTE","ids","Array","isArray","AXIS_ID_COLUMNS","filter","dim","includes","AXIS_ID_ROWS","AXIS_ID_FILTERS","getInverseLayout","axisId","dimensionIds","id","getRetransfer","transfer","visType","inverseLayout","retransfer","sourceAxis","destinationAxisId","dimensionsAtDestination","isAxisFull","length","transferableDimension","getTransferableDimension","getAvailableAxes","find","getAxisMaxNumberOfDimensions","BASE_FIELD_NAME","BASE_FIELD_TYPE","BASE_FIELD_YEARLY_SERIES","getFieldObject","name","fieldsByType","reportTable","chart","excluded","eventReport","reportTable_eventReport","chart_eventChart","eventReport_eventChart","reportTable_chart_eventReport","reportTable_eventReport_eventChart","reportTable_chart_eventReport_eventChart","extractName","propObj","markExcluded","fieldObj","concat","moveExcludedToEnd","acc","current","curIndex","array","slice","charAt","push","shift","getAllFieldObjectsByType","type","fields","key","isOuLevelIntId","ouIdHelper","hasLevelPrefix","Number","isInteger","parseInt","removePrefix","convertOuLevelsToUids","ouLevels","ouDimension","layoutGetDimension","DIMENSION_ID_ORGUNIT","dimensionGetItems","some","item","replaceNumericOuLevel","ouIntId","ouUid","l","level","assign","addLevelPrefix","replaceNumericOuLevelWithUid","updatedOuItems","layoutReplaceDimension","removeLastPathSegment","path","match","lastIndexOf","getOuPath","metadata","parentGraphMap","SERIES_ITEM_TYPE_PROP","ITEM_ATTRIBUTE_VERTICAL","ITEM_ATTRIBUTE_HORIZONTAL","defaultUiAdapter","ui","getAdaptedUiLayoutByType","getAdaptedUiByType","VIS_TYPE_YEAR_OVER_YEAR_LINE","VIS_TYPE_YEAR_OVER_YEAR_COLUMN","items","itemsByDimension","DIMENSION_ID_PERIOD","yearOverYearUiAdapter","VIS_TYPE_PIVOT_TABLE","VIS_TYPE_GAUGE","VIS_TYPE_SINGLE_VALUE","adaptedUi","singleValueUiAdapter","VIS_TYPE_SCATTER","dataItems","DIMENSION_ID_DATA","itemAttributes","attribute","scatterUiAdapter","getParentGraphMapFromVisualization","vis","dimensionIdsByAxis","layoutGetAxisIdDimensionIdsObject","ouAxis","dimension","orgUnit","getAxesFromUi","dimensionId","hasItems","object","getPredefinedDimensionProp","DIMENSION_PROP_NO_ITEMS","dimensionCreate","getOptionsFromUi","optionsFromUi","rest","getSingleValueCurrentFromUi","action","axesFromUi","dxItems","layoutGetDimensionItems","singleValueAxesFromUi","getScatterCurrentFromUi","verticalItem","horizontalItem","scatterAxesFromUi","getPieCurrentFromUi","VIS_TYPE_PIE","getYearOverYearCurrentFromUi","periodDimension","yearOverYearCategory","filters","yearOverYearSeries","SET_CURRENT","SET_CURRENT_FROM_UI","CLEAR_CURRENT","DEFAULT_CURRENT","getDefaultFromUi","sGetCurrent","sGetCurrentFromUi","SET_DIMENSIONS","SET_SELECTED_DIMENSION","DEFAULT_DIMENSIONS","getPredefinedDimensions","sGetDimensions","dimensions","SET_RECOMMENDED_IDS","DEFAULT_RECOMMENDED_IDS","sGetRecommendedIds","recommendedIds","SET_UI","SET_UI_FROM_VISUALIZATION","SET_UI_TYPE","SET_UI_OPTIONS","SET_UI_OPTION","SET_UI_OPTION_FONT_STYLE","SET_UI_LAYOUT","ADD_UI_LAYOUT_DIMENSIONS","REMOVE_UI_LAYOUT_DIMENSIONS","SET_UI_ITEMS","ADD_UI_ITEMS","REMOVE_UI_ITEMS","SET_UI_PARENT_GRAPH_MAP","ADD_UI_PARENT_GRAPH_MAP","SET_UI_ACTIVE_MODAL_DIALOG","SET_UI_YEAR_ON_YEAR_SERIES","SET_UI_YEAR_ON_YEAR_CATEGORY","SET_UI_ITEM_ATTRIBUTES","REMOVE_UI_ITEM_ATTRIBUTES","CLEAR_UI","TOGGLE_UI_RIGHT_SIDEBAR_OPEN","SET_UI_RIGHT_SIDEBAR_OPEN","SET_UI_INTERPRETATION","CLEAR_UI_INTERPRETATION","CLEAR_SERIES_TYPE","UPDATE_UI_SERIES_ITEM","DEFAULT_UI","defaultVisType","columns","rows","activeModalDialog","rightSidebarOpen","interpretation","PRESELECTED_YEAR_OVER_YEAR_SERIES","PRESELECTED_YEAR_OVER_YEAR_CATEGORY","currentState","layoutGetDimensionIdItemIdsObject","isYearOverYear","getUiFromVisualization","optionId","axisType","axisIndex","split","fontStyleOption","pushAxis","getAxis","hidden","text","prop","_axis$prop","_axis$prop$title","defaultFontStyle","FONT_STYLE_REGRESSION_LINE_LABEL","FONT_STYLE_VERTICAL_AXIS_TITLE","FONT_STYLE_HORIZONTAL_AXIS_TITLE","_axis$title","FONT_STYLE_AXIS_LABELS","_axis$label","label","FONT_STYLE_LEGEND","_options$legend$label","FONT_STYLE_VISUALIZATION_TITLE","FONT_STYLE_VISUALIZATION_SUBTITLE","deepClean","cleanAxes","transfers","newLayout","index","canDimensionBeAddedToAxis","splice","itemIds","currentItemIds","Set","itemIdsToRemove","castArray","itemAttr","itemId","itemAttribute","rootOrganisationUnit","relativePeriod","rootOrganisationUnits","getPreselectedUi","changedItem","itemIndex","findIndex","dimensionItem","remove","sGetUi","sGetUiType","sGetUiOptions","sGetUiLayout","sGetUiItems","sGetUiYearOverYearSeries","sGetUiYearOverYearCategory","sGetUiItemsByAttribute","sGetUiParentGraphMap","sGetUiActiveModalDialog","sGetUiRightSidebarOpen","sGetUiInterpretation","sGetAxes","sGetAxisIdByDimensionId","sGetUiItemsByDimension","sGetDimensionItemsByAxis","sGetDimensionIdsFromLayout","values","axisDimensionIds","sLayoutHasDimension","sLayoutHasAssignedCategories","DIMENSION_ID_ASSIGNED_CATEGORIES","sGetAxisSetup","sGetUiOption","_getAxis$title","_getAxis$title2","_options$legend","_options$legend2","_options$legend2$labe","_getAxis$baseLine","_getAxis$baseLine2","_getAxis$baseLine2$ti","_getAxis$baseLine3","_getAxis$baseLine4","_getAxis$baseLine4$ti","_getAxis$targetLine","_getAxis$targetLine2","_getAxis$targetLine2$","_getAxis$targetLine3","_getAxis$targetLine4","_getAxis$targetLine4$","_getAxis$label","_getAxis$title3","getConsolidatedFontStyle","fontStyleKey","input","result","objectClean","updatedAxes","cleanAxis","i","ADD_METADATA","DEFAULT_METADATA","sGetMetadata","ADD_SETTINGS","DEFAULT_SETTINGS","keyDateFormat","keyAnalysisRelativePeriod","keyAnalysisDigitGroupSeparator","keyIgnoreAnalyticsApprovalYearThreshold","displayNameProperty","sGetSettings","settings","sGetSettingsDisplayNameProperty","sGetSettingsDigitGroupSeparator","sGetRootOrgUnit","sGetRelativePeriod","sGetUiLocale","RECEIVED_USER","SET_USER_AUTHORITY","DEFAULT_USER","username","isSuperuser","authorities","sGetUser","user","RECEIVED_SNACKBAR_MESSAGE","CLEAR_SNACKBAR","DEFAULT_SNACKBAR","message","duration","sGetSnackbar","snackbar","SET_LOAD_ERROR","CLEAR_LOAD_ERROR","SET_LOADING","SET_PLUGIN_LOADING","DEFAULT_LOADING","isLoading","loadingError","isPluginLoading","sGetLoadError","loader","sGetIsPluginLoading","SET_CHART","sGetChart","combineReducers","d2Object","keyUiLocale","has","sGetSeriesSetupItems","fromUi","_fromMetadata$sGetMet","fromMetadata","configureStore","middleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","acAddMetadata","dispatch","next","acSetUi","acClear","acSetUiFromVisualization","acSetUiType","acSetUiOptions","acSetUiOption","acSetUiOptionFontStyle","acUpdateUiSeriesItem","acSetUiLayout","acAddUiLayoutDimensions","acRemoveUiLayoutDimensions","acSetUiItems","acAddUiItems","acRemoveUiItems","acSetUiYearOverYearSeries","acSetUiYearOverYearCategory","acSetUiItemAttributes","acRemoveUiItemAttributes","acAddParentGraphMap","acSetParentGraphMap","acSetUiActiveModalDialog","acToggleUiRightSidebarOpen","acSetUiRightSidebarOpen","acSetUiInterpretation","acClearUiInterpretation","acClearSeriesType","_defineProperty","obj","defineProperty","enumerable","configurable","writable","DndContext","Component","constructor","args","super","this","sourceAxisId","sourceIndex","destinationIndex","sourceList","from","moved","onReorderDimensions","onAddDimensions","Boolean","onDropWithoutItems","source","destination","draggableId","droppableId","addDimensionToLayout","rearrangeLayoutDimensions","render","React","createElement","DragDropContext","onDragEnd","children","connect","acReceivedSnackbarMessage","acClearSnackbar","VARIANT_ERROR","VARIANT_SUCCESS","VARIANT_WARNING","onClose","variant","className","styles","container","AlertBar","critical","success","warning","permanent","onHidden","_extends","target","arguments","apply","UpdateButton","onClick","Button","primary","i18n","t","addCommonParameters","req","withSkipRounding","withAggregationType","withMeasureCriteria","withParameters","displayProperty","withDisplayProperty","withApprovalLevel","relativePeriodDate","withRelativePeriodDate","MenuButton","dataTest","disabled","onBlur","onFocus","menuButton","DenseMenuItem","Icon","MenuItem","dense","icon","color","colors","grey600","relativePeriodDateSelector","createSelector","created","dataEngine","useDataEngine","baseUrl","useConfig","menuIsOpen","setMenuIsOpen","useState","toggleMenu","downloadImage","async","formData","URLSearchParams","append","blob","api","getInstance","Api","getApi","url","fetch","method","body","headers","Headers","defaultHeaders","then","res","apiDownloadImage","URL","createObjectURL","open","downloadData","idScheme","Analytics","getAnalytics","request","fromVisualization","withFormat","withShowHierarchy","withHierarchyMeta","withIncludeMetadataDetails","withIncludeNumDen","withPath","withOutputIdScheme","buildUrl","location","origin","pathname","buildQuery","searchParams","apiDownloadData","downloadTable","withTableLayout","withRows","join","withColumns","withHideEmptyColumns","withHideEmptyRows","apiDownloadTable","plainDataSourceSubLevel","Children","toArray","MenuSectionHeader","buttonRef","createRef","onKeyDown","e","keyCode","ref","Layer","position","Popper","reference","placement","FlyoutMenu","IconImage24","IconFileDocument24","iconWrapper","IconChevronRight24","IconChevronLeft24","HideButton","secondary","NAME","DIMENSION_ITEM","LEGEND_SET","USER","ITEMS","AXIS","nestedFields","interpretations","extendFields","field","visualizationQuery","resource","params","sort","visualizationsQuery","visualizationIds","acSetVisualization","acSetCurrent","acSetCurrentFromUi","tSetCurrentFromUi","getState","acSetDimensions","keyBy","sortBy","d","toLowerCase","tSetDimensions","engine","displayNameProp","onSuccess","apiFetchDimensions","err","error","console","log","onError","systemSettingsQuery","acAddSettings","tAddSettings","extraSettings","fetchSystemSettings","query","systemSettings","apiFetchSystemSettings","fetchOrgUnitRoots","apiFetchOrganisationUnitRoots","orgUnitRoots","Promise","all","fetchedSettings","acSetLoadError","acClearLoadError","acSetPluginLoading","EmptyBox","width","height","xmlns","fill","fillRule","PeriodError","DataError","EmptySeries","EmptyCategory","GenericError","viewBox","transform","VisualizationError","description","EmptyResponseError","NoSeriesError","axisName","getAxisNameByLayoutType","getLayoutTypeByVisType","NoCategoryError","NoSeriesOrCategoryError","columnsAxisName","rowsAxisName","visualizationType","getDisplayNameByVisType","NoPeriodError","getAvailableAxesDescription","NoPointsError","NoVerticalError","NoHorizontalError","DuplicateItemsError","NoDataOrDataElementGroupSetError","lockedAxis","getAxisPerLockedDimension","NoDataError","MultipleIndicatorAsFilterError","CombinationDEGSRRError","genericErrorTitle","GenericClientError","GenericServerError","AssignedCategoriesDataElementsError","AssignedCategoriesAsFilterError","VisualizationNotFoundError","NoOrgUnitResponseError","axesDescription","userAuthorityQuery","authority","authorityId","acReceivedUser","acSetUserAuthority","tLoadUserAuthority","authorityKey","response","variables","getVisualizationState","STATE_EMPTY","STATE_UNSAVED","STATE_SAVED","STATE_DIRTY","EVENT_TYPE","dataStatisticMutation","favorite","eventType","logError","tDoLoadVisualization","interpretationId","fromLoader","mutate","apiPostDataStatistics","fromCurrent","apiFetchVisualization","errorResponse","_errorResponse$detail","details","httpStatusCode","clearVisualization","tDoSaveVisualization","copy","getVisualizationFromCurrent","date","toLocaleDateString","mutation","data","skipTranslations","skipSharing","apiSaveVisualization","status","uid","history","isSaving","isAxisValid","isValid","axisItem","dimensionIsValid","requireItems","validateDimension","validateAxis","validateLayout","validatePieLayout","validateYearOverYearLayout","validateSingleValueLayout","validatePivotTableLayout","_layout$ui$itemAttrib","_layout$ui$itemAttrib2","verticalItems","horizontalItems","validateScatterLayout","validateDefaultLayout","NAMESPACE","CURRENT_AO_KEY","hasNamespace","d2","currentUser","dataStore","getNamespace","get","create","apiSaveAOInUserDataStore","namespace","set","apiSave","apiFetchAOFromUserDataStore","apiFetch","mapDispatchToProps","getCurrent","getCurrentFromUi","onUpdate","fromActions","onLoadingStart","renderComponent","urlContainsCurrentAOKey","pathWithoutInterpretation","tabBar","_JSXStyle","spacers","dp24","tabContent","tabSection","dp16","grey300","dp8","tabSectionTitle","dp12","grey900","tabSectionTitleMargin","tabSectionOption","tabSectionOptionItem","tabSectionOptionText","grey700","tabSectionOptionToggleable","dp4","tabSectionToggleableSubsection","tabSectionOptionComplexInline","tabSectionOptionIcon","NoticeBox","UiNoticeBox","ownProps","onChange","helpText","toggleable","_option$items$find","checked","setChecked","selected","Checkbox","onToggle","SingleSelectField","inputWidth","SingleSelectOption","AggregationType","SelectBaseOption","FontColorIcon","cx","cy","r","defaultProps","BoldIcon","ItalicIcon","isVertical","fontSizeOptions","getFontSizeOptions","textAlignOptions","getTextAlignOptions","isVerticalType","onChangeColor","debounce","FONT_STYLE_OPTION_TEXT_COLOR","FONT_STYLE_OPTION_FONT_SIZE","SingleSelect","toString","prefix","fontSizeSelect","_option$value","_option$value2","_option$value3","FONT_STYLE_OPTION_TEXT_ALIGN","textAlignSelect","_option$value4","textColorLabel","textColorInput","textColorIcon","FONT_STYLE_OPTION_BOLD","small","toggled","FONT_STYLE_OPTION_ITALIC","inverted","TextStyle","ShowDimensionLabels","CheckboxBaseOption","SkipRounding","ColTotals","ColSubTotals","RowTotals","RowSubTotals","HideEmptyColumns","HideEmptyRows","NumberType","TextBaseOption","placeholder","inline","Box","Input","InputField","enabledId","Title","DisplayDensity","FontSize","DigitGroupSeparator","ParamReportingPeriod","ParamOrganisationUnit","ParamParentOrganisationUnit","Regression","Cumulative","optionName","SortOrder","TopLimit","APPROVAL_LEVEL_OPTION_AUTH","dataApprovalLevels","order","paging","ApprovalLevelSelect","loading","loadingText","displayName","approvalLevelEnabledSelector","setOptions","isLoaded","setIsLoaded","ShowHierarchy","CompletedOnly","Label","AxisOne","y","x","opacity","AxisTwo","AxisThree","AxisFour","availableAxes","allTypes","VIS_TYPE_COLUMN","VIS_TYPE_LINE","SeriesTable","layoutItems","optionItems","onItemChange","showAxisOptions","showTypeOptions","availableTypes","useEffect","matchedItems","matchedItem","renderAxisIcon","renderError","errorContainer","errorIcon","errorTitle","errorDescription","hasRelativeItems","Table","suppressZebraStriping","table","nameColumn","typeColumn","axisColumn","TableHead","tableHead","TableRow","tableRow","TableCell","tableCell","axisIcon","TableBody","tableBody","itemName","itemType","typeContainer","Radio","radioInput","visIcon","visTypeIcons","itemAxis","content","Field","LEGEND_DISPLAY_STYLE_OPTION_NAME","LEGEND_DISPLAY_STYLE_FILL","LegendDisplayStyle","RadioBaseOption","LEGEND_SET_OPTION_NAME","legendSets","LegendSetSelect","LEGEND_DISPLAY_STRATEGY_OPTION_NAME","LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM","LEGEND_DISPLAY_STRATEGY_FIXED","Fragment","LegendSet","hideStyleOptions","legendEnabled","setLegendEnabled","FieldSet","UiCoreLegend","LegendDisplayStrategy","Legend","OperatorSelect","style","tabIndex","inputMaxWidth","ValueInput","MeasureCriteria","setState","defaultState","op1","v1","op2","v2","_op","_v","_op2","_v2","paddingTop","onClear","COLOR_SET_OPTION_NAME","ColorSetPreview","display","marginLeft","patterns","pattern","stroke","strokeWidth","backgroundColor","COLOR_SET_BRIGHT","COLOR_SET_DARK","COLOR_SET_GRAY","COLOR_SET_COLOR_BLIND","COLOR_SET_PATTERNS","colorSets","hasDisabledSections","ColorSet","getAdvancedTemplate","HIDE_TITLE_AUTO","HIDE_TITLE_NONE","HIDE_TITLE_CUSTOM","HideTitle","onGroupChange","hideTitleSelector","uiOptions","Subtitle","HIDE_SUBTITLE_AUTO","HIDE_SUBTITLE_NONE","HIDE_SUBTITLE_CUSTOM","HideSubtitle","hideSubtitleSelector","RegressionLineValue","NumberBaseType","RegressionLineTitle","valueId","titleId","TargetLine","RegressionLine","BaseLine","AxisMinValue","AxisMaxValue","AxisRange","alignItems","Help","AxisLabels","VerticalTabBar","VerticalTab","tab","AxesTabs","selectedTabIndex","setSelectedTabIndex","tabs","RegressionType","InfoText","IconInfo16","getLinesTemplate","TITLE_AUTO","TITLE_NONE","TITLE_CUSTOM","onTextChange","onEnabledToggle","setTitleColor","setFontStyle","hasCustomAxes","titleType","onTypeChange","textColor","every","parsedValue","Math","round","AxisSteps","PositiveNumberBaseType","AxisDecimals","showLines","template","getHorizontalAxisTemplate","getVerticalAxisTemplate","AxisTitle","CumulativeValues","HideEmptyRowItems","PercentStackedValues","defaultContent","stackedContent","isStacked","getDisplayTemplate","HideLegend","NoSpaceBetweenColumns","ShowData","columnContent","isColumnBased","getChartStyleTemplate","OutlierDetectionMethod","methods","currentMethodId","onMethodChange","currentThreshold","onThresholdChange","min","step","ExtremeLines","isEnabled","onEnabledChange","currentValue","onValueChange","ENABLED_PROP","METHOD_PROP","THRESHOLD_PROP","EL_ENABLED_PROP","EL_VALUE_PROP","OUTLIER_ANALYSIS_OPTION_NAME","defaultThreshold","DEFAULT_STATE","extremeLines","storeProp","storeExtremeLinesProp","divider","getOptionsByType","rangeAxisIds","isStackedType","isColumnBasedType","supportsLegends","isLegendSetType","supportsMultiAxes","isDualAxisType","supportsMultiType","isMultiType","getDataTab","getAdvancedSection","getLegendTab","getAxesTab","getSeriesTab","getStyleTab","getTitlesSection","getColorSetSection","getLimitValuesTab","getTotalsTemplate","getEmptyDataTemplate","ApprovalLevel","getRangeAxisSection","Outliers","scatterConfig","getDisplaySection","getLinesSection","getDomainAxisSection","getChartStyleSection","defaultConfig","VisualizationOptions","activeTabKey","tabKey","sections","generateTabContent","columnDimensionItems","filteredSeries","seriesItem","layoutItem","optionsConfig","serie","a","b","generateTabs","activeTabIndex","TabBar","Tab","selectTab","VisualizationOptionsManager","toggleVisualizationOptionsDialog","dialogIsOpen","handler","Modal","large","ModalTitle","ModalContent","modalContent","ModalActions","ButtonStrip","UpdateVisualizationContainer","getPrimaryOnClick","onOpen","isOpening","onNew","isResetting","getOnRename","onRenameVisualization","getOnSave","onSaveVisualization","getOnSaveAs","getOnDelete","onDeleteVisualization","getOnError","MenuBar","context","menuBar","updateButton","FileMenu","fileType","apiObjectName","fileObject","onRename","onSave","onSaveAs","onDelete","DownloadMenu","grow","InterpretationsButton","contextTypes","PropTypes","updatedVisualization","updatedCurrent","fromSnackbar","deletedObject","errorCode","statusCode","InterpretationIcon","version","rx","strokeLinecap","strokeLinejoin","points","titleBar","justifyContent","cell","background","white","padding","borderRadius","margin","suffix","paddingLeft","interpretationIcon","marginRight","titleUnsaved","grey500","titleDirty","defaultTitleStyle","defaultInterpretationStyle","getTitleText","titleState","getCustomTitleStyle","getSuffix","stateProps","dispatchProps","titleText","interpretationDate","titleStyle","getPathForOrgUnit","prepareCurrentAnalyticalObject","removeUnnecessaryAttributesFromAnalyticalObject","appendNames","appendDimensionItemNamesToAnalyticalObject","appendDimensionType","dimensionItemType","appendDimensionItemTypeToAnalyticalObject","appendPathsToOrgUnits","appendCompleteParentGraphMap","ArrowDown","ColumnIcon","paddingRight","StackedColumnIcon","BarIcon","StackedBarIcon","PieIcon","GaugeIcon","LineIcon","AreaIcon","StackedAreaIcon","RadarIcon","YearOverYearLineIcon","YearOverYearColumnIcon","SingleValueIcon","fontFamily","fontWeight","letterSpacing","GlobeIcon","PivotTableIcon","ScatterIcon","ListItemIcon","iconType","VIS_TYPE_STACKED_COLUMN","VIS_TYPE_BAR","VIS_TYPE_STACKED_BAR","VIS_TYPE_AREA","VIS_TYPE_STACKED_AREA","VIS_TYPE_RADAR","VisualizationTypeListItem","isSelected","classNames","listItem","listItemActive","listItemDisabled","listItemIcon","listItemText","listItemName","listItemDescription","VisualizationTypeSelector","setUi","onItemClick","listIsOpen","setListIsOpen","toggleList","handleListItemClick","VisTypesList","Card","listContainer","listSection","visTypeDisplayNames","visTypeDescriptions","Divider","event","stopPropagation","currentAnalyticalObject","href","button","arrowIcon","createPortal","backdrop","cardContainer","document","string","dialogId","onAddDimension","AddToLayoutButton","SplitButton","clickHandler","component","maxWidth","isScatterAttribute","DialogManager","onMounted","prevProps","isEqual","dxIds","ouIds","fetchRecommended","ouMounted","apiFetchRecommendedIds","setRecommendedIds","setUiItemAttributes","setUiItems","forMetadata","forParentGraphMap","ou","addMetadata","addParentGraphMap","changeDialog","getItemsByAttribute","selectedItems","dimensionProps","ouItems","getOrgUnitsFromIds","OrgUnitDimension","removeUiItems","onSelect","selectUiItems","onDeselect","onReorder","renderPersistedContent","getSelectedItems","infoBoxMessage","getAxisIdByDimensionId","numberOfItems","axisMaxNumberOfItems","getAxisMaxNumberOfItems","visualiationType","maxNumber","isActive","dimensionSelector","DataDimension","selectedDimensions","dataTabs","PeriodDimension","selectedPeriods","filterOutPredefinedDimensions","DynamicDimension","dimensionTitle","dynamicContent","closeDialog","renderDialogContent","dimensionIdsInLayout","DndDimensionItem","isLocked","isDeactivated","isRecommended","onOptionsClick","itemCommonProps","Draggable","isDragDisabled","provided","snapshot","DimensionItem","innerRef","draggableProps","dragHandleProps","isDragging","dragging","notDragging","dimensionItemClone","DndDimensionList","filterText","selectedIds","disallowedDimensions","lockedDimensions","itemProps","dndIndex","isLockedDimension","isDisabledDimension","isRecommendedDimension","onDimensionClick","onDimensionOptionsClick","nameContainsFilterText","renderItem","fixedDimensions","getDimensionItemsByFilter","getFixedDimensions","fixedDim","dynamicDimensions","getDynamicDimensions","dynDim","nonPredefinedDimensions","predefDim","Droppable","isDropDisabled","droppableProps","wrapper","section","header","list","getDisallowedDimensionsMemo","fromReducers","getDisallowedDimensions","getisLockedDimensionsMemo","getAllLockedDimensionIds","DndDimensionsPanel","DimensionFilter","onFilterTextChange","onClearFilter","disableUnderline","divContainer","flexDirection","grey050","layoutHasAssignedCategories","getCurrentAxisId","axisItemHandler","numberOfDimensionItems","isDimensionInLayout","removeItemHandler","assignedCategoriesItemHandler","setDimensionId","setRef","DimensionMenu","currentAxisId","isAssignedCategoriesInLayout","Interpretations","interpretationUrl","InterpretationsComponent","currentInterpretationId","onCurrentInterpretationChange","onInterpretationChange","chartCanvas","loadingCover","left","top","zIndex","legendSetsQuery","ArrowUpwardIcon","propTypes","ArrowDownwardIcon","ContextualMenu","config","ouData","setOuData","subLevelData","setSubLevelData","doFetchOuData","useCallback","apiFetchOrganisationUnit","ouId","doFetch","levelData","levelId","menuItemStyle","minWidth","parent","orgunit","func","ChartPlugin","responses","extraOptions","renderCounter","onChartGenerated","animation","defaultAnimation","canvasRef","useRef","prevStyle","prevRenderCounter","renderVisualization","visualizationConfig","createVisualization","isSingleValue","getSVGForExport","sourceHeight","sourceWidth","Function","isRequired","arrayOf","number","PivotPlugin","onToggleContextualMenu","PivotTable","getRelativePeriodTypeUsed","periodItems","getRelativePeriodsOptionsById","WEEKS","getPeriods","period","DAYS","periodId","apiFetchAnalytics","analyticsEngine","rawResponse","aggregate","prepareRequestsForRelativeDays","yearlySeriesRes","currentMonth","currentDay","yearlySeriesLabels","periodDates","yearlySeriesIds","metaData","reverse","isFeb29","isLeapYear","getDate","prepareRequestsForRelativeWeeks","referencePeriodYear","referencePeriodReq","withSkipData","withSkipMeta","referenceWeekPeriod","pop","referenceWeekYear","referenceWeekNumber","referenceWeekYearDelta","weekPeriods","periods","weekPeriodsReq","addPeriodDimension","weekPeriodsRes","seenYears","periodDate","endDate","setDate","getFullYear","getMonth","padStart","unshift","getRequestOptions","userSettings","entry","userOrgUnit","ouPath","fetchData","forDashboard","dashboard","yearlySeriesReq","yearlySeries","now","relativeWeeksData","relativeDaysData","requests","apiFetchAnalyticsForYearOverYear","peItems","relativePeriodTypeUsed","periodKeyAxisIndexMatrix","periodGroups","pe","periodGroup","matchGroups","xAxisIndexForPeriod","periodKeys","indexForFeb28","periodKey","test","week","indexForW2","indexForPrevWeekInYear","computeYoYMatrix","periodKeyAxisIndexMap","xAxisLabels","flat","computeGenericPeriodNamesFromMatrix","out","genericPeriodNames","computeGenericPeriodNames","VisualizationPlugin","onLoadingComplete","onResponsesReceived","onDrill","setOuLevels","fetchResult","setFetchResult","contextualMenuRef","setContextualMenuRef","contextualMenuConfig","setContextualMenuConfig","closeContextualMenu","doFetchData","doFetchLegendSets","legendSetIds","apiFetchLegendSets","apiFetchOrganisationUnitLevels","doFetchOuLevels","dx","dxId","legendSetId","doFetchAll","catch","contextualMenuRect","getBoundingClientRect","virtualContextualMenuElement","bool","mostViewedVisualizations","setMostViewedVisualizations","visualizations","pageSize","apiFetchMostViewedVisualizations","visualizationsWithType","visWithType","populateMostViewedVisualizations","getErrorContent","outer","inner","guide","guideItem","LoadingMask","CircularLoader","progress","Visualization","_response$details","setLoadError","svg","setChart","drillData","setCurrent","renderId","addEventListener","getNewRenderId","componentDidMount","addResizeHandler","componentDidUpdate","visFilters","StartScreen","visualizationSelector","visFiltersSelector","userSettingsSelector","tooltip","boxShadow","listStyleType","marginBottom","whiteSpace","overflow","textOverflow","labels","noneSelected","onlyOneInUse","onlyLimitedNumberInUse","displayLimitedAmount","lockedLabel","getNameList","idList","levelString","itemDisplayNames","levelIds","groupIds","hasGroupPrefix","getItemDisplayNames","warningLabel","getWarningLabel","hasNoItemsLabel","IconWarningFilled16","renderWarningLabel","IconLock16","itemsToRender","renderItems","DATA_TYPE_TEXT","DynamicDimensionIcon","AXIS_PADDING","AXIS_BORDER_COLOR","AXIS_BORDER_STYLE","AXIS_BORDER_WIDTH","AXIS_BACKGROUND_COLOR","baseChip","cursor","minHeight","userSelect","chipWrapper","theme","secondary200","chip","chipEmpty","fixedDimensionIcon","leftIconWrapper","rightIconWrapper","chipLeft","borderTopRightRadius","borderBottomRightRadius","chipRight","borderTopLeftRadius","borderBottomLeftRadius","Chip","dimensionName","contextMenu","random","LockIconWrapper","WarningIconWrapper","isSplitAxis","getMaxNumberOfItems","handleClick","renderChipContent","dynamicDimensionIcon","renderChipIcon","_metadata$items$","getItemsLabel","total","renderChipLabelSuffix","hasAxisTooManyItems","draggable","onDragStart","dataTransfer","setData","JSON","stringify","dataset","dimensionid","Tooltip","activeItemIds","visTypeName","TooltipContent","renderTooltipContent","onMouseOver","onMouseOut","axisContainer","layoutStyle","borderColor","borderStyle","borderWidth","axisContainerLeft","borderLeftWidth","MoreHorizontalIcon","black","IconButton","ariaOwns","ariaHaspopup","iconButton","Axis","preventDefault","getOpenHandler","getItemsByDimension","onDragOver","direction","stylesModule","isDimensionLocked","ChipMenu","FILTER_AXIS_WIDTH","ct","axisGroup","axisGroupLeft","flexBasis","axisGroupRight","Layout","DefaultAxis","defaultAxisStyles","flex","LAYOUT_TYPE_YEAR_OVER_YEAR","YearOverYearAxisStyles","SinglePeriodSelector","getName","MultiPeriodSelector","MultiSelect","MultiSelectOption","YearOverYearSelect","multiple","seriesOptions","len","yearString","getFixedYears","categoryOptions","defaultLayoutStyles","YearOverYearLayoutStyles","YearOverYearAxis","onSeriesChange","onCategoryChange","pieLayoutStyles","pivotTableLayoutStyles","VerticalIcon","HorizontalIcon","setItemAttributes","removeItemAttributes","setDialogIsOpen","onSwap","MenuDivider","scatterLayoutStyles","ScatterAxis","componentMap","LAYOUT_TYPE_DEFAULT","DefaultLayout","LAYOUT_TYPE_PIE","PieLayout","YearOverYearLayout","LAYOUT_TYPE_PIVOT_TABLE","PivotTableLayout","LAYOUT_TYPE_SCATTER","ScatterLayout","layoutType","LayoutComponent","App","previousLocation","initialLoadIsComplete","locationToConfirm","pathParts","store","parseLocation","AO","clearCurrent","setUiFromVisualization","setCurrentFromUi","refetch","rootOrgUnit","TODAY","YESTERDAY","LAST_3_DAYS","LAST_7_DAYS","LAST_14_DAYS","THIS_WEEK","LAST_WEEK","LAST_4_WEEKS","LAST_12_WEEKS","LAST_52_WEEKS","WEEKS_THIS_YEAR","THIS_MONTH","LAST_MONTH","LAST_3_MONTHS","LAST_6_MONTHS","LAST_12_MONTHS","MONTHS_THIS_YEAR","THIS_BIMONTH","LAST_BIMONTH","LAST_6_BIMONTHS","BIMONTHS_THIS_YEAR","THIS_QUARTER","LAST_QUARTER","LAST_4_QUARTERS","QUARTERS_THIS_YEAR","THIS_SIX_MONTH","LAST_SIX_MONTH","LAST_2_SIXMONTHS","THIS_FINANCIAL_YEAR","LAST_FINANCIAL_YEAR","LAST_5_FINANCIAL_YEARS","THIS_YEAR","LAST_YEAR","LAST_5_YEARS","USER_ORGUNIT","USER_ORGUNIT_CHILDREN","USER_ORGUNIT_GRANDCHILDREN","loadVisualization","unlisten","listen","_location$state","_location$state2","_location$state3","ctrlKey","returnValue","componentWillUnmount","getChildContext","DimensionsPanel","TitleBar","end","goBack","Snackbar","CssVariables","childContextTypes","clearSnackbar","userSettingsQuery","UserSettingsCtx","createContext","UserSettingsProvider","setSettings","keyAnalysisDisplayProperty","displayPropertyName","Provider","addResources","arTranslations","ar_IQTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","AppWrapper","thunk","withExtraArgument","metadataMiddleware","Cypress","doFetchOuLevelsData","ouLevelsData","d2Config","schemas","ReduxProvider","Consumer","D2Shim","i18nRoot","locale"],"mappings":"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","file":"static/js/app.df010bfc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"VisualizationTypeSelector_backdrop__84wtM\",\"arrowIcon\":\"VisualizationTypeSelector_arrowIcon__3-VDi\",\"button\":\"VisualizationTypeSelector_button__1d_Dv\",\"cardContainer\":\"VisualizationTypeSelector_cardContainer__2ZbJX\",\"listContainer\":\"VisualizationTypeSelector_listContainer__2ofGu\",\"listSection\":\"VisualizationTypeSelector_listSection__3wu8W\",\"listItem\":\"VisualizationTypeSelector_listItem__3Faru\",\"listItemActive\":\"VisualizationTypeSelector_listItemActive__1jCF3\",\"listItemDisabled\":\"VisualizationTypeSelector_listItemDisabled__2vjjv\",\"listItemSvg\":\"VisualizationTypeSelector_listItemSvg__30TD2\",\"listItemIcon\":\"VisualizationTypeSelector_listItemIcon__2vUNZ\",\"listItemName\":\"VisualizationTypeSelector_listItemName__1dM76\",\"listItemDescription\":\"VisualizationTypeSelector_listItemDescription__1-Joc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Snackbar_container__3g0Vn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"MenuButton_menuButton__1AF2U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconWrapper\":\"InterpretationsButton_iconWrapper__1Jh2C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalContent\":\"VisualizationOptionsManager_modalContent__1SIRu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TextStyle_container__3Vjzk\",\"fontSizeSelect\":\"TextStyle_fontSizeSelect__1coQa\",\"textAlignSelect\":\"TextStyle_textAlignSelect__1BWew\",\"textColorLabel\":\"TextStyle_textColorLabel__3_9vF\",\"textColorInput\":\"TextStyle_textColorInput__RRc04\",\"textColorIcon\":\"TextStyle_textColorIcon__U5wlq\",\"disabled\":\"TextStyle_disabled__3jpDQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nameColumn\":\"SeriesTable_nameColumn__1lKoI\",\"typeColumn\":\"SeriesTable_typeColumn__3IJyD\",\"tableHead\":\"SeriesTable_tableHead__mKvSY\",\"tableCell\":\"SeriesTable_tableCell__19T31\",\"tableBody\":\"SeriesTable_tableBody__3ZBSF\",\"itemName\":\"SeriesTable_itemName__2IJxR\",\"typeContainer\":\"SeriesTable_typeContainer__362YU\",\"visIcon\":\"SeriesTable_visIcon__1knYT\",\"axisIcon\":\"SeriesTable_axisIcon__jMyg-\",\"errorContainer\":\"SeriesTable_errorContainer__3RrKX\",\"errorIcon\":\"SeriesTable_errorIcon__2iTpj\",\"errorTitle\":\"SeriesTable_errorTitle__3e3NZ\",\"errorDescription\":\"SeriesTable_errorDescription__2SfGB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"AxisRange_label__3EO63\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"VerticalTabBar_container__2NnHJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tab\":\"VerticalTab_tab__19jwC\",\"selected\":\"VerticalTab_selected__111gW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"AxesTabs_tabs__Nmg_g\",\"content\":\"AxesTabs_content__1iife\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"Outliers_divider__2KHJJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuBar\":\"MenuBar_menuBar__3-AXT\",\"updateButton\":\"MenuBar_updateButton__1NS3q\",\"grow\":\"MenuBar_grow__1w_QG\"};","/**\n *\n * @param {Date} value Javascript date\n * @param {String} uiLocale\n * @returns {String}\n */\nconst formatDate = (value = '', uiLocale = 'en') => {\n  if (typeof global.Intl !== 'undefined' && Intl.DateTimeFormat) {\n    return new Intl.DateTimeFormat(uiLocale, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    }).format(new Date(value));\n  }\n\n  return value.substr(0, 19).replace('T', ' ');\n};\n\nexport default formatDate;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"DialogManager_tabs__3ckG3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notDragging\":\"DndDimensionItem_notDragging__3jgQJ\",\"dragging\":\"DndDimensionItem_dragging__1uXIT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DndDimensionList_container__DCFRx\",\"wrapper\":\"DndDimensionList_wrapper__1gYqU\",\"list\":\"DndDimensionList_list__1sErz\",\"header\":\"DndDimensionList_header__Ugsfp\",\"section\":\"DndDimensionList_section__1KL69\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DndDimensionsPanel_container__1gaeS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer\":\"StartScreen_outer__2nbkE\",\"inner\":\"StartScreen_inner__2exeL\",\"errorContainer\":\"StartScreen_errorContainer__u2dgL\",\"errorIcon\":\"StartScreen_errorIcon__1QTyz\",\"errorTitle\":\"StartScreen_errorTitle__2Ksw9\",\"errorDescription\":\"StartScreen_errorDescription__syq9m\",\"title\":\"StartScreen_title__2-0vP\",\"section\":\"StartScreen_section__3ITr1\",\"guide\":\"StartScreen_guide__d793i\",\"guideItem\":\"StartScreen_guideItem__13mvT\",\"visualization\":\"StartScreen_visualization__3FqSm\",\"visIcon\":\"StartScreen_visIcon__2SFAA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progress\":\"LoadingMask_progress__2bHzE\",\"outer\":\"LoadingMask_outer__d-GDr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"DefaultAxis_content__VAbLV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconButton\":\"IconButton_iconButton__2bUtk\"};","import { createHashHistory } from 'history';\nexport default createHashHistory();","export const SET_VISUALIZATION = 'SET_VISUALIZATION';\nexport const CLEAR_VISUALIZATION = 'CLEAR_VISUALIZATION';\nexport const DEFAULT_VISUALIZATION = null;\nexport default ((state = DEFAULT_VISUALIZATION, action) => {\n  switch (action.type) {\n    case SET_VISUALIZATION:\n      {\n        return action.value;\n      }\n\n    case CLEAR_VISUALIZATION:\n      {\n        return DEFAULT_VISUALIZATION;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetVisualization = state => state.visualization;\nexport const sGetInterpretations = state => state.visualization ? state.visualization.interpretations : [];","import pick from 'lodash-es/pick';\nimport { COLOR_SET_DEFAULT } from '@dhis2/analytics';\nexport const OPTION_HIDE_LEGEND = 'hideLegend';\nexport const OPTION_AXIS_STEPS = 'steps';\nexport const OPTION_AXIS_DECIMALS = 'decimals';\nexport const OPTION_AXIS_MAX_VALUE = 'maxValue';\nexport const OPTION_AXIS_MIN_VALUE = 'minValue';\nexport const OPTION_AXIS_TITLE = 'axisTitle';\nexport const OPTION_AXIS_TITLE_ENABLED = 'axisTitleEnabled';\nexport const OPTION_BASE_LINE_ENABLED = 'baseLineEnabled';\nexport const OPTION_BASE_LINE_TITLE = 'baseLineTitle';\nexport const OPTION_BASE_LINE_VALUE = 'baseLineValue';\nexport const OPTION_BASE_LINE_TITLE_FONT_STYLE = 'baseLineTitleFontStyle';\nexport const OPTION_TARGET_LINE_ENABLED = 'targetLineEnabled';\nexport const OPTION_TARGET_LINE_TITLE = 'targetLineTitle';\nexport const OPTION_TARGET_LINE_VALUE = 'targetLineValue';\nexport const OPTION_TARGET_LINE_TITLE_FONT_STYLE = 'targetLineTitleFontStyle';\nexport const options = {\n  axes: {\n    requestable: false,\n    savable: true,\n    defaultValue: []\n  },\n  colorSet: {\n    defaultValue: COLOR_SET_DEFAULT,\n    requestable: false,\n    savable: true\n  },\n  cumulativeValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRowItems: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  legend: {\n    defaultValue: {},\n    requestable: false,\n    savable: true\n  },\n  noSpaceBetweenColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  percentStackedValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regressionType: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  showData: {\n    defaultValue: true,\n    requestable: false,\n    savable: true\n  },\n  aggregationType: {\n    defaultValue: 'DEFAULT',\n    requestable: true,\n    savable: true\n  },\n  completedOnly: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  hideSubtitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideTitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  sortOrder: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  },\n  subtitle: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  title: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  series: {\n    defaultValue: [],\n    requestable: false,\n    savable: true\n  },\n  fontStyle: {\n    defaultValue: {},\n    requestable: false,\n    savable: true\n  },\n  outlierAnalysis: {\n    requestable: false,\n    savable: true,\n    defaultValue: null\n  },\n  // only for PT\n  colTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  colSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  showDimensionLabels: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRows: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  skipRounding: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  numberType: {\n    defaultValue: 'VALUE',\n    requestable: false,\n    savable: true\n  },\n  showHierarchy: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  legendSet: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStrategy: {\n    defaultValue: 'FIXED',\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStyle: {\n    defaultValue: 'FILL',\n    requestable: false,\n    savable: true\n  },\n  displayDensity: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  fontSize: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  digitGroupSeparator: {\n    defaultValue: 'SPACE',\n    requestable: false,\n    savable: true\n  },\n  approvalLevel: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: false\n  },\n  // these are stored in the AO under reportingParams\n  reportingPeriod: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  organisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  parentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  // not exposed in UI\n  grandParentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regression: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  cumulative: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  measureCriteria: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: true\n  },\n  topLimit: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  }\n};\nexport default options;\nexport const getOptionsForUi = () => {\n  return Object.entries({ ...options\n  }).reduce((map, [option, props]) => {\n    map[option] = props.defaultValue;\n    return map;\n  }, {});\n};\nexport const getOptionsForRequest = () => {\n  return Object.entries(options).filter(entry => entry[1].requestable // entry = [option, props]\n  );\n};\nexport const getOptionsFromVisualization = visualization => {\n  const optionsFromVisualization = { ...getOptionsForUi(),\n    ...pick(visualization, Object.keys(options))\n  };\n  optionsFromVisualization.axes = optionsFromVisualization.axes.map(axis => {\n    if (axis.title || axis.targetLine || axis.baseLine) {\n      const clonedAxis = { ...axis\n      };\n\n      if (clonedAxis.title) {\n        clonedAxis.title = { ...clonedAxis.title,\n          enabled: true\n        };\n      }\n\n      if (clonedAxis.targetLine) {\n        clonedAxis.targetLine = { ...clonedAxis.targetLine,\n          enabled: true\n        };\n      }\n\n      if (clonedAxis.baseLine) {\n        clonedAxis.baseLine = { ...clonedAxis.baseLine,\n          enabled: true\n        };\n      }\n\n      return clonedAxis;\n    } else {\n      return axis;\n    }\n  }); // nested options under reportingParams\n\n  if (visualization.reportingParams) {\n    optionsFromVisualization.organisationUnit = visualization.reportingParams.organisationUnit;\n    optionsFromVisualization.reportingPeriod = visualization.reportingParams.reportingPeriod;\n    optionsFromVisualization.parentOrganisationUnit = visualization.reportingParams.parentOrganisationUnit;\n    optionsFromVisualization.grandParentOrganisationUnit = visualization.reportingParams.grandParentOrganisationUnit;\n  } // cast option values from Number for some options\n\n\n  ;\n  ['sortOrder', 'topLimit'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n      optionsFromVisualization[option] = String(visualization[option]);\n    }\n  });\n  return optionsFromVisualization;\n};","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, getAxisMaxNumberOfDimensions, getAvailableAxes, isAxisFull, getTransferableDimension } from '@dhis2/analytics'; // Names for dnd sources\n\nexport const SOURCE_DIMENSIONS = 'dimensions'; // Layout utility functions\n// Exclude one or many dimensions from layout\n\nexport const getFilteredLayout = (layout, excludedIds) => {\n  var _layout$AXIS_ID_COLUM, _layout$AXIS_ID_ROWS, _layout$AXIS_ID_FILTE;\n\n  const ids = Array.isArray(excludedIds) ? excludedIds : [excludedIds];\n  return {\n    [AXIS_ID_COLUMNS]: ((_layout$AXIS_ID_COLUM = layout[AXIS_ID_COLUMNS]) === null || _layout$AXIS_ID_COLUM === void 0 ? void 0 : _layout$AXIS_ID_COLUM.filter(dim => !ids.includes(dim))) || [],\n    [AXIS_ID_ROWS]: ((_layout$AXIS_ID_ROWS = layout[AXIS_ID_ROWS]) === null || _layout$AXIS_ID_ROWS === void 0 ? void 0 : _layout$AXIS_ID_ROWS.filter(dim => !ids.includes(dim))) || [],\n    [AXIS_ID_FILTERS]: ((_layout$AXIS_ID_FILTE = layout[AXIS_ID_FILTERS]) === null || _layout$AXIS_ID_FILTE === void 0 ? void 0 : _layout$AXIS_ID_FILTE.filter(dim => !ids.includes(dim))) || []\n  };\n}; // Accepts layout: { columns: ['dx'] }\n// Returns inverse layout: { dx: 'columns' }\n\nexport const getInverseLayout = layout => {\n  const entries = Object.entries(layout);\n  const map = {};\n  entries.forEach(([axisId, dimensionIds]) => {\n    dimensionIds.forEach(id => {\n      map[id] = axisId;\n    });\n  });\n  return map;\n}; // Accepts layout and transfer object\n// Returns transfer with possible retransfers\n\nexport const getRetransfer = (layout, transfer, visType) => {\n  const inverseLayout = getInverseLayout(layout);\n  const dimensionIds = Object.keys(transfer);\n  const retransfer = {};\n  dimensionIds.forEach(id => {\n    const sourceAxis = inverseLayout[id] || null;\n    const destinationAxisId = transfer[id].axisId;\n    const dimensionsAtDestination = layout[destinationAxisId] || [];\n\n    if (isAxisFull(visType, destinationAxisId, dimensionsAtDestination.length)) {\n      const transferableDimension = getTransferableDimension(visType, destinationAxisId, layout[destinationAxisId]);\n\n      if (transferableDimension) {\n        const axisId = sourceAxis ? sourceAxis : getAvailableAxes(visType).find(axis => !getAxisMaxNumberOfDimensions(visType, axis));\n        retransfer[transferableDimension] = {\n          axisId\n        };\n      }\n    }\n  });\n  return retransfer;\n};","export const BASE_FIELD_NAME = 'name';\nexport const BASE_FIELD_TYPE = 'type';\nexport const BASE_FIELD_YEARLY_SERIES = 'yearlySeries';\n\nconst getFieldObject = (name, props = {}) => ({\n  [BASE_FIELD_NAME]: name,\n  ...props\n}); // fields by type\n\n\nexport const fieldsByType = {\n  reportTable: [getFieldObject('cumulative', {\n    option: true\n  }), getFieldObject('hideEmptyColumns', {\n    option: true\n  }), getFieldObject('legendDisplayStyle', {\n    option: true\n  }), getFieldObject('measureCriteria', {\n    option: true\n  }), getFieldObject('numberType', {\n    option: true\n  }), getFieldObject('regression', {\n    option: true\n  }), getFieldObject('reportingParams', {\n    option: true\n  }), getFieldObject('skipRounding', {\n    option: true\n  })],\n  chart: [getFieldObject('category', {\n    excluded: true\n  }), getFieldObject(BASE_FIELD_YEARLY_SERIES)],\n  eventReport: [getFieldObject('dataType')],\n  reportTable_eventReport: [getFieldObject('colSubTotals', {\n    option: true\n  }), getFieldObject('colTotals', {\n    option: true\n  }), getFieldObject('displayDensity', {\n    option: true\n  }), getFieldObject('fontSize', {\n    option: true\n  }), getFieldObject('hideEmptyRows', {\n    option: true\n  }), getFieldObject('rowSubTotals', {\n    option: true\n  }), getFieldObject('rowTotals', {\n    option: true\n  }), getFieldObject('showDimensionLabels', {\n    option: true\n  }), getFieldObject('showHierarchy', {\n    option: true\n  })],\n  chart_eventChart: [getFieldObject('axes', {\n    option: true\n  }), getFieldObject('colorSet', {\n    option: true\n  }), getFieldObject('cumulativeValues', {\n    option: true\n  }), getFieldObject('fontStyle', {\n    option: true\n  }), getFieldObject('hideEmptyRowItems', {\n    option: true\n  }), getFieldObject('legend', {\n    option: true\n  }), getFieldObject('noSpaceBetweenColumns', {\n    option: true\n  }), getFieldObject('percentStackedValues', {\n    option: true\n  }), getFieldObject('regressionType', {\n    option: true\n  }), getFieldObject('series', {\n    option: true\n  }), getFieldObject('showData', {\n    option: true\n  }), getFieldObject('outlierAnalysis', {\n    option: true\n  }), getFieldObject(BASE_FIELD_TYPE, {\n    option: true\n  })],\n  eventReport_eventChart: [getFieldObject('attributeValueDimension'), getFieldObject('collapseDataDimensions'), getFieldObject('dataElementValueDimension'), getFieldObject('endDate'), getFieldObject('eventStatus', {\n    option: true\n  }), getFieldObject('hideNaData', {\n    option: true\n  }), getFieldObject('outputType', {\n    option: true\n  }), getFieldObject('program'), getFieldObject('programStage'), getFieldObject('programStatus', {\n    option: true\n  }), getFieldObject('startDate'), getFieldObject('value')],\n  reportTable_chart_eventReport: [getFieldObject('legendDisplayStrategy', {\n    option: true\n  }), getFieldObject('legendSet', {\n    option: true\n  })],\n  reportTable_eventReport_eventChart: [getFieldObject('columnDimensions', {\n    excluded: true\n  }), getFieldObject('rowDimensions', {\n    excluded: true\n  })],\n  reportTable_chart_eventReport_eventChart: [getFieldObject('access'), getFieldObject('aggregationType', {\n    option: true\n  }), getFieldObject('attributeDimensions', {\n    excluded: true\n  }), getFieldObject('attributeValues', {\n    excluded: true\n  }), getFieldObject('categoryDimensions', {\n    excluded: true\n  }), getFieldObject('categoryOptionGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('code', {\n    excluded: true\n  }), getFieldObject('columns'), getFieldObject('completedOnly', {\n    option: true\n  }), getFieldObject('created'), getFieldObject('dataDimensionItems', {\n    excluded: true\n  }), getFieldObject('dataElementDimensions', {\n    excluded: true\n  }), getFieldObject('dataElementGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('description'), getFieldObject('digitGroupSeparator'), getFieldObject('displayDescription'), getFieldObject('displayName'), getFieldObject('displayShortName'), getFieldObject('externalAccess', {\n    excluded: true\n  }), getFieldObject('favorite'), getFieldObject('favorites'), getFieldObject('filterDimensions', {\n    excluded: true\n  }), getFieldObject('filters'), getFieldObject('hideSubtitle', {\n    option: true\n  }), getFieldObject('hideTitle', {\n    option: true\n  }), getFieldObject('href'), // required for translations via analytics FileMenu and d2-ui TranslationDialog\n  getFieldObject('id'), getFieldObject('interpretations'), getFieldObject('itemOrganisationUnitGroups', {\n    excluded: true\n  }), getFieldObject('lastUpdated'), getFieldObject('lastUpdatedBy'), getFieldObject('name'), getFieldObject('organisationUnitGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('organisationUnitLevels', {\n    excluded: true\n  }), getFieldObject('organisationUnits', {\n    excluded: true\n  }), getFieldObject('parentGraphMap'), getFieldObject('periods', {\n    excluded: true\n  }), getFieldObject('programIndicatorDimensions', {\n    excluded: true\n  }), getFieldObject('publicAccess'), getFieldObject('relativePeriods', {\n    excluded: true\n  }), getFieldObject('rows'), getFieldObject('shortName'), getFieldObject('sortOrder', {\n    option: true\n  }), getFieldObject('subscribed'), getFieldObject('subscribers'), getFieldObject('subtitle', {\n    option: true\n  }), getFieldObject('timeField'), getFieldObject('title', {\n    option: true\n  }), getFieldObject('topLimit', {\n    option: true\n  }), getFieldObject('translations'), getFieldObject('user'), getFieldObject('userAccesses'), getFieldObject('userGroupAccesses'), getFieldObject('userOrganisationUnit', {\n    excluded: true\n  }), getFieldObject('userOrganisationUnitChildren', {\n    excluded: true\n  }), getFieldObject('userOrganisationUnitGrandChildren', {\n    excluded: true\n  })]\n};\nfieldsByType.visualization = [...fieldsByType.reportTable, ...fieldsByType.chart, ...fieldsByType.reportTable_eventReport, ...fieldsByType.chart_eventChart, ...fieldsByType.reportTable_chart_eventReport, ...fieldsByType.reportTable_eventReport_eventChart, ...fieldsByType.reportTable_chart_eventReport_eventChart]; // actions\n\nexport const extractName = propObj => propObj[BASE_FIELD_NAME];\nexport const markExcluded = fieldObj => fieldObj.excluded === true ? { ...fieldObj,\n  [BASE_FIELD_NAME]: \"!\".concat(fieldObj[BASE_FIELD_NAME])\n} : fieldObj;\n/* eslint-disable-next-line max-params */\n\nexport const moveExcludedToEnd = (acc, current, curIndex, array) => {\n  !acc && (acc = array.slice());\n  current.charAt(0) === '!' && acc.push(acc.shift());\n  return acc;\n}; // getters\n\nexport const getAllFieldObjectsByType = type => Object.entries(fieldsByType).reduce((fields, [key, value]) => key.includes(type) ? fields.concat(value) : fields, []);","import { ouIdHelper, DIMENSION_ID_ORGUNIT, dimensionGetItems, layoutReplaceDimension, layoutGetDimension } from '@dhis2/analytics';\n\nconst isOuLevelIntId = id => ouIdHelper.hasLevelPrefix(id) ? Number.isInteger(parseInt(ouIdHelper.removePrefix(id), 10)) : false;\n\nconst replaceNumericOuLevelWithUid = ouLevels => item => {\n  if (!isOuLevelIntId(item.id)) {\n    return item;\n  }\n\n  const ouIntId = parseInt(ouIdHelper.removePrefix(item.id), 10);\n  const ouUid = ouLevels.find(l => parseInt(l.level, 10) === ouIntId).id;\n  return Object.assign({}, item, {\n    id: ouIdHelper.addLevelPrefix(ouUid)\n  });\n};\n\nexport const convertOuLevelsToUids = (ouLevels, layout) => {\n  const ouDimension = layoutGetDimension(layout, DIMENSION_ID_ORGUNIT);\n  const hasNumericOuLevels = ouDimension && dimensionGetItems(ouDimension).some(item => isOuLevelIntId(item.id));\n\n  if (hasNumericOuLevels) {\n    const replaceNumericOuLevel = replaceNumericOuLevelWithUid(ouLevels);\n    const updatedOuItems = dimensionGetItems(ouDimension).map(replaceNumericOuLevel);\n    return layoutReplaceDimension(layout, DIMENSION_ID_ORGUNIT, updatedOuItems);\n  }\n\n  return layout;\n};\nexport const removeLastPathSegment = path => {\n  // if root path, then return unprocessed path\n  if (path.match(/\\//g).length === 1) {\n    return path;\n  }\n\n  return path.substr(0, path.lastIndexOf('/'));\n};\n/**\n * Get org unit path by ou id\n * @param id\n * @param metadata\n * @param parentGraphMap\n * @returns {*}\n */\n\nexport const getOuPath = (id, metadata, parentGraphMap) => {\n  if (metadata[id] && metadata[id].path) {\n    return metadata[id].path;\n  } // for root org units\n\n\n  if (parentGraphMap[id] === id || parentGraphMap[id] === '') {\n    return \"/\".concat(id);\n  }\n\n  return parentGraphMap[id] ? \"/\".concat(parentGraphMap[id], \"/\").concat(id) : undefined;\n};","import { DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, DIMENSION_ID_DATA, layoutGetAxisIdDimensionIdsObject, layoutGetDimensionIdItemIdsObject, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_SCATTER, defaultVisType, isYearOverYear, getAdaptedUiLayoutByType, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout';\nimport { getOptionsFromVisualization } from './options';\nimport { BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { removeLastPathSegment } from './orgUnit';\nexport const SERIES_ITEM_TYPE_PROP = 'type';\nexport const SERIES_ITEM_AXIS_PROP = 'axis';\nexport const ITEM_ATTRIBUTE_VERTICAL = 'VERTICAL';\nexport const ITEM_ATTRIBUTE_HORIZONTAL = 'HORIZONTAL'; // Transform from backend model to store.ui format\n\nexport const getUiFromVisualization = (vis, currentState = {}) => ({ ...currentState,\n  type: vis.type || defaultVisType,\n  options: getOptionsFromVisualization(vis),\n  layout: layoutGetAxisIdDimensionIdsObject(vis),\n  itemsByDimension: layoutGetDimensionIdItemIdsObject(vis),\n  parentGraphMap: vis.parentGraphMap || getParentGraphMapFromVisualization(vis) || currentState.parentGraphMap,\n  yearOverYearSeries: isYearOverYear(vis.type) && vis[BASE_FIELD_YEARLY_SERIES] ? vis[BASE_FIELD_YEARLY_SERIES] : currentState.yearOverYearSeries,\n  yearOverYearCategory: isYearOverYear(vis.type) ? vis.rows[0].items.map(item => item.id) : currentState.yearOverYearCategory\n}); // Transform from store.ui to default format\n\nconst defaultUiAdapter = ui => ({ ...ui,\n  layout: getAdaptedUiLayoutByType(ui.layout, ui.type)\n}); // Transform from store.ui to year on year format\n\n\nconst yearOverYearUiAdapter = ui => {\n  const state = Object.assign({}, ui);\n  const items = Object.assign({}, state.itemsByDimension);\n  delete items[DIMENSION_ID_PERIOD];\n  return { ...state,\n    layout: getAdaptedUiLayoutByType(ui.layout, ui.type),\n    itemsByDimension: items\n  };\n};\n\nconst singleValueUiAdapter = ui => {\n  const adaptedUi = defaultUiAdapter(ui);\n  adaptedUi.options.measureCriteria = undefined;\n  return adaptedUi;\n}; // Transform from store.ui to scatter format\n\n\nconst scatterUiAdapter = ui => {\n  const adaptedUi = { ...ui,\n    layout: getAdaptedUiLayoutByType(ui.layout, ui.type)\n  };\n  const dataItems = ui.itemsByDimension[DIMENSION_ID_DATA] || [];\n  adaptedUi.itemAttributes = [// TODO: Should this be cleared for all other uiAdapters?\n  ...(dataItems[0] ? [{\n    id: dataItems[0],\n    attribute: ITEM_ATTRIBUTE_VERTICAL\n  }] : []), ...(dataItems[1] ? [{\n    id: dataItems[1],\n    attribute: ITEM_ATTRIBUTE_HORIZONTAL\n  }] : [])];\n  const items = Object.assign({}, ui.itemsByDimension);\n  items[DIMENSION_ID_DATA] = dataItems.slice(0, 2);\n  adaptedUi.itemsByDimension = items;\n  adaptedUi.options.measureCriteria = undefined;\n  return adaptedUi;\n};\n\nexport const getAdaptedUiByType = ui => {\n  switch (ui.type) {\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      {\n        return yearOverYearUiAdapter(ui);\n      }\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return ui;\n\n    case VIS_TYPE_GAUGE:\n    case VIS_TYPE_SINGLE_VALUE:\n      return singleValueUiAdapter(ui);\n\n    case VIS_TYPE_SCATTER:\n      return scatterUiAdapter(ui);\n\n    default:\n      return defaultUiAdapter(ui);\n  }\n};\nexport const getParentGraphMapFromVisualization = vis => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(vis);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n\n  if (!ouAxis) {\n    return {};\n  }\n\n  const parentGraphMap = {};\n  const ouDimension = vis[ouAxis].find(dimension => dimension.dimension === DIMENSION_ID_ORGUNIT);\n  ouDimension.items.filter(orgUnit => orgUnit.path).forEach(orgUnit => {\n    if ('/' + orgUnit.id === orgUnit.path) {\n      // root org unit case\n      parentGraphMap[orgUnit.id] = '';\n    } else {\n      const path = removeLastPathSegment(orgUnit.path);\n      parentGraphMap[orgUnit.id] = path[0] === '/' ? path.substr(1) : path;\n    }\n  });\n  return parentGraphMap;\n};\nexport const mergeUiMaps = (destinationMap, sourceMap, propName) => {\n  Object.keys(sourceMap || {}).forEach(key => {\n    if (!(key in destinationMap)) {\n      destinationMap[key] = {};\n    }\n\n    destinationMap[key][propName] = sourceMap[key];\n  });\n};","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport pick from 'lodash-es/pick';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIE, dimensionCreate, layoutGetDimensionItems, layoutReplaceDimension, getPredefinedDimensionProp, DIMENSION_PROP_NO_ITEMS, getAdaptedUiLayoutByType, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport options from './options';\nimport './layout';\nimport { BASE_FIELD_TYPE, BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../modules/ui';\n\nconst hasItems = (object, id) => Array.isArray(object[id]) && object[id].length;\n\nexport const getAxesFromUi = ui => Object.entries(ui.layout).reduce((layout, [axisId, dimensionIds]) => ({ ...layout,\n  [axisId]: dimensionIds.map(dimensionId => hasItems(ui.itemsByDimension, dimensionId) || getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS) ? dimensionCreate(dimensionId, ui.itemsByDimension[dimensionId]) : null).filter(dim => dim !== null)\n}), {});\nexport const getOptionsFromUi = ui => {\n  const optionsFromUi = pick(ui.options, Object.keys(options));\n\n  if (optionsFromUi.axes && optionsFromUi.axes.length) {\n    optionsFromUi.axes = [...optionsFromUi.axes.map(axis => ({ ...axis\n    }))];\n    optionsFromUi.axes.forEach(axis => {\n      if (axis.title) {\n        const {\n          enabled,\n          ...rest\n        } = axis.title;\n        axis.title = { ...rest\n        };\n      }\n\n      if (axis.targetLine) {\n        const {\n          enabled,\n          ...rest\n        } = axis.targetLine;\n        axis.targetLine = { ...rest\n        };\n      }\n\n      if (axis.baseLine) {\n        const {\n          enabled,\n          ...rest\n        } = axis.baseLine;\n        axis.baseLine = { ...rest\n        };\n      }\n    });\n  } // approvalLevel is stored as an object { id, level, displayName }\n  // only pass approvalLevel id\n\n\n  if (optionsFromUi.approvalLevel !== options.approvalLevel.defaultValue) {\n    optionsFromUi.approvalLevel = optionsFromUi.approvalLevel.id;\n  } // nested options under reportingParams\n\n\n  optionsFromUi.reportingParams = {};\n  ['organisationUnit', 'reportingPeriod', 'parentOrganisationUnit', 'grandParentOrganisationUnit'].forEach(option => {\n    optionsFromUi.reportingParams[option] = optionsFromUi[option];\n    delete optionsFromUi[option];\n  }) // cast option values to Number for some options\n  ;\n  ['sortOrder', 'topLimit'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(optionsFromUi, option)) {\n      if (optionsFromUi[option] !== undefined && optionsFromUi[option] !== '') {\n        optionsFromUi[option] = Number(optionsFromUi[option]);\n      }\n    }\n  });\n  return optionsFromUi;\n};\nexport const getSeriesFromUi = ui => {\n  return ui.options.series ? [...ui.options.series] : [];\n};\nexport const getSingleValueCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...getAdaptedUiLayoutByType(action.value.layout, VIS_TYPE_SINGLE_VALUE)\n    }\n  };\n  const axesFromUi = getAxesFromUi(ui); // only save the first dx item\n\n  const dxItems = layoutGetDimensionItems(axesFromUi, DIMENSION_ID_DATA);\n  const singleValueAxesFromUi = layoutReplaceDimension(axesFromUi, DIMENSION_ID_DATA, [dxItems[0]]);\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...singleValueAxesFromUi,\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getScatterCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...getAdaptedUiLayoutByType(action.value.layout, VIS_TYPE_SCATTER)\n    }\n  };\n  const axesFromUi = getAxesFromUi(ui); // only save first vertical and first horizontal dx items\n\n  const verticalItem = ui.itemAttributes.find(item => item.attribute === ITEM_ATTRIBUTE_VERTICAL) || {};\n  const horizontalItem = ui.itemAttributes.find(item => item.attribute === ITEM_ATTRIBUTE_HORIZONTAL) || {};\n  const scatterAxesFromUi = layoutReplaceDimension(axesFromUi, DIMENSION_ID_DATA, [verticalItem, horizontalItem].map(item => ({\n    id: item.id\n  })));\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...scatterAxesFromUi,\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getPieCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...getAdaptedUiLayoutByType(action.value.layout, VIS_TYPE_PIE)\n    }\n  };\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...getAxesFromUi(ui),\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getYearOverYearCurrentFromUi = (state, action) => {\n  const ui = action.value;\n  const periodDimension = dimensionCreate(DIMENSION_ID_PERIOD, ui.yearOverYearCategory);\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    [AXIS_ID_COLUMNS]: [],\n    [AXIS_ID_ROWS]: [periodDimension],\n    [AXIS_ID_FILTERS]: getAxesFromUi(ui).filters,\n    [[BASE_FIELD_YEARLY_SERIES]]: ui.yearOverYearSeries,\n    ...getOptionsFromUi(ui)\n  };\n};","import { VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport { getAxesFromUi, getOptionsFromUi, getPieCurrentFromUi, getYearOverYearCurrentFromUi, getSingleValueCurrentFromUi, getSeriesFromUi, getScatterCurrentFromUi } from '../modules/current';\nimport { BASE_FIELD_TYPE } from '../modules/fields/baseFields';\nexport const SET_CURRENT = 'SET_CURRENT';\nexport const SET_CURRENT_FROM_UI = 'SET_CURRENT_FROM_UI';\nexport const CLEAR_CURRENT = 'CLEAR_CURRENT';\nexport const DEFAULT_CURRENT = null;\n\nconst getDefaultFromUi = (state, action) => {\n  const axesFromUi = getAxesFromUi(action.value);\n  const optionsFromUi = getOptionsFromUi(action.value);\n  const series = getSeriesFromUi(action.value);\n  return { ...state,\n    [BASE_FIELD_TYPE]: action.value.type,\n    ...axesFromUi,\n    ...optionsFromUi,\n    series\n  };\n};\n\nexport default ((state = DEFAULT_CURRENT, action) => {\n  switch (action.type) {\n    case SET_CURRENT:\n      {\n        return action.value;\n      }\n\n    case SET_CURRENT_FROM_UI:\n      {\n        switch (action.value.type) {\n          case VIS_TYPE_PIE:\n            return getPieCurrentFromUi(state, action);\n\n          case VIS_TYPE_SINGLE_VALUE:\n          case VIS_TYPE_GAUGE:\n            return getSingleValueCurrentFromUi(state, action);\n\n          case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n          case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n            return getYearOverYearCurrentFromUi(state, action);\n\n          case VIS_TYPE_SCATTER:\n            return getScatterCurrentFromUi(state, action);\n\n          default:\n            {\n              return getDefaultFromUi(state, action);\n            }\n        }\n      }\n\n    case CLEAR_CURRENT:\n      return DEFAULT_CURRENT;\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetCurrent = state => state.current;\nexport const sGetCurrentFromUi = state => {\n  const ui = state.ui;\n\n  switch (ui.type) {\n    case VIS_TYPE_PIE:\n      return getPieCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      return getSingleValueCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return getYearOverYearCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_SCATTER:\n      return getScatterCurrentFromUi(state, {\n        value: ui\n      });\n\n    default:\n      {\n        return getDefaultFromUi(state, {\n          value: ui\n        });\n      }\n  }\n};","import { getPredefinedDimensions } from '@dhis2/analytics';\nexport const SET_DIMENSIONS = 'SET_DIMENSIONS';\nexport const SET_SELECTED_DIMENSION = 'SET_SELECTED_DIMENSION';\nexport const DEFAULT_DIMENSIONS = getPredefinedDimensions();\nexport default ((state = DEFAULT_DIMENSIONS, action) => {\n  switch (action.type) {\n    case SET_DIMENSIONS:\n      {\n        return { ...DEFAULT_DIMENSIONS,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\n/**\n * Selector which returns dimensions from the state object\n * If state.dimensions is null, then the dimensions api request\n * has not yet completed. If state.dimensions is an empty object\n * then the dimensions api request is complete, and there are no\n * dimensions\n *\n * @function\n * @param {Object} state The current state\n * @returns {Array}\n */\n\nexport const sGetDimensions = state => state.dimensions;","export const SET_RECOMMENDED_IDS = 'SET_RECOMMENDED_IDS';\nexport const DEFAULT_RECOMMENDED_IDS = [];\nexport default ((state = DEFAULT_RECOMMENDED_IDS, action) => {\n  switch (action.type) {\n    case SET_RECOMMENDED_IDS:\n      {\n        return action.value || DEFAULT_RECOMMENDED_IDS;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetRecommendedIds = state => state.recommendedIds;","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport castArray from 'lodash-es/castArray';\nimport { DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, DIMENSION_ID_ASSIGNED_CATEGORIES, canDimensionBeAddedToAxis, defaultVisType, defaultFontStyle, FONT_STYLE_LEGEND, FONT_STYLE_VISUALIZATION_TITLE, FONT_STYLE_VISUALIZATION_SUBTITLE, FONT_STYLE_AXIS_LABELS, FONT_STYLE_HORIZONTAL_AXIS_TITLE, FONT_STYLE_VERTICAL_AXIS_TITLE, FONT_STYLE_REGRESSION_LINE_LABEL } from '@dhis2/analytics';\nimport objectClean from 'd2-utilizr/lib/objectClean';\nimport { getFilteredLayout, getInverseLayout, getRetransfer } from '../modules/layout';\nimport { getOptionsForUi, OPTION_AXIS_DECIMALS, OPTION_HIDE_LEGEND, OPTION_AXIS_MAX_VALUE, OPTION_AXIS_MIN_VALUE, OPTION_AXIS_STEPS, OPTION_AXIS_TITLE, OPTION_AXIS_TITLE_ENABLED, OPTION_BASE_LINE_TITLE, OPTION_BASE_LINE_VALUE, OPTION_BASE_LINE_TITLE_FONT_STYLE, OPTION_TARGET_LINE_VALUE, OPTION_TARGET_LINE_TITLE_FONT_STYLE, OPTION_TARGET_LINE_TITLE, OPTION_BASE_LINE_ENABLED, OPTION_TARGET_LINE_ENABLED } from '../modules/options';\nimport { getAdaptedUiByType, getUiFromVisualization, SERIES_ITEM_TYPE_PROP } from '../modules/ui';\nexport const SET_UI = 'SET_UI';\nexport const SET_UI_FROM_VISUALIZATION = 'SET_UI_FROM_VISUALIZATION';\nexport const SET_UI_TYPE = 'SET_UI_TYPE';\nexport const SET_UI_OPTIONS = 'SET_UI_OPTIONS';\nexport const SET_UI_OPTION = 'SET_UI_OPTION';\nexport const SET_UI_OPTION_FONT_STYLE = 'SET_UI_OPTION_FONT_STYLE';\nexport const SET_UI_LAYOUT = 'SET_UI_LAYOUT';\nexport const ADD_UI_LAYOUT_DIMENSIONS = 'ADD_UI_LAYOUT_DIMENSIONS';\nexport const REMOVE_UI_LAYOUT_DIMENSIONS = 'REMOVE_UI_LAYOUT_DIMENSIONS';\nexport const SET_UI_ITEMS = 'SET_UI_ITEMS';\nexport const ADD_UI_ITEMS = 'ADD_UI_ITEMS';\nexport const REMOVE_UI_ITEMS = 'REMOVE_UI_ITEMS';\nexport const SET_UI_PARENT_GRAPH_MAP = 'SET_UI_PARENT_GRAPH_MAP';\nexport const ADD_UI_PARENT_GRAPH_MAP = 'ADD_UI_PARENT_GRAPH_MAP';\nexport const SET_UI_ACTIVE_MODAL_DIALOG = 'SET_UI_ACTIVE_MODAL_DIALOG';\nexport const SET_UI_YEAR_ON_YEAR_SERIES = 'SET_UI_YEAR_ON_YEAR_SERIES';\nexport const SET_UI_YEAR_ON_YEAR_CATEGORY = 'SET_UI_YEAR_ON_YEAR_CATEGORY';\nexport const SET_UI_ITEM_ATTRIBUTES = 'SET_UI_ITEM_ATTRIBUTES';\nexport const REMOVE_UI_ITEM_ATTRIBUTES = 'REMOVE_UI_ITEM_ATTRIBUTES';\nexport const CLEAR_UI = 'CLEAR_UI';\nexport const TOGGLE_UI_RIGHT_SIDEBAR_OPEN = 'TOGGLE_UI_RIGHT_SIDEBAR_OPEN';\nexport const SET_UI_RIGHT_SIDEBAR_OPEN = 'SET_UI_RIGHT_SIDEBAR_OPEN';\nexport const SET_UI_INTERPRETATION = 'SET_UI_INTERPRETATION';\nexport const CLEAR_UI_INTERPRETATION = 'CLEAR_UI_INTERPRETATION';\nexport const CLEAR_SERIES_TYPE = 'CLEAR_SERIES_TYPE';\nexport const UPDATE_UI_SERIES_ITEM = 'UPDATE_UI_SERIES_ITEM';\nexport const DEFAULT_UI = {\n  type: defaultVisType,\n  options: getOptionsForUi(),\n  layout: {\n    columns: [DIMENSION_ID_DATA],\n    rows: [DIMENSION_ID_PERIOD],\n    filters: [DIMENSION_ID_ORGUNIT]\n  },\n  itemsByDimension: {\n    [DIMENSION_ID_ORGUNIT]: [],\n    [DIMENSION_ID_PERIOD]: []\n  },\n  yearOverYearSeries: [],\n  yearOverYearCategory: [],\n  itemAttributes: [],\n  parentGraphMap: {},\n  activeModalDialog: null,\n  rightSidebarOpen: false,\n  interpretation: {},\n  outlierAnalysis: null\n};\nexport const PRESELECTED_YEAR_OVER_YEAR_SERIES = ['THIS_YEAR', 'LAST_YEAR'];\nexport const PRESELECTED_YEAR_OVER_YEAR_CATEGORY = ['MONTHS_THIS_YEAR'];\n\nconst getPreselectedUi = options => {\n  const {\n    rootOrganisationUnit,\n    relativePeriod,\n    digitGroupSeparator\n  } = options;\n  const rootOrganisationUnits = [];\n  const parentGraphMap = { ...DEFAULT_UI.parentGraphMap\n  };\n\n  if (rootOrganisationUnit && rootOrganisationUnit.id) {\n    rootOrganisationUnits.push(rootOrganisationUnit.id);\n    parentGraphMap[rootOrganisationUnit.id] = '';\n  }\n\n  return { ...DEFAULT_UI,\n    options: { ...DEFAULT_UI.options,\n      digitGroupSeparator\n    },\n    itemsByDimension: { ...DEFAULT_UI.itemsByDimension,\n      [DIMENSION_ID_ORGUNIT]: rootOrganisationUnits,\n      [DIMENSION_ID_PERIOD]: [relativePeriod]\n    },\n    yearOverYearSeries: PRESELECTED_YEAR_OVER_YEAR_SERIES,\n    yearOverYearCategory: PRESELECTED_YEAR_OVER_YEAR_CATEGORY,\n    parentGraphMap\n  };\n};\n\nexport default ((state = DEFAULT_UI, action) => {\n  switch (action.type) {\n    case SET_UI:\n      {\n        return { ...action.value\n        };\n      }\n\n    case SET_UI_FROM_VISUALIZATION:\n      {\n        return getAdaptedUiByType(getUiFromVisualization(action.value, state));\n      }\n\n    case SET_UI_TYPE:\n      {\n        return { ...state,\n          type: action.value\n        };\n      }\n\n    case SET_UI_OPTIONS:\n      {\n        return { ...state,\n          options: { ...state.options,\n            ...action.value\n          }\n        };\n      }\n\n    case SET_UI_OPTION:\n      {\n        const options = {\n          axes: state.options.axes || [],\n          legend: state.options.legend || {},\n          fontStyle: state.options.fontStyle || {}\n        };\n        const value = action.value.value;\n        const optionId = action.value.optionId;\n        const [axisType, axisIndex] = (action.value.axisId || '').split('_');\n        const fontStyleOption = action.value.fontStyleOption;\n\n        switch (optionId) {\n          case OPTION_AXIS_DECIMALS:\n          case OPTION_AXIS_STEPS:\n          case OPTION_AXIS_MAX_VALUE:\n          case OPTION_AXIS_MIN_VALUE:\n            {\n              options.axes = pushAxis(options.axes, { ...getAxis(options.axes, Number(axisIndex), axisType),\n                [optionId]: value\n              });\n              break;\n            }\n\n          case OPTION_HIDE_LEGEND:\n            options.legend = { ...options.legend,\n              hidden: value\n            };\n            break;\n\n          case OPTION_AXIS_TITLE:\n            {\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              options.axes = pushAxis(options.axes, { ...axis,\n                title: { ...axis.title,\n                  text: value\n                }\n              });\n              break;\n            }\n\n          case OPTION_AXIS_TITLE_ENABLED:\n            {\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              options.axes = pushAxis(options.axes, { ...axis,\n                title: { ...axis.title,\n                  enabled: value\n                }\n              });\n              break;\n            }\n\n          case OPTION_BASE_LINE_ENABLED:\n          case OPTION_TARGET_LINE_ENABLED:\n            {\n              const prop = optionId === OPTION_BASE_LINE_ENABLED ? 'baseLine' : 'targetLine';\n              options.axes = pushAxis(options.axes, { ...getAxis(options.axes, Number(axisIndex), axisType),\n                [prop]: value ? {\n                  enabled: value\n                } : null\n              });\n              break;\n            }\n\n          case OPTION_BASE_LINE_TITLE:\n          case OPTION_TARGET_LINE_TITLE:\n            {\n              var _axis$prop;\n\n              const prop = optionId === OPTION_BASE_LINE_TITLE ? 'baseLine' : 'targetLine';\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis[prop] = { ...axis[prop],\n                title: { ...((_axis$prop = axis[prop]) === null || _axis$prop === void 0 ? void 0 : _axis$prop.title),\n                  text: value || undefined\n                }\n              };\n              options.axes = pushAxis(options.axes, axis);\n              break;\n            }\n\n          case OPTION_BASE_LINE_VALUE:\n          case OPTION_TARGET_LINE_VALUE:\n            {\n              const prop = optionId === OPTION_BASE_LINE_VALUE ? 'baseLine' : 'targetLine';\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis[prop] = { ...axis[prop],\n                value: value || value === 0 ? value : undefined\n              };\n              options.axes = pushAxis(options.axes, axis);\n              break;\n            }\n\n          case OPTION_BASE_LINE_TITLE_FONT_STYLE:\n          case OPTION_TARGET_LINE_TITLE_FONT_STYLE:\n            {\n              var _axis$prop$title;\n\n              const prop = optionId === OPTION_BASE_LINE_TITLE_FONT_STYLE ? 'baseLine' : 'targetLine';\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis[prop].title = { ...axis[prop].title,\n                fontStyle: { ...((_axis$prop$title = axis[prop].title) === null || _axis$prop$title === void 0 ? void 0 : _axis$prop$title.fontStyle),\n                  [fontStyleOption]: defaultFontStyle[FONT_STYLE_REGRESSION_LINE_LABEL][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              options.axes = pushAxis(options.axes, axis);\n              break;\n            }\n\n          case FONT_STYLE_VERTICAL_AXIS_TITLE:\n          case FONT_STYLE_HORIZONTAL_AXIS_TITLE:\n            {\n              var _axis$title;\n\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis.title = { ...axis.title,\n                fontStyle: { ...((_axis$title = axis.title) === null || _axis$title === void 0 ? void 0 : _axis$title.fontStyle),\n                  [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              options.axes = pushAxis(options.axes, axis);\n              break;\n            }\n\n          case FONT_STYLE_AXIS_LABELS:\n            {\n              var _axis$label;\n\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis.label = { ...axis.label,\n                fontStyle: { ...((_axis$label = axis.label) === null || _axis$label === void 0 ? void 0 : _axis$label.fontStyle),\n                  [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              options.axes = pushAxis(options.axes, axis);\n              break;\n            }\n\n          case FONT_STYLE_LEGEND:\n            {\n              var _options$legend$label;\n\n              options.legend = { ...options.legend,\n                label: {\n                  fontStyle: { ...((_options$legend$label = options.legend.label) === null || _options$legend$label === void 0 ? void 0 : _options$legend$label.fontStyle),\n                    [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                  }\n                }\n              };\n              break;\n            }\n\n          case FONT_STYLE_VISUALIZATION_TITLE:\n          case FONT_STYLE_VISUALIZATION_SUBTITLE:\n            {\n              options.fontStyle = { ...options.fontStyle,\n                [optionId]: { ...options.fontStyle[optionId],\n                  [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              break;\n            }\n\n          default:\n            {\n              options[optionId] = value;\n              break;\n            }\n        }\n\n        options.fontStyle = deepClean(options.fontStyle);\n        options.legend = deepClean(options.legend);\n        options.axes = cleanAxes(options.axes);\n        return { ...state,\n          options: { ...state.options,\n            ...options\n          }\n        };\n      }\n\n    case SET_UI_OPTION_FONT_STYLE:\n      {\n        const options = {\n          axes: state.options.axes || []\n        };\n        const [axisType, axisIndex] = (action.value.axisId || '').split('_');\n        const axis = getAxis(options.axes, Number(axisIndex), axisType);\n\n        switch (action.value.optionId) {\n          case FONT_STYLE_VERTICAL_AXIS_TITLE:\n          case FONT_STYLE_HORIZONTAL_AXIS_TITLE:\n            {\n              axis.title = { ...axis.title,\n                fontStyle: action.value.value\n              };\n              options.axes = pushAxis(options.axes, axis);\n              break;\n            }\n        }\n\n        options.axes = cleanAxes(options.axes);\n        return { ...state,\n          options: { ...state.options,\n            ...options\n          }\n        };\n      }\n\n    case SET_UI_LAYOUT:\n      {\n        return { ...state,\n          layout: { ...action.value\n          }\n        };\n      }\n    // action.value: transfer object (dimensionId:axisId) saying what to add where: { ou: 'rows' }\n    // Reducer takes care of swapping (retransfer) if dimension already exists in layout\n\n    case ADD_UI_LAYOUT_DIMENSIONS:\n      {\n        const transfers = { ...action.value,\n          ...getRetransfer(state.layout, action.value, state.type)\n        };\n        let newLayout = state.layout; // Add dimension ids to destination (axisId === null means remove from layout)\n\n        Object.entries(transfers).forEach(([dimensionId, {\n          axisId,\n          index\n        }]) => {\n          if (newLayout[axisId] && canDimensionBeAddedToAxis(state.type, newLayout[axisId], axisId)) {\n            // Filter out transferred dimension id (remove from source)\n            newLayout = getFilteredLayout(newLayout, [dimensionId]);\n\n            if (index === null || index === undefined) {\n              newLayout[axisId].push(dimensionId);\n            } else {\n              newLayout[axisId].splice(index, 0, dimensionId);\n            }\n          }\n        });\n        return { ...state,\n          layout: newLayout\n        };\n      }\n\n    case REMOVE_UI_LAYOUT_DIMENSIONS:\n      {\n        return { ...state,\n          layout: getFilteredLayout(state.layout, action.value)\n        };\n      }\n\n    case SET_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: itemIds\n          }\n        };\n      }\n\n    case ADD_UI_ITEMS:\n      {\n        // FIXME: Unused, remove?\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        const currentItemIds = state.itemsByDimension[dimensionId] || [];\n        const dxItems = [...new Set([...currentItemIds, ...itemIds])];\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          }\n        };\n      }\n\n    case REMOVE_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIdsToRemove\n        } = action.value;\n        const dxItems = (state.itemsByDimension[dimensionId] || []).filter(id => !itemIdsToRemove.includes(id));\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          }\n        };\n      }\n\n    case SET_UI_YEAR_ON_YEAR_SERIES:\n      {\n        return { ...state,\n          yearOverYearSeries: action.value || DEFAULT_UI.yearOverYearSeries\n        };\n      }\n\n    case SET_UI_YEAR_ON_YEAR_CATEGORY:\n      {\n        return { ...state,\n          yearOverYearCategory: action.value ? castArray(action.value) : DEFAULT_UI.yearOverYearCategory\n        };\n      }\n\n    case SET_UI_ITEM_ATTRIBUTES:\n      {\n        const {\n          attribute,\n          itemIds,\n          dimensionId\n        } = action.value;\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: [...new Set([...state.itemsByDimension[dimensionId].filter(id => state.itemAttributes.find(itemAttr => itemAttr.id === id && itemAttr.attribute !== attribute)), ...itemIds])]\n          },\n          itemAttributes: [...state.itemAttributes.filter(item => item.attribute !== attribute), ...itemIds.map(id => ({\n            id,\n            attribute\n          }))]\n        };\n      }\n\n    case REMOVE_UI_ITEM_ATTRIBUTES:\n      {\n        const {\n          dimensionId,\n          itemIdsToRemove,\n          attribute\n        } = action.value;\n        const itemAttributes = (state.itemAttributes || []).filter(({\n          id: itemId,\n          attribute: itemAttribute\n        }) => !(itemIdsToRemove.includes(itemId) && itemAttribute === attribute));\n        const dxItems = (state.itemsByDimension[dimensionId] || []).filter(id => itemAttributes.some(({\n          id: itemId\n        }) => itemId === id) || !itemIdsToRemove.includes(id));\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          },\n          itemAttributes\n        };\n      }\n\n    case SET_UI_PARENT_GRAPH_MAP:\n      {\n        return { ...state,\n          parentGraphMap: action.value\n        };\n      }\n\n    case ADD_UI_PARENT_GRAPH_MAP:\n      {\n        return { ...state,\n          parentGraphMap: { ...state.parentGraphMap,\n            ...action.value\n          }\n        };\n      }\n\n    case SET_UI_ACTIVE_MODAL_DIALOG:\n      {\n        return { ...state,\n          activeModalDialog: action.value || DEFAULT_UI.activeModalDialog\n        };\n      }\n\n    case CLEAR_UI:\n      {\n        return getPreselectedUi(action.value);\n      }\n\n    case TOGGLE_UI_RIGHT_SIDEBAR_OPEN:\n      return { ...state,\n        rightSidebarOpen: !state.rightSidebarOpen\n      };\n\n    case SET_UI_RIGHT_SIDEBAR_OPEN:\n      return { ...state,\n        rightSidebarOpen: true\n      };\n\n    case SET_UI_INTERPRETATION:\n      return { ...state,\n        interpretation: action.value\n      };\n\n    case CLEAR_UI_INTERPRETATION:\n      return { ...state,\n        interpretation: DEFAULT_UI.interpretation\n      };\n\n    case CLEAR_SERIES_TYPE:\n      return { ...state,\n        options: { ...state.options,\n          series: state.options.series.map(({\n            type,\n            ...rest\n          }) => rest)\n        }\n      };\n\n    case UPDATE_UI_SERIES_ITEM:\n      {\n        const {\n          changedItem,\n          value,\n          prop\n        } = action.value;\n        const series = [...state.options.series];\n        const itemIndex = series.findIndex(item => item.dimensionItem == changedItem.dimensionItem);\n\n        if (prop === SERIES_ITEM_TYPE_PROP && value === state.type) {\n          const {\n            [prop]: remove,\n            ...rest\n          } = series[itemIndex];\n          series[itemIndex] = { ...rest\n          };\n        } else {\n          series[itemIndex] = Object.assign({}, series[itemIndex], {\n            [prop]: value\n          });\n        }\n\n        return { ...state,\n          options: { ...state.options,\n            series\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetUi = state => state.ui;\nexport const sGetUiType = state => sGetUi(state).type;\nexport const sGetUiOptions = state => sGetUi(state).options;\nexport const sGetUiLayout = state => sGetUi(state).layout;\nexport const sGetUiItems = state => sGetUi(state).itemsByDimension;\nexport const sGetUiYearOverYearSeries = state => sGetUi(state).yearOverYearSeries;\nexport const sGetUiYearOverYearCategory = state => sGetUi(state).yearOverYearCategory;\nexport const sGetUiItemsByAttribute = (state, attribute) => (sGetUi(state).itemAttributes || []).filter(item => item.attribute === attribute).map(item => item.id);\nexport const sGetUiParentGraphMap = state => sGetUi(state).parentGraphMap;\nexport const sGetUiActiveModalDialog = state => sGetUi(state).activeModalDialog;\nexport const sGetUiRightSidebarOpen = state => sGetUi(state).rightSidebarOpen;\nexport const sGetUiInterpretation = state => sGetUi(state).interpretation;\nexport const sGetAxes = state => sGetUi(state).axes; // Selectors level 2\n\nexport const sGetAxisIdByDimensionId = (state, dimensionId) => (getInverseLayout(sGetUiLayout(state)) || {})[dimensionId];\nexport const sGetUiItemsByDimension = (state, dimension) => sGetUiItems(state)[dimension] || DEFAULT_UI.itemsByDimension[dimension];\nexport const sGetDimensionItemsByAxis = (state, axisId) => sGetUiItemsByDimension(state, (sGetUiLayout(state) || {})[axisId]) || [];\nexport const sGetDimensionIdsFromLayout = state => Object.values(sGetUiLayout(state)).reduce((ids, axisDimensionIds) => ids.concat(axisDimensionIds), []);\nexport const sLayoutHasDimension = (state, dimension) => sGetDimensionIdsFromLayout(state).includes(dimension);\nexport const sLayoutHasAssignedCategories = state => sLayoutHasDimension(state, DIMENSION_ID_ASSIGNED_CATEGORIES);\nexport const sGetAxisSetup = state => {\n  const columns = sGetUiLayout(state).columns;\n  const items = sGetUiItems(state);\n  const axes = sGetAxes(state) || {};\n  return Array.isArray(items[columns[0]]) && items[columns[0]].length ? items[columns[0]].map(id => ({\n    id,\n    axis: id in axes ? axes[id] : 0\n  })) : [];\n};\nexport const sGetUiOption = (state, option) => {\n  var _getAxis$title, _getAxis$title2, _options$legend, _options$legend2, _options$legend2$labe, _getAxis$baseLine, _getAxis$baseLine2, _getAxis$baseLine2$ti, _getAxis$baseLine3, _getAxis$baseLine4, _getAxis$baseLine4$ti, _getAxis$targetLine, _getAxis$targetLine2, _getAxis$targetLine2$, _getAxis$targetLine3, _getAxis$targetLine4, _getAxis$targetLine4$, _getAxis$label, _getAxis$title3;\n\n  const options = sGetUi(state).options;\n  const [axisType, axisIndex] = (option.axisId || '').split('_');\n  let value;\n\n  if (option.name) {\n    value = options[option.name];\n  } else if (option.id) {\n    switch (option.id) {\n      case OPTION_AXIS_MAX_VALUE:\n      case OPTION_AXIS_MIN_VALUE:\n      case OPTION_AXIS_DECIMALS:\n      case OPTION_AXIS_STEPS:\n        value = getAxis(options.axes, Number(axisIndex), axisType)[option.id];\n        break;\n\n      case OPTION_AXIS_TITLE_ENABLED:\n        value = (_getAxis$title = getAxis(options.axes, Number(axisIndex), axisType).title) === null || _getAxis$title === void 0 ? void 0 : _getAxis$title.enabled;\n        break;\n\n      case OPTION_AXIS_TITLE:\n        value = (_getAxis$title2 = getAxis(options.axes, Number(axisIndex), axisType).title) === null || _getAxis$title2 === void 0 ? void 0 : _getAxis$title2.text;\n        break;\n\n      case OPTION_HIDE_LEGEND:\n        value = (_options$legend = options.legend) === null || _options$legend === void 0 ? void 0 : _options$legend.hidden;\n        break;\n\n      case FONT_STYLE_LEGEND:\n        value = getConsolidatedFontStyle(option.id, (_options$legend2 = options.legend) === null || _options$legend2 === void 0 ? void 0 : (_options$legend2$labe = _options$legend2.label) === null || _options$legend2$labe === void 0 ? void 0 : _options$legend2$labe.fontStyle);\n        break;\n\n      case OPTION_BASE_LINE_ENABLED:\n        value = (_getAxis$baseLine = getAxis(options.axes, Number(axisIndex), axisType).baseLine) === null || _getAxis$baseLine === void 0 ? void 0 : _getAxis$baseLine.enabled;\n        break;\n\n      case OPTION_BASE_LINE_TITLE:\n        value = (_getAxis$baseLine2 = getAxis(options.axes, Number(axisIndex), axisType).baseLine) === null || _getAxis$baseLine2 === void 0 ? void 0 : (_getAxis$baseLine2$ti = _getAxis$baseLine2.title) === null || _getAxis$baseLine2$ti === void 0 ? void 0 : _getAxis$baseLine2$ti.text;\n        break;\n\n      case OPTION_BASE_LINE_VALUE:\n        value = (_getAxis$baseLine3 = getAxis(options.axes, Number(axisIndex), axisType).baseLine) === null || _getAxis$baseLine3 === void 0 ? void 0 : _getAxis$baseLine3.value;\n        break;\n\n      case OPTION_BASE_LINE_TITLE_FONT_STYLE:\n        value = getConsolidatedFontStyle(FONT_STYLE_REGRESSION_LINE_LABEL, (_getAxis$baseLine4 = getAxis(options.axes, Number(axisIndex), axisType).baseLine) === null || _getAxis$baseLine4 === void 0 ? void 0 : (_getAxis$baseLine4$ti = _getAxis$baseLine4.title) === null || _getAxis$baseLine4$ti === void 0 ? void 0 : _getAxis$baseLine4$ti.fontStyle);\n        break;\n\n      case OPTION_TARGET_LINE_ENABLED:\n        value = (_getAxis$targetLine = getAxis(options.axes, Number(axisIndex), axisType).targetLine) === null || _getAxis$targetLine === void 0 ? void 0 : _getAxis$targetLine.enabled;\n        break;\n\n      case OPTION_TARGET_LINE_TITLE:\n        value = (_getAxis$targetLine2 = getAxis(options.axes, Number(axisIndex), axisType).targetLine) === null || _getAxis$targetLine2 === void 0 ? void 0 : (_getAxis$targetLine2$ = _getAxis$targetLine2.title) === null || _getAxis$targetLine2$ === void 0 ? void 0 : _getAxis$targetLine2$.text;\n        break;\n\n      case OPTION_TARGET_LINE_VALUE:\n        value = (_getAxis$targetLine3 = getAxis(options.axes, Number(axisIndex), axisType).targetLine) === null || _getAxis$targetLine3 === void 0 ? void 0 : _getAxis$targetLine3.value;\n        break;\n\n      case OPTION_TARGET_LINE_TITLE_FONT_STYLE:\n        value = getConsolidatedFontStyle(FONT_STYLE_REGRESSION_LINE_LABEL, (_getAxis$targetLine4 = getAxis(options.axes, Number(axisIndex), axisType).targetLine) === null || _getAxis$targetLine4 === void 0 ? void 0 : (_getAxis$targetLine4$ = _getAxis$targetLine4.title) === null || _getAxis$targetLine4$ === void 0 ? void 0 : _getAxis$targetLine4$.fontStyle);\n        break;\n\n      case FONT_STYLE_AXIS_LABELS:\n        value = getConsolidatedFontStyle(option.id, (_getAxis$label = getAxis(options.axes, Number(axisIndex), axisType).label) === null || _getAxis$label === void 0 ? void 0 : _getAxis$label.fontStyle);\n        break;\n\n      case FONT_STYLE_VERTICAL_AXIS_TITLE:\n      case FONT_STYLE_HORIZONTAL_AXIS_TITLE:\n        value = getConsolidatedFontStyle(option.id, (_getAxis$title3 = getAxis(options.axes, Number(axisIndex), axisType).title) === null || _getAxis$title3 === void 0 ? void 0 : _getAxis$title3.fontStyle);\n        break;\n\n      case FONT_STYLE_VISUALIZATION_TITLE:\n      case FONT_STYLE_VISUALIZATION_SUBTITLE:\n        value = getConsolidatedFontStyle(option.id, (options.fontStyle || {})[option.id]);\n        break;\n    }\n  }\n\n  return value;\n};\n\nconst getAxis = (axes = [], axisIndex, axisType) => ({ ...(axes.find(axis => axis.index === axisIndex && axis.type === axisType) || {\n    index: Number(axisIndex),\n    type: axisType\n  })\n});\n\nconst getConsolidatedFontStyle = (fontStyleKey, fontStyle) => ({ ...defaultFontStyle[fontStyleKey],\n  ...(fontStyle || {})\n});\n\nconst deepClean = input => {\n  const result = objectClean(input);\n  Object.keys(result).forEach(key => {\n    if (typeof result[key] === 'object') {\n      result[key] = deepClean(result[key]);\n\n      if (!Object.keys(result[key]).length) {\n        delete result[key];\n      }\n    }\n  });\n  return result;\n};\n\nconst pushAxis = (axes, axis) => {\n  const updatedAxes = axes.filter(filter => filter.index !== Number(axis.index) || filter.type !== axis.type);\n  updatedAxes.push(axis);\n  return updatedAxes;\n};\n\nconst cleanAxes = axes => axes.map(axis => {\n  const cleanAxis = deepClean(axis);\n  return !Object.keys(cleanAxis).filter(key => !['type', 'index'].includes(key)).length ? null : cleanAxis;\n}).filter(i => i);","export const ADD_METADATA = 'ADD_METADATA';\nexport const DEFAULT_METADATA = {};\nexport default ((state = DEFAULT_METADATA, action) => {\n  switch (action.type) {\n    case ADD_METADATA:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetMetadata = state => state.metadata;","export const ADD_SETTINGS = 'ADD_SETTINGS';\nexport const DEFAULT_SETTINGS = {\n  keyDateFormat: 'yyyy-MM-dd',\n  keyAnalysisRelativePeriod: 'LAST_12_MONTHS',\n  keyAnalysisDigitGroupSeparator: 'SPACE',\n  keyIgnoreAnalyticsApprovalYearThreshold: -1,\n  displayNameProperty: 'displayName',\n  uiLocale: 'en',\n  rootOrganisationUnit: {}\n};\nexport default ((state = DEFAULT_SETTINGS, action) => {\n  switch (action.type) {\n    case ADD_SETTINGS:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetSettings = state => state.settings;\nexport const sGetSettingsDisplayNameProperty = state => sGetSettings(state).displayNameProperty;\nexport const sGetSettingsDigitGroupSeparator = state => sGetSettings(state).keyAnalysisDigitGroupSeparator;\nexport const sGetRootOrgUnit = state => sGetSettings(state).rootOrganisationUnit;\nexport const sGetRelativePeriod = state => sGetSettings(state).keyAnalysisRelativePeriod;\nexport const sGetUiLocale = state => sGetSettings(state).uiLocale;","export const RECEIVED_USER = 'RECEIVED_USER';\nexport const SET_USER_AUTHORITY = 'SET_USER_AUTHORITY';\nexport const DEFAULT_USER = {\n  id: '',\n  username: '',\n  uiLocale: '',\n  isSuperuser: false,\n  authorities: {}\n};\nexport default ((state = DEFAULT_USER, action) => {\n  switch (action.type) {\n    case RECEIVED_USER:\n      {\n        return fromD2ToUserObj(action.value);\n      }\n\n    case SET_USER_AUTHORITY:\n      {\n        return { ...state,\n          authorities: { ...state.authorities,\n            ...action.value\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n});\n\nfunction fromD2ToUserObj(d2Object) {\n  return {\n    id: d2Object.id,\n    username: d2Object.username,\n    uiLocale: d2Object.settings.keyUiLocale,\n    isSuperuser: d2Object.authorities.has('ALL')\n  };\n} // Selectors\n\n\nexport const sGetUser = state => state.user;\nexport const sGetUserId = state => sGetUser(state).id;\nexport const sGetUsername = state => sGetUser(state).username;\nexport const sGetIsSuperuser = state => sGetUser(state).isSuperuser;\nexport const sGetUiLocale = state => sGetUser(state).uiLocale;\nexport const sGetUserAuthorities = state => sGetUser(state).authorities;","export const RECEIVED_SNACKBAR_MESSAGE = 'RECEIVED_SNACKBAR_MESSAGE';\nexport const CLEAR_SNACKBAR = 'CLEAR_SNACKBAR';\nexport const DEFAULT_SNACKBAR = {\n  message: null,\n  duration: null\n};\nexport default ((state = DEFAULT_SNACKBAR, action) => {\n  switch (action.type) {\n    case RECEIVED_SNACKBAR_MESSAGE:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    case CLEAR_SNACKBAR:\n      {\n        return DEFAULT_SNACKBAR;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetSnackbar = state => state.snackbar;","export const SET_LOAD_ERROR = 'SET_LOAD_ERROR';\nexport const CLEAR_LOAD_ERROR = 'CLEAR_LOAD_ERROR';\nexport const SET_LOADING = 'SET_LOADING';\nexport const SET_PLUGIN_LOADING = 'SET_PLUGIN_LOADING';\nexport const DEFAULT_LOADING = {\n  isLoading: false,\n  loadingError: null,\n  isPluginLoading: true\n};\nexport default ((state = DEFAULT_LOADING, action) => {\n  switch (action.type) {\n    case SET_LOAD_ERROR:\n      {\n        return { ...state,\n          loadingError: action.value\n        };\n      }\n\n    case CLEAR_LOAD_ERROR:\n      return { ...state,\n        loadingError: DEFAULT_LOADING.loadingError\n      };\n\n    case SET_LOADING:\n      return { ...state,\n        isLoading: action.value\n      };\n\n    case SET_PLUGIN_LOADING:\n      return { ...state,\n        isPluginLoading: action.value\n      };\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetLoadError = state => state.loader.loadingError;\nexport const sGetIsLoading = state => state.loader.isLoading;\nexport const sGetIsPluginLoading = state => state.loader.isPluginLoading;","export const SET_CHART = 'SET_CHART';\nexport const DEFAULT_CHART = null;\nexport default ((state = DEFAULT_CHART, action) => {\n  switch (action.type) {\n    case SET_CHART:\n      {\n        return action.value;\n      }\n\n    default:\n      return state;\n  }\n});\nexport const sGetChart = state => state.chart;","import { combineReducers } from 'redux';\nimport visualization, * as fromVisualization from './visualization';\nimport current, * as fromCurrent from './current';\nimport dimensions, * as fromDimensions from './dimensions';\nimport recommendedIds, * as fromRecommendedIds from './recommendedIds';\nimport ui, * as fromUi from './ui';\nimport metadata, * as fromMetadata from './metadata';\nimport settings, * as fromSettings from './settings';\nimport user, * as fromUser from './user';\nimport snackbar, * as fromSnackbar from './snackbar';\nimport loader, * as fromLoader from './loader';\nimport chart, * as fromChart from './chart'; // Reducers\n\nexport default combineReducers({\n  visualization,\n  current,\n  dimensions,\n  recommendedIds,\n  ui,\n  metadata,\n  settings,\n  user,\n  snackbar,\n  loader,\n  chart\n}); // Selectors\n\nexport { fromVisualization, fromCurrent, fromDimensions, fromRecommendedIds, fromUi, fromMetadata, fromSettings, fromUser, fromSnackbar, fromLoader, fromChart };\nexport const sGetSeriesSetupItems = state => fromUi.sGetAxisSetup(state).map(item => {\n  var _fromMetadata$sGetMet;\n\n  return {\n    dimensionItem: item.id,\n    axis: item.axis,\n    name: (_fromMetadata$sGetMet = fromMetadata.sGetMetadata(state)[item.id]) === null || _fromMetadata$sGetMet === void 0 ? void 0 : _fromMetadata$sGetMet.name\n  };\n});","import { createStore, applyMiddleware, compose } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport reducer from './reducers';\n\nconst configureStore = middleware => {\n  // Enable Redux devtools if extension is installed instead of redux-logger\n  // const composeEnhancers =\n  //     window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const composeEnhancers = typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: 'data-visualizer-app'\n  }) : compose;\n\n  if (!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV !== 'production') {\n    middleware.push(createLogger());\n  }\n\n  return createStore(reducer, composeEnhancers(applyMiddleware(...middleware)));\n};\n\nexport default configureStore;","import { ADD_METADATA } from '../reducers/metadata';\nexport const acAddMetadata = value => ({\n  type: ADD_METADATA,\n  value\n});","import { acAddMetadata } from '../actions/metadata';\nexport default (({\n  dispatch\n}) => next => action => {\n  typeof action.metadata === 'object' && !Array.isArray(action.metadata) && dispatch(acAddMetadata(action.metadata));\n  next(action);\n});","import { SET_UI, CLEAR_UI, SET_UI_FROM_VISUALIZATION, SET_UI_TYPE, SET_UI_OPTIONS, SET_UI_LAYOUT, ADD_UI_LAYOUT_DIMENSIONS, REMOVE_UI_LAYOUT_DIMENSIONS, SET_UI_ITEMS, ADD_UI_ITEMS, REMOVE_UI_ITEMS, ADD_UI_PARENT_GRAPH_MAP, SET_UI_PARENT_GRAPH_MAP, SET_UI_ACTIVE_MODAL_DIALOG, SET_UI_YEAR_ON_YEAR_SERIES, SET_UI_YEAR_ON_YEAR_CATEGORY, SET_UI_ITEM_ATTRIBUTES, REMOVE_UI_ITEM_ATTRIBUTES, TOGGLE_UI_RIGHT_SIDEBAR_OPEN, SET_UI_RIGHT_SIDEBAR_OPEN, SET_UI_INTERPRETATION, CLEAR_UI_INTERPRETATION, CLEAR_SERIES_TYPE, UPDATE_UI_SERIES_ITEM, SET_UI_OPTION, SET_UI_OPTION_FONT_STYLE } from '../reducers/ui';\nexport const acSetUi = value => ({\n  type: SET_UI,\n  value\n});\nexport const acClear = value => ({\n  type: CLEAR_UI,\n  value\n});\nexport const acSetUiFromVisualization = value => ({\n  type: SET_UI_FROM_VISUALIZATION,\n  value\n});\nexport const acSetUiType = value => ({\n  type: SET_UI_TYPE,\n  value\n});\nexport const acSetUiOptions = value => ({\n  type: SET_UI_OPTIONS,\n  value\n});\nexport const acSetUiOption = value => ({\n  type: SET_UI_OPTION,\n  value\n});\nexport const acSetUiOptionFontStyle = value => ({\n  type: SET_UI_OPTION_FONT_STYLE,\n  value\n});\nexport const acUpdateUiSeriesItem = value => ({\n  type: UPDATE_UI_SERIES_ITEM,\n  value\n});\nexport const acSetUiLayout = value => ({\n  type: SET_UI_LAYOUT,\n  value\n});\nexport const acAddUiLayoutDimensions = value => ({\n  type: ADD_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acRemoveUiLayoutDimensions = value => ({\n  type: REMOVE_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acSetUiItems = value => ({\n  type: SET_UI_ITEMS,\n  value\n});\nexport const acAddUiItems = value => ({\n  type: ADD_UI_ITEMS,\n  value\n});\nexport const acRemoveUiItems = value => ({\n  type: REMOVE_UI_ITEMS,\n  value\n});\nexport const acSetUiYearOverYearSeries = value => ({\n  type: SET_UI_YEAR_ON_YEAR_SERIES,\n  value\n});\nexport const acSetUiYearOverYearCategory = value => ({\n  type: SET_UI_YEAR_ON_YEAR_CATEGORY,\n  value\n});\nexport const acSetUiItemAttributes = value => ({\n  type: SET_UI_ITEM_ATTRIBUTES,\n  value\n});\nexport const acRemoveUiItemAttributes = value => ({\n  type: REMOVE_UI_ITEM_ATTRIBUTES,\n  value\n});\nexport const acAddParentGraphMap = value => ({\n  type: ADD_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetParentGraphMap = value => ({\n  type: SET_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetUiActiveModalDialog = value => ({\n  type: SET_UI_ACTIVE_MODAL_DIALOG,\n  value\n});\nexport const acToggleUiRightSidebarOpen = () => ({\n  type: TOGGLE_UI_RIGHT_SIDEBAR_OPEN\n});\nexport const acSetUiRightSidebarOpen = () => ({\n  type: SET_UI_RIGHT_SIDEBAR_OPEN\n});\nexport const acSetUiInterpretation = value => ({\n  type: SET_UI_INTERPRETATION,\n  value\n});\nexport const acClearUiInterpretation = () => ({\n  type: CLEAR_UI_INTERPRETATION\n});\nexport const acClearSeriesType = () => ({\n  type: CLEAR_SERIES_TYPE\n});","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport { canDimensionBeAddedToAxis, getPredefinedDimensionProp, DIMENSION_PROP_NO_ITEMS } from '@dhis2/analytics';\nimport { sGetUiLayout, sGetUiItems, sGetUiType } from '../reducers/ui';\nimport { acAddUiLayoutDimensions, acSetUiActiveModalDialog, acSetUiLayout } from '../actions/ui';\nimport { SOURCE_DIMENSIONS } from '../modules/layout';\n\nclass DndContext extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"rearrangeLayoutDimensions\", ({\n      sourceAxisId,\n      sourceIndex,\n      destinationAxisId,\n      destinationIndex\n    }) => {\n      const layout = this.props.layout;\n      const sourceList = Array.from(layout[sourceAxisId]);\n      const [moved] = sourceList.splice(sourceIndex, 1);\n\n      if (sourceAxisId === destinationAxisId) {\n        sourceList.splice(destinationIndex, 0, moved);\n        this.props.onReorderDimensions({ ...layout,\n          [sourceAxisId]: sourceList\n        });\n      } else {\n        if (canDimensionBeAddedToAxis(this.props.type, layout[destinationAxisId], destinationAxisId)) {\n          this.props.onAddDimensions({\n            [moved]: {\n              axisId: destinationAxisId,\n              index: destinationIndex\n            }\n          });\n        }\n      }\n    });\n\n    _defineProperty(this, \"addDimensionToLayout\", ({\n      axisId,\n      index,\n      dimensionId\n    }) => {\n      const {\n        layout,\n        type\n      } = this.props;\n\n      if (!canDimensionBeAddedToAxis(type, layout[axisId], axisId)) {\n        return;\n      }\n\n      this.props.onAddDimensions({\n        [dimensionId]: {\n          axisId,\n          index\n        }\n      });\n      const items = this.props.itemsByDimension[dimensionId];\n      const hasNoItems = Boolean(!items || !items.length);\n\n      if (hasNoItems && !getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS)) {\n        this.props.onDropWithoutItems(dimensionId);\n      }\n    });\n\n    _defineProperty(this, \"onDragEnd\", result => {\n      const {\n        source,\n        destination,\n        draggableId\n      } = result;\n\n      if (!destination) {\n        return;\n      }\n\n      if (source.droppableId === SOURCE_DIMENSIONS) {\n        this.addDimensionToLayout({\n          axisId: destination.droppableId,\n          index: destination.index,\n          dimensionId: draggableId\n        });\n      } else {\n        this.rearrangeLayoutDimensions({\n          sourceAxisId: source.droppableId,\n          sourceIndex: source.index,\n          destinationAxisId: destination.droppableId,\n          destinationIndex: destination.index\n        });\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(DragDropContext, {\n      onDragEnd: this.onDragEnd\n    }, this.props.children);\n  }\n\n}\n\nDndContext.propTypes = {\n  children: PropTypes.node,\n  itemsByDimension: PropTypes.object,\n  layout: PropTypes.object,\n  type: PropTypes.string,\n  onAddDimensions: PropTypes.func,\n  onDropWithoutItems: PropTypes.func,\n  onReorderDimensions: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  layout: sGetUiLayout(state),\n  type: sGetUiType(state),\n  itemsByDimension: sGetUiItems(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onAddDimensions: map => dispatch(acAddUiLayoutDimensions(map)),\n  onDropWithoutItems: dimensionId => dispatch(acSetUiActiveModalDialog(dimensionId)),\n  onReorderDimensions: layout => dispatch(acSetUiLayout(layout))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DndContext);","import { RECEIVED_SNACKBAR_MESSAGE, CLEAR_SNACKBAR } from '../reducers/snackbar';\nexport const acReceivedSnackbarMessage = value => ({\n  type: RECEIVED_SNACKBAR_MESSAGE,\n  value\n});\nexport const acClearSnackbar = () => ({\n  type: CLEAR_SNACKBAR\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { AlertBar } from '@dhis2/ui';\nimport styles from './styles/Snackbar.module.css';\nimport { sGetSnackbar } from '../../reducers/snackbar';\nimport { acClearSnackbar } from '../../actions/snackbar';\nexport const VARIANT_ERROR = 'error';\nexport const VARIANT_SUCCESS = 'success';\nexport const VARIANT_WARNING = 'warning';\nexport const Snackbar = ({\n  snackbar,\n  onClose\n}) => {\n  const {\n    variant,\n    message,\n    duration\n  } = snackbar;\n  return message && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(AlertBar, {\n    duration: duration,\n    critical: variant === VARIANT_ERROR,\n    success: variant === VARIANT_SUCCESS,\n    warning: variant === VARIANT_WARNING,\n    permanent: variant === VARIANT_ERROR || variant === VARIANT_WARNING,\n    onHidden: onClose\n  }, message));\n};\nSnackbar.propTypes = {\n  snackbar: PropTypes.object,\n  onClose: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  snackbar: sGetSnackbar(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClose: () => dispatch(acClearSnackbar())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Snackbar);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\n\nconst UpdateButton = ({\n  onClick,\n  ...props\n}) => {\n  return /*#__PURE__*/React.createElement(Button, _extends({}, props, {\n    onClick: onClick,\n    type: \"button\",\n    primary: true\n  }), i18n.t('Update'));\n};\n\nUpdateButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default UpdateButton;","import { getInstance } from 'd2';\nimport { Analytics } from '@dhis2/analytics';\nexport const apiDownloadImage = async ({\n  baseUrl,\n  type,\n  formData\n}) => {\n  const d2 = await getInstance();\n  const api = d2.Api.getApi();\n  const url = \"\".concat(baseUrl, \"/api/svg.\").concat(type);\n  return api.fetch(url, {\n    method: 'POST',\n    body: formData,\n    headers: new Headers(api.defaultHeaders)\n  }).then(res => res.blob());\n};\n\nconst addCommonParameters = (req, visualization, options) => {\n  req = req.withSkipRounding(visualization.skipRounding).withAggregationType(visualization.aggregationType).withMeasureCriteria(visualization.measureCriteria).withParameters({\n    completedOnly: visualization.completedOnly\n  }); //        .withUserOrgUnit(?) TODO\n\n  if (visualization.displayProperty) {\n    req = req.withDisplayProperty(visualization.displayProperty);\n  }\n\n  if (visualization.approvalLevel) {\n    req = req.withApprovalLevel(visualization.approvalLevel);\n  }\n\n  if (options.relativePeriodDate) {\n    req = req.withRelativePeriodDate(options.relativePeriodDate);\n  }\n\n  return req;\n};\n\nexport const apiDownloadTable = ({\n  dataEngine,\n  baseUrl,\n  visualization,\n  format,\n  options,\n  rows,\n  columns\n}) => {\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  let req = new analyticsEngine.request().fromVisualization(visualization).withFormat(format).withTableLayout().withRows(rows.join(';')).withColumns(columns.join(';'));\n  req = addCommonParameters(req, visualization, options);\n\n  if (visualization.hideEmptyColumns) {\n    req = req.withHideEmptyColumns();\n  }\n\n  if (visualization.hideEmptyRows) {\n    req = req.withHideEmptyRows();\n  }\n\n  if (visualization.showHierarchy) {\n    req = req.withShowHierarchy();\n  }\n\n  const url = new URL(\"\".concat(baseUrl, \"/api/\").concat(req.buildUrl()), \"\".concat(window.location.origin).concat(window.location.pathname));\n  Object.entries(req.buildQuery()).forEach(([key, value]) => url.searchParams.append(key, value));\n  return url;\n};\nexport const apiDownloadData = ({\n  baseUrl,\n  dataEngine,\n  visualization,\n  format,\n  options,\n  idScheme,\n  path\n}) => {\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  let req = new analyticsEngine.request().fromVisualization(visualization, path === 'dataValueSet').withFormat(format).withShowHierarchy(visualization.showHierarchy).withHierarchyMeta(visualization.showHierarchy).withIncludeMetadataDetails(true).withIncludeNumDen(); //.withApprovalLevel(visualization.?) TODO\n\n  req = addCommonParameters(req, visualization, options);\n\n  if (path) {\n    req = req.withPath(path);\n  }\n\n  if (idScheme) {\n    req = req.withOutputIdScheme(idScheme);\n  }\n\n  const url = new URL(\"\".concat(baseUrl, \"/api/\").concat(req.buildUrl()), \"\".concat(window.location.origin).concat(window.location.pathname));\n  Object.entries(req.buildQuery()).forEach(([key, value]) => url.searchParams.append(key, value));\n  return url;\n};","import PropTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './styles/MenuButton.module.css';\n\nconst MenuButton = ({\n  children,\n  dataTest,\n  disabled,\n  name,\n  onBlur,\n  onClick,\n  onFocus\n}) => /*#__PURE__*/React.createElement(\"button\", {\n  className: styles.menuButton,\n  \"data-test\": dataTest,\n  disabled: disabled,\n  name: name,\n  onBlur: onBlur,\n  onClick: onClick,\n  onFocus: onFocus\n}, children);\n\nMenuButton.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default MenuButton;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { useConfig, useDataEngine } from '@dhis2/app-runtime';\nimport { FlyoutMenu, Layer, MenuSectionHeader, MenuItem, Popper, IconImage24, IconFileDocument24, colors } from '@dhis2/ui';\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport { sGetUiType, sGetUiLayout, sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetChart } from '../../reducers/chart';\nimport { apiDownloadImage, apiDownloadData, apiDownloadTable } from '../../api/analytics';\nimport MenuButton from '../MenuButton/MenuButton';\n\nconst DenseMenuItem = ({\n  Icon,\n  children,\n  ...rest\n}) => /*#__PURE__*/React.createElement(MenuItem, _extends({\n  dense: true,\n  icon: Icon && /*#__PURE__*/React.createElement(Icon, {\n    color: colors.grey600\n  })\n}, rest), children);\n\nDenseMenuItem.propTypes = {\n  Icon: PropTypes.elementType,\n  children: PropTypes.array\n};\nexport const DownloadMenu = ({\n  current,\n  rows,\n  columns,\n  chart,\n  relativePeriodDate,\n  visType\n}) => {\n  const dataEngine = useDataEngine();\n  const {\n    baseUrl\n  } = useConfig();\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n\n  const onKeyDown = e => {\n    if ((e === null || e === void 0 ? void 0 : e.keyCode) === 27) {\n      setMenuIsOpen(false);\n    }\n  };\n\n  const toggleMenu = () => setMenuIsOpen(!menuIsOpen);\n\n  const downloadImage = format => async () => {\n    const formData = new URLSearchParams();\n    formData.append('filename', current.name);\n\n    if (chart) {\n      formData.append('svg', chart);\n    }\n\n    const blob = await apiDownloadImage({\n      baseUrl,\n      type: format,\n      formData\n    });\n    const url = URL.createObjectURL(blob);\n    toggleMenu();\n    window.open(url, '_blank');\n  };\n\n  const downloadData = (format, idScheme, path) => async () => {\n    const url = await apiDownloadData({\n      baseUrl,\n      dataEngine,\n      visualization: current,\n      format,\n      options: {\n        relativePeriodDate\n      },\n      idScheme,\n      path\n    });\n    toggleMenu();\n    window.open(url, format.match(/(xls|csv)/) ? '_top' : '_blank');\n  };\n\n  const downloadTable = format => async () => {\n    const url = await apiDownloadTable({\n      baseUrl,\n      dataEngine,\n      visualization: current,\n      format,\n      options: {\n        relativePeriodDate\n      },\n      rows,\n      columns\n    });\n    toggleMenu();\n    window.open(url, format === 'html' ? '_blank' : '_top');\n  };\n  /* eslint-disable react/jsx-key */\n\n\n  const graphicsMenuSection = () => React.Children.toArray([/*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Graphics')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    Icon: IconImage24,\n    label: i18n.t('Image (.png)'),\n    onClick: downloadImage('png')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    Icon: IconFileDocument24,\n    label: i18n.t('PDF (.pdf)'),\n    onClick: downloadImage('pdf')\n  })]);\n\n  const tableMenuSection = () => React.Children.toArray([/*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Table layout')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('Excel (.xls)'),\n    onClick: downloadTable('xls')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('CSV (.csv)'),\n    onClick: downloadTable('csv')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('HTML (.html)'),\n    onClick: downloadTable('html')\n  })]);\n\n  const plainDataSourceSubLevel = format => React.Children.toArray([/*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Metadata ID scheme')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('ID'),\n    onClick: downloadData(format, 'UID')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('Code'),\n    onClick: downloadData(format, 'CODE')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('Name'),\n    onClick: downloadData(format, 'NAME')\n  })]);\n  /* eslint-enable react/jsx-key */\n\n\n  const buttonRef = /*#__PURE__*/createRef();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(MenuButton, {\n    onClick: toggleMenu,\n    disabled: !current\n  }, i18n.t('Download'))), menuIsOpen && /*#__PURE__*/React.createElement(Layer, {\n    position: \"fixed\",\n    level: 2000,\n    onClick: toggleMenu\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: buttonRef,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, null, visType === VIS_TYPE_PIVOT_TABLE ? tableMenuSection() : graphicsMenuSection(), /*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Plain data source')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('JSON')\n  }, plainDataSourceSubLevel('json')), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('XML')\n  }, plainDataSourceSubLevel('xml')), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('Excel')\n  }, plainDataSourceSubLevel('xls')), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('CSV')\n  }, plainDataSourceSubLevel('csv')), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('Advanced')\n  }, /*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Data value set')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('JSON'),\n    onClick: downloadData('json', null, 'dataValueSet')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('XML'),\n    onClick: downloadData('xml', null, 'dataValueSet')\n  }), /*#__PURE__*/React.createElement(MenuSectionHeader, {\n    label: i18n.t('Other formats')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('JRXML'),\n    onClick: downloadData('jrxml')\n  }), /*#__PURE__*/React.createElement(DenseMenuItem, {\n    label: i18n.t('Raw data SQL'),\n    onClick: downloadData('sql', null, 'debug/sql')\n  }))))));\n};\nconst relativePeriodDateSelector = createSelector([sGetUiInterpretation], interpretation => interpretation.created || undefined);\nDownloadMenu.propTypes = {\n  chart: PropTypes.string,\n  columns: PropTypes.array,\n  current: PropTypes.object,\n  relativePeriodDate: PropTypes.string,\n  rows: PropTypes.array,\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  current: sGetCurrent(state),\n  relativePeriodDate: relativePeriodDateSelector(state),\n  rows: sGetUiLayout(state).rows,\n  columns: sGetUiLayout(state).columns,\n  chart: sGetChart(state),\n  visType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps)(DownloadMenu);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { IconChevronRight24, IconChevronLeft24 } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiRightSidebarOpen } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { acToggleUiRightSidebarOpen } from '../../actions/ui';\nimport MenuButton from '../MenuButton/MenuButton';\nimport styles from './styles/InterpretationsButton.module.css';\nexport const InterpretationsButton = props => /*#__PURE__*/React.createElement(MenuButton, {\n  disabled: !props.id,\n  onClick: props.onClick\n}, props.rightSidebarOpen ? /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.iconWrapper\n}, /*#__PURE__*/React.createElement(IconChevronRight24, null)) : /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.iconWrapper\n}, /*#__PURE__*/React.createElement(IconChevronLeft24, null)), i18n.t('Interpretations'));\nInterpretationsButton.propTypes = {\n  id: PropTypes.string,\n  rightSidebarOpen: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  rightSidebarOpen: sGetUiRightSidebarOpen(state),\n  id: (sGetCurrent(state) || {}).id\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClick: () => dispatch(acToggleUiRightSidebarOpen())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InterpretationsButton);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\n\nconst HideButton = ({\n  onClick,\n  ...props\n}) => /*#__PURE__*/React.createElement(Button, _extends({}, props, {\n  type: \"button\",\n  secondary: true,\n  onClick: onClick\n}), i18n.t('Hide'));\n\nHideButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default HideButton;","// constants\nconst ID = 'id';\nconst NAME = 'name,displayName,displayShortName';\nconst DIMENSION_ITEM = \"dimensionItem~rename(\".concat(ID, \")\");\nconst LEGEND_SET = \"\".concat(ID, \",\").concat(NAME);\nconst USER = \"\".concat(NAME, \",userCredentials[username]\");\nconst ITEMS = \"\".concat(DIMENSION_ITEM, \",\").concat(NAME, \",dimensionItemType\");\nconst AXIS = \"dimension,filter,legendSet[\".concat(LEGEND_SET, \"],items[\").concat(ITEMS, \"]\");\nconst INTERPRETATIONS = 'id,created'; // nested fields map\n\nexport const nestedFields = {\n  columns: AXIS,\n  rows: AXIS,\n  filters: AXIS,\n  user: USER,\n  interpretations: INTERPRETATIONS,\n  legendSet: LEGEND_SET\n};\nexport const extendFields = field => \"\".concat(field).concat(nestedFields[field] ? \"[\".concat(nestedFields[field], \"]\") : '');","import { getFieldsStringByType } from '../modules/fields';\nconst visualizationQuery = {\n  visualization: {\n    resource: 'visualizations',\n    id: ({\n      id\n    }) => id,\n    params: {\n      fields: getFieldsStringByType('visualization')\n    }\n  }\n};\nconst visualizationsQuery = {\n  visualization: {\n    resource: 'visualizations',\n    params: ({\n      visualizationIds\n    }) => ({\n      filter: \"id:in:[\".concat(visualizationIds, \"]\"),\n      fields: ['id', 'type']\n    })\n  }\n};\nexport const apiFetchVisualization = (dataEngine, id) => {\n  return dataEngine.query(visualizationQuery, {\n    variables: {\n      id\n    }\n  });\n};\nexport const apiFetchVisualizations = (dataEngine, visualizationIds) => {\n  return dataEngine.query(visualizationsQuery, {\n    variables: {\n      visualizationIds\n    }\n  });\n};\nexport const apiSaveVisualization = (dataEngine, visualization) => {\n  const mutation = {\n    type: 'create',\n    resource: 'visualizations',\n    data: visualization,\n    params: {\n      skipTranslations: 'true',\n      skipSharing: 'true'\n    }\n  };\n\n  if (visualization.id) {\n    mutation.type = 'update';\n    mutation.id = visualization.id;\n  }\n\n  return dataEngine.mutate(mutation);\n};","import { getAllFieldObjectsByType, extractName, markExcluded, moveExcludedToEnd } from './baseFields';\nimport { extendFields } from './nestedFields';\nexport { getAllFieldObjectsByType };\nexport const getOptionsByType = type => getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.option === true);\nexport const getIncludedByType = type => getAllFieldObjectsByType(type).filter(fieldObj => !fieldObj.excluded);\nexport const getExcludedByType = type => getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.excluded === true);\nexport const getFieldsStringByType = type => getAllFieldObjectsByType(type).map(markExcluded).map(extractName).sort().reduce(moveExcludedToEnd, null).map(extendFields).join(',');","import { SET_VISUALIZATION, CLEAR_VISUALIZATION } from '../reducers/visualization';\nexport const acSetVisualization = visualization => ({\n  type: SET_VISUALIZATION,\n  value: visualization\n});\nexport const acClear = () => ({\n  type: CLEAR_VISUALIZATION\n});","import { SET_CURRENT, SET_CURRENT_FROM_UI, CLEAR_CURRENT } from '../reducers/current';\nimport { sGetUi } from '../reducers/ui';\nexport const acSetCurrent = value => ({\n  type: SET_CURRENT,\n  value\n});\nexport const acClear = () => ({\n  type: CLEAR_CURRENT\n});\nexport const acSetCurrentFromUi = value => ({\n  type: SET_CURRENT_FROM_UI,\n  value\n});\nexport const tSetCurrentFromUi = () => async (dispatch, getState) => {\n  dispatch(acSetCurrentFromUi(sGetUi(getState())));\n};","import keyBy from 'lodash-es/keyBy';\nimport sortBy from 'lodash-es/sortBy';\nimport { SET_DIMENSIONS } from '../reducers/dimensions';\nimport { apiFetchDimensions } from '@dhis2/analytics';\nimport { sGetSettingsDisplayNameProperty } from '../reducers/settings';\nexport const acSetDimensions = dimensions => ({\n  type: SET_DIMENSIONS,\n  value: keyBy(sortBy(dimensions, [d => d.name.toLowerCase()]), 'id')\n});\nexport const tSetDimensions = () => async (dispatch, getState, engine) => {\n  const onSuccess = dimensions => {\n    dispatch(acSetDimensions(dimensions));\n  };\n\n  const onError = error => {\n    console.log('Error (apiFetchDimensions): ', error);\n    return error;\n  };\n\n  try {\n    const displayNameProp = sGetSettingsDisplayNameProperty(getState());\n    const dimensions = await apiFetchDimensions(engine, displayNameProp);\n    return onSuccess(dimensions);\n  } catch (err) {\n    return onError(err);\n  }\n};","// Helper functions\nexport const onError = error => console.log('Error: ', error);","import { onError } from './index';\nimport { SYSTEM_SETTINGS } from '../modules/settings';\nconst systemSettingsQuery = {\n  resource: 'systemSettings',\n  params: {\n    key: SYSTEM_SETTINGS\n  }\n};\nexport const apiFetchSystemSettings = async dataEngine => {\n  const systemSettingsData = await dataEngine.query({\n    systemSettings: systemSettingsQuery\n  }, {\n    onError\n  });\n  return systemSettingsData.systemSettings;\n};","export const SYSTEM_SETTINGS = ['keyDateFormat', 'keyAnalysisRelativePeriod', 'keyAnalysisDigitGroupSeparator', 'keyIgnoreAnalyticsApprovalYearThreshold'];","import { ADD_SETTINGS } from '../reducers/settings';\nimport { apiFetchSystemSettings } from '../api/settings';\nimport { apiFetchOrganisationUnitRoots } from '@dhis2/analytics';\nexport const acAddSettings = value => ({\n  type: ADD_SETTINGS,\n  value\n});\nexport const tAddSettings = (...extraSettings) => async (dispatch, getState, engine) => {\n  const onSuccess = fetchedSettings => {\n    dispatch(acAddSettings(Object.assign({}, fetchedSettings, ...extraSettings)));\n  };\n\n  const onError = error => {\n    console.log('Error (apiFetchSystemSettings): ', error);\n    return error;\n  };\n\n  try {\n    const fetchSystemSettings = apiFetchSystemSettings(engine);\n    const fetchOrgUnitRoots = apiFetchOrganisationUnitRoots(engine); // run in parallel\n\n    const [systemSettings, orgUnitRoots] = await Promise.all([fetchSystemSettings, fetchOrgUnitRoots]);\n    return onSuccess({ ...systemSettings,\n      rootOrganisationUnit: orgUnitRoots[0]\n    });\n  } catch (err) {\n    return onError(err);\n  }\n};","import { SET_LOAD_ERROR, CLEAR_LOAD_ERROR, SET_LOADING, SET_PLUGIN_LOADING } from '../reducers/loader';\nexport const acSetLoadError = value => ({\n  type: SET_LOAD_ERROR,\n  value\n});\nexport const acClearLoadError = () => ({\n  type: CLEAR_LOAD_ERROR\n});\nexport const acSetLoading = value => ({\n  type: SET_LOADING,\n  value\n});\nexport const acSetPluginLoading = value => ({\n  type: SET_PLUGIN_LOADING,\n  value\n});","import React from 'react';\nexport const EmptyBox = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"100\",\n  height: \"100\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M96.4184693 4.6480742l-2.9759268 2.6728C91.5558812 5.2202435 88.8786031 4 86 4V0c4.0260387 0 7.7809122 1.7113874 10.4184693 4.6480742zM100 19.269042h-4l-.0000544-5.3024514c-.0043849-1.346405-.2739964-2.6517927-.7866406-3.8623659l3.6833463-1.559795c.7189815 1.6978243 1.0971493 3.5288134 1.1032837 5.4156229L100 19.269042zm0 13.9999755h-4v-10h4v10zm0 14h-4v-10h4v10zm0 14h-4v-10h4v10zm0 13.9999995h-4v-9.9999995h4v9.9999995zm-.516108 14.50858l-3.8521996-1.077292C95.8751624 87.829701 96 86.924153 96 86v-6.730983h4V86c0 1.289184-.1747984 2.557136-.516108 3.777597zM87.7213345 99.895024l-.4874961-3.970182c2.8302961-.34753 5.3578432-1.892491 6.9762006-4.213767l3.2812621 2.287645c-2.2629208 3.245799-5.802045 5.409086-9.7699666 5.896304zM73.461965 100v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zM3.17264828 94.875717l3.09219912-2.537382c1.79303608 2.185097 4.4211055 3.525451 7.2855127 3.651773l-.176231 3.996116c-4.01094422-.176885-7.69477669-2.055693-10.20148082-5.110507zM0 80.192922h4l.00006331 5.84312c.00418159 1.190127.21554574 2.348454.61951638 3.438567L.86883696 90.864547C.3022517 89.335619.0059261 87.711683.00007566 86.043095L0 80.192922zm0-13.999974h4v10H0v-10zm0-14.0000005h4v10H0v-10zm0-14h4v10H0v-10zm0-14h4v10H0v-10zM.701349 9.6140131l3.79891292 1.2523021C4.17021443 11.8675286 4 12.9209553 4 14v6.1929475H0V14c0-1.5058511.2385093-2.9819426.701349-4.3859869zM12.9113947.0417954l.3073341 3.9881757c-2.8514503.2197365-5.43930476 1.6474003-7.16021518 3.8917822l-3.1742768-2.4339201C5.29022999 2.3499781 8.91606935.3496804 12.9113947.0417954zM27.07607 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10z\",\n  fill: \"#A0ADBA\",\n  fillRule: \"nonzero\"\n}));\nexport const PeriodError = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"100\",\n  height: \"100\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"#A0ADBA\",\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M72.9999996 82.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM72.9999996 60.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M72.9999996 45.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L82.0312812 51.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M49.9999996-3.4e-7c27.6142375 0 50 22.38576254 50 50.00000004 0 3.4254464-.3449043 6.8082851-1.0236569 10.111998-.3334386 1.6229556-1.9194094 2.6683156-3.542365 2.334877-1.6229555-.3334386-2.6683156-1.9194094-2.334877-3.5423649.5972413-2.9069705.9008989-5.8852591.9008989-8.9045101 0-24.300529-19.699471-44.00000004-44-44.00000004S5.99999963 25.6994707 5.99999963 49.9999997c0 20.0457004 13.52123857 37.4107541 32.60787227 42.5117075 1.6006767.4277851 2.5514932 2.0721783 2.1237081 3.672855-.4277851 1.6006767-2.0721782 2.5514932-3.672855 2.1237082C15.3630605 92.5100466-3.7e-7 72.7795776-3.7e-7 49.9999997-3.7e-7 22.3857622 22.3857621-3.4e-7 49.9999996-3.4e-7z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M31.9999996 52.4999997c-1.3807118 0-2.5-1.1192882-2.5-2.5 0-1.3254834 1.031536-2.4100387 2.3356243-2.4946824l.1643757-.0053176 15.4995614-.0008627.0004386-24.4991373c0-1.3807119 1.1192882-2.5 2.5-2.5 1.3254834 0 2.4100387 1.0315359 2.4946823 2.3356243l.0053177.1643757v27c0 1.3254834-1.0315359 2.4100386-2.3356243 2.4946823l-.1643757.0053177h-18z\"\n})));\nexport const DataError = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"98\",\n  height: \"97\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"#A0ADBA\",\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M47.9999996-3.4e-7c26.375131 0 48 8.64933258 48 21.00093054 0 6.7822228-6.3726775 12.3999932-16.8111022 16.1776421-1.5579685.5638263-3.2780231-.2420853-3.8418493-1.8000538-.5638263-1.5579685.2420852-3.2780231 1.8000537-3.8418493 8.3196582-3.0108708 12.8528978-7.007103 12.8528978-10.535739 0-7.5352197-18.6656043-15.00093054-42-15.00093054-23.3343956 0-41.99999997 7.46571084-41.99999997 15.00093054 0 8.3458435 22.23414277 16.1998284 47.97788217 14.8410919 1.6545514-.087326 3.066622 1.1831611 3.1539481 2.8377124.087326 1.6545514-1.1831611 3.066622-2.8377125 3.1539481C25.4193432 43.3576729-3.7e-7 34.3785482-3.7e-7 21.0009302-3.7e-7 8.64933224 21.6248687-3.4e-7 47.9999996-3.4e-7z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M92.9999996 17.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v24c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-24c0-1.6568543 1.3431458-3 3-3zM2.99999963 17.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.0917782c0 6.7884007 15.40674827 13.7997289 36.16062537 14.9125249 1.6544777.088711 2.9237824 1.5018446 2.8350715 3.1563223-.088711 1.6544776-1.5018446 2.9237823-3.1563223 2.8350714C18.3983599 64.7388196.36378289 56.6257218.00543546 45.431923L-3.7e-7 45.0917779V20.9999997c0-1.6568543 1.34314575-3 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.99999963 41.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.011713c0 5.6006467 10.94212037 11.6895243 27.41972777 14.017794 1.6405579.2318092 2.7825744 1.7496627 2.5507652 3.3902207-.2318092 1.640558-1.7496627 2.7825745-3.3902207 2.5507653l-1.1438963-.168296C13.057544 85.989973.26320686 78.7580311.00401161 69.3047869L-3.7e-7 69.0117127v-24.011713c0-1.6568543 1.34314575-3 3-3zM70.9999996 79.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM70.9999996 57.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M70.9999996 42.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L80.0312812 48.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\"\n})));\nexport const EmptySeries = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"100\",\n  width: \"100\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M92 52c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V60c0-4.418278 3.581722-8 8-8zm0 4H8c-2.209139 0-4 1.790861-4 4v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V60c0-2.209139-1.790861-4-4-4z\",\n  fill: \"#e8edf2\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M99.5567844 7.04865205l-3.8222065 1.17929519C94.9653901 5.7349373 92.6508139 4 90 4V0c4.4179248 0 8.2737479 2.89021004 9.5567844 7.04865205zM100 21.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 48v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 43.8539409 9.22479438 44 10 44h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 33.461965h4V38c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 42.558667 0 40.3386428 0 38zm0-14h4v10H0zM1.6090385 4.55843779L4.96347541 6.7373717C4.33751189 7.70103338 4 8.82295605 4 10v5.461965H0V10c0-1.95639059.56487346-3.8340854 1.6090385-5.44156221zM16.0507133 0v4H10c-1.00213211 0-1.96454891.24434864-2.82591887.70537441L5.28653945 1.17873487C6.72503094.40881989 8.33525118 0 10 0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0z\",\n  fill: \"#a0adba\"\n})));\nexport const EmptyCategory = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"100\",\n  width: \"100\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M92 0c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V8c0-4.418278 3.581722-8 8-8zm0 4H8C5.790861 4 4 5.790861 4 8v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V8c0-2.209139-1.790861-4-4-4z\",\n  fill: \"#e8edf2\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M99.5567844 59.048652l-3.8222065 1.1792952C94.9653901 57.7349373 92.6508139 56 90 56v-4c4.4179248 0 8.2737479 2.89021 9.5567844 7.048652zM100 73.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 100v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 95.8539409 9.22479438 96 10 96h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 85.461965h4V90c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 94.558667 0 92.3386428 0 90zm0-14h4v10H0zm1.6090385-14.9035272l3.35443691 2.1789339C4.33751189 59.7010334 4 60.822956 4 62v5.461965H0V62c0-1.9563906.56487346-3.8340854 1.6090385-5.4415622zM16.0507133 52v4H10c-1.00213211 0-1.96454891.2443486-2.82591887.7053744l-1.88754168-3.5266395C6.72503094 52.4088199 8.33525118 52 10 52zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4z\",\n  fill: \"#a0adba\"\n})));\nexport const GenericError = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"96\",\n  viewBox: \"0 0 96 96\",\n  width: \"96\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"#a0adba\",\n  transform: \"translate(3 3)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m40.5 73.5000001c0 2.4852813 2.0147186 4.5 4.5 4.5s4.5-2.0147187 4.5-4.5c0-2.4142734-1.9012365-4.3844892-4.2881643-4.4951021l-.2128322-.0048979c-2.4848234.0005384-4.4990035 2.0150507-4.4990035 4.5z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m48 60v-30c0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3v30c0 1.6568542 1.3431458 3 3 3s3-1.3431458 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m45-2.99904788c3.8985931 0 7.4578604 2.21715778 9.1770339 5.71709169l37.8912554 77.19048409c1.3845546 2.8165473 1.2171646 6.1482722-.4427191 8.811863-1.6598833 2.6635901-4.5771005 4.2816904-7.7135702 4.2796124h-77.82201115c-3.13845856.002078-6.05567574-1.6160223-7.71555901-4.2796124-1.65988369-2.6635908-1.82727377-5.9953157-.44346379-8.8103471l37.89234295-77.19269833c1.7188306-3.49923557 5.2780979-5.71639335 9.176691-5.71639335zm0 6c-1.6106864 0-3.0811818.91600885-3.7909661 2.36100407l-37.89274459 77.19351591c-.47005356.9562122-.41322496 2.0873262.15030227 2.99161.56352731.9042839 1.5539177 1.4529206 2.62140842 1.4529206h77.8259889c1.0655018 0 2.0558922-.5486367 2.6194195-1.4529206.5635272-.9042838.6203558-2.0353978.1495577-2.9931259l-37.8916571-77.19130167c-.7101272-1.44569356-2.1806226-2.36170241-3.791309-2.36170241z\"\n})));","import i18n from '@dhis2/d2-i18n';\nimport { getDisplayNameByVisType, getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType, getAxisPerLockedDimension, DIMENSION_ID_DATA, AXIS_ID_COLUMNS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport { EmptySeries, EmptyCategory, PeriodError, DataError, GenericError, EmptyBox } from '../assets/ErrorIcons';\nimport { VARIANT_ERROR, VARIANT_WARNING } from '../components/Snackbar/Snackbar';\nexport class VisualizationError {\n  constructor(icon, title, description) {\n    this.icon = icon;\n    this.title = title;\n    this.description = description;\n  }\n\n}\nexport class EmptyResponseError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('No data available'), i18n.t('The selected dimensions didn’t return any data. There may be no data, or you may not have access to it.'));\n  }\n\n}\nexport class NoSeriesError extends VisualizationError {\n  constructor(visType) {\n    super(EmptySeries, i18n.t(\"{{axisName}} is empty\", {\n      axisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoCategoryError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyCategory, i18n.t(\"{{axisName}} is empty\", {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoSeriesOrCategoryError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyBox, i18n.t(\"{{columnsAxisName}} and {{rowsAxisName}} are empty\", {\n      columnsAxisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType)),\n      rowsAxisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{columnsAxisName}} or {{rowsAxisName}} to create a {{visualizationType}}.', {\n      columnsAxisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType)),\n      rowsAxisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType)),\n      visualizationType: getDisplayNameByVisType(visType)\n    }));\n  }\n\n}\nexport class NoPeriodError extends VisualizationError {\n  constructor(visType) {\n    super(PeriodError, i18n.t('No period selected'), i18n.t('{{visualizationType}} must have at least one period selected in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class NoPointsError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyBox, i18n.t(\"{{axisName}} is empty\", {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add organisation units to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoVerticalError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('Vertical is empty'), i18n.t('Add a data item to the vertical axis.'));\n  }\n\n}\nexport class NoHorizontalError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('Horizontal is empty'), i18n.t('Add a data item to the horizontal axis.'));\n  }\n\n}\nexport class DuplicateItemsError extends VisualizationError {\n  constructor() {\n    super(DataError, i18n.t('Axes data items are the same'), i18n.t('The horizontal and vertical axes have the same data item. Scatter chart axes must have different data for each axis.'));\n  }\n\n}\nexport class NoDataOrDataElementGroupSetError extends VisualizationError {\n  constructor(visType) {\n    const lockedAxis = getAxisPerLockedDimension(visType, DIMENSION_ID_DATA);\n    super(DataError, i18n.t('No data selected'), i18n.t('{{visualizationType}} must have at least one data item or data element group set item in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: lockedAxis ? getAxisNameByLayoutType(lockedAxis, getLayoutTypeByVisType(visType)) : getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class NoDataError extends VisualizationError {\n  constructor(visType) {\n    const lockedAxis = getAxisPerLockedDimension(visType, DIMENSION_ID_DATA);\n    super(DataError, i18n.t('No data selected'), i18n.t('{{visualizationType}} must have at least one data item in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: lockedAxis ? getAxisNameByLayoutType(lockedAxis, getLayoutTypeByVisType(visType)) : getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class MultipleIndicatorAsFilterError extends VisualizationError {\n  constructor() {\n    super(DataError, i18n.t(\"There's a problem with the layout\"), i18n.t('A single indicator must be the only data item when using indicators as Data in Filter.'));\n  }\n\n}\nexport class CombinationDEGSRRError extends VisualizationError {\n  constructor() {\n    super(DataError, genericErrorTitle, i18n.t('Data Element Group Sets and Reporting Rates cannot be used together.'));\n  }\n\n}\nexport class GenericClientError extends VisualizationError {\n  constructor(visType) {\n    super(GenericError, genericErrorTitle, i18n.t('There is a problem with this {{visualizationType}} visualization.', {\n      visualizationType: getDisplayNameByVisType(visType)\n    }));\n  }\n\n}\nexport class GenericServerError extends VisualizationError {\n  constructor() {\n    super(GenericError, genericErrorTitle, i18n.t('There was a problem getting the data from the server.'));\n  }\n\n}\nexport class AssignedCategoriesDataElementsError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Assigned Categories can only be used with data elements'), i18n.t('Fix this problem by selecting data elements or removing Assigned Categories.'));\n  }\n\n}\nexport class AssignedCategoriesAsFilterError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Assigned Categories cannot be used as Filter'), i18n.t('Fix this problem by moving or removing Assigned Categories.'));\n  }\n\n}\nexport class VisualizationNotFoundError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Visualization not found'), i18n.t('The visualization you are trying to view could not be found, the ID could be incorrect or it could have been deleted.'));\n  }\n\n}\nexport class NoOrgUnitResponseError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('No organization units found'), i18n.t(\"The level or group selections didn't return any organization units.\"));\n  }\n\n}\nexport const genericErrorTitle = i18n.t('Something went wrong');\n\nconst getAvailableAxesDescription = visType => {\n  const axes = getAvailableAxes(visType);\n  let axesDescription = '';\n\n  for (let index = 0; index < axes.length; index++) {\n    axesDescription += getAxisNameByLayoutType(axes[index], getLayoutTypeByVisType(visType));\n\n    if (index < axes.length - 2) {\n      axesDescription += ', ';\n    } else if (index < axes.length - 1) {\n      axesDescription += \" \".concat(i18n.t('or'), \" \");\n    }\n  }\n\n  return axesDescription;\n};\n\nexport const getErrorVariantByStatusCode = statusCode => String(statusCode).match(/50\\d/) ? VARIANT_ERROR : VARIANT_WARNING;","const userAuthorityQuery = {\n  authority: {\n    resource: 'me/authorization',\n    id: ({\n      authorityId\n    }) => authorityId\n  }\n};\nexport const apiFetchUserAuthority = (dataEngine, authorityId) => dataEngine.query(userAuthorityQuery, {\n  variables: {\n    authorityId\n  }\n});","import { RECEIVED_USER, SET_USER_AUTHORITY } from '../reducers/user';\nimport { acSetLoadError } from './loader';\nimport { GenericServerError } from '../modules/error';\nimport { apiFetchUserAuthority } from '../api/user';\nexport const acReceivedUser = value => ({\n  type: RECEIVED_USER,\n  value\n});\nexport const acSetUserAuthority = value => ({\n  type: SET_USER_AUTHORITY,\n  value\n});\nexport const tLoadUserAuthority = authorityKey => async (dispatch, getState, engine) => {\n  const onSuccess = response => {\n    dispatch(acSetUserAuthority({\n      [authorityKey]: response.authority\n    }));\n  };\n\n  try {\n    return onSuccess(await apiFetchUserAuthority(engine, authorityKey));\n  } catch (err) {\n    dispatch(acSetLoadError(new GenericServerError()));\n  }\n};","import options from './options';\nimport { DEFAULT_VISUALIZATION } from '../reducers/visualization';\nimport { DEFAULT_CURRENT } from '../reducers/current';\nexport const getVisualizationFromCurrent = current => {\n  const visualization = Object.assign({}, current);\n  const nonSavableOptions = Object.keys(options).filter(option => !options[option].savable);\n  nonSavableOptions.forEach(option => delete visualization[option]);\n  return visualization;\n};\nexport const getVisualizationState = (visualization, current) => {\n  if (current === DEFAULT_CURRENT) {\n    return STATE_EMPTY;\n  } else if (visualization === DEFAULT_VISUALIZATION) {\n    return STATE_UNSAVED;\n  } else if (current === visualization) {\n    return STATE_SAVED;\n  } else {\n    return STATE_DIRTY;\n  }\n};\nexport const STATE_EMPTY = 'EMPTY';\nexport const STATE_SAVED = 'SAVED';\nexport const STATE_UNSAVED = 'UNSAVED';\nexport const STATE_DIRTY = 'DIRTY';","import { onError } from './index';\nexport const EVENT_TYPE = 'VISUALIZATION_VIEW';\nconst dataStatisticMutation = {\n  resource: 'dataStatistics',\n  params: ({\n    id\n  }) => ({\n    favorite: id,\n    eventType: EVENT_TYPE\n  }),\n  type: 'create'\n};\nexport const apiPostDataStatistics = (dataEngine, id) => dataEngine.mutate(dataStatisticMutation, {\n  variables: {\n    id\n  },\n  onError\n});","import i18n from '@dhis2/d2-i18n';\nimport { apiFetchVisualization, apiSaveVisualization } from '../api/visualization';\nimport * as fromVisualization from './visualization';\nimport * as fromCurrent from './current';\nimport * as fromDimensions from './dimensions';\nimport * as fromRecommended from './recommendedIds';\nimport * as fromUi from './ui';\nimport * as fromMetadata from './metadata';\nimport * as fromSettings from './settings';\nimport * as fromUser from './user';\nimport * as fromChart from './chart';\nimport * as fromSnackbar from './snackbar';\nimport * as fromLoader from './loader';\nimport { VARIANT_SUCCESS } from '../components/Snackbar/Snackbar';\nimport { sGetCurrent } from '../reducers/current';\nimport { sGetVisualization } from '../reducers/visualization';\nimport { sGetRootOrgUnit, sGetRelativePeriod, sGetSettingsDigitGroupSeparator } from '../reducers/settings';\nimport history from '../modules/history';\nimport { getVisualizationFromCurrent } from '../modules/visualization';\nimport { convertOuLevelsToUids } from '../modules/orgUnit';\nimport { apiPostDataStatistics } from '../api/dataStatistics';\nimport { GenericServerError, VisualizationNotFoundError } from '../modules/error';\nimport { getDisplayNameByVisType } from '@dhis2/analytics';\nexport { fromVisualization, fromCurrent, fromDimensions, fromRecommended, fromUi, fromMetadata, fromSettings, fromUser, fromChart, fromSnackbar, fromLoader };\n\nconst logError = (action, error) => {\n  console.log(\"Error in action \".concat(action, \": \").concat(error));\n}; // visualization, current, ui\n\n\nexport const tDoLoadVisualization = ({\n  id,\n  interpretationId,\n  ouLevels\n}) => async (dispatch, getState, engine) => {\n  const onSuccess = async response => {\n    dispatch(fromLoader.acSetPluginLoading(true));\n    const visualization = convertOuLevelsToUids(ouLevels, response.visualization);\n\n    if (interpretationId) {\n      const interpretation = visualization.interpretations.find(i => i.id === interpretationId);\n\n      if (interpretation) {\n        dispatch(fromUi.acSetUiInterpretation(interpretation));\n        dispatch(fromUi.acSetUiRightSidebarOpen());\n      }\n    }\n\n    apiPostDataStatistics(engine, visualization.id);\n    dispatch(fromVisualization.acSetVisualization(visualization));\n    dispatch(fromCurrent.acSetCurrent(visualization));\n    dispatch(fromUi.acSetUiFromVisualization(visualization));\n    dispatch(fromLoader.acClearLoadError());\n  };\n\n  try {\n    return onSuccess(await apiFetchVisualization(engine, id));\n  } catch (errorResponse) {\n    var _errorResponse$detail;\n\n    let error = errorResponse;\n\n    if ((errorResponse === null || errorResponse === void 0 ? void 0 : (_errorResponse$detail = errorResponse.details) === null || _errorResponse$detail === void 0 ? void 0 : _errorResponse$detail.httpStatusCode) === 404) {\n      error = new VisualizationNotFoundError();\n    } else if (errorResponse !== null && errorResponse !== void 0 && errorResponse.message) {\n      error = errorResponse.message;\n    } else {\n      error = new GenericServerError();\n    }\n\n    clearVisualization(dispatch, getState, error);\n    logError('tDoLoadVisualization', error);\n  }\n};\nexport const clearVisualization = (dispatch, getState, error = null) => {\n  if (error) {\n    dispatch(fromLoader.acSetLoadError(error));\n  } else {\n    dispatch(fromLoader.acClearLoadError());\n  }\n\n  dispatch(fromVisualization.acClear());\n  dispatch(fromCurrent.acClear());\n  const rootOrganisationUnit = sGetRootOrgUnit(getState());\n  const relativePeriod = sGetRelativePeriod(getState());\n  const digitGroupSeparator = sGetSettingsDigitGroupSeparator(getState());\n  dispatch(fromUi.acClear({\n    rootOrganisationUnit,\n    relativePeriod,\n    digitGroupSeparator\n  }));\n};\nexport const tDoRenameVisualization = ({\n  name,\n  description\n}) => (dispatch, getState) => {\n  const state = getState();\n  const visualization = sGetVisualization(state);\n  const current = sGetCurrent(state);\n  const updatedVisualization = { ...visualization\n  };\n  const updatedCurrent = { ...current\n  };\n\n  if (name) {\n    updatedVisualization.name = updatedCurrent.name = name;\n  }\n\n  if (description) {\n    updatedVisualization.description = updatedCurrent.description = description;\n  }\n\n  dispatch(fromVisualization.acSetVisualization(updatedVisualization)); // keep the same reference for current if there are no changes\n  // other than the name/description\n\n  if (visualization === current) {\n    dispatch(fromCurrent.acSetCurrent(updatedVisualization));\n  } else {\n    dispatch(fromCurrent.acSetCurrent(updatedCurrent));\n  }\n\n  dispatch(fromSnackbar.acReceivedSnackbarMessage({\n    variant: VARIANT_SUCCESS,\n    message: i18n.t('Rename successful'),\n    duration: 2000\n  }));\n};\nexport const tDoSaveVisualization = ({\n  name,\n  description\n}, copy) => async (dispatch, getState, engine) => {\n  const onSuccess = res => {\n    if (res.status === 'OK' && res.response.uid) {\n      if (copy) {\n        history.push({\n          pathname: \"/\".concat(res.response.uid),\n          state: {\n            isSaving: true\n          }\n        }); // Save as\n      } else {\n        history.replace({\n          pathname: \"/\".concat(res.response.uid),\n          state: {\n            isSaving: true\n          }\n        }); // Save\n      }\n    }\n  };\n\n  try {\n    dispatch(fromLoader.acSetPluginLoading(true));\n    const visualization = getVisualizationFromCurrent(sGetCurrent(getState())); // remove the id to trigger a POST request and save a new AO\n\n    if (copy) {\n      delete visualization.id;\n    }\n\n    visualization.name = // name provided in the Save dialog\n    name || // existing name when saving the same modified visualization\n    visualization.name || // new visualization with no name provided in Save dialog\n    i18n.t('Untitled {{visualizationType}} visualization, {{date}}', {\n      visualizationType: getDisplayNameByVisType(visualization.type),\n      date: new Date().toLocaleDateString(undefined, {\n        year: 'numeric',\n        month: 'short',\n        day: '2-digit'\n      })\n    });\n\n    if (description) {\n      visualization.description = description;\n    }\n\n    return onSuccess(await apiSaveVisualization(engine, visualization));\n  } catch (error) {\n    dispatch(fromLoader.acSetPluginLoading(false));\n    logError('tDoSaveVisualization', error); // TODO: Once the API returns custom error codes for validation errors, make sure they're relayed properly to be displayed to the user\n    // In the meantime we only display a generic error (doesn't give any constructive information but at least it doesn't fail silently any more)\n\n    dispatch(fromLoader.acSetLoadError(new GenericServerError()));\n  }\n};\nexport const tDoDeleteVisualization = () => (dispatch, getState) => {\n  const current = sGetCurrent(getState());\n  dispatch(fromSnackbar.acReceivedSnackbarMessage({\n    variant: VARIANT_SUCCESS,\n    message: i18n.t('\"{{deletedObject}}\" successfully deleted.', {\n      deletedObject: current.name\n    }),\n    duration: 2000\n  }));\n  history.push('/');\n};","import { AXIS, DIMENSION_ID_PERIOD, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_SCATTER, getPredefinedDimensionProp, dimensionIsValid, layoutGetDimension, DIMENSION_PROP_NO_ITEMS, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport { BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { NoSeriesError, NoCategoryError, NoPeriodError, NoDataError, NoSeriesOrCategoryError, NoPointsError, NoVerticalError, NoHorizontalError, DuplicateItemsError } from './error';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from './ui'; // Layout validation helper functions\n\nconst isAxisValid = axis => AXIS.isValid(axis) && axis.some(axisItem => dimensionIsValid(axisItem, {\n  requireItems: !getPredefinedDimensionProp(axisItem.dimension, DIMENSION_PROP_NO_ITEMS)\n}));\n\nconst validateDimension = (dimension, error) => {\n  if (!(dimension && dimensionIsValid(dimension, {\n    requireItems: true\n  }))) {\n    throw error;\n  }\n};\n\nconst validateAxis = (axis, error) => {\n  if (!isAxisValid(axis)) {\n    throw error;\n  }\n}; // Layout validation\n\n\nconst validateDefaultLayout = layout => {\n  validateAxis(layout.columns, new NoSeriesError(layout.type));\n  validateAxis(layout.rows, new NoCategoryError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), // TODO: old validation rule, refactor\n  new NoPeriodError(layout.type));\n};\n\nconst validatePivotTableLayout = layout => {\n  if (!isAxisValid(layout.columns) && !isAxisValid(layout.rows)) {\n    throw new NoSeriesOrCategoryError(layout.type);\n  }\n\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateYearOverYearLayout = layout => {\n  if (!(Array.isArray(layout[BASE_FIELD_YEARLY_SERIES]) && typeof layout[BASE_FIELD_YEARLY_SERIES][0] === 'string')) {\n    throw new NoSeriesError(layout.type);\n  }\n\n  validateAxis(layout.rows, new NoCategoryError(layout.type));\n};\n\nconst validatePieLayout = layout => {\n  validateAxis(layout.columns, new NoSeriesError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateSingleValueLayout = layout => {\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_DATA), new NoDataError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateScatterLayout = layout => {\n  var _layout$ui$itemAttrib, _layout$ui$itemAttrib2;\n\n  const verticalItems = ((_layout$ui$itemAttrib = layout.ui.itemAttributes) === null || _layout$ui$itemAttrib === void 0 ? void 0 : _layout$ui$itemAttrib.filter(item => item.attribute === ITEM_ATTRIBUTE_VERTICAL)) || [];\n  const horizontalItems = ((_layout$ui$itemAttrib2 = layout.ui.itemAttributes) === null || _layout$ui$itemAttrib2 === void 0 ? void 0 : _layout$ui$itemAttrib2.filter(item => item.attribute === ITEM_ATTRIBUTE_HORIZONTAL)) || [];\n\n  if (!verticalItems.length) {\n    throw new NoVerticalError();\n  } else if (!horizontalItems.length) {\n    throw new NoHorizontalError();\n  } else if (verticalItems[0].id === horizontalItems[0].id) {\n    throw new DuplicateItemsError();\n  }\n\n  validateAxis(layout.rows, new NoPointsError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nexport const validateLayout = layout => {\n  switch (layout.type) {\n    case VIS_TYPE_PIE:\n      return validatePieLayout(layout);\n\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n      return validateYearOverYearLayout(layout);\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      return validateSingleValueLayout(layout);\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return validatePivotTableLayout(layout);\n\n    case VIS_TYPE_SCATTER:\n      return validateScatterLayout(layout);\n\n    default:\n      return validateDefaultLayout(layout);\n  }\n};","import { getInstance } from 'd2';\nimport { onError } from './index';\nexport const NAMESPACE = 'analytics';\nexport const CURRENT_AO_KEY = 'currentAnalyticalObject';\nexport const hasNamespace = async (d2) => await d2.currentUser.dataStore.has(NAMESPACE);\nexport const getNamespace = async (d2, hasNamespace) => hasNamespace ? await d2.currentUser.dataStore.get(NAMESPACE) : await d2.currentUser.dataStore.create(NAMESPACE);\nexport const apiSave = async (data, key, namespace) => {\n  try {\n    const d2 = await getInstance();\n    const ns = namespace || (await getNamespace(d2, await hasNamespace(d2)));\n    return ns.set(key, data);\n  } catch (error) {\n    return onError(error);\n  }\n};\nexport const apiFetch = async (key, namespace) => {\n  try {\n    const d2 = await getInstance();\n    const ns = namespace || (await getNamespace(d2, await hasNamespace(d2)));\n    return ns.get(key);\n  } catch (error) {\n    return onError(error);\n  }\n};\nexport const apiSaveAOInUserDataStore = (current, key = CURRENT_AO_KEY) => apiSave(current, key);\nexport const apiFetchAOFromUserDataStore = (key = CURRENT_AO_KEY) => apiFetch(key);","import { connect } from 'react-redux';\nimport { sGetCurrent, sGetCurrentFromUi } from '../../reducers/current';\nimport * as fromActions from '../../actions';\nimport { validateLayout } from '../../modules/layoutValidation';\nimport { acSetLoadError, acClearLoadError, acSetPluginLoading } from '../../actions/loader';\nimport history from '../../modules/history';\nimport { CURRENT_AO_KEY } from '../../api/userDataStore';\nimport { GenericClientError } from '../../modules/error';\n\nconst UpdateVisualizationContainer = ({\n  renderComponent,\n  getCurrent,\n  getCurrentFromUi,\n  onUpdate,\n  acSetLoadError,\n  acClearLoadError,\n  onLoadingStart\n}) => {\n  // validate layout on update\n  // validation error message will be shown without loading the plugin first\n  const onClick = () => {\n    try {\n      validateLayout(getCurrentFromUi());\n      acClearLoadError();\n    } catch (error) {\n      acSetLoadError(error || new GenericClientError());\n    }\n\n    onLoadingStart();\n    onUpdate();\n    const urlContainsCurrentAOKey = history.location.pathname === '/' + CURRENT_AO_KEY;\n    const current = getCurrent();\n    const pathWithoutInterpretation = current && current.id ? \"/\".concat(current.id) : '/';\n\n    if (!urlContainsCurrentAOKey && history.location.pathname !== pathWithoutInterpretation) {\n      history.push(pathWithoutInterpretation);\n    }\n  };\n\n  return renderComponent(onClick);\n};\n\nconst mapDispatchToProps = {\n  getCurrent: () => (dispatch, getState) => sGetCurrent(getState()),\n  getCurrentFromUi: () => (dispatch, getState) => sGetCurrentFromUi(getState()),\n  onUpdate: fromActions.fromCurrent.tSetCurrentFromUi,\n  acSetLoadError,\n  acClearLoadError,\n  onLoadingStart: () => acSetPluginLoading(true)\n};\nexport default connect(null, mapDispatchToProps)(UpdateVisualizationContainer);","import _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\n/* eslint-disable-line no-unused-vars */\n\nimport { colors, spacers } from '@dhis2/ui';\nexport const tabBar = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3103009923\"\n  }, [\"div.jsx-3103009923{padding-right:\".concat(spacers.dp24, \";}\")]),\n  className: \"jsx-3103009923\"\n};\nexport const tabContent = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2208787536\"\n  }, [\"div.jsx-2208787536{overflow:auto;padding-right:\".concat(spacers.dp24, \";}\")]),\n  className: \"jsx-2208787536\"\n};\nexport const tabSection = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1427514941\"\n  }, [\"div.jsx-1427514941{padding:\".concat(spacers.dp16, \" 0;}\"), \"div.jsx-1427514941:not(:last-child){border-bottom:1px solid \".concat(colors.grey300, \";margin-bottom:\").concat(spacers.dp8, \";}\")]),\n  className: \"jsx-1427514941\"\n};\nexport const tabSectionContent = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1655721637\"\n  }, [\"div.jsx-1655721637{overflow-y:auto;}\"]),\n  className: \"jsx-1655721637\"\n};\nexport const tabSectionTitle = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3115295887\"\n  }, [\"span.jsx-3115295887{display:inline-block;padding-bottom:\".concat(spacers.dp12, \";font-size:15px;color:\").concat(colors.grey900, \";font-weight:500;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;}\")]),\n  className: \"jsx-3115295887\"\n};\nexport const tabSectionTitleMargin = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"642558349\"\n  }, [\"span.jsx-642558349{margin-top:\".concat(spacers.dp8, \";}\")]),\n  className: \"jsx-642558349\"\n};\nexport const tabSectionOption = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1665807213\"\n  }, [\"div.jsx-1665807213:not(:last-child):not(.inline){padding-bottom:\".concat(spacers.dp16, \";}\")]),\n  className: \"jsx-1665807213\"\n};\nexport const tabSectionOptionItem = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2983019948\"\n  }, [\"div.jsx-2983019948:not(:last-child){padding-bottom:\".concat(spacers.dp8, \";}\")]),\n  className: \"jsx-2983019948\"\n};\nexport const tabSectionOptionText = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3330936769\"\n  }, [\"p.jsx-3330936769{margin:0;padding-bottom:\".concat(spacers.dp8, \";font-size:14px;line-height:19px;color:\").concat(colors.grey700, \";}\")]),\n  className: \"jsx-3330936769\"\n};\nexport const tabSectionOptionToggleable = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"684239008\"\n  }, [\"div.jsx-684239008{margin:\".concat(spacers.dp4, \" 0 0 23px;}\")]),\n  className: \"jsx-684239008\"\n};\nexport const tabSectionToggleableSubsection = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1383096027\"\n  }, [\"div.jsx-1383096027{margin-left:23px;}\"]),\n  className: \"jsx-1383096027\"\n};\nexport const tabSectionOptionComplexInline = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1912734430\"\n  }, [\"div.jsx-1912734430{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\"]),\n  className: \"jsx-1912734430\"\n};\nexport const tabSectionOptionIcon = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"112181591\"\n  }, [\"span.jsx-112181591{vertical-align:top;margin-right:\".concat(spacers.dp4, \";color:\").concat(colors.grey600, \";}\")]),\n  className: \"jsx-112181591\"\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NoticeBox as UiNoticeBox } from '@dhis2/ui';\nimport { tabSectionOption } from './styles/VisualizationOptions.style.js';\n\nconst NoticeBox = ({\n  title,\n  text,\n  warning = false,\n  error = false\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(UiNoticeBox, {\n  title: title,\n  warning: warning,\n  error: error\n}, text));\n\nNoticeBox.propTypes = {\n  error: PropTypes.bool,\n  text: PropTypes.string,\n  title: PropTypes.string,\n  warning: PropTypes.bool\n};\nexport default NoticeBox;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox, SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nexport const SelectBaseOption = ({\n  option,\n  label,\n  helpText,\n  toggleable,\n  value,\n  onChange,\n  disabled,\n  dataTest\n}) => {\n  var _option$items$find;\n\n  const defaultValue = option.defaultValue;\n  const [checked, setChecked] = useState(value !== defaultValue);\n  const selected = (_option$items$find = option.items.find(item => item.value === value)) === null || _option$items$find === void 0 ? void 0 : _option$items$find.value;\n\n  const onToggle = checked => {\n    setChecked(checked);\n    onChange(checked ? option.items[0].value : defaultValue);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, toggleable ? /*#__PURE__*/React.createElement(Checkbox, {\n    checked: checked,\n    label: label,\n    name: \"\".concat(option.name, \"-toggle\"),\n    onChange: ({\n      checked\n    }) => onToggle(checked),\n    dense: true,\n    disabled: disabled,\n    dataTest: \"\".concat(dataTest, \"-checkbox\")\n  }) : null, (!toggleable || checked) && !disabled ? /*#__PURE__*/React.createElement(\"div\", {\n    className: toggleable ? tabSectionOptionToggleable.className : ''\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    name: \"\".concat(option.name, \"-select\"),\n    label: toggleable ? '' : label,\n    onChange: ({\n      selected\n    }) => onChange(selected),\n    selected: selected,\n    helpText: helpText,\n    inputWidth: \"280px\",\n    dense: true,\n    dataTest: \"\".concat(dataTest, \"-select\")\n  }, option.items.map(({\n    value,\n    label\n  }) => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: value,\n    value: value,\n    label: label,\n    dataTest: \"\".concat(dataTest, \"-option\")\n  })))) : null);\n};\nSelectBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  toggleable: PropTypes.bool\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst AggregationType = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Aggregation type'),\n  helpText: i18n.t('Overrides aggregation type for all data values.'),\n  option: {\n    name: 'aggregationType',\n    items: [{\n      value: 'DEFAULT',\n      label: i18n.t('By data element')\n    }, {\n      value: 'COUNT',\n      label: i18n.t('Count')\n    }, {\n      value: 'AVERAGE',\n      label: i18n.t('Average')\n    }, {\n      value: 'AVERAGE_SUM_ORG_UNIT',\n      label: i18n.t('Average (sum in org unit hierarchy)')\n    }, {\n      value: 'SUM',\n      label: i18n.t('Sum')\n    }, {\n      value: 'LAST',\n      label: i18n.t('Last value')\n    }, {\n      value: 'LAST_AVERAGE_ORG_UNIT',\n      label: i18n.t('Last value (average in org unit hierarchy)')\n    }, {\n      value: 'MIN',\n      label: i18n.t('Min')\n    }, {\n      value: 'MAX',\n      label: i18n.t('Max')\n    }, {\n      value: 'STDDEV',\n      label: i18n.t('Standard deviation')\n    }, {\n      value: 'VARIANCE',\n      label: i18n.t('Variance')\n    }]\n  }\n});\n\nexport default AggregationType;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst FontColorIcon = ({\n  color\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  fillRule: \"evenodd\",\n  fill: color,\n  r: \"7\"\n}));\n\nFontColorIcon.defaultProps = {\n  color: '#000000'\n};\nFontColorIcon.propTypes = {\n  color: PropTypes.string\n};\nexport default FontColorIcon;","import React from 'react';\n\nconst BoldIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m7 5h6c2.209139 0 4 1.790861 4 4 0 .97998001-.3524116 1.8776499-.9374171 2.5731919 1.1608063.6986588 1.9374171 1.9720399 1.9374171 3.4268081 0 2.209139-1.790861 4-4 4h-7zm7 8h-5v4h5c1.1045695 0 2-.8954305 2-2 0-1.0543618-.8158778-1.9181651-1.8507377-1.9945143zm-1-6h-4v4h4c1.1045695 0 2-.8954305 2-2 0-1.0543618-.8158778-1.91816512-1.8507377-1.99451426z\",\n  fill: \"#inherit\"\n}));\n\nexport default BoldIcon;","import React from 'react';\n\nconst ItalicIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m13.5 7h-3.5v-2h9v2h-3.5l-5 10h3.5v2h-9v-2h3.5z\",\n  fill: \"#inherit\"\n}));\n\nexport default ItalicIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelect, SingleSelectOption, Button } from '@dhis2/ui';\nimport { getFontSizeOptions, getTextAlignOptions, FONT_STYLE_OPTION_FONT_SIZE, FONT_STYLE_OPTION_BOLD, FONT_STYLE_OPTION_ITALIC, FONT_STYLE_OPTION_TEXT_COLOR, FONT_STYLE_OPTION_TEXT_ALIGN, isVerticalType } from '@dhis2/analytics';\nimport cx from 'classnames';\nimport debounce from 'lodash-es/debounce';\nimport styles from '../styles/TextStyle.module.css';\nimport FontColorIcon from '../../../assets/FontColorIcon';\nimport BoldIcon from '../../../assets/BoldIcon';\nimport ItalicIcon from '../../../assets/ItalicIcon';\nimport { sGetUiOption, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\n\nconst TextStyle = ({\n  fontStyleKey,\n  fontStyle,\n  visType,\n  onChange,\n  disabled,\n  dataTest,\n  isVertical\n}) => {\n  const fontSizeOptions = Object.values(getFontSizeOptions(fontStyleKey));\n  const textAlignOptions = getTextAlignOptions(fontStyleKey, isVertical || isVerticalType(visType));\n  const onChangeColor = debounce(value => {\n    onChange(FONT_STYLE_OPTION_TEXT_COLOR, value);\n  }, 100);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": dataTest\n  }, fontStyle[FONT_STYLE_OPTION_FONT_SIZE] && /*#__PURE__*/React.createElement(SingleSelect, {\n    onChange: ({\n      selected\n    }) => {\n      onChange(FONT_STYLE_OPTION_FONT_SIZE, Number(selected));\n    },\n    selected: (fontStyle[FONT_STYLE_OPTION_FONT_SIZE] || '').toString(),\n    prefix: i18n.t('Size'),\n    dense: true,\n    className: styles.fontSizeSelect,\n    disabled: disabled,\n    dataTest: \"\".concat(dataTest, \"-font-size-select\")\n  }, fontSizeOptions.map(option => {\n    var _option$value, _option$value2, _option$value3;\n\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: (_option$value = option.value) === null || _option$value === void 0 ? void 0 : _option$value.toString(),\n      value: (_option$value2 = option.value) === null || _option$value2 === void 0 ? void 0 : _option$value2.toString(),\n      label: option.label,\n      dataTest: \"\".concat(dataTest, \"-font-size-option-\").concat((_option$value3 = option.value) === null || _option$value3 === void 0 ? void 0 : _option$value3.toString())\n    });\n  })), fontStyle[FONT_STYLE_OPTION_TEXT_ALIGN] && /*#__PURE__*/React.createElement(SingleSelect, {\n    onChange: ({\n      selected\n    }) => {\n      onChange(FONT_STYLE_OPTION_TEXT_ALIGN, selected);\n    },\n    selected: fontStyle[FONT_STYLE_OPTION_TEXT_ALIGN],\n    prefix: i18n.t('Position'),\n    dense: true,\n    className: styles.textAlignSelect,\n    disabled: disabled,\n    dataTest: \"\".concat(dataTest, \"-text-align-select\")\n  }, textAlignOptions.map(option => {\n    var _option$value4;\n\n    return /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: option.value,\n      value: option.value,\n      label: option.label,\n      dataTest: \"\".concat(dataTest, \"-text-align-option-\").concat((_option$value4 = option.value) === null || _option$value4 === void 0 ? void 0 : _option$value4.toString())\n    });\n  })), fontStyle[FONT_STYLE_OPTION_TEXT_COLOR] && /*#__PURE__*/React.createElement(\"label\", {\n    className: cx(styles.textColorLabel, {\n      [styles.disabled]: disabled\n    }),\n    \"data-test\": \"\".concat(dataTest, \"-text-color-picker\")\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: fontStyle[FONT_STYLE_OPTION_TEXT_COLOR],\n    onChange: e => onChangeColor(e.target.value),\n    className: styles.textColorInput,\n    disabled: disabled\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.textColorIcon\n  }, /*#__PURE__*/React.createElement(FontColorIcon, {\n    color: fontStyle[FONT_STYLE_OPTION_TEXT_COLOR]\n  }))), fontStyle[FONT_STYLE_OPTION_BOLD] != null && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(BoldIcon, null),\n    onClick: () => {\n      onChange(FONT_STYLE_OPTION_BOLD, !fontStyle[FONT_STYLE_OPTION_BOLD]);\n    },\n    small: true,\n    secondary: true,\n    toggled: fontStyle[FONT_STYLE_OPTION_BOLD],\n    disabled: disabled,\n    dataTest: \"\".concat(dataTest, \"-bold-toggle\")\n  }), fontStyle[FONT_STYLE_OPTION_ITALIC] != null && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(ItalicIcon, null),\n    onClick: () => {\n      onChange(FONT_STYLE_OPTION_ITALIC, !fontStyle[FONT_STYLE_OPTION_ITALIC]);\n    },\n    small: true,\n    secondary: true,\n    disabled: disabled,\n    toggled: fontStyle[FONT_STYLE_OPTION_ITALIC],\n    dataTest: \"\".concat(dataTest, \"-italic-toggle\")\n  }));\n};\n\nTextStyle.propTypes = {\n  fontStyleKey: PropTypes.string.isRequired,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyle: PropTypes.object,\n  isVertical: PropTypes.bool,\n  visType: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  fontStyle: sGetUiOption(state, {\n    id: ownProps.fontStyleKey,\n    axisId: ownProps.axisId\n  }) || {},\n  visType: sGetUiType(state)\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: (option, value) => dispatch(acSetUiOption({\n    optionId: ownProps.fontStyleKey,\n    axisId: ownProps.axisId,\n    //FIXME: Should axisId be listed in propTypes?\n    fontStyleOption: option,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TextStyle);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nexport const CheckboxBaseOption = ({\n  option,\n  label,\n  value,\n  onChange,\n  inverted,\n  fontStyleKey,\n  dataTest\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Checkbox, {\n  checked: inverted ? !value : value,\n  label: label,\n  name: option.name,\n  onChange: ({\n    checked\n  }) => onChange(inverted ? !checked : checked),\n  dense: true\n}), (!inverted && value || inverted && !value) && fontStyleKey ? /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOptionToggleable.className\n}, /*#__PURE__*/React.createElement(TextStyle, {\n  fontStyleKey: fontStyleKey,\n  dataTest: \"\".concat(dataTest, \"-text-style\")\n})) : null);\nCheckboxBaseOption.propTypes = {\n  dataTest: PropTypes.string,\n  fontStyleKey: PropTypes.string,\n  inverted: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  value: PropTypes.bool,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckboxBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowDimensionLabels = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Dimension labels'),\n  option: {\n    name: 'showDimensionLabels'\n  }\n});\n\nexport default ShowDimensionLabels;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst SkipRounding = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Skip rounding'),\n  option: {\n    name: 'skipRounding'\n  }\n});\n\nexport default SkipRounding;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ColTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Columns totals'),\n  option: {\n    name: 'colTotals'\n  }\n});\n\nexport default ColTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ColSubTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Column sub-totals'),\n  option: {\n    name: 'colSubTotals'\n  }\n});\n\nexport default ColSubTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst RowTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Row totals'),\n  option: {\n    name: 'rowTotals'\n  }\n});\n\nexport default RowTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst RowSubTotals = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Row sub-totals'),\n  option: {\n    name: 'rowSubTotals'\n  }\n});\n\nexport default RowSubTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideEmptyColumns = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Hide empty columns'),\n  option: {\n    name: 'hideEmptyColumns'\n  }\n});\n\nexport default HideEmptyColumns;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideEmptyRows = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Hide empty rows'),\n  option: {\n    name: 'hideEmptyRows'\n  }\n});\n\nexport default HideEmptyRows;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst NumberType = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Number type'),\n  helpText: i18n.t('Display the value of percentages of the total'),\n  option: {\n    name: 'numberType',\n    items: [{\n      value: 'VALUE',\n      label: i18n.t('Value')\n    }, {\n      value: 'ROW_PERCENTAGE',\n      label: i18n.t('Percentage of row')\n    }, {\n      value: 'COLUMN_PERCENTAGE',\n      label: i18n.t('Percentage of column')\n    }]\n  }\n});\n\nexport default NumberType;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox, Box, Input, InputField } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nexport const TextBaseOption = ({\n  type,\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  onToggle,\n  fontStyleKey,\n  toggleable,\n  checked,\n  inline,\n  disabled,\n  dataTest,\n  isVertical\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: inline ? '' : tabSectionOption.className\n}, toggleable ? /*#__PURE__*/React.createElement(Checkbox, {\n  checked: checked,\n  label: label,\n  name: \"\".concat(option.name, \"-toggle\"),\n  onChange: ({\n    checked\n  }) => onToggle(checked),\n  dense: true,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-checkbox\")\n}) : null, !toggleable || checked ? /*#__PURE__*/React.createElement(\"div\", {\n  className: toggleable ? tabSectionOptionToggleable.className : ''\n}, inline ? /*#__PURE__*/React.createElement(Box, {\n  width: width\n}, /*#__PURE__*/React.createElement(Input, {\n  type: type,\n  onChange: ({\n    value\n  }) => onChange(value),\n  name: option.name,\n  value: value.toString(),\n  placeholder: placeholder,\n  dense: true,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-input\")\n})) : /*#__PURE__*/React.createElement(InputField, {\n  type: type,\n  label: toggleable ? '' : label,\n  onChange: ({\n    value\n  }) => onChange(value),\n  name: option.name,\n  value: value,\n  helpText: disabled ? '' : helpText,\n  placeholder: placeholder,\n  inputWidth: width,\n  dense: true,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-input\")\n}), fontStyleKey ? /*#__PURE__*/React.createElement(TextStyle, {\n  fontStyleKey: fontStyleKey,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-text-style\"),\n  axisId: option.axisId,\n  isVertical: isVertical\n}) : null) : null);\nTextBaseOption.defaultProps = {\n  option: {}\n};\nTextBaseOption.propTypes = {\n  checked: PropTypes.bool,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyleKey: PropTypes.string,\n  helpText: PropTypes.string,\n  inline: PropTypes.bool,\n  isVertical: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  toggleable: PropTypes.bool,\n  type: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.string,\n  onChange: PropTypes.func,\n  onToggle: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option) || '',\n  checked: sGetUiOption(state, {\n    id: ownProps.option.enabledId,\n    axisId: ownProps.option.axisId\n  }) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value\n  })),\n  onToggle: checked => dispatch(acSetUiOption({\n    optionId: ownProps.option.enabledId,\n    axisId: ownProps.option.axisId,\n    value: checked\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TextBaseOption);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst Title = ({\n  label,\n  inline\n}) => /*#__PURE__*/React.createElement(TextBaseOption, {\n  type: \"text\",\n  width: \"280px\",\n  label: label,\n  placeholder: i18n.t('Add a title'),\n  option: {\n    name: 'title'\n  },\n  inline: inline\n});\n\nTitle.defaultProps = {\n  inline: false\n};\nTitle.propTypes = {\n  inline: PropTypes.bool,\n  label: PropTypes.string\n};\nexport default Title;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst DisplayDensity = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Display density'),\n  option: {\n    name: 'displayDensity',\n    items: [{\n      value: 'COMFORTABLE',\n      label: i18n.t('Comfortable')\n    }, {\n      value: 'NORMAL',\n      label: i18n.t('Normal')\n    }, {\n      value: 'COMPACT',\n      label: i18n.t('Compact')\n    }]\n  }\n});\n\nexport default DisplayDensity;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst FontSize = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Font size'),\n  option: {\n    name: 'fontSize',\n    items: [{\n      value: 'LARGE',\n      label: i18n.t('Large')\n    }, {\n      value: 'NORMAL',\n      label: i18n.t('Normal')\n    }, {\n      value: 'SMALL',\n      label: i18n.t('Small')\n    }]\n  }\n});\n\nexport default FontSize;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst DigitGroupSeparator = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Digit group separator'),\n  option: {\n    name: 'digitGroupSeparator',\n    items: [{\n      value: 'NONE',\n      label: i18n.t('None')\n    }, {\n      value: 'SPACE',\n      label: i18n.t('Space')\n    }, {\n      value: 'COMMA',\n      label: i18n.t('Comma')\n    }]\n  }\n});\n\nexport default DigitGroupSeparator;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamReportingPeriod = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Reporting period'),\n  option: {\n    name: 'reportingPeriod'\n  }\n});\n\nexport default ParamReportingPeriod;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamOrganisationUnit = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Organisation unit'),\n  option: {\n    name: 'organisationUnit'\n  }\n});\n\nexport default ParamOrganisationUnit;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamParentOrganisationUnit = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Parent organisation unit'),\n  option: {\n    name: 'parentOrganisationUnit'\n  }\n});\n\nexport default ParamParentOrganisationUnit;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst Regression = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Include regression'),\n  option: {\n    name: 'regression'\n  }\n});\n\nexport default Regression;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst Cumulative = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Include cumulative'),\n  option: {\n    name: 'cumulative'\n  }\n});\n\nexport default Cumulative;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'sortOrder';\nconst defaultValue = options[optionName].defaultValue;\n\nconst SortOrder = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Custom sort order'),\n  toggleable: true,\n  option: {\n    name: optionName,\n    defaultValue: defaultValue,\n    items: [{\n      value: '-1',\n      label: i18n.t('Low to high')\n    }, {\n      value: '1',\n      label: i18n.t('High to low')\n    }]\n  }\n});\n\nexport default SortOrder;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst TopLimit = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Top limit'),\n  option: {\n    name: 'topLimit',\n    items: [{\n      value: '0',\n      label: i18n.t('None')\n    }, {\n      value: '5',\n      label: '5'\n    }, {\n      value: '10',\n      label: '10'\n    }, {\n      value: '20',\n      label: '20'\n    }, {\n      value: '50',\n      label: '50'\n    }, {\n      value: '100',\n      label: '100'\n    }]\n  }\n});\n\nexport default TopLimit;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { sGetUserAuthorities } from '../../../reducers/user';\nimport { sGetSettings } from '../../../reducers/settings';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const APPROVAL_LEVEL_OPTION_AUTH = 'F_VIEW_UNAPPROVED_DATA';\nconst optionName = 'approvalLevel';\nconst query = {\n  dataApprovalLevels: {\n    resource: 'dataApprovalLevels.json',\n    params: {\n      order: 'level:asc',\n      fields: 'id,displayName~rename(name),level',\n      paging: 'false'\n    }\n  }\n};\n\nconst ApprovalLevelSelect = ({\n  value,\n  loading,\n  options,\n  onFocus,\n  onChange\n}) => /*#__PURE__*/React.createElement(SingleSelectField, {\n  name: \"approvalLevelSelect\",\n  label: i18n.t('Data approved at level'),\n  selected: value === null || value === void 0 ? void 0 : value.id,\n  inputWidth: \"280px\",\n  placeholder: i18n.t('Select from predefined levels'),\n  loadingText: i18n.t('Loading data approval levels'),\n  loading: loading,\n  dense: true,\n  onFocus: onFocus,\n  onChange: ({\n    selected\n  }) => onChange({\n    id: selected,\n    displayName: options.find(option => option.value === selected).label\n  })\n}, options.map(({\n  value,\n  label\n}) => /*#__PURE__*/React.createElement(SingleSelectOption, {\n  key: value,\n  value: value,\n  label: label\n})));\n\nApprovalLevelSelect.propTypes = {\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\n\nconst ApprovalLevel = ({\n  value,\n  onChange,\n  enabled\n}) => {\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  if (!enabled) {\n    return null;\n  }\n\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        dataApprovalLevels\n      } = await engine.query(query);\n\n      if (dataApprovalLevels) {\n        const options = dataApprovalLevels.dataApprovalLevels.map(level => ({\n          value: level.id,\n          label: level.name\n        }));\n        setOptions(options);\n      }\n\n      setIsLoaded(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(ApprovalLevelSelect, {\n    loading: !isLoaded,\n    value: value,\n    options: options,\n    onChange: onChange,\n    onFocus: onSelectFocus\n  });\n};\n\nApprovalLevel.propTypes = {\n  enabled: PropTypes.bool,\n  value: PropTypes.object,\n  onChange: PropTypes.func\n};\nconst approvalLevelEnabledSelector = createSelector([sGetSettings, sGetUserAuthorities], (settings, authorities) => settings.keyIgnoreAnalyticsApprovalYearThreshold !== -1 && authorities[APPROVAL_LEVEL_OPTION_AUTH]);\n\nconst mapStateToProps = state => ({\n  enabled: approvalLevelEnabledSelector(state),\n  value: sGetUiOptions(state)[optionName] || {}\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    id,\n    displayName\n  }) => dispatch(acSetUiOptions({\n    [optionName]: {\n      id,\n      displayName\n    }\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ApprovalLevel);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowHierarchy = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Display organisation unit hierarchy'),\n  option: {\n    name: 'showHierarchy'\n  }\n});\n\nexport default ShowHierarchy;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label } from '@dhis2/ui';\nimport CheckboxBaseOption from './CheckboxBaseOption';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst CompletedOnly = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Label, null, i18n.t('Event data')), /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Only include completed events'),\n  option: {\n    name: 'completedOnly'\n  }\n}));\n\nexport default CompletedOnly;","import React from 'react';\nexport const AxisOne = () => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"18\",\n  height: \"16\",\n  viewBox: \"0 0 18 16\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"18\",\n  height: \"1\",\n  y: \"15\",\n  fill: \"#7B8998\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"2\",\n  height: \"16\",\n  x: \"4\",\n  fill: \"#404B5A\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"13\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"17\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n})));\nexport const AxisTwo = () => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"18\",\n  height: \"16\",\n  viewBox: \"0 0 18 16\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"18\",\n  height: \"1\",\n  y: \"15\",\n  fill: \"#7B8998\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"2\",\n  height: \"16\",\n  x: \"12\",\n  fill: \"#404B5A\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"4\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"17\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n})));\nexport const AxisThree = () => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"18\",\n  height: \"16\",\n  viewBox: \"0 0 18 16\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"18\",\n  height: \"1\",\n  y: \"15\",\n  fill: \"#7B8998\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"2\",\n  height: \"16\",\n  fill: \"#404B5A\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"13\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"17\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"4\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n})));\nexport const AxisFour = () => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"18\",\n  height: \"16\",\n  viewBox: \"0 0 18 16\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"18\",\n  height: \"1\",\n  y: \"15\",\n  fill: \"#7B8998\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"2\",\n  height: \"16\",\n  x: \"16\",\n  fill: \"#404B5A\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"13\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  x: \"4\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"1\",\n  height: \"16\",\n  fill: \"#7B8998\",\n  opacity: \".50\"\n})));","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport React, { useEffect } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Table, TableHead, TableRow, TableCell, TableBody, Radio } from '@dhis2/ui';\nimport { VIS_TYPE_COLUMN, VIS_TYPE_LINE, visTypeIcons, hasRelativeItems } from '@dhis2/analytics';\nimport styles from '../styles/SeriesTable.module.css';\nimport { acSetUiOptions, acUpdateUiSeriesItem } from '../../../actions/ui';\nimport { sGetUiLayout, sGetUiOptions, sGetUiType } from '../../../reducers/ui';\nimport { sGetSeriesSetupItems } from '../../../reducers';\nimport { EmptySeries, EmptyBox, GenericError } from '../../../assets/ErrorIcons';\nimport { AxisOne, AxisTwo, AxisThree, AxisFour } from '../../../assets/AxisIcons';\nimport { SERIES_ITEM_TYPE_PROP, SERIES_ITEM_AXIS_PROP } from '../../../modules/ui';\nconst availableAxes = [0, 1, 2, 3];\nconst allTypes = [VIS_TYPE_COLUMN, VIS_TYPE_LINE];\n\nconst SeriesTable = ({\n  columns,\n  layoutItems,\n  optionItems,\n  onChange,\n  onItemChange,\n  visType,\n  showAxisOptions,\n  showTypeOptions\n}) => {\n  const availableTypes = [visType, ...allTypes.filter(type => type !== visType)];\n  useEffect(() => {\n    if (!optionItems.length) {\n      onChange(layoutItems);\n    } else {\n      const matchedItems = layoutItems.map(item => {\n        const matchedItem = optionItems.find(option => option.dimensionItem === item.dimensionItem);\n\n        if (matchedItem) {\n          matchedItem.name = item.name;\n        }\n\n        return matchedItem || item;\n      });\n      onChange(matchedItems);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const renderTable = () => /*#__PURE__*/React.createElement(Table, {\n    suppressZebraStriping: true,\n    className: styles.table\n  }, /*#__PURE__*/React.createElement(\"colgroup\", null, /*#__PURE__*/React.createElement(\"col\", {\n    className: styles.nameColumn\n  }), /*#__PURE__*/React.createElement(\"col\", {\n    className: styles.typeColumn\n  }), /*#__PURE__*/React.createElement(\"col\", {\n    className: styles.axisColumn\n  })), /*#__PURE__*/React.createElement(TableHead, {\n    className: styles.tableHead\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    className: styles.tableRow\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: styles.tableCell\n  }, i18n.t('Data item')), /*#__PURE__*/React.createElement(TableCell, {\n    className: styles.tableCell\n  }, showTypeOptions && i18n.t('Visualization type')), showAxisOptions && availableAxes.map((axis, index) => /*#__PURE__*/React.createElement(TableCell, {\n    key: index,\n    className: styles.tableCell\n  }, i18n.t('Axis {{axisId}}', {\n    axisId: index + 1\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.axisIcon\n  }, renderAxisIcon(index + 1)))))), /*#__PURE__*/React.createElement(TableBody, {\n    className: styles.tableBody\n  }, optionItems.map(item => /*#__PURE__*/React.createElement(TableRow, {\n    key: \"multiaxis-table-row-\".concat(item.dimensionItem)\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: styles.itemName\n  }, item.name), /*#__PURE__*/React.createElement(TableCell, {\n    className: styles.itemType\n  }, showTypeOptions && availableTypes.map(type => /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.typeContainer,\n    key: type\n  }, /*#__PURE__*/React.createElement(Radio, {\n    className: styles.radioInput,\n    key: type,\n    onChange: () => onItemChange({\n      changedItem: item,\n      value: type,\n      prop: SERIES_ITEM_TYPE_PROP\n    }),\n    checked: item.type ? item.type === type : visType === type,\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.visIcon\n    }, visTypeIcons[type]),\n    dense: true\n  })))), showAxisOptions && availableAxes.map(axis => /*#__PURE__*/React.createElement(TableCell, {\n    key: axis,\n    className: styles.itemAxis\n  }, /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => onItemChange({\n      changedItem: item,\n      value: axis,\n      prop: SERIES_ITEM_AXIS_PROP\n    }),\n    checked: item.axis === axis,\n    dense: true\n  })))))));\n\n  const renderAxisIcon = axis => {\n    switch (axis) {\n      case 1:\n        return /*#__PURE__*/React.createElement(AxisOne, null);\n\n      case 2:\n        return /*#__PURE__*/React.createElement(AxisTwo, null);\n\n      case 3:\n        return /*#__PURE__*/React.createElement(AxisThree, null);\n\n      case 4:\n        return /*#__PURE__*/React.createElement(AxisFour, null);\n    }\n  };\n\n  const renderError = (title, description, icon) => /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorIcon\n  }, icon), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorTitle\n  }, title), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorDescription\n  }, description));\n\n  const renderEmptySeriesError = () => renderError(i18n.t('Series is empty'), i18n.t('Options for selected items will be available here'), EmptySeries());\n\n  const renderNoSeriesOptionsError = () => renderError(i18n.t('No Series options'), i18n.t(\"There aren't any Series options for this visualization type\"), EmptyBox());\n\n  const renderRelativeItemsError = () => renderError(i18n.t('Series options unavailable'), i18n.t('Series options are not available when using relative selections for periods, org units or categories'), GenericError());\n\n  if (!showAxisOptions && !showTypeOptions) {\n    return renderNoSeriesOptionsError();\n  } else if (hasRelativeItems(columns[0], layoutItems.map(item => item.dimensionItem))) {\n    return renderRelativeItemsError();\n  } else {\n    return Object.keys(layoutItems).length && optionItems.length ? renderTable() : renderEmptySeriesError();\n  }\n};\n\nSeriesTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  visType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onItemChange: PropTypes.func.isRequired,\n  layoutItems: PropTypes.array,\n  optionItems: PropTypes.array,\n  showAxisOptions: PropTypes.bool,\n  showTypeOptions: PropTypes.bool\n};\nSeriesTable.defaultProps = {\n  layoutItems: [],\n  optionItems: [],\n  showAxisOptions: false,\n  showTypeOptions: false\n};\n\nconst mapStateToProps = state => ({\n  layoutItems: sGetSeriesSetupItems(state),\n  columns: sGetUiLayout(state).columns,\n  optionItems: sGetUiOptions(state).series,\n  visType: sGetUiType(state)\n});\n\nconst mapDispatchToProps = {\n  onChange: series => dispatch => {\n    dispatch(acSetUiOptions({\n      series\n    }));\n  },\n  onItemChange: ({\n    changedItem,\n    value,\n    prop\n  }) => dispatch => {\n    dispatch(acUpdateUiSeriesItem({\n      changedItem,\n      value,\n      prop\n    }));\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SeriesTable);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SeriesTable from '../../../components/VisualizationOptions/Options/SeriesTable';\nexport default (({\n  showAxisOptions,\n  showTypeOptions\n} = {}) => ({\n  key: 'series-tab',\n  label: i18n.t('Series'),\n  content: [{\n    key: 'series-table',\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(SeriesTable, {\n      showAxisOptions: showAxisOptions,\n      showTypeOptions: showTypeOptions\n    })])\n  }]\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-advanced',\n  label: i18n.t('Advanced'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-display',\n  label: i18n.t('Display'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-totals',\n  label: i18n.t('Totals'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-empty-data',\n  label: i18n.t('Empty data'),\n  content\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Field, Radio } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const RadioBaseOption = ({\n  option,\n  label,\n  value,\n  onChange,\n  disabled\n}) => /*#__PURE__*/React.createElement(Field, {\n  name: option.name,\n  label: label,\n  dense: true\n}, option.items.map(({\n  id,\n  label\n}) => /*#__PURE__*/React.createElement(Radio, {\n  key: id,\n  label: label,\n  value: id,\n  checked: value === id,\n  onChange: ({\n    value\n  }) => onChange(value),\n  disabled: disabled,\n  dense: true\n})));\nRadioBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  label: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RadioBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport RadioBaseOption from './RadioBaseOption';\nexport const LEGEND_DISPLAY_STYLE_OPTION_NAME = 'legendDisplayStyle';\nexport const LEGEND_DISPLAY_STYLE_FILL = 'FILL';\nexport const LEGEND_DISPLAY_STYLE_TEXT = 'TEXT';\n\nconst LegendDisplayStyle = () => /*#__PURE__*/React.createElement(RadioBaseOption, {\n  option: {\n    name: LEGEND_DISPLAY_STYLE_OPTION_NAME,\n    items: [{\n      id: LEGEND_DISPLAY_STYLE_FILL,\n      label: i18n.t('Legend changes background color')\n    }, {\n      id: LEGEND_DISPLAY_STYLE_TEXT,\n      label: i18n.t('Legend changes text color')\n    }]\n  }\n});\n\nexport default LegendDisplayStyle;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const LEGEND_SET_OPTION_NAME = 'legendSet';\nconst query = {\n  legendSets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'legends[id,displayName~rename(name),startValue,endValue,color]'],\n      paging: 'false'\n    }\n  }\n};\n\nconst LegendSetSelect = ({\n  value,\n  loading,\n  options,\n  onFocus,\n  onChange\n}) => /*#__PURE__*/React.createElement(SingleSelectField, {\n  name: \"legendSetSelect\",\n  label: i18n.t('Legend'),\n  selected: value === null || value === void 0 ? void 0 : value.id,\n  inputWidth: \"280px\",\n  placeholder: i18n.t('Select from legends'),\n  loadingText: i18n.t('Loading legends'),\n  loading: loading,\n  dense: true,\n  onFocus: onFocus,\n  onChange: ({\n    selected\n  }) => onChange({\n    id: selected,\n    displayName: options.find(option => option.value === selected).label\n  })\n}, options.map(({\n  value,\n  label\n}) => /*#__PURE__*/React.createElement(SingleSelectOption, {\n  key: value,\n  value: value,\n  label: label\n})));\n\nLegendSetSelect.propTypes = {\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\n\nconst LegendSet = ({\n  value,\n  onChange\n}) => {\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        legendSets\n      } = await engine.query(query);\n\n      if (legendSets) {\n        const options = legendSets.legendSets.map(legendSet => ({\n          value: legendSet.id,\n          label: legendSet.name\n        }));\n        setOptions(options);\n      }\n\n      setIsLoaded(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(LegendSetSelect, {\n    loading: !isLoaded,\n    value: value,\n    options: options,\n    onChange: onChange,\n    onFocus: onSelectFocus\n  });\n};\n\nLegendSet.propTypes = {\n  value: PropTypes.object,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[LEGEND_SET_OPTION_NAME] || {}\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    id,\n    displayName\n  }) => dispatch(acSetUiOptions({\n    [LEGEND_SET_OPTION_NAME]: {\n      id,\n      displayName\n    }\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendSet);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Radio, Field } from '@dhis2/ui';\nimport LegendSet from './LegendSet';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const LEGEND_DISPLAY_STRATEGY_OPTION_NAME = 'legendDisplayStrategy';\nexport const LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM';\nexport const LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED';\nimport { tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\n\nconst LegendDisplayStrategy = ({\n  value,\n  onChange\n}) => /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(Field, {\n  name: LEGEND_DISPLAY_STRATEGY_OPTION_NAME,\n  dense: true\n}, /*#__PURE__*/React.createElement(Radio, {\n  key: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n  label: i18n.t('Use pre-defined legend per data item'),\n  value: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n  checked: value === LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n  onChange: onChange,\n  dense: true\n}), /*#__PURE__*/React.createElement(Radio, {\n  key: LEGEND_DISPLAY_STRATEGY_FIXED,\n  label: i18n.t('Select a single legend for the entire visualization'),\n  value: LEGEND_DISPLAY_STRATEGY_FIXED,\n  checked: value === LEGEND_DISPLAY_STRATEGY_FIXED,\n  onChange: onChange,\n  dense: true\n})), value === LEGEND_DISPLAY_STRATEGY_FIXED ? /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOptionToggleable.className\n}, /*#__PURE__*/React.createElement(LegendSet, null)) : null);\n\nLegendDisplayStrategy.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[LEGEND_DISPLAY_STRATEGY_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    value\n  }) => dispatch(acSetUiOptions({\n    [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendDisplayStrategy);","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, FieldSet, Legend as UiCoreLegend } from '@dhis2/ui';\nimport LegendDisplayStyle, { LEGEND_DISPLAY_STYLE_OPTION_NAME, LEGEND_DISPLAY_STYLE_FILL } from './LegendDisplayStyle';\nimport LegendDisplayStrategy, { LEGEND_DISPLAY_STRATEGY_OPTION_NAME, LEGEND_DISPLAY_STRATEGY_FIXED, LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM } from './LegendDisplayStrategy';\nimport { LEGEND_SET_OPTION_NAME } from './LegendSet';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOptionToggleable, tabSectionOption, tabSectionTitle, tabSectionTitleMargin } from '../styles/VisualizationOptions.style.js';\n\nconst Legend = ({\n  legendSet,\n  legendDisplayStrategy,\n  onChange,\n  hideStyleOptions\n}) => {\n  const [legendEnabled, setLegendEnabled] = useState(!(legendDisplayStrategy === LEGEND_DISPLAY_STRATEGY_FIXED && !legendSet));\n\n  const onCheckboxChange = ({\n    checked\n  }) => {\n    setLegendEnabled(checked);\n\n    if (checked) {\n      onChange({\n        [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM\n      });\n    } else {\n      onChange({\n        [LEGEND_SET_OPTION_NAME]: undefined,\n        [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: LEGEND_DISPLAY_STRATEGY_FIXED,\n        [LEGEND_DISPLAY_STYLE_OPTION_NAME]: LEGEND_DISPLAY_STYLE_FILL\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: legendEnabled,\n    label: i18n.t('Display legend'),\n    onChange: onCheckboxChange,\n    dense: true\n  }), legendEnabled ? /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOptionToggleable.className\n  }, !hideStyleOptions ? /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(FieldSet, null, /*#__PURE__*/React.createElement(UiCoreLegend, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(tabSectionTitle.className, tabSectionTitleMargin.className)\n  }, i18n.t('Legend style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(LegendDisplayStyle, null)))) : null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(FieldSet, null, /*#__PURE__*/React.createElement(UiCoreLegend, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(tabSectionTitle.className, {\n      [tabSectionTitleMargin.className]: hideStyleOptions\n    })\n  }, i18n.t('Legend type'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(LegendDisplayStrategy, null))))) : null);\n};\n\nLegend.propTypes = {\n  legendDisplayStrategy: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  hideStyleOptions: PropTypes.bool,\n  legendSet: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  legendSet: sGetUiOptions(state)[LEGEND_SET_OPTION_NAME],\n  legendDisplayStrategy: sGetUiOptions(state)[LEGEND_DISPLAY_STRATEGY_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions(value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Legend);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport Legend from '../../../components/VisualizationOptions/Options/Legend';\nexport default (({\n  hideStyleOptions\n} = {}) => ({\n  key: 'legend-tab',\n  label: i18n.t('Legend'),\n  content: [{\n    key: 'legend-section-1',\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(Legend, {\n      hideStyleOptions: hideStyleOptions\n    })])\n  }]\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content\n}));","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Input, Label, SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionText, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\n\nconst OperatorSelect = ({\n  name,\n  value,\n  onChange\n}) => {\n  const options = [{\n    id: 'EQ',\n    label: '='\n  }, {\n    id: 'GT',\n    label: '>'\n  }, {\n    id: 'GE',\n    label: '>='\n  }, {\n    id: 'LT',\n    label: '<'\n  }, {\n    id: 'LE',\n    label: '<='\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '112px'\n    }\n  }, /*#__PURE__*/React.createElement(SingleSelect, {\n    name: name,\n    onChange: ({\n      selected\n    }) => {\n      onChange(selected);\n    },\n    selected: value,\n    tabIndex: \"0\",\n    inputMaxWidth: \"106px\",\n    dense: true\n  }, options.map(({\n    id,\n    label\n  }) => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: id,\n    value: id,\n    label: label\n  }))));\n};\n\nOperatorSelect.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst ValueInput = ({\n  name,\n  value,\n  onChange\n}) => /*#__PURE__*/React.createElement(Input, {\n  name: name,\n  value: value,\n  type: \"number\",\n  onChange: ({\n    value\n  }) => onChange(value),\n  width: \"72px\",\n  dense: true\n});\n\nValueInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nclass MeasureCriteria extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClear\", () => this.setState(this.defaultState, this.props.onChange('')));\n\n    _defineProperty(this, \"onChange\", name => value => {\n      this.setState({\n        [name]: value\n      }, () => {\n        const {\n          op1,\n          v1,\n          op2,\n          v2\n        } = this.state;\n        const value = [];\n\n        if (op1 && v1) {\n          value.push(\"\".concat(op1, \":\").concat(v1));\n        }\n\n        if (op2 && v2) {\n          value.push(\"\".concat(op2, \":\").concat(v2));\n        }\n\n        this.props.onChange(value.length > 0 ? value.join(';') : '');\n      });\n    });\n\n    this.defaultState = {\n      op1: '',\n      v1: '',\n      op2: '',\n      v2: ''\n    };\n    const [_op = '', _v = '', _op2 = '', _v2 = ''] = props.value.split(/[;:]/);\n    this.state = {\n      op1: _op,\n      v1: _v,\n      op2: _op2,\n      v2: _v2\n    };\n  }\n\n  render() {\n    const {\n      op1,\n      v1,\n      op2,\n      v2\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOption.className\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: tabSectionOptionText.className\n    }, i18n.t('You can set a minimum or maximum value. This will apply to the entire visualization, all values outside of the minimum/maximum range will not be displayed')), /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionComplexInline.className\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '250px'\n      }\n    }, /*#__PURE__*/React.createElement(Label, null, i18n.t('Minimum data value')), /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionComplexInline.className\n    }, /*#__PURE__*/React.createElement(OperatorSelect, {\n      name: \"op1\",\n      value: op1,\n      onChange: this.onChange('op1')\n    }), /*#__PURE__*/React.createElement(ValueInput, {\n      name: \"v1\",\n      value: v1,\n      onChange: this.onChange('v1')\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '250px'\n      }\n    }, /*#__PURE__*/React.createElement(Label, null, i18n.t('Maximum data value')), /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionComplexInline.className\n    }, /*#__PURE__*/React.createElement(OperatorSelect, {\n      name: \"op2\",\n      value: op2,\n      onChange: this.onChange('op2')\n    }), /*#__PURE__*/React.createElement(ValueInput, {\n      name: \"v2\",\n      value: v2,\n      onChange: this.onChange('v2')\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: '16px'\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.onClear\n    }, i18n.t('Clear min/max limits'))));\n  }\n\n}\n\nMeasureCriteria.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state).measureCriteria || ''\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions({\n    measureCriteria: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasureCriteria);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport MeasureCriteria from '../../../components/VisualizationOptions/Options/MeasureCriteria';\nexport default (() => ({\n  key: 'limitValues-tab',\n  label: i18n.t('Limit values'),\n  content: [\n  /*\n  {\n      key: 'limitValues-limit-numbers',\n      label: i18n.t('Limit number of values'),\n      content: [<TopLimit />],\n  },*/\n  {\n    key: 'limitValues-limit-min-max',\n    label: i18n.t('Limit minimum/maximum values'),\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(MeasureCriteria, null)])\n  }]\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field, Radio } from '@dhis2/ui';\nimport { colorSets, COLOR_SET_DEFAULT, COLOR_SET_BRIGHT, COLOR_SET_DARK, COLOR_SET_GRAY, COLOR_SET_COLOR_BLIND, COLOR_SET_PATTERNS } from '@dhis2/analytics';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nexport const COLOR_SET_OPTION_NAME = 'colorSet';\n\nconst ColorSet = ({\n  value,\n  onChange,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Field, {\n  name: \"colorSet-selector\",\n  dense: true\n}, [[{\n  id: COLOR_SET_DEFAULT,\n  label: i18n.t('Default')\n}, {\n  id: COLOR_SET_BRIGHT,\n  label: i18n.t('Bright')\n}, {\n  id: COLOR_SET_DARK,\n  label: i18n.t('Dark')\n}, {\n  id: COLOR_SET_GRAY,\n  label: i18n.t('Gray')\n}, {\n  id: COLOR_SET_COLOR_BLIND,\n  label: i18n.t('Color blind')\n}, {\n  id: COLOR_SET_PATTERNS,\n  label: i18n.t('Patterns')\n}].map(({\n  id,\n  label\n}) => /*#__PURE__*/React.createElement(\"span\", {\n  key: id\n}, /*#__PURE__*/React.createElement(Radio, {\n  label: /*#__PURE__*/React.createElement(React.Fragment, null, label, /*#__PURE__*/React.createElement(ColorSetPreview, {\n    colorSet: colorSets[id],\n    disabled: disabled\n  })),\n  value: id,\n  dense: true,\n  onChange: ({\n    value\n  }) => onChange(value),\n  checked: value === id,\n  disabled: disabled\n})))]));\n\nColorSet.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\n\nconst ColorSetPreview = ({\n  colorSet,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    display: 'flex',\n    marginLeft: 4,\n    opacity: disabled ? 0.3 : 1\n  }\n}, (colorSet === null || colorSet === void 0 ? void 0 : colorSet.patterns) && colorSet.patterns.map((pattern, index) => /*#__PURE__*/React.createElement(\"div\", {\n  key: \"pattern-\".concat(index)\n}, /*#__PURE__*/React.createElement(\"svg\", {\n  width: 14,\n  height: 14,\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: pattern.path,\n  stroke: pattern.color,\n  strokeWidth: 2,\n  fill: \"none\"\n})))), (colorSet === null || colorSet === void 0 ? void 0 : colorSet.colors) && colorSet.colors.map(color => /*#__PURE__*/React.createElement(\"div\", {\n  key: color,\n  style: {\n    backgroundColor: color,\n    width: 14,\n    height: 14\n  }\n})));\n\nColorSetPreview.propTypes = {\n  colorSet: PropTypes.object.isRequired,\n  disabled: PropTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[COLOR_SET_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: colorSet => dispatch(acSetUiOptions({\n    [COLOR_SET_OPTION_NAME]: colorSet\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorSet);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport ColorSet from '../../../components/VisualizationOptions/Options/ColorSet';\nexport default (hasDisabledSections => ({\n  key: 'style-color-set',\n  label: i18n.t('Color set'),\n  helpText: hasDisabledSections ? i18n.t('Color sets are not supported yet when using multiple axes') : null,\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(ColorSet, {\n    disabled: hasDisabledSections\n  })])\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport AggregationType from '../../../components/VisualizationOptions/Options/AggregationType';\nimport CompletedOnly from '../../../components/VisualizationOptions/Options/CompletedOnly';\nimport getAdvancedTemplate from './templates/advanced';\nexport default (() => ({ ...getAdvancedTemplate({\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(AggregationType, null), /*#__PURE__*/React.createElement(CompletedOnly, null)])\n  })\n}));","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Field, Radio } from '@dhis2/ui';\nimport { FONT_STYLE_VISUALIZATION_TITLE } from '@dhis2/analytics';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport Title from './Title';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nconst HIDE_TITLE_AUTO = 'AUTO';\nconst HIDE_TITLE_NONE = 'NONE';\nconst HIDE_TITLE_CUSTOM = 'CUSTOM';\n\nclass HideTitle extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onGroupChange\", ({\n      value\n    }) => {\n      this.setState({\n        value\n      });\n      this.props.onChange(value === HIDE_TITLE_NONE, value === HIDE_TITLE_AUTO ? undefined : this.props.title || undefined);\n    });\n\n    this.defaultState = {\n      value: HIDE_TITLE_AUTO\n    };\n    this.state = props.value ? {\n      value: props.value\n    } : this.defaultState;\n  }\n\n  render() {\n    const {\n      value\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOption.className,\n      \"data-test\": 'option-chart-title'\n    }, /*#__PURE__*/React.createElement(Label, null, i18n.t('Chart title')), /*#__PURE__*/React.createElement(Field, {\n      name: \"hideTitle-selector\",\n      dense: true\n    }, [{\n      id: HIDE_TITLE_AUTO,\n      label: i18n.t('Auto generated')\n    }, {\n      id: HIDE_TITLE_NONE,\n      label: i18n.t('None')\n    }, {\n      id: HIDE_TITLE_CUSTOM,\n      label: i18n.t('Custom')\n    }].map(({\n      id,\n      label\n    }) => /*#__PURE__*/React.createElement(Radio, {\n      key: id,\n      label: label,\n      value: id,\n      dense: true,\n      onChange: this.onGroupChange,\n      checked: value === id\n    }))), value === HIDE_TITLE_CUSTOM ? /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionToggleable.className\n    }, /*#__PURE__*/React.createElement(Title, {\n      inline: true\n    })) : null, value === HIDE_TITLE_AUTO || value === HIDE_TITLE_CUSTOM ? /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionToggleable.className\n    }, /*#__PURE__*/React.createElement(TextStyle, {\n      fontStyleKey: FONT_STYLE_VISUALIZATION_TITLE,\n      dataTest: 'option-chart-title-text-style'\n    })) : null);\n  }\n\n}\n\nHideTitle.propTypes = {\n  title: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst hideTitleSelector = createSelector([sGetUiOptions], uiOptions => uiOptions.hideTitle ? HIDE_TITLE_NONE : uiOptions.title === undefined ? HIDE_TITLE_AUTO : HIDE_TITLE_CUSTOM);\n\nconst mapStateToProps = state => ({\n  value: hideTitleSelector(state),\n  title: sGetUiOptions(state).title\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (hideTitle, title) => dispatch(acSetUiOptions({\n    hideTitle,\n    title\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HideTitle);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst Subtitle = ({\n  dataTest\n}) => /*#__PURE__*/React.createElement(TextBaseOption, {\n  type: \"text\",\n  width: \"280px\",\n  placeholder: i18n.t('Add a subtitle'),\n  option: {\n    name: 'subtitle'\n  },\n  dataTest: dataTest\n});\n\nSubtitle.propTypes = {\n  dataTest: PropTypes.string\n};\nexport default Subtitle;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Radio, Field } from '@dhis2/ui';\nimport { VIS_TYPE_PIVOT_TABLE, FONT_STYLE_VISUALIZATION_SUBTITLE } from '@dhis2/analytics';\nimport { sGetUiOptions, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport Subtitle from './Subtitle';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nconst HIDE_SUBTITLE_AUTO = 'AUTO';\nconst HIDE_SUBTITLE_NONE = 'NONE';\nconst HIDE_SUBTITLE_CUSTOM = 'CUSTOM';\n\nclass HideSubtitle extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onGroupChange\", ({\n      value\n    }) => {\n      this.setState({\n        value\n      });\n      this.props.onChange(value === HIDE_SUBTITLE_NONE, value === HIDE_SUBTITLE_AUTO ? undefined : this.props.subtitle || undefined);\n    });\n\n    this.defaultState = {\n      value: HIDE_SUBTITLE_AUTO\n    };\n    this.state = props.value ? {\n      value: props.value\n    } : this.defaultState;\n  }\n\n  render() {\n    const {\n      value\n    } = this.state;\n    const {\n      visualizationType\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOption.className\n    }, /*#__PURE__*/React.createElement(Label, null, visualizationType === VIS_TYPE_PIVOT_TABLE ? i18n.t('Table subtitle') : i18n.t('Chart subtitle')), /*#__PURE__*/React.createElement(Field, {\n      name: \"hideSubtitle-selector\",\n      dense: true,\n      dataTest: 'option-chart-subtitle-type-radios'\n    }, [{\n      id: HIDE_SUBTITLE_AUTO,\n      label: i18n.t('Auto generated')\n    }, {\n      id: HIDE_SUBTITLE_NONE,\n      label: i18n.t('None')\n    }, {\n      id: HIDE_SUBTITLE_CUSTOM,\n      label: i18n.t('Custom')\n    }].map(({\n      id,\n      label\n    }) => /*#__PURE__*/React.createElement(Radio, {\n      key: id,\n      label: label,\n      value: id,\n      dense: true,\n      onChange: this.onGroupChange,\n      checked: value === id\n    }))), value === HIDE_SUBTITLE_CUSTOM ? /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionToggleable.className\n    }, /*#__PURE__*/React.createElement(Subtitle, {\n      inline: true,\n      dataTest: 'option-chart-subtitle-text'\n    })) : null, value === HIDE_SUBTITLE_AUTO || value === HIDE_SUBTITLE_CUSTOM ? /*#__PURE__*/React.createElement(\"div\", {\n      className: tabSectionOptionToggleable.className\n    }, /*#__PURE__*/React.createElement(TextStyle, {\n      fontStyleKey: FONT_STYLE_VISUALIZATION_SUBTITLE,\n      dataTest: 'option-chart-subtitle-text-style'\n    })) : null);\n  }\n\n}\n\nHideSubtitle.propTypes = {\n  subtitle: PropTypes.string,\n  value: PropTypes.string,\n  visualizationType: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst hideSubtitleSelector = createSelector([sGetUiOptions], uiOptions => uiOptions.hideSubtitle ? HIDE_SUBTITLE_NONE : uiOptions.subtitle === undefined ? HIDE_SUBTITLE_AUTO : HIDE_SUBTITLE_CUSTOM);\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  value: hideSubtitleSelector(state),\n  subtitle: sGetUiOptions(state).subtitle\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (hideSubtitle, subtitle) => dispatch(acSetUiOptions({\n    hideSubtitle,\n    subtitle\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HideSubtitle);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport HideTitle from '../../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../../components/VisualizationOptions/Options/HideSubtitle';\nexport default (() => ({\n  key: 'style-titles',\n  label: i18n.t('Titles'),\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(HideTitle, null), /*#__PURE__*/React.createElement(HideSubtitle, null)])\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Box, Input, InputField } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst NumberBaseType = ({\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  inline,\n  disabled,\n  dataTest\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: inline ? '' : tabSectionOption.className\n}, /*#__PURE__*/React.createElement(\"div\", null, inline ? /*#__PURE__*/React.createElement(Box, {\n  width: width\n}, /*#__PURE__*/React.createElement(Input, {\n  type: \"number\",\n  onChange: ({\n    value\n  }) => onChange(value),\n  name: option.name,\n  value: (value === null || value === void 0 ? void 0 : value.toString()) || '',\n  placeholder: placeholder,\n  dense: true,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-input\")\n})) : /*#__PURE__*/React.createElement(InputField, {\n  type: \"number\",\n  label: label,\n  onChange: ({\n    value\n  }) => onChange(value),\n  name: option.name,\n  value: value,\n  helpText: disabled ? '' : helpText,\n  placeholder: placeholder,\n  inputWidth: width,\n  dense: true,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-input\")\n})));\n\nNumberBaseType.propTypes = {\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  inline: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  value: PropTypes.number,\n  width: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option),\n  checked: sGetUiOption(state, ownProps.option) !== undefined\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value: value !== '' ? Number(value) : value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NumberBaseType);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport NumberBaseType from './NumberBaseType';\n\nconst RegressionLineValue = ({\n  dataTest,\n  axisId,\n  id\n}) => /*#__PURE__*/React.createElement(NumberBaseType, {\n  width: \"96px\",\n  label: i18n.t('Value'),\n  placeholder: i18n.t('Number'),\n  option: {\n    id,\n    axisId\n  },\n  inline: true,\n  dataTest: dataTest\n});\n\nRegressionLineValue.propTypes = {\n  axisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  id: PropTypes.string\n};\nexport default RegressionLineValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport TextBaseOption from './TextBaseOption';\n\nconst RegressionLineTitle = ({\n  dataTest,\n  axisId,\n  fontStyleKey,\n  id,\n  isVertical\n}) => /*#__PURE__*/React.createElement(TextBaseOption, {\n  type: \"text\",\n  width: \"280px\",\n  label: i18n.t('Title'),\n  placeholder: i18n.t('Add a title'),\n  option: {\n    id,\n    axisId\n  },\n  inline: true,\n  fontStyleKey: fontStyleKey,\n  dataTest: dataTest,\n  isVertical: isVertical\n});\n\nRegressionLineTitle.propTypes = {\n  axisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  fontStyleKey: PropTypes.string,\n  id: PropTypes.string,\n  isVertical: PropTypes.bool\n};\nexport default RegressionLineTitle;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, Label } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport RegressionLineValue from './RegressionLineValue';\nimport RegressionLineTitle from './RegressionLineTitle';\nimport { tabSectionOption, tabSectionOptionToggleable, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\nexport const RegressionLine = ({\n  checked,\n  onToggle,\n  disabled,\n  label,\n  dataTest,\n  fontStyleKey,\n  valueId,\n  titleId,\n  axisId,\n  isVertical\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Checkbox, {\n  checked: checked,\n  label: label,\n  name: \"regressionLine-toggle\",\n  onChange: ({\n    checked\n  }) => onToggle(checked),\n  dense: true,\n  disabled: disabled,\n  dataTest: \"\".concat(dataTest, \"-checkbox\")\n}), checked && !disabled ? /*#__PURE__*/React.createElement(\"div\", {\n  className: \"\".concat(tabSectionOptionToggleable.className, \" \").concat(tabSectionOptionComplexInline.className)\n}, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Label, null, i18n.t('Value')), /*#__PURE__*/React.createElement(RegressionLineValue, {\n  dataTest: \"\".concat(dataTest, \"-value\"),\n  axisId: axisId,\n  id: valueId\n})), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Label, null, i18n.t('Title')), /*#__PURE__*/React.createElement(RegressionLineTitle, {\n  dataTest: \"\".concat(dataTest, \"-label\"),\n  axisId: axisId,\n  fontStyleKey: fontStyleKey,\n  id: titleId,\n  isVertical: isVertical\n}))) : null);\nRegressionLine.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n  axisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyleKey: PropTypes.string,\n  isVertical: PropTypes.bool,\n  label: PropTypes.string,\n  titleId: PropTypes.string,\n  valueId: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  checked: sGetUiOption(state, {\n    id: ownProps.enabledId,\n    axisId: ownProps.axisId\n  }) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onToggle: checked => dispatch(acSetUiOption({\n    optionId: ownProps.enabledId,\n    axisId: ownProps.axisId,\n    value: checked\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegressionLine);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { OPTION_TARGET_LINE_ENABLED, OPTION_TARGET_LINE_TITLE, OPTION_TARGET_LINE_TITLE_FONT_STYLE, OPTION_TARGET_LINE_VALUE } from '../../../modules/options';\nimport RegressionLine from './RegressionLine';\nexport const TargetLine = ({\n  disabled,\n  axisId,\n  isVertical\n}) => /*#__PURE__*/React.createElement(RegressionLine, {\n  disabled: disabled,\n  label: i18n.t('Target line'),\n  dataTest: \"option-target-line\",\n  fontStyleKey: OPTION_TARGET_LINE_TITLE_FONT_STYLE,\n  titleId: OPTION_TARGET_LINE_TITLE,\n  valueId: OPTION_TARGET_LINE_VALUE,\n  enabledId: OPTION_TARGET_LINE_ENABLED,\n  axisId: axisId,\n  isVertical: isVertical\n});\nTargetLine.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool,\n  isVertical: PropTypes.bool\n};\nexport default TargetLine;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { OPTION_BASE_LINE_ENABLED, OPTION_BASE_LINE_TITLE, OPTION_BASE_LINE_TITLE_FONT_STYLE, OPTION_BASE_LINE_VALUE } from '../../../modules/options';\nimport RegressionLine from './RegressionLine';\nexport const BaseLine = ({\n  disabled,\n  axisId,\n  isVertical\n}) => /*#__PURE__*/React.createElement(RegressionLine, {\n  disabled: disabled,\n  label: i18n.t('Base line'),\n  dataTest: \"option-base-line\",\n  fontStyleKey: OPTION_BASE_LINE_TITLE_FONT_STYLE,\n  titleId: OPTION_BASE_LINE_TITLE,\n  valueId: OPTION_BASE_LINE_VALUE,\n  enabledId: OPTION_BASE_LINE_ENABLED,\n  axisId: axisId,\n  isVertical: isVertical\n});\nBaseLine.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool,\n  isVertical: PropTypes.bool\n};\nexport default BaseLine;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport NumberBaseType from './NumberBaseType';\nimport { OPTION_AXIS_MIN_VALUE } from '../../../modules/options';\n\nconst AxisMinValue = ({\n  disabled,\n  axisId\n}) => /*#__PURE__*/React.createElement(NumberBaseType, {\n  width: \"100px\",\n  placeholder: i18n.t('Min'),\n  disabled: disabled,\n  option: {\n    id: OPTION_AXIS_MIN_VALUE,\n    axisId\n  },\n  inline: true,\n  dataTest: \"\".concat(axisId, \"-axis-range-min\")\n});\n\nAxisMinValue.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisMinValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport NumberBaseType from './NumberBaseType';\nimport { OPTION_AXIS_MAX_VALUE } from '../../../modules/options';\n\nconst AxisMaxValue = ({\n  disabled,\n  axisId\n}) => /*#__PURE__*/React.createElement(NumberBaseType, {\n  width: \"100px\",\n  placeholder: i18n.t('Max'),\n  disabled: disabled,\n  option: {\n    id: OPTION_AXIS_MAX_VALUE,\n    axisId\n  },\n  inline: true,\n  dataTest: \"\".concat(axisId, \"-axis-range-max\")\n});\n\nAxisMaxValue.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisMaxValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { Label, Help } from '@dhis2/ui';\nimport AxisMinValue from './AxisMinValue';\nimport AxisMaxValue from './AxisMaxValue';\nimport styles from '../styles/AxisRange.module.css';\nimport { tabSectionOption, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\n\nconst AxisRange = ({\n  disabled,\n  axisId\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Label, {\n  className: styles.label\n}, i18n.t('Axis range')), /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOptionComplexInline.className\n}, /*#__PURE__*/React.createElement(AxisMinValue, {\n  disabled: disabled,\n  axisId: axisId\n}), /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n}, '\\u00A0\\u2013\\u00A0'), /*#__PURE__*/React.createElement(AxisMaxValue, {\n  disabled: disabled,\n  axisId: axisId\n})), !disabled ? /*#__PURE__*/React.createElement(Help, null, i18n.t('Values outside of the range will not be displayed')) : null);\n\nAxisRange.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisRange;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { Label } from '@dhis2/ui';\nimport { FONT_STYLE_AXIS_LABELS } from '@dhis2/analytics';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\n\nconst AxisLabels = ({\n  disabled,\n  axisId\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Label, null, i18n.t('Labels')), /*#__PURE__*/React.createElement(TextStyle, {\n  fontStyleKey: FONT_STYLE_AXIS_LABELS,\n  disabled: disabled,\n  axisId: axisId,\n  dataTest: \"option-axis-label-\".concat(axisId, \"-text-style\")\n}));\n\nAxisLabels.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisLabels;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles/VerticalTabBar.module.css';\n\nconst VerticalTabBar = ({\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.container\n}, children);\n\nVerticalTabBar.propTypes = {\n  children: PropTypes.node\n};\nexport default VerticalTabBar;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Label } from '@dhis2/ui';\nimport cx from 'classnames';\nimport styles from './styles/VerticalTab.module.css';\n\nconst VerticalTab = ({\n  selected,\n  onClick,\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  onClick: onClick,\n  className: cx(styles.tab, {\n    [styles.selected]: selected\n  })\n}, /*#__PURE__*/React.createElement(Label, null, children));\n\nVerticalTab.propTypes = {\n  children: PropTypes.node,\n  selected: PropTypes.bool,\n  onClick: PropTypes.func\n};\nexport default VerticalTab;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { tabSectionTitle } from '../VisualizationOptions/styles/VisualizationOptions.style';\nimport VerticalTabBar from '../VerticalTabBar/VerticalTabBar';\nimport VerticalTab from '../VerticalTabBar/VerticalTab';\nimport styles from './styles/AxesTabs.module.css';\n\nconst AxesTabs = ({\n  items\n}) => {\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabs\n  }, /*#__PURE__*/React.createElement(VerticalTabBar, null, items.map(({\n    label\n  }, index) => /*#__PURE__*/React.createElement(VerticalTab, {\n    key: index,\n    onClick: () => setSelectedTabIndex(index),\n    selected: index === selectedTabIndex\n  }, label)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: tabSectionTitle.className\n  }, items[selectedTabIndex].label), items[selectedTabIndex].content), tabSectionTitle.styles);\n};\n\nAxesTabs.propTypes = {\n  items: PropTypes.array\n};\nexport default AxesTabs;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport AxesTabs from '../../../components/AxesTabs/AxesTabs';\nexport default (content => ({\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content: [{\n    key: 'axis-tabs',\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(AxesTabs, {\n      items: content,\n      key: \"tabs\"\n    })])\n  }]\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content,\n  helpText,\n  axisId\n}) => ({\n  key: axisId ? \"axes-vertical-axis-\".concat(axisId) : 'axes-vertical-axis',\n  label: axisId ? i18n.t('Vertical (y) axis {{axisId}}', {\n    axisId: Number(axisId.slice(-1)) + 1\n  }) : i18n.t('Vertical (y) axis'),\n  content,\n  helpText\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content,\n  helpText\n}) => ({\n  key: 'data-lines',\n  label: i18n.t('Lines'),\n  content,\n  helpText\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport AxisLabels from '../../components/VisualizationOptions/Options/AxisLabels';\nimport getSeriesTab from './tabs/series';\nimport getAxesTab from './tabs/axes';\nimport getVerticalAxisTemplate from './sections/templates/verticalAxis';\nimport getDisplayTemplate from './sections/templates/display';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getLinesTemplate from './sections/templates/lines';\nimport getLegendTab from './tabs/legend';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nconst axisId = 'RANGE_0';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(SkipRounding, null)])\n}), getLinesTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(TargetLine, {\n    axisId: axisId\n  }), /*#__PURE__*/React.createElement(BaseLine, {\n    axisId: axisId\n  })])\n}), getAdvancedSection()]), getLegendTab(), getAxesTab([getVerticalAxisTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(AxisRange, {\n    axisId: axisId\n  }), /*#__PURE__*/React.createElement(AxisLabels, {\n    axisId: axisId\n  })])\n})]), getSeriesTab(), getStyleTab([getTitlesSection()])]);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'regressionType';\nconst defaultValue = options[optionName].defaultValue;\n\nconst RegressionType = ({\n  disabled\n}) => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  toggleable: true,\n  label: i18n.t('Trend line'),\n  disabled: disabled,\n  option: {\n    name: optionName,\n    defaultValue: defaultValue,\n    items: [{\n      value: 'LINEAR',\n      label: i18n.t('Linear')\n    }, {\n      value: 'POLYNOMIAL',\n      label: i18n.t('Polynomial')\n    }, {\n      value: 'LOESS',\n      label: i18n.t('Loess')\n    }]\n  },\n  dataTest: 'option-trend-line'\n});\n\nRegressionType.propTypes = {\n  disabled: PropTypes.bool\n};\nexport default RegressionType;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { IconInfo16 } from '@dhis2/ui';\nimport { tabSectionOption, tabSectionOptionText, tabSectionOptionIcon } from './styles/VisualizationOptions.style.js';\nexport const InfoText = ({\n  text\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(\"p\", {\n  className: tabSectionOptionText.className\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: tabSectionOptionIcon.className\n}, /*#__PURE__*/React.createElement(IconInfo16, null)), text));\nInfoText.propTypes = {\n  text: PropTypes.string\n};\nexport default InfoText;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport RegressionType from '../../../components/VisualizationOptions/Options/RegressionType';\nimport TargetLine from '../../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../../components/VisualizationOptions/Options/BaseLine';\nimport getLinesTemplate from './templates/lines';\nimport InfoText from '../../../components/VisualizationOptions/InfoText';\nexport default ((hasDisabledSections, axisId) => ({ ...getLinesTemplate({\n    content: React.Children.toArray([[/*#__PURE__*/React.createElement(RegressionType, null)], ...(!hasDisabledSections ? [/*#__PURE__*/React.createElement(TargetLine, {\n      axisId: axisId\n    }), /*#__PURE__*/React.createElement(BaseLine, {\n      axisId: axisId\n    })] : [/*#__PURE__*/React.createElement(InfoText, {\n      text: i18n.t('Base and target lines are available on the Axes tab for multi-axis charts')\n    })])])\n  })\n}));","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { Label, Field, Radio, InputField, Button } from '@dhis2/ui';\nimport { connect } from 'react-redux';\nimport { defaultFontStyle, FONT_STYLE_OPTION_TEXT_COLOR } from '@dhis2/analytics';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption, acSetUiOptionFontStyle } from '../../../actions/ui';\nimport { OPTION_AXIS_TITLE, OPTION_AXIS_TITLE_ENABLED } from '../../../modules/options';\nconst TITLE_AUTO = 'AUTO';\nconst TITLE_NONE = 'NONE';\nconst TITLE_CUSTOM = 'CUSTOM';\nconst colors = ['#4292c6', '#cb181d', '#41ab5d', '#6c66b8'];\n\nconst AxisTitle = ({\n  axisId,\n  fontStyleKey,\n  enabled,\n  onTextChange,\n  onEnabledToggle,\n  title,\n  hasCustomAxes,\n  setTitleColor,\n  fontStyle,\n  setFontStyle\n}) => {\n  const titleType = enabled ? title || title === '' ? TITLE_CUSTOM : TITLE_AUTO : TITLE_NONE;\n\n  const onTypeChange = ({\n    value: type\n  }) => {\n    onEnabledToggle(type === TITLE_CUSTOM || type === TITLE_AUTO);\n\n    if ((type === TITLE_AUTO || type === TITLE_CUSTOM) && hasCustomAxes && fontStyle[FONT_STYLE_OPTION_TEXT_COLOR] === defaultFontStyle[fontStyleKey][FONT_STYLE_OPTION_TEXT_COLOR]) {\n      setTitleColor(colors[axisId.slice(-1)]);\n    }\n\n    if (type === TITLE_CUSTOM) {\n      onTextChange('Custom');\n    } else {\n      onTextChange();\n    }\n  };\n\n  const resetStyle = () => {\n    setFontStyle(hasCustomAxes ? {\n      textColor: colors[axisId.slice(-1)]\n    } : {});\n  };\n\n  const fontStyleIsDefault = () => Object.keys(fontStyle).every(key => (key !== FONT_STYLE_OPTION_TEXT_COLOR || !hasCustomAxes) && fontStyle[key] === defaultFontStyle[fontStyleKey][key] || key === FONT_STYLE_OPTION_TEXT_COLOR && hasCustomAxes && fontStyle[key] === colors[axisId.slice(-1)]);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className,\n    \"data-test\": 'option-chart-title'\n  }, /*#__PURE__*/React.createElement(Label, null, i18n.t('Axis title')), /*#__PURE__*/React.createElement(Field, {\n    name: \"title-selector\",\n    dense: true\n  }, [{\n    id: TITLE_AUTO,\n    label: i18n.t('Auto generated')\n  }, {\n    id: TITLE_NONE,\n    label: i18n.t('None')\n  }, {\n    id: TITLE_CUSTOM,\n    label: i18n.t('Custom')\n  }].map(({\n    id,\n    label\n  }) => /*#__PURE__*/React.createElement(Radio, {\n    key: id,\n    label: label,\n    value: id,\n    dense: true,\n    onChange: onTypeChange,\n    checked: titleType === id\n  }))), titleType === TITLE_CUSTOM ? /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOptionToggleable.className\n  }, /*#__PURE__*/React.createElement(InputField, {\n    type: 'text',\n    onChange: ({\n      value\n    }) => onTextChange(value),\n    value: title,\n    placeholder: i18n.t('Add a title'),\n    inputWidth: '280px',\n    dense: true,\n    dataTest: \"\".concat(axisId, \"-axis-title-input\")\n  })) : null, titleType === TITLE_AUTO || titleType === TITLE_CUSTOM ? /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOptionToggleable.className\n  }, /*#__PURE__*/React.createElement(TextStyle, {\n    fontStyleKey: fontStyleKey,\n    dataTest: \"\".concat(axisId, \"-axis-title-text-style\"),\n    axisId: axisId\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: resetStyle,\n    disabled: fontStyleIsDefault(),\n    small: true\n  }, i18n.t('Reset style to default'))) : null);\n};\n\nAxisTitle.propTypes = {\n  axisId: PropTypes.string,\n  enabled: PropTypes.bool,\n  fontStyle: PropTypes.object,\n  fontStyleKey: PropTypes.string,\n  hasCustomAxes: PropTypes.bool,\n  setFontStyle: PropTypes.func,\n  setTitleColor: PropTypes.func,\n  title: PropTypes.string,\n  onEnabledToggle: PropTypes.func,\n  onTextChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  fontStyle: sGetUiOption(state, {\n    id: ownProps.fontStyleKey,\n    axisId: ownProps.axisId\n  }) || {},\n  title: sGetUiOption(state, {\n    axisId: ownProps.axisId,\n    id: OPTION_AXIS_TITLE\n  }),\n  enabled: sGetUiOption(state, {\n    id: OPTION_AXIS_TITLE_ENABLED,\n    axisId: ownProps.axisId\n  }) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onTextChange: value => dispatch(acSetUiOption({\n    optionId: OPTION_AXIS_TITLE,\n    axisId: ownProps.axisId,\n    value\n  })),\n  onEnabledToggle: enabled => dispatch(acSetUiOption({\n    optionId: OPTION_AXIS_TITLE_ENABLED,\n    axisId: ownProps.axisId,\n    value: enabled\n  })),\n  setTitleColor: value => dispatch(acSetUiOption({\n    optionId: ownProps.fontStyleKey,\n    axisId: ownProps.axisId,\n    fontStyleOption: FONT_STYLE_OPTION_TEXT_COLOR,\n    value\n  })),\n  setFontStyle: value => dispatch(acSetUiOptionFontStyle({\n    optionId: ownProps.fontStyleKey,\n    axisId: ownProps.axisId,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AxisTitle);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { InputField } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nexport const PositiveNumberBaseType = ({\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(InputField, {\n  type: \"number\",\n  label: label,\n  onChange: ({\n    value\n  }) => {\n    const parsedValue = parseInt(value, 10);\n    parsedValue >= 0 ? onChange(Math.round(value)) : onChange(parsedValue ? 0 : null);\n  },\n  name: option.name,\n  value: value || value === 0 ? value.toString() : '',\n  helpText: helpText,\n  placeholder: placeholder,\n  inputWidth: width,\n  dense: true,\n  disabled: disabled\n})));\nPositiveNumberBaseType.propTypes = {\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option)\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PositiveNumberBaseType);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport PositiveNumberBaseType from './PositiveNumberBaseType';\nimport { OPTION_AXIS_STEPS } from '../../../modules/options';\nexport const AxisSteps = ({\n  disabled,\n  axisId\n}) => /*#__PURE__*/React.createElement(PositiveNumberBaseType, {\n  width: \"96px\",\n  helpText: i18n.t('Number of axis tick steps, including the min and max. A value of 2 or lower will be ignored.'),\n  label: i18n.t('Steps'),\n  disabled: disabled,\n  placeholder: i18n.t('Auto'),\n  option: {\n    id: OPTION_AXIS_STEPS,\n    axisId\n  }\n});\nAxisSteps.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisSteps;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport PositiveNumberBaseType from './PositiveNumberBaseType';\nimport { OPTION_AXIS_DECIMALS } from '../../../modules/options';\n\nconst AxisDecimals = ({\n  disabled,\n  axisId\n}) => /*#__PURE__*/React.createElement(PositiveNumberBaseType, {\n  width: \"96px\",\n  label: i18n.t('Decimals'),\n  disabled: disabled,\n  placeholder: i18n.t('Auto'),\n  option: {\n    id: OPTION_AXIS_DECIMALS,\n    axisId\n  }\n});\n\nAxisDecimals.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisDecimals;","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content,\n  helpText,\n  axisId\n}) => ({\n  key: axisId ? \"axes-horizontal-axis-\".concat(axisId) : 'axes-horizontal-axis',\n  label: axisId ? i18n.t('Horizontal (x) axis {{axisId}}', {\n    axisId: Number(axisId.slice(-1)) + 1\n  }) : i18n.t('Horizontal (x) axis'),\n  content,\n  helpText\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport { FONT_STYLE_HORIZONTAL_AXIS_TITLE, FONT_STYLE_VERTICAL_AXIS_TITLE } from '@dhis2/analytics';\nimport AxisTitle from '../../../components/VisualizationOptions/Options/AxisTitle';\nimport AxisRange from '../../../components/VisualizationOptions/Options/AxisRange';\nimport AxisSteps from '../../../components/VisualizationOptions/Options/AxisSteps';\nimport AxisDecimals from '../../../components/VisualizationOptions/Options/AxisDecimals';\nimport AxisLabels from '../../../components/VisualizationOptions/Options/AxisLabels';\nimport getHorizontalAxisTemplate from './templates/horizontalAxis';\nimport getVerticalAxisTemplate from './templates/verticalAxis';\nimport BaseLine from '../../../components/VisualizationOptions/Options/BaseLine';\nimport TargetLine from '../../../components/VisualizationOptions/Options/TargetLine';\nexport default (({\n  axisId,\n  isVertical,\n  showLines,\n  hasCustomAxes\n}) => {\n  const template = isVertical ? getHorizontalAxisTemplate : getVerticalAxisTemplate;\n  const fontStyleKey = isVertical ? FONT_STYLE_HORIZONTAL_AXIS_TITLE : FONT_STYLE_VERTICAL_AXIS_TITLE;\n  return { ...template({\n      content: React.Children.toArray([/*#__PURE__*/React.createElement(AxisTitle, {\n        axisId: axisId,\n        fontStyleKey: fontStyleKey,\n        hasCustomAxes: hasCustomAxes\n      }), /*#__PURE__*/React.createElement(AxisRange, {\n        axisId: axisId\n      }), /*#__PURE__*/React.createElement(AxisSteps, {\n        axisId: axisId\n      }), /*#__PURE__*/React.createElement(AxisDecimals, {\n        axisId: axisId\n      }), /*#__PURE__*/React.createElement(AxisLabels, {\n        axisId: axisId\n      }), ...(showLines ? [/*#__PURE__*/React.createElement(TargetLine, {\n        axisId: axisId,\n        isVertical: isVertical\n      }), /*#__PURE__*/React.createElement(BaseLine, {\n        axisId: axisId,\n        isVertical: isVertical\n      })] : [])]),\n      ...(hasCustomAxes ? {\n        axisId\n      } : null)\n    })\n  };\n});","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport { FONT_STYLE_HORIZONTAL_AXIS_TITLE, FONT_STYLE_VERTICAL_AXIS_TITLE } from '@dhis2/analytics';\nimport AxisTitle from '../../../components/VisualizationOptions/Options/AxisTitle';\nimport AxisLabels from '../../../components/VisualizationOptions/Options/AxisLabels';\nimport getHorizontalAxisTemplate from './templates/horizontalAxis';\nimport getVerticalAxisTemplate from './templates/verticalAxis';\nexport default (({\n  axisId,\n  isVertical\n}) => {\n  const template = isVertical ? getVerticalAxisTemplate : getHorizontalAxisTemplate;\n  const fontStyleKey = isVertical ? FONT_STYLE_VERTICAL_AXIS_TITLE : FONT_STYLE_HORIZONTAL_AXIS_TITLE;\n  return { ...template({\n      content: React.Children.toArray([/*#__PURE__*/React.createElement(AxisTitle, {\n        axisId: axisId,\n        fontStyleKey: fontStyleKey\n      }), /*#__PURE__*/React.createElement(AxisLabels, {\n        axisId: axisId\n      })])\n    })\n  };\n});","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst CumulativeValues = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Cumulative values'),\n  option: {\n    name: 'cumulativeValues'\n  }\n});\n\nexport default CumulativeValues;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'hideEmptyRowItems';\nconst defaultValue = options[optionName].defaultValue;\n\nconst HideEmptyRowItems = () => /*#__PURE__*/React.createElement(SelectBaseOption, {\n  label: i18n.t('Hide empty categories'),\n  toggleable: true,\n  option: {\n    name: optionName,\n    defaultValue: defaultValue,\n    items: [{\n      value: 'BEFORE_FIRST',\n      label: i18n.t('Before first')\n    }, {\n      value: 'AFTER_LAST',\n      label: i18n.t('After last')\n    }, {\n      value: 'BEFORE_FIRST_AFTER_LAST',\n      label: i18n.t('Before first and after last')\n    }, {\n      value: 'ALL',\n      label: i18n.t('All')\n    }]\n  }\n});\n\nexport default HideEmptyRowItems;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst PercentStackedValues = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Stacked values add up to 100%'),\n  option: {\n    name: 'percentStackedValues'\n  }\n});\n\nexport default PercentStackedValues;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport CumulativeValues from '../../../components/VisualizationOptions/Options/CumulativeValues';\nimport HideEmptyRowItems from '../../../components/VisualizationOptions/Options/HideEmptyRowItems';\nimport PercentStackedValues from '../../../components/VisualizationOptions/Options/PercentStackedValues';\nimport SkipRounding from '../../../components/VisualizationOptions/Options/SkipRounding';\nimport SortOrder from '../../../components/VisualizationOptions/Options/SortOrder';\nimport getDisplayTemplate from './templates/display';\nconst defaultContent = [/*#__PURE__*/React.createElement(CumulativeValues, null), /*#__PURE__*/React.createElement(HideEmptyRowItems, null), /*#__PURE__*/React.createElement(SortOrder, null), /*#__PURE__*/React.createElement(SkipRounding, null)];\nconst stackedContent = [/*#__PURE__*/React.createElement(PercentStackedValues, null), ...defaultContent];\nexport default (isStacked => ({ ...getDisplayTemplate({\n    content: React.Children.toArray(isStacked ? stackedContent : defaultContent)\n  })\n}));","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { FONT_STYLE_LEGEND } from '@dhis2/analytics';\nimport CheckboxBaseOption from './CheckboxBaseOption';\nimport { OPTION_HIDE_LEGEND } from '../../../modules/options';\n\nconst HideLegend = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Show legend key'),\n  option: {\n    id: OPTION_HIDE_LEGEND\n  },\n  inverted: true,\n  fontStyleKey: FONT_STYLE_LEGEND,\n  dataTest: 'option-legend-key'\n});\n\nexport default HideLegend;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst NoSpaceBetweenColumns = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('No space between bars/columns'),\n  option: {\n    name: 'noSpaceBetweenColumns'\n  }\n});\n\nexport default NoSpaceBetweenColumns;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowData = () => /*#__PURE__*/React.createElement(CheckboxBaseOption, {\n  label: i18n.t('Value labels'),\n  option: {\n    name: 'showData'\n  }\n});\n\nexport default ShowData;","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'style-chart-style',\n  label: i18n.t('Chart style'),\n  content\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport HideLegend from '../../../components/VisualizationOptions/Options/HideLegend';\nimport NoSpaceBetweenColumns from '../../../components/VisualizationOptions/Options/NoSpaceBetweenColumns';\nimport ShowData from '../../../components/VisualizationOptions/Options/ShowData';\nimport getChartStyleTemplate from './templates/chartStyle';\nconst defaultContent = [/*#__PURE__*/React.createElement(ShowData, null), /*#__PURE__*/React.createElement(HideLegend, null)];\nconst columnContent = [/*#__PURE__*/React.createElement(ShowData, null), /*#__PURE__*/React.createElement(NoSpaceBetweenColumns, null), /*#__PURE__*/React.createElement(HideLegend, null)\n/* TODO new option <BackgroundLines /> */\n];\nexport default (isColumnBased => ({ ...getChartStyleTemplate({\n    content: React.Children.toArray([isColumnBased ? columnContent : defaultContent])\n  })\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field, Radio, InputField, Help } from '@dhis2/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst OutlierDetectionMethod = ({\n  methods,\n  currentMethodId,\n  onMethodChange,\n  currentThreshold,\n  onThresholdChange\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Field, {\n  dense: true\n}, methods.map(({\n  id,\n  label\n}) => /*#__PURE__*/React.createElement(Radio, {\n  key: id,\n  label: label,\n  value: id,\n  checked: currentMethodId === id,\n  onChange: ({\n    value\n  }) => {\n    onMethodChange(value);\n  },\n  dense: true\n}))), /*#__PURE__*/React.createElement(Help, null, i18n.t('Each detection method identifies outliers in different ways and suits different data. Check the documentation for help to choose the right outlier detection method'))), /*#__PURE__*/React.createElement(InputField, {\n  type: \"number\",\n  label: i18n.t('Threshold factor'),\n  min: \"0\",\n  step: \"0.5\",\n  onChange: ({\n    value\n  }) => onThresholdChange(Number(value)),\n  value: (currentThreshold === null || currentThreshold === void 0 ? void 0 : currentThreshold.toString()) || '',\n  helpText: i18n.t('A high value is more sensitive so fewer data items will be identified as outliers'),\n  placeholder: i18n.t('Number'),\n  inputWidth: \"96px\",\n  dense: true\n}));\n\nOutlierDetectionMethod.propTypes = {\n  methods: PropTypes.array.isRequired,\n  onMethodChange: PropTypes.func.isRequired,\n  onThresholdChange: PropTypes.func.isRequired,\n  currentMethodId: PropTypes.string,\n  currentThreshold: PropTypes.number\n};\nexport default OutlierDetectionMethod;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, Help, InputField } from '@dhis2/ui';\nimport { tabSectionOption, tabSectionToggleableSubsection } from '../styles/VisualizationOptions.style.js';\n\nconst ExtremeLines = ({\n  isEnabled,\n  onEnabledChange,\n  currentValue,\n  onValueChange\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(Checkbox, {\n  checked: isEnabled,\n  label: i18n.t('Extreme lines'),\n  onChange: ({\n    checked\n  }) => onEnabledChange(checked),\n  dense: true\n}), /*#__PURE__*/React.createElement(Help, null, i18n.t('Calculated as a percent, usually 1%, of the total values along an axis'))), isEnabled && /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionToggleableSubsection.className\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: tabSectionOption.className\n}, /*#__PURE__*/React.createElement(InputField, {\n  type: \"number\",\n  label: i18n.t('Extreme line % detection'),\n  min: \"0.1\",\n  step: \"0.1\",\n  onChange: input => onValueChange(Number(input.value)),\n  value: (currentValue === null || currentValue === void 0 ? void 0 : currentValue.toString()) || '',\n  placeholder: i18n.t('Number'),\n  inputWidth: \"96px\",\n  dense: true\n})))));\n\nExtremeLines.propTypes = {\n  isEnabled: PropTypes.bool.isRequired,\n  onEnabledChange: PropTypes.func.isRequired,\n  onValueChange: PropTypes.func.isRequired,\n  currentValue: PropTypes.number\n};\nexport default ExtremeLines;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, FieldSet, Help, Legend } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionToggleableSubsection, tabSectionOption, tabSectionTitle } from '../styles/VisualizationOptions.style.js';\nimport OutlierDetectionMethod from './OutlierDetectionMethod';\nimport ExtremeLines from './ExtremeLines';\nimport styles from '../styles/Outliers.module.css';\nconst ENABLED_PROP = 'enabled';\nconst METHOD_PROP = 'outlierMethod';\nconst THRESHOLD_PROP = 'thresholdFactor';\nconst EL_ENABLED_PROP = 'enabled';\nconst EL_VALUE_PROP = 'value';\nconst OUTLIER_ANALYSIS_OPTION_NAME = 'outlierAnalysis';\nconst METHOD_IQR = 'IQR';\nconst METHOD_STANDARD_Z_SCORE = 'STANDARD_Z_SCORE';\nconst METHOD_MODIFIED_Z_SCORE = 'MODIFIED_Z_SCORE';\nconst methods = [{\n  id: METHOD_IQR,\n  label: i18n.t('Interquartile Range (IQR)'),\n  defaultThreshold: 1.5\n}, {\n  id: METHOD_STANDARD_Z_SCORE,\n  label: i18n.t('Z-score / Standard score'),\n  defaultThreshold: 3\n}, {\n  id: METHOD_MODIFIED_Z_SCORE,\n  label: i18n.t('Modified Z-score'),\n  defaultThreshold: 3\n}];\nconst DEFAULT_STATE = {\n  [ENABLED_PROP]: false,\n  [METHOD_PROP]: METHOD_IQR,\n  [THRESHOLD_PROP]: 1.5,\n  extremeLines: {\n    [EL_ENABLED_PROP]: false,\n    [EL_VALUE_PROP]: 1\n  }\n};\nconst dataTest = 'option-outliers';\n\nconst Outliers = ({\n  outlierAnalysis,\n  onChange\n}) => {\n  const storeProp = (prop, value) => onChange({ ...outlierAnalysis,\n    [prop]: value\n  });\n\n  const storeExtremeLinesProp = (prop, value) => onChange({ ...outlierAnalysis,\n    extremeLines: { ...outlierAnalysis.extremeLines,\n      [prop]: value\n    }\n  });\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: outlierAnalysis[ENABLED_PROP],\n    label: i18n.t('Outlier analysis'),\n    onChange: ({\n      checked\n    }) => storeProp(ENABLED_PROP, checked),\n    dense: true,\n    dataTest: \"\".concat(dataTest, \"-enabled-checkbox\")\n  }), /*#__PURE__*/React.createElement(Help, null, i18n.t('Outlier analysis detects and highlights data items that are markedly different from the rest of the data'))), outlierAnalysis[ENABLED_PROP] && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionToggleableSubsection.className\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(FieldSet, null, /*#__PURE__*/React.createElement(Legend, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: tabSectionTitle.className\n  }, i18n.t('Outlier detection method'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(OutlierDetectionMethod, {\n    methods: methods,\n    onMethodChange: value => onChange({ ...outlierAnalysis,\n      [METHOD_PROP]: value,\n      [THRESHOLD_PROP]: methods.find(item => item.id === value).defaultThreshold\n    }),\n    onThresholdChange: value => storeProp(THRESHOLD_PROP, value),\n    currentMethodId: outlierAnalysis[METHOD_PROP],\n    currentThreshold: outlierAnalysis[THRESHOLD_PROP]\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.divider\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionToggleableSubsection.className\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(FieldSet, null, /*#__PURE__*/React.createElement(Legend, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: tabSectionTitle.className\n  }, i18n.t('Extreme lines'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabSectionOption.className\n  }, /*#__PURE__*/React.createElement(ExtremeLines, {\n    isEnabled: outlierAnalysis.extremeLines[EL_ENABLED_PROP],\n    onEnabledChange: value => storeExtremeLinesProp(EL_ENABLED_PROP, value),\n    currentValue: outlierAnalysis.extremeLines[EL_VALUE_PROP],\n    onValueChange: value => storeExtremeLinesProp(EL_VALUE_PROP, value)\n  })))))));\n};\n\nOutliers.propTypes = {\n  outlierAnalysis: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  outlierAnalysis: sGetUiOptions(state)[OUTLIER_ANALYSIS_OPTION_NAME] || DEFAULT_STATE\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [OUTLIER_ANALYSIS_OPTION_NAME]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Outliers);","import { VIS_TYPE_PIVOT_TABLE, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_SCATTER, isStacked as isStackedType, isLegendSetType, isMultiType, isDualAxisType, isColumnBasedType, isVerticalType } from '@dhis2/analytics';\nimport pivotTableConfig from './pivotTableConfig';\nimport pieConfig from './pieConfig';\nimport gaugeConfig from './gaugeConfig';\nimport singleValueConfig from './singleValueConfig';\nimport defaultConfig from './defaultConfig';\nimport scatterConfig from './scatterConfig';\nexport const getOptionsByType = (type, hasDisabledSections, rangeAxisIds) => {\n  const isStacked = isStackedType(type);\n  const isColumnBased = isColumnBasedType(type);\n  const supportsLegends = isLegendSetType(type);\n  const supportsMultiAxes = isDualAxisType(type);\n  const supportsMultiType = isMultiType(type);\n  const isVertical = isVerticalType(type);\n  const defaultProps = {\n    hasDisabledSections,\n    isStacked,\n    isColumnBased,\n    supportsLegends,\n    supportsMultiAxes,\n    supportsMultiType,\n    rangeAxisIds,\n    isVertical\n  };\n\n  switch (type) {\n    case VIS_TYPE_GAUGE:\n      return gaugeConfig();\n\n    case VIS_TYPE_PIE:\n      return pieConfig();\n\n    case VIS_TYPE_SINGLE_VALUE:\n      return singleValueConfig();\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return pivotTableConfig();\n\n    case VIS_TYPE_SCATTER:\n      return scatterConfig();\n\n    default:\n      return defaultConfig(defaultProps);\n  }\n};","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport getColorSetSection from './sections/colorSet';\nimport getSeriesTab from './tabs/series';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport getDisplayTemplate from './sections/templates/display';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport getLimitValuesTab from './tabs/limitValues';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(SkipRounding, null)])\n}), getAdvancedSection()]), getSeriesTab(), getStyleTab([getTitlesSection(), getColorSetSection()]), getLimitValuesTab()]);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator';\nimport getSeriesTab from './tabs/series';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getDisplayTemplate from './sections/templates/display';\nimport getLegendTab from './tabs/legend';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(SkipRounding, null)])\n}), getAdvancedSection()]), getLegendTab({\n  hideStyleOptions: true\n}), getSeriesTab(), getStyleTab([getTitlesSection(), {\n  key: 'style-section-2',\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(DigitGroupSeparator, null)])\n}])]);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport NoticeBox from '../../components/VisualizationOptions/NoticeBox';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport ShowDimensionLabels from '../../components/VisualizationOptions/Options/ShowDimensionLabels';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport ColTotals from '../../components/VisualizationOptions/Options/ColTotals';\nimport ColSubTotals from '../../components/VisualizationOptions/Options/ColSubTotals';\nimport RowTotals from '../../components/VisualizationOptions/Options/RowTotals';\nimport RowSubTotals from '../../components/VisualizationOptions/Options/RowSubTotals';\nimport HideEmptyColumns from '../../components/VisualizationOptions/Options/HideEmptyColumns';\nimport HideEmptyRows from '../../components/VisualizationOptions/Options/HideEmptyRows';\nimport NumberType from '../../components/VisualizationOptions/Options/NumberType';\nimport Title from '../../components/VisualizationOptions/Options/Title';\nimport DisplayDensity from '../../components/VisualizationOptions/Options/DisplayDensity';\nimport FontSize from '../../components/VisualizationOptions/Options/FontSize';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator';\nimport ParamReportingPeriod from '../../components/VisualizationOptions/Options/ParamReportingPeriod';\nimport ParamOrganisationUnit from '../../components/VisualizationOptions/Options/ParamOrganisationUnit';\nimport ParamParentOrganisationUnit from '../../components/VisualizationOptions/Options/ParamParentOrganisationUnit';\nimport Regression from '../../components/VisualizationOptions/Options/Regression';\nimport Cumulative from '../../components/VisualizationOptions/Options/Cumulative';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport TopLimit from '../../components/VisualizationOptions/Options/TopLimit';\nimport ApprovalLevel from '../../components/VisualizationOptions/Options/ApprovalLevel';\nimport ShowHierarchy from '../../components/VisualizationOptions/Options/ShowHierarchy';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nimport getSeriesTab from './tabs/series';\nimport getDataTab from './tabs/data';\nimport getAdvancedTemplate from './sections/templates/advanced';\nimport getDisplayTemplate from './sections/templates/display';\nimport getTotalsTemplate from './sections/templates/totals';\nimport getEmptyDataTemplate from './sections/templates/emptyData';\nimport getLegendTab from './tabs/legend';\nimport getStyleTab from './tabs/style';\nimport getLimitValuesTab from './tabs/limitValues';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(ShowDimensionLabels, null), /*#__PURE__*/React.createElement(SkipRounding, null)])\n}), getTotalsTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(ColTotals, null), /*#__PURE__*/React.createElement(ColSubTotals, null), /*#__PURE__*/React.createElement(RowTotals, null), /*#__PURE__*/React.createElement(RowSubTotals, null)])\n}), getEmptyDataTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(HideEmptyColumns, null), /*#__PURE__*/React.createElement(HideEmptyRows, null)])\n}), getAdvancedTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(AggregationType, null), /*#__PURE__*/React.createElement(NumberType, null), /*#__PURE__*/React.createElement(CompletedOnly, null), /*#__PURE__*/React.createElement(ApprovalLevel, null)])\n})]), getLegendTab(), getSeriesTab(), getStyleTab([{\n  key: 'style-section-1',\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(Title, {\n    label: i18n.t('Table title')\n  }), /*#__PURE__*/React.createElement(DisplayDensity, null), /*#__PURE__*/React.createElement(FontSize, null), /*#__PURE__*/React.createElement(DigitGroupSeparator, null)])\n}, {\n  key: 'style-section-2',\n  label: i18n.t('Labels'),\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(ShowHierarchy, null)])\n}]), getLimitValuesTab(), {\n  key: 'parameters-tab',\n  label: i18n.t('Parameters'),\n  content: [{\n    key: 'parameters-section-1',\n    content: React.Children.toArray([/*#__PURE__*/React.createElement(NoticeBox, {\n      text: i18n.t('These options only apply to legacy tables like standard reports. Options set here will have no effect on tables made in Data Visualizer.'),\n      title: i18n.t('Applies to standard reports only'),\n      warning: true\n    }), /*#__PURE__*/React.createElement(ParamReportingPeriod, null), /*#__PURE__*/React.createElement(ParamOrganisationUnit, null), /*#__PURE__*/React.createElement(ParamParentOrganisationUnit, null), /*#__PURE__*/React.createElement(Regression, null), /*#__PURE__*/React.createElement(Cumulative, null), /*#__PURE__*/React.createElement(SortOrder, null), /*#__PURE__*/React.createElement(TopLimit, null)])\n  }]\n}]);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport getSeriesTab from './tabs/series';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport getAxesTab from './tabs/axes';\nimport getOutliersTab from './tabs/outliers';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getDisplayTemplate from './sections/templates/display';\nimport getLinesTemplate from './sections/templates/lines';\nimport InfoText from '../../components/VisualizationOptions/InfoText';\nimport Outliers from '../../components/VisualizationOptions/Options/Outliers';\nimport getRangeAxisSection from './sections/rangeAxis';\nconst verticalAxisId = 'RANGE_0';\nconst horisontalAxisId = 'RANGE_1';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(SkipRounding, null)])\n}), getLinesTemplate({\n  // TODO: Add trend line?\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(InfoText, {\n    text: i18n.t('Base and target lines are available on the Axes tab for scatter charts')\n  })])\n}), getAdvancedSection()]), getAxesTab([getRangeAxisSection({\n  axisId: verticalAxisId,\n  showLines: true\n}), getRangeAxisSection({\n  axisId: horisontalAxisId,\n  showLines: true,\n  isVertical: true\n})]), getSeriesTab(), getStyleTab([getTitlesSection()]), getOutliersTab([{\n  key: 'outlier-analysis',\n  content: React.Children.toArray([/*#__PURE__*/React.createElement(Outliers, null)])\n}])]);","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'outliers-tab',\n  label: i18n.t('Outliers'),\n  content\n}));","import getLinesSection from './sections/lines';\nimport getRangeAxisSection from './sections/rangeAxis';\nimport getDomainAxisSection from './sections/domainAxis';\nimport getColorSetSection from './sections/colorSet';\nimport getSeriesTab from './tabs/series';\nimport getAxesTab from './tabs/axes';\nimport getDataTab from './tabs/data';\nimport getDisplaySection from './sections/display';\nimport getAdvancedSection from './sections/advanced';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport getChartStyleSection from './sections/chartStyle';\nimport getLegendTab from './tabs/legend';\nimport getLimitValuesTab from './tabs/limitValues';\nexport default (({\n  hasDisabledSections,\n  supportsMultiAxes,\n  supportsMultiType,\n  isColumnBased,\n  isStacked,\n  supportsLegends,\n  rangeAxisIds = [],\n  isVertical\n} = {}) => [getDataTab([getDisplaySection(isStacked), getLinesSection(hasDisabledSections, 'RANGE_0'), getAdvancedSection()]), ...(supportsLegends ? [getLegendTab({\n  hideStyleOptions: true\n})] : []), getAxesTab([...rangeAxisIds.map(id => getRangeAxisSection({\n  axisId: \"RANGE_\".concat(id),\n  isVertical,\n  showLines: hasDisabledSections,\n  hasCustomAxes: rangeAxisIds.length > 1 || rangeAxisIds.some(id => id > 0)\n})), getDomainAxisSection({\n  axisId: 'DOMAIN_0',\n  isVertical\n})]), getSeriesTab({\n  showAxisOptions: supportsMultiAxes,\n  showTypeOptions: supportsMultiType\n}), getStyleTab([getChartStyleSection(isColumnBased), getTitlesSection(), getColorSetSection(hasDisabledSections)]), getLimitValuesTab()]);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FieldSet, Legend, TabBar, Tab, Help } from '@dhis2/ui';\nimport { tabSection, tabSectionTitle, tabSectionTitleMargin, tabSectionOption, tabSectionOptionItem, tabSectionOptionToggleable, tabSectionToggleableSubsection, tabSectionOptionComplexInline, tabSectionOptionText, tabBar, tabContent, tabSectionOptionIcon } from './styles/VisualizationOptions.style.js';\nimport { sGetUiType, sGetUiOptions, sGetDimensionItemsByAxis, sGetUiLayout } from '../../reducers/ui';\nimport { getOptionsByType } from '../../modules/options/config';\nimport { isDualAxisType, hasCustomAxes, hasRelativeItems, AXIS_ID_COLUMNS } from '@dhis2/analytics';\nexport class VisualizationOptions extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      activeTabKey: undefined\n    });\n\n    _defineProperty(this, \"selectTab\", tabKey => {\n      this.setState({\n        activeTabKey: tabKey\n      });\n    });\n\n    _defineProperty(this, \"generateTabContent\", sections => sections.map(({\n      key,\n      label,\n      content,\n      helpText\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: tabSection.className\n    }, /*#__PURE__*/React.createElement(FieldSet, null, label ? /*#__PURE__*/React.createElement(Legend, null, /*#__PURE__*/React.createElement(\"span\", {\n      className: tabSectionTitle.className\n    }, label)) : null, content, helpText ? /*#__PURE__*/React.createElement(Legend, null, /*#__PURE__*/React.createElement(Help, null, helpText)) : null))));\n\n    _defineProperty(this, \"generateTabs\", tabs => tabs.map(({\n      key,\n      label,\n      content\n    }) => ({\n      key,\n      label,\n      content: this.generateTabContent(content)\n    })));\n  }\n\n  render() {\n    const {\n      visualizationType,\n      columnDimensionItems,\n      series,\n      columns\n    } = this.props;\n    const filteredSeries = series.filter(seriesItem => columnDimensionItems.some(layoutItem => layoutItem === seriesItem.dimensionItem));\n    const optionsConfig = getOptionsByType(visualizationType, isDualAxisType(visualizationType) && hasCustomAxes(filteredSeries) && !hasRelativeItems(columns[0], columnDimensionItems), series !== null && series !== void 0 && series.length && isDualAxisType(visualizationType) ? [...new Set(series.map(serie => serie.axis))].sort((a, b) => a - b) : [0]);\n    const tabs = this.generateTabs(optionsConfig);\n    let activeTabIndex = tabs.findIndex(tab => tab.key === this.state.activeTabKey);\n\n    if (activeTabIndex < 0) {\n      activeTabIndex = 0;\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: tabBar.className\n    }, /*#__PURE__*/React.createElement(TabBar, {\n      dataTest: 'options-modal-tab-bar'\n    }, tabs.map(({\n      key,\n      label\n    }, index) => /*#__PURE__*/React.createElement(Tab, {\n      key: key,\n      onClick: () => this.selectTab(key),\n      selected: index === activeTabIndex\n    }, label))), tabBar.styles), /*#__PURE__*/React.createElement(\"div\", {\n      className: tabContent.className\n    }, tabs[activeTabIndex].content, tabContent.styles, tabSection.styles, tabSectionTitle.styles, tabSectionTitleMargin.styles, tabSectionOption.styles, tabSectionOptionItem.styles, tabSectionOptionToggleable.styles, tabSectionToggleableSubsection.styles, tabSectionOptionComplexInline.styles, tabSectionOptionText.styles, tabSectionOptionIcon.styles));\n  }\n\n}\nVisualizationOptions.propTypes = {\n  visualizationType: PropTypes.string.isRequired,\n  columnDimensionItems: PropTypes.array,\n  columns: PropTypes.array,\n  series: PropTypes.array\n};\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  columnDimensionItems: sGetDimensionItemsByAxis(state, AXIS_ID_COLUMNS),\n  series: sGetUiOptions(state).series,\n  columns: sGetUiLayout(state).columns\n});\n\nexport default connect(mapStateToProps)(VisualizationOptions);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, Fragment } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { ButtonStrip, Modal, ModalTitle, ModalContent, ModalActions } from '@dhis2/ui';\nimport styles from './styles/VisualizationOptionsManager.module.css';\nimport UpdateButton from '../UpdateButton/UpdateButton';\nimport HideButton from '../HideButton/HideButton';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer';\nimport VisualizationOptions from './VisualizationOptions';\nimport MenuButton from '../MenuButton/MenuButton';\n\nclass VisualizationOptionsManager extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClose\", () => {\n      this.toggleVisualizationOptionsDialog();\n    });\n\n    _defineProperty(this, \"toggleVisualizationOptionsDialog\", () => {\n      this.setState({\n        dialogIsOpen: !this.state.dialogIsOpen\n      });\n    });\n\n    _defineProperty(this, \"getPrimaryOnClick\", handler => () => {\n      handler();\n      this.onClose();\n    });\n\n    this.state = {\n      dialogIsOpen: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(MenuButton, {\n      onClick: this.toggleVisualizationOptionsDialog,\n      dataTest: 'app-menubar-options-button'\n    }, i18n.t('Options')), this.state.dialogIsOpen && /*#__PURE__*/React.createElement(Modal, {\n      onClose: this.onClose,\n      position: \"top\",\n      large: true,\n      dataTest: 'options-modal'\n    }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Options')), /*#__PURE__*/React.createElement(ModalContent, {\n      className: styles.modalContent\n    }, /*#__PURE__*/React.createElement(VisualizationOptions, null)), /*#__PURE__*/React.createElement(ModalActions, {\n      dataTest: 'options-modal-actions'\n    }, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(HideButton, {\n      onClick: this.onClose,\n      dataTest: 'options-modal-action-cancel'\n    }), /*#__PURE__*/React.createElement(UpdateVisualizationContainer, {\n      renderComponent: handler => /*#__PURE__*/React.createElement(UpdateButton, {\n        onClick: this.getPrimaryOnClick(handler),\n        dataTest: 'options-modal-action-confirm'\n      })\n    })))));\n  }\n\n}\n\nexport default VisualizationOptionsManager;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FileMenu } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport UpdateButton from '../UpdateButton/UpdateButton';\nimport DownloadMenu from '../DownloadMenu/DownloadMenu';\nimport InterpretationsButton from '../Interpretations/InterpretationsButton';\nimport VisualizationOptionsManager from '../VisualizationOptions/VisualizationOptionsManager';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer';\nimport * as fromActions from '../../actions';\nimport { sGetCurrent } from '../../reducers/current';\nimport history from '../../modules/history';\nimport { getErrorVariantByStatusCode } from '../../modules/error';\nimport styles from './styles/MenuBar.module.css';\n\nconst onOpen = id => {\n  const path = \"/\".concat(id);\n\n  if (history.location.pathname === path) {\n    history.replace({\n      pathname: path,\n      state: {\n        isOpening: true\n      }\n    });\n  } else {\n    history.push(path);\n  }\n};\n\nconst onNew = () => {\n  if (history.location.pathname === '/') {\n    history.replace({\n      pathname: '/',\n      state: {\n        isResetting: true\n      }\n    });\n  } else {\n    history.push('/');\n  }\n};\n\nconst getOnRename = props => details => props.onRenameVisualization(details);\n\nconst getOnSave = props => details => props.onSaveVisualization(details, false);\n\nconst getOnSaveAs = props => details => props.onSaveVisualization(details, true);\n\nconst getOnDelete = props => () => props.onDeleteVisualization();\n\nconst getOnError = props => error => props.onError(error);\n\nexport const MenuBar = ({\n  dataTest,\n  ...props\n}, context) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.menuBar,\n  \"data-test\": dataTest\n}, /*#__PURE__*/React.createElement(UpdateVisualizationContainer, {\n  renderComponent: handler => /*#__PURE__*/React.createElement(UpdateButton, {\n    className: styles.updateButton,\n    small: true,\n    onClick: handler,\n    dataTest: \"\".concat(dataTest, \"-update-button\")\n  })\n}), /*#__PURE__*/React.createElement(FileMenu, {\n  d2: context.d2,\n  fileType: props.apiObjectName,\n  fileObject: props.current,\n  onOpen: onOpen,\n  onNew: onNew,\n  onRename: getOnRename(props),\n  onSave: getOnSave(props),\n  onSaveAs: getOnSaveAs(props),\n  onDelete: getOnDelete(props),\n  onError: getOnError(props)\n}), /*#__PURE__*/React.createElement(VisualizationOptionsManager, null), /*#__PURE__*/React.createElement(DownloadMenu, null), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.grow\n}), /*#__PURE__*/React.createElement(InterpretationsButton, null));\nMenuBar.propTypes = {\n  apiObjectName: PropTypes.string,\n  current: PropTypes.object,\n  dataTest: PropTypes.string\n};\nMenuBar.contextTypes = {\n  d2: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  current: sGetCurrent(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onRenameVisualization: details => dispatch(fromActions.tDoRenameVisualization(details)),\n  onSaveVisualization: (details = {}, copy) => dispatch(fromActions.tDoSaveVisualization(details, copy)),\n  onDeleteVisualization: () => dispatch(fromActions.tDoDeleteVisualization()),\n  onError: error => {\n    const message = error.errorCode === 'E4030' ? i18n.t(\"This visualization can't be deleted because it is used on one or more dashboards\") : error.message;\n    const variant = getErrorVariantByStatusCode(error.httpStatusCode);\n    dispatch(fromActions.fromSnackbar.acReceivedSnackbarMessage({\n      variant,\n      message\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuBar);","import React from 'react';\n\nconst InterpretationIcon = () => {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 16 16\",\n    version: \"1.1\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Exp\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"2---Home-+-Selected-Intp.\",\n    transform: \"translate(-522.000000, -169.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    fill: \"#F4F6F8\",\n    x: \"0\",\n    y: \"0\",\n    width: \"1280\",\n    height: \"850\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"title-area\",\n    transform: \"translate(298.000000, 165.000000)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"name-badge\",\n    transform: \"translate(220.000000, 0.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle-4\",\n    fill: \"#FFFFFF\",\n    opacity: \"0.700613839\",\n    x: \"0\",\n    y: \"0\",\n    width: \"260\",\n    height: \"24\",\n    rx: \"4\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"undo\",\n    transform: \"translate(4.000000, 4.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"frame\",\n    x: \"0\",\n    y: \"0\",\n    width: \"16\",\n    height: \"16\"\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    id: \"Path\",\n    stroke: \"#494949\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    points: \"2.375 2.374 2.375 6.124 6.125 6.124\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8,13.624 C10.8610015,13.6256787 13.2674888,11.4795583 13.5919996,8.63701982 C13.9165103,5.79448132 12.0556517,3.16119082 9.2678875,2.51799333 C6.48012327,1.87479584 3.65366782,3.42662163 2.7,6.124\",\n    id: \"Path\",\n    stroke: \"#494949\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9,7.29289322 L11.1819805,9.47487373 C11.3772427,9.67013588 11.3772427,9.98671837 11.1819805,10.1819805 C10.9867184,10.3772427 10.6701359,10.3772427 10.4748737,10.1819805 L8.01023174,7.71733852 L8,7.7144165 L8,5.5 C8,5.22385763 8.22385763,5 8.5,5 C8.77614237,5 9,5.22385763 9,5.5 L9,7.29289322 Z\",\n    id: \"Combined-Shape\",\n    fill: \"#494949\"\n  })))))));\n};\n\nexport default InterpretationIcon;","import { colors } from '@dhis2/ui';\nexport default {\n  titleBar: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  cell: {\n    display: 'flex',\n    alignItems: 'center',\n    background: colors.white,\n    padding: '6px',\n    borderRadius: '5px',\n    margin: '4px'\n  },\n  title: {\n    fontSize: '14px'\n  },\n  suffix: {\n    paddingLeft: '4px'\n  },\n  interpretation: {\n    fontSize: '12px',\n    color: colors.grey700\n  },\n  interpretationIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '14px',\n    width: '14px',\n    marginRight: '3px'\n  },\n  titleUnsaved: {\n    color: colors.grey500,\n    fontStyle: 'italic'\n  },\n  titleDirty: {\n    color: colors.grey700\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetVisualization } from '../../reducers/visualization';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetUiLocale } from '../../reducers/settings';\nimport formatDate from '../../modules/formatDate';\nimport InterpretationIcon from '../../assets/InterpretationIcon';\nimport styles from './styles/TitleBar.style';\nimport { STATE_UNSAVED, STATE_SAVED, STATE_DIRTY, getVisualizationState } from '../../modules/visualization';\nexport const getTitleUnsaved = () => i18n.t('Unsaved visualization');\nexport const getTitleDirty = () => i18n.t('Edited');\nconst defaultTitleStyle = { ...styles.cell,\n  ...styles.title\n};\nconst defaultInterpretationStyle = { ...styles.cell,\n  ...styles.interpretation\n};\n\nconst getTitleText = (titleState, visualization) => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return getTitleUnsaved();\n\n    case STATE_SAVED:\n    case STATE_DIRTY:\n      return visualization.name;\n\n    default:\n      return '';\n  }\n};\n\nconst getCustomTitleStyle = titleState => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return styles.titleUnsaved;\n\n    default:\n      return null;\n  }\n};\n\nconst getSuffix = titleState => {\n  switch (titleState) {\n    case STATE_DIRTY:\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: { ...styles.suffix,\n          ...styles.titleDirty\n        },\n        \"data-test\": \"AO-title-dirty\"\n      }, \"- \".concat(getTitleDirty()));\n\n    default:\n      return '';\n  }\n};\n\nexport const TitleBar = ({\n  titleState,\n  titleText,\n  interpretationDate\n}) => {\n  const titleStyle = { ...defaultTitleStyle,\n    ...getCustomTitleStyle(titleState)\n  };\n  return titleText ? /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"AO-title\",\n    style: styles.titleBar\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: titleStyle\n  }, titleText, getSuffix(titleState)), interpretationDate && /*#__PURE__*/React.createElement(\"div\", {\n    style: defaultInterpretationStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.interpretationIcon\n  }, /*#__PURE__*/React.createElement(InterpretationIcon, null)), /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Viewing interpretation from {{interpretationDate}}', {\n    interpretationDate\n  })))) : null;\n};\nTitleBar.propTypes = {\n  interpretationDate: PropTypes.string,\n  titleState: PropTypes.string,\n  titleText: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visualization: sGetVisualization(state),\n  current: sGetCurrent(state),\n  interpretation: sGetUiInterpretation(state),\n  uiLocale: sGetUiLocale(state)\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => {\n  const {\n    visualization,\n    current,\n    interpretation,\n    uiLocale\n  } = stateProps;\n  const titleState = getVisualizationState(visualization, current);\n  return { ...dispatchProps,\n    ...ownProps,\n    titleState: titleState,\n    titleText: getTitleText(titleState, visualization),\n    interpretationDate: interpretation && interpretation.created ? formatDate(interpretation.created, uiLocale) : null\n  };\n};\n\nexport default connect(mapStateToProps, null, mergeProps)(TitleBar);","import { DIMENSION_ID_ORGUNIT, layoutGetAxisIdDimensionIdsObject } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout';\nexport const getPathForOrgUnit = (orgUnit, parentGraphMap) => {\n  if (parentGraphMap[orgUnit.id] === undefined) {\n    return undefined;\n  } // if this is root org unit then in parentGraphMap object\n  // it has empty string as value and id as key\n\n\n  if (parentGraphMap[orgUnit.id] === '') {\n    return '/' + orgUnit.id;\n  }\n\n  return '/' + parentGraphMap[orgUnit.id] + '/' + orgUnit.id;\n};\nexport const appendPathsToOrgUnits = (current, ui) => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(current);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n  const {\n    parentGraphMap\n  } = ui;\n\n  if (!ouAxis) {\n    return current;\n  }\n\n  return { ...current,\n    [ouAxis]: current[ouAxis].map(dimension => ({ ...dimension,\n      items: dimension.items.map(item => ({ ...item,\n        path: getPathForOrgUnit(item, parentGraphMap)\n      }))\n    }))\n  };\n};\nexport const removeUnnecessaryAttributesFromAnalyticalObject = current => ({ ...current,\n  id: undefined,\n  name: undefined,\n  displayName: undefined\n});\nexport const appendDimensionItemNamesToAnalyticalObject = (current, metadata) => {\n  const appendNames = dimension => ({ ...dimension,\n    items: dimension.items.map(item => ({ ...item,\n      name: metadata[item.id] ? metadata[item.id].name : undefined\n    }))\n  });\n\n  return { ...current,\n    columns: current.columns.map(appendNames),\n    filters: current.filters.map(appendNames),\n    rows: current.rows.map(appendNames)\n  };\n};\nexport const appendDimensionItemTypeToAnalyticalObject = (current, metadata) => {\n  const appendDimensionType = dimension => ({ ...dimension,\n    items: dimension.items.map(item => ({ ...item,\n      dimensionItemType: metadata[item.id] ? metadata[item.id].dimensionItemType : undefined\n    }))\n  });\n\n  return { ...current,\n    columns: current.columns.map(appendDimensionType),\n    filters: current.filters.map(appendDimensionType),\n    rows: current.rows.map(appendDimensionType)\n  };\n};\nexport const appendCompleteParentGraphMap = (current, {\n  parentGraphMap\n}) => ({ ...current,\n  parentGraphMap: { ...current.parentGraphMap,\n    ...parentGraphMap\n  }\n});\nexport const prepareCurrentAnalyticalObject = (current, metadata, ui) => {\n  let result;\n  result = removeUnnecessaryAttributesFromAnalyticalObject(current);\n  result = appendDimensionItemNamesToAnalyticalObject(result, metadata);\n  result = appendDimensionItemTypeToAnalyticalObject(result, metadata);\n  result = appendPathsToOrgUnits(result, ui);\n  result = appendCompleteParentGraphMap(result, ui);\n  return result;\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ArrowDown = ({\n  style = {\n    width: 16,\n    height: 16\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 16 16\",\n  version: \"1.1\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.29289,11.7071 C7.68342,12.0976 8.31658,12.0976 8.70711,11.7071 L13.7071,6.70711 C14.0976,6.31658 14.0976,5.68342 13.7071,5.29289 C13.3166,4.90237 12.6834,4.90237 12.2929,5.29289 L8,9.58579 L3.70711,5.29289 C3.31658,4.90237 2.68342,4.90237 2.29289,5.29289 C1.90237,5.68342 1.90237,6.31658 2.29289,6.70711 L7.29289,11.7071 Z\",\n  fill: \"#4A5768\"\n})));\n\nArrowDown.propTypes = {\n  style: PropTypes.object\n};\nexport default ArrowDown;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 48 48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"12 12 18 12 18 36 12 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"22 22 28 22 28 36 22 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"32 7 38 7 38 36 32 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n})));\n\nColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"12 25 18 25 18 36 12 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"12 15 18 15 18 25 12 25\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"22 29 28 29 28 36 22 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"22 17 28 17 28 29 22 29\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"32 27 38 27 38 36 32 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"32 9 38 9 38 27 32 27\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n})));\n\nStackedColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst BarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"matrix(0 -1 -1 0 48 48)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"12 22 18 22 18 36 12 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"22 9 28 9 28 36 22 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"32 19 38 19 38 36 32 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n})));\n\nBarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default BarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedBarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"matrix(0 -1 -1 0 48 48)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"12 19 18 19 18 36 12 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"12 10 18 10 18 19 12 19\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"22 25 28 25 28 36 22 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"22 15 28 15 28 25 22 25\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"32 21 38 21 38 36 32 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"32 12 38 12 38 21 32 21\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n})));\n\nStackedBarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedBarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PieIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"rotate(90 24 24)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"24\",\n  cy: \"24\",\n  r: \"16\",\n  stroke: \"#4A5768\",\n  strokeWidth: \"2\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFC324\",\n  d: \"M11,24 C11,31.1797017 16.8202983,37 24,37 C31.1797017,37 37,31.1797017 37,24 C37,16.8202983 31.1797017,11 24,11 L24,24 L11,24 Z\",\n  transform: \"rotate(165 24 24)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#147CD7\",\n  d: \"M11,24 C11,31.1797017 16.8202983,37 24,37 C31.1797017,37 37,31.1797017 37,24 C37,16.8202983 31.1797017,11 24,11 L24,24 L11,24 Z\",\n  transform: \"rotate(-15 24 24)\"\n})));\n\nPieIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default PieIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GaugeIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"rotate(90 24 24)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#4A5768\",\n  strokeWidth: \"2\",\n  d: \"M32,8 C23.163444,8 16,15.163444 16,24 C16,32.836556 23.163444,40 32,40 L32,40\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#147CD7\",\n  strokeWidth: \"6\",\n  d: \"M24.1695806,17.7796867 C22.8114502,19.4870869 22,21.6487813 22,24 C22,29.5228475 26.4771525,34 32,34\"\n})));\n\nGaugeIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default GaugeIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst LineIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"matrix(0 -1 -1 0 48 48)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  stroke: \"#147CD7\",\n  strokeWidth: \"2\",\n  points: \"30 36 23 30 29 24 17 18 28 10\"\n})));\n\nLineIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default LineIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst AreaIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 48 48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"matrix(0 -1 -1 0 48 48)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#90CAF9\",\n  points: \"28 36 34 29 27 24 31 17 20 10 12 10 12 36\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  stroke: \"#147CD7\",\n  strokeWidth: \"2\",\n  points: \"28 36 34 29 27 24 31 17 20 10\"\n})));\n\nAreaIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default AreaIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedAreaIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"matrix(0 -1 -1 0 48 48)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFE7A7\",\n  points: \"33 36 27 28 30 23 25 17 27 10 17 10 21 17 18 23 22 28 17 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#90CAF9\",\n  points: \"16 36 22 28 18 23 21 17 17 10 12 10 12 36\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  stroke: \"#FFC324\",\n  strokeWidth: \"2\",\n  points: \"33 36 27 28 30 23 25 17 27 10\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  stroke: \"#147CD7\",\n  strokeWidth: \"2\",\n  points: \"16 36 22 28 18 23 21 17 16.5 10\"\n})));\n\nStackedAreaIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedAreaIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst RadarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"rotate(90 24 24)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"24\",\n  cy: \"24\",\n  r: \"16\",\n  stroke: \"#4A5768\",\n  strokeWidth: \"2\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"24\",\n  cy: \"24\",\n  r: \"9\",\n  stroke: \"#4A5768\",\n  strokeWidth: \"2\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"24\",\n  cy: \"33\",\n  r: \"3\",\n  fill: \"#147CD7\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"10\",\n  cy: \"16\",\n  r: \"3\",\n  fill: \"#147CD7\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"37\",\n  cy: \"15\",\n  r: \"3\",\n  fill: \"#147CD7\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  stroke: \"#147CD7\",\n  strokeWidth: \"2\",\n  points: \"24 33 10 16 37 15\"\n})));\n\nRadarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default RadarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst YearOverYearLineIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"matrix(0 -1 -1 0 48 48)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  stroke: \"#FFC324\",\n  strokeWidth: \"2\",\n  points: \"24 36 29 30 19 24 28 16 23 10\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  stroke: \"#147CD7\",\n  strokeWidth: \"2\",\n  points: \"30 36 23 30 29 24 17 18 28 10\"\n})));\n\nYearOverYearLineIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default YearOverYearLineIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst YearOverYearColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"15 20 18 20 18 36 15 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"12 14 15 14 15 36 12 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"22 22 25 22 25 36 22 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"25 12 28 12 28 36 25 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"32 14 35 14 35 36 32 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFC324\",\n  points: \"35 27 38 27 38 36 35 36\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 6 8 6 8 42 6 42\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"6 40 42 40 42 42 6 42\"\n})));\n\nYearOverYearColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default YearOverYearColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SingleValueIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"34\",\n  height: \"20\",\n  x: \"7\",\n  y: \"14\",\n  stroke: \"#4A5768\",\n  strokeWidth: \"2\"\n}), /*#__PURE__*/React.createElement(\"text\", {\n  fill: \"#147CD7\",\n  fontFamily: \"iAWriterDuoS-Bold, iA Writer Duo S\",\n  fontSize: \"15\",\n  fontWeight: \"bold\",\n  letterSpacing: \".6\"\n}, /*#__PURE__*/React.createElement(\"tspan\", {\n  x: \"10\",\n  y: \"29\"\n}, \"123\"))));\n\nSingleValueIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default SingleValueIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GlobeIcon = ({\n  style = {\n    width: 24,\n    height: 24,\n    paddingRight: '8px'\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 48 48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  transform: \"rotate(90 24 24)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#4A5768\",\n  fillRule: \"nonzero\",\n  d: \"M24,7 C14.6111593,7 7,14.6111593 7,24 C7,33.3888407 14.6111593,41 24,41 C33.3888407,41 41,33.3888407 41,24 C41,14.6111593 33.3888407,7 24,7 Z M24,9 C32.2842712,9 39,15.7157288 39,24 C39,32.2842712 32.2842712,39 24,39 C15.7157288,39 9,32.2842712 9,24 C9,15.7157288 15.7157288,9 24,9 Z\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  fillRule: \"nonzero\",\n  transform: \"translate(7 7)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"9.676 2.441 11.574 1.809 12.437 4.398 11.273 6.142 14.347 8.448 8.244 13.679 5.837 14.16 7.515 16.956 6.114 19.758 2.241 17.822 .001 15.582 1.415 14.168 3.426 16.178 5.219 17.075 5.235 17.043 2.662 12.756 7.338 11.82 11.153 8.551 8.56 6.607 10.229 4.102\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"23.454 13.474 22.387 16.141 23.874 18.125 26.929 18.125 27.917 21.088 27.916 26.856 28.263 29.626 26.279 29.874 25.924 27.041 25.917 26.917 25.916 21.413 25.487 20.125 22.875 20.125 20.113 16.442 21.879 12.026 24.007 10.962 26.371 11.75 28.496 11.75 30.999 12.584 32.697 14.283 34.186 17.261 32.397 18.156 31.053 15.468 29.918 14.332 28.173 13.75 26.046 13.75 24.16 13.121\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#4A5768\",\n  points: \"21.252 5.667 23.813 3.106 25.938 3.814 26.21 3.543 27.624 4.957 26.478 6.102 24.353 5.394 24.08 5.666 25.3 6.886 24.374 8.737 24.374 9.344 26.325 8.857 27.519 9.454 29.858 7.7 31.058 9.3 27.731 11.796 26.091 10.976 22.375 11.906 22.375 8.264 22.866 7.28\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#147CD7\",\n  points: \"6.951 19.192 9.73 17.339 13.261 18.222 14.706 19.667 16.832 20.376 18.708 22.252 18.708 25.736 17.228 28.697 15.837 33.566 13.913 33.017 15.33 28.059 15.397 27.886 16.708 25.262 16.708 23.08 15.75 22.123 13.626 21.416 12.238 20.028 10.103 19.493 8.632 20.475 8.227 21.688 11.546 25.007 12.295 28.755 13.678 32.212 11.822 32.955 10.405 29.413 10.353 29.238 9.703 25.993 5.939 22.228\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#4A5768\",\n  d: \"M17,0 C26.3888407,0 34,7.61115925 34,17 C34,26.3888407 26.3888407,34 17,34 C7.61115925,34 0,26.3888407 0,17 C0,7.61115925 7.61115925,0 17,0 Z M17,2 C8.71572875,2 2,8.71572875 2,17 C2,25.2842712 8.71572875,32 17,32 C25.2842712,32 32,25.2842712 32,17 C32,8.71572875 25.2842712,2 17,2 Z\"\n}))));\n\nGlobeIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default GlobeIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PivotTableIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0,0,48,48\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 48 0 48 48 0 48\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"34\",\n  height: \"26\",\n  x: \"7\",\n  y: \"11\",\n  stroke: \"#4A5768\",\n  strokeWidth: \"2\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"32\",\n  height: \"2\",\n  x: \"8\",\n  y: \"18\",\n  fill: \"#4A5768\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"2\",\n  height: \"26\",\n  x: \"19\",\n  y: \"11\",\n  fill: \"#4A5768\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"32\",\n  height: \"2\",\n  x: \"8\",\n  y: \"24\",\n  fill: \"#4A5768\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  width: \"32\",\n  height: \"2\",\n  x: \"8\",\n  y: \"30\",\n  fill: \"#4A5768\"\n})));\n\nPivotTableIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default PivotTableIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ScatterIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"48\",\n  viewBox: \"0 0 48 48\",\n  width: \"48\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m0 0h48v48h-48z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m6 42v-36h2v34h34v2z\",\n  fill: \"#4a5768\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m14 27c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm7-2c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm7-7c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm8 0c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm0-10c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2z\",\n  fill: \"#147cd7\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m20 31c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm10-4c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm-9-8c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm11-6c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2z\",\n  fill: \"#ffc324\"\n})));\n\nScatterIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ScatterIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { VIS_TYPE_COLUMN, VIS_TYPE_STACKED_COLUMN, VIS_TYPE_BAR, VIS_TYPE_STACKED_BAR, VIS_TYPE_LINE, VIS_TYPE_AREA, VIS_TYPE_STACKED_AREA, VIS_TYPE_PIE, VIS_TYPE_RADAR, VIS_TYPE_GAUGE, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport ColumnIcon from '../../assets/ColumnIcon';\nimport StackedColumnIcon from '../../assets/StackedColumnIcon';\nimport BarIcon from '../../assets/BarIcon';\nimport StackedBarIcon from '../../assets/StackedBarIcon';\nimport PieIcon from '../../assets/PieIcon';\nimport GaugeIcon from '../../assets/GaugeIcon';\nimport LineIcon from '../../assets/LineIcon';\nimport AreaIcon from '../../assets/AreaIcon';\nimport StackedAreaIcon from '../../assets/StackedAreaIcon';\nimport RadarIcon from '../../assets/RadarIcon';\nimport YearOverYearLineIcon from '../../assets/YearOverYearLineIcon';\nimport YearOverYearColumnIcon from '../../assets/YearOverYearColumnIcon';\nimport SingleValueIcon from '../../assets/SingleValueIcon';\nimport GlobeIcon from '../../assets/GlobeIcon';\nimport PivotTableIcon from '../../assets/PivotTableIcon';\nimport ScatterIcon from '../../assets/ScatterIcon';\n\nconst ListItemIcon = ({\n  iconType,\n  style\n}) => {\n  switch (iconType) {\n    case VIS_TYPE_STACKED_COLUMN:\n      return /*#__PURE__*/React.createElement(StackedColumnIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_BAR:\n      return /*#__PURE__*/React.createElement(BarIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_STACKED_BAR:\n      return /*#__PURE__*/React.createElement(StackedBarIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_PIE:\n      return /*#__PURE__*/React.createElement(PieIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_GAUGE:\n      return /*#__PURE__*/React.createElement(GaugeIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_LINE:\n      return /*#__PURE__*/React.createElement(LineIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_AREA:\n      return /*#__PURE__*/React.createElement(AreaIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_STACKED_AREA:\n      return /*#__PURE__*/React.createElement(StackedAreaIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_RADAR:\n      return /*#__PURE__*/React.createElement(RadarIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n      return /*#__PURE__*/React.createElement(YearOverYearLineIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return /*#__PURE__*/React.createElement(YearOverYearColumnIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_SINGLE_VALUE:\n      return /*#__PURE__*/React.createElement(SingleValueIcon, {\n        style: style\n      });\n\n    case 'MAP':\n      return /*#__PURE__*/React.createElement(GlobeIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return /*#__PURE__*/React.createElement(PivotTableIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_SCATTER:\n      return /*#__PURE__*/React.createElement(ScatterIcon, {\n        style: style\n      });\n\n    case VIS_TYPE_COLUMN:\n    default:\n      return /*#__PURE__*/React.createElement(ColumnIcon, {\n        style: style\n      });\n  }\n};\n\nListItemIcon.propTypes = {\n  iconType: PropTypes.string,\n  style: PropTypes.object\n};\nexport default ListItemIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from './ListItemIcon';\nimport styles from './styles/VisualizationTypeSelector.module.css';\n\nconst VisualizationTypeListItem = ({\n  iconType,\n  label,\n  description,\n  disabled,\n  isSelected,\n  onClick\n}) => {\n  const classNames = [styles.listItem];\n\n  if (isSelected) {\n    classNames.push(styles.listItemActive);\n  }\n\n  if (disabled) {\n    classNames.push(styles.listItemDisabled);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames.join(' '),\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.listItemIcon\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    iconType: iconType,\n    style: {\n      width: 48,\n      height: 48\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.listItemText\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.listItemName\n  }, label), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.listItemDescription\n  }, description)));\n};\n\nVisualizationTypeListItem.propTypes = {\n  description: PropTypes.string,\n  disabled: PropTypes.bool,\n  iconType: PropTypes.string,\n  isSelected: PropTypes.bool,\n  label: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default VisualizationTypeListItem;","import React, { useState, createRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { visTypeDisplayNames, visTypeDescriptions } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Divider, Popper } from '@dhis2/ui';\nimport { prepareCurrentAnalyticalObject } from '../../modules/currentAnalyticalObject';\nimport { getAdaptedUiByType } from '../../modules/ui';\nimport { sGetUi, sGetUiType } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetMetadata } from '../../reducers/metadata';\nimport { acSetUi, acClearSeriesType } from '../../actions/ui';\nimport { apiSaveAOInUserDataStore, CURRENT_AO_KEY } from '../../api/userDataStore';\nimport ArrowDown from '../../assets/ArrowDown';\nimport VisualizationTypeListItem from './VisualizationTypeListItem';\nimport ListItemIcon from './ListItemIcon';\nimport styles from './styles/VisualizationTypeSelector.module.css';\nexport const MAPS_APP_URL = 'dhis-web-maps';\nexport const VisualizationTypeSelector = ({\n  visualizationType,\n  ui,\n  setUi,\n  onItemClick,\n  current,\n  metadata\n}, context) => {\n  const baseUrl = context.baseUrl;\n  const [listIsOpen, setListIsOpen] = useState(false);\n\n  const toggleList = () => setListIsOpen(!listIsOpen);\n\n  const handleListItemClick = type => () => {\n    setUi(getAdaptedUiByType({ ...ui,\n      type\n    }));\n    onItemClick();\n    toggleList();\n  };\n\n  const handleOpenAsMapClick = async event => {\n    if (!current) {\n      event.stopPropagation();\n      return;\n    }\n\n    const currentAnalyticalObject = prepareCurrentAnalyticalObject(current, metadata, ui);\n    await apiSaveAOInUserDataStore(currentAnalyticalObject);\n    window.location.href = \"\".concat(baseUrl, \"/\").concat(MAPS_APP_URL, \"?\").concat(CURRENT_AO_KEY, \"=true\");\n  };\n\n  const getVisTypes = () => Object.keys(visTypeDisplayNames);\n\n  const VisTypesList = /*#__PURE__*/React.createElement(Card, {\n    dataTest: 'visualization-type-selector-card'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.listContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.listSection\n  }, getVisTypes().map(type => /*#__PURE__*/React.createElement(VisualizationTypeListItem, {\n    key: type,\n    iconType: type,\n    label: visTypeDisplayNames[type],\n    description: visTypeDescriptions[type],\n    isSelected: type === visualizationType,\n    onClick: handleListItemClick(type)\n  }))), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.listSection\n  }, /*#__PURE__*/React.createElement(VisualizationTypeListItem, {\n    key: 'MAP',\n    iconType: 'MAP',\n    label: i18n.t('Open as Map') // TODO: Open as: Map when i18next nsSeparator fixed\n    ,\n    description: i18n.t('Visually plot data on a world map. Data elements use separate map layers.'),\n    onClick: handleOpenAsMapClick,\n    disabled: !current\n  }))));\n  const buttonRef = /*#__PURE__*/createRef();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: toggleList,\n    ref: buttonRef,\n    className: styles.button,\n    \"data-test\": 'visualization-type-selector-button'\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    iconType: visualizationType\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": \"visualization-type-selector-currently-selected-text\"\n  }, visTypeDisplayNames[visualizationType]), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.arrowIcon\n  }, /*#__PURE__*/React.createElement(ArrowDown, null))), listIsOpen && /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    onClick: toggleList,\n    className: styles.backdrop\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: buttonRef,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.cardContainer\n  }, VisTypesList))), document.body));\n};\nVisualizationTypeSelector.propTypes = {\n  current: PropTypes.object,\n  metadata: PropTypes.object,\n  setUi: PropTypes.func,\n  ui: PropTypes.object,\n  visualizationType: PropTypes.oneOf(Object.keys(visTypeDisplayNames)),\n  onItemClick: PropTypes.func\n};\nVisualizationTypeSelector.contextTypes = {\n  baseUrl: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  current: sGetCurrent(state),\n  metadata: sGetMetadata(state),\n  ui: sGetUi(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setUi: ui => dispatch(acSetUi(ui)),\n  onItemClick: () => dispatch(acClearSeriesType())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VisualizationTypeSelector);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType } from '@dhis2/analytics';\nimport { SplitButton, FlyoutMenu, MenuItem, Button } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiActiveModalDialog, sGetUiType } from '../../../../reducers/ui';\nimport { acAddUiLayoutDimensions } from '../../../../actions/ui';\nexport const AddToLayoutButton = ({\n  dialogId,\n  visType,\n  onAddDimension,\n  onClick,\n  dataTest\n}) => {\n  const availableAxes = getAvailableAxes(visType);\n  const AddToLayoutButton = availableAxes.length > 1 ? SplitButton : Button;\n\n  const clickHandler = axisId => {\n    onAddDimension({\n      [dialogId]: {\n        axisId\n      }\n    });\n    onClick();\n  };\n\n  const renderMenu = () => /*#__PURE__*/React.createElement(FlyoutMenu, {\n    maxWidth: \"380px\",\n    dataTest: \"\".concat(dataTest, \"-flyout-menu\")\n  }, getAvailableAxes(visType).slice(1).map(axis => /*#__PURE__*/React.createElement(MenuItem, {\n    key: axis,\n    dataTest: \"\".concat(dataTest, \"-flyout-menu-option-\").concat(axis),\n    onClick: () => clickHandler(axis),\n    label: i18n.t(\"Add to {{axisName}}\", {\n      axisName: getAxisNameByLayoutType(axis, getLayoutTypeByVisType(visType))\n    })\n  })));\n\n  return /*#__PURE__*/React.createElement(AddToLayoutButton, {\n    component: availableAxes.length > 1 ? renderMenu() : null,\n    onClick: () => clickHandler(availableAxes[0]),\n    primary: true,\n    dataTest: dataTest\n  }, i18n.t(\"Add to {{axisName}}\", {\n    axisName: getAxisNameByLayoutType(availableAxes[0], getLayoutTypeByVisType(visType))\n  }));\n};\nAddToLayoutButton.propTypes = {\n  dialogId: PropTypes.string.isRequired,\n  visType: PropTypes.string.isRequired,\n  onAddDimension: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  dataTest: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state),\n  dialogId: sGetUiActiveModalDialog(state)\n});\n\nexport default connect(mapStateToProps, {\n  onAddDimension: acAddUiLayoutDimensions\n})(AddToLayoutButton);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport debounce from 'lodash-es/debounce';\nimport isEqual from 'lodash-es/isEqual';\nimport i18n from '@dhis2/d2-i18n';\nimport { DataDimension, DynamicDimension, PeriodDimension, OrgUnitDimension, ouIdHelper, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, getAxisMaxNumberOfItems, getDisplayNameByVisType, filterOutPredefinedDimensions, apiFetchRecommendedIds } from '@dhis2/analytics';\nimport { Modal, ModalContent, ModalActions, ButtonStrip, ModalTitle, TabBar, Tab } from '@dhis2/ui';\nimport HideButton from '../../HideButton/HideButton';\nimport AddToLayoutButton from './AddToLayoutButton/AddToLayoutButton';\nimport UpdateVisualizationContainer from '../../UpdateButton/UpdateVisualizationContainer';\nimport { acSetUiActiveModalDialog, acRemoveUiItems, acSetUiItems, acAddParentGraphMap, acSetUiItemAttributes } from '../../../actions/ui';\nimport { acAddMetadata } from '../../../actions/metadata';\nimport { acSetRecommendedIds } from '../../../actions/recommendedIds';\nimport { sGetUiItems, sGetUiItemsByDimension, sGetUiActiveModalDialog, sGetUiParentGraphMap, sGetUiType, sGetAxisIdByDimensionId, sGetDimensionIdsFromLayout, sGetUiItemsByAttribute } from '../../../reducers/ui';\nimport { sGetDimensions } from '../../../reducers/dimensions';\nimport { sGetMetadata } from '../../../reducers/metadata';\nimport { sGetSettingsDisplayNameProperty } from '../../../reducers/settings';\nimport { removeLastPathSegment, getOuPath } from '../../../modules/orgUnit';\nimport UpdateButton from '../../UpdateButton/UpdateButton';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../../../modules/ui';\nimport styles from './styles/DialogManager.module.css';\n\nconst isScatterAttribute = dialogId => [ITEM_ATTRIBUTE_VERTICAL, ITEM_ATTRIBUTE_HORIZONTAL].includes(dialogId);\n\nexport class DialogManager extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      onMounted: false\n    });\n\n    _defineProperty(this, \"componentDidUpdate\", prevProps => {\n      const shouldFetchIds = !isEqual(prevProps.dxIds, this.props.dxIds) || !isEqual(prevProps.ouIds, this.props.ouIds);\n\n      if (shouldFetchIds) {\n        this.fetchRecommended();\n      }\n\n      if (this.props.dialogId === DIMENSION_ID_ORGUNIT && !this.state.ouMounted) {\n        this.setState({\n          ouMounted: true\n        });\n      }\n    });\n\n    _defineProperty(this, \"fetchRecommended\", debounce(async () => {\n      const ids = await apiFetchRecommendedIds(this.context.dataEngine, this.props.dxIds, this.props.ouIds);\n      this.props.setRecommendedIds(ids);\n    }, 1000));\n\n    _defineProperty(this, \"selectUiItems\", ({\n      dimensionId,\n      items,\n      itemAttribute\n    }) => {\n      if (itemAttribute) {\n        this.props.setUiItemAttributes({\n          dimensionId,\n          attribute: itemAttribute,\n          itemIds: items.map(item => item.id)\n        });\n      } else {\n        this.props.setUiItems({\n          dimensionId,\n          itemIds: items.map(item => item.id)\n        });\n      }\n\n      switch (dimensionId) {\n        case DIMENSION_ID_ORGUNIT:\n          {\n            const forMetadata = {};\n            const forParentGraphMap = {};\n            items.forEach(ou => {\n              const id = ouIdHelper.removePrefix(ou.id);\n              forMetadata[id] = {\n                id,\n                name: ou.name || ou.displayName,\n                displayName: ou.displayName\n              };\n\n              if (ou.path) {\n                const path = removeLastPathSegment(ou.path);\n                forParentGraphMap[ou.id] = path === \"/\".concat(ou.id) ? '' : path.replace(/^\\//, '');\n              }\n            });\n            this.props.addMetadata(forMetadata);\n            this.props.addParentGraphMap(forParentGraphMap);\n            break;\n          }\n\n        default:\n          {\n            this.props.addMetadata(items.reduce((obj, item) => {\n              obj[item.id] = {\n                id: item.id,\n                name: item.name || item.displayName,\n                displayName: item.displayName,\n                type: item.type\n              };\n              return obj;\n            }, {}));\n          }\n      }\n    });\n\n    _defineProperty(this, \"closeDialog\", () => this.props.changeDialog(null));\n\n    _defineProperty(this, \"getSelectedItems\", dialogId => {\n      const items = isScatterAttribute(dialogId) ? this.props.getItemsByAttribute(dialogId) : this.props.selectedItems[dialogId];\n      return (items || []).filter(id => this.props.metadata[id]).map(id => ({\n        id,\n        name: this.props.metadata[id].name,\n        type: this.props.metadata[id].type || this.props.metadata[id].dimensionItemType\n      }));\n    });\n\n    _defineProperty(this, \"getOrgUnitsFromIds\", (ids, metadata, parentGraphMap) => ids.filter(id => metadata[ouIdHelper.removePrefix(id)] !== undefined).map(id => {\n      const ouUid = ouIdHelper.removePrefix(id);\n      return {\n        id,\n        name: metadata[ouUid].displayName || metadata[ouUid].name,\n        path: getOuPath(ouUid, metadata, parentGraphMap)\n      };\n    }));\n\n    _defineProperty(this, \"renderPersistedContent\", dimensionProps => {\n      const {\n        displayNameProperty,\n        ouIds,\n        metadata,\n        parentGraphMap,\n        dialogId\n      } = this.props;\n\n      if (this.state.ouMounted) {\n        const ouItems = this.getOrgUnitsFromIds(ouIds, metadata, parentGraphMap);\n        const display = DIMENSION_ID_ORGUNIT === dialogId ? 'block' : 'none';\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: DIMENSION_ID_ORGUNIT,\n          style: {\n            display\n          }\n        }, /*#__PURE__*/React.createElement(OrgUnitDimension, _extends({\n          displayNameProperty: displayNameProperty,\n          ouItems: ouItems\n        }, dimensionProps)));\n      }\n\n      return null;\n    });\n\n    _defineProperty(this, \"renderDialogContent\", () => {\n      const {\n        displayNameProperty,\n        dialogId,\n        type,\n        removeUiItems,\n        setUiItems\n      } = this.props;\n      const dimensionProps = {\n        d2: this.context.d2,\n        onSelect: this.selectUiItems,\n        onDeselect: removeUiItems,\n        onReorder: setUiItems\n      };\n\n      const dynamicContent = () => {\n        const selectedItems = this.getSelectedItems(dialogId);\n        let infoBoxMessage;\n        const axisId = this.props.getAxisIdByDimensionId(dialogId);\n        const visType = type;\n        const numberOfItems = selectedItems.length;\n        const axisMaxNumberOfItems = getAxisMaxNumberOfItems(visType, axisId);\n        const hasMaxNumberOfItemsRule = !!axisMaxNumberOfItems;\n\n        if (hasMaxNumberOfItemsRule && numberOfItems > axisMaxNumberOfItems) {\n          infoBoxMessage = axisMaxNumberOfItems === 1 ? i18n.t(\"'{{visualizationType}}' is intended to show a single data item. Only the first item will be used and saved.\", {\n            visualizationType: getDisplayNameByVisType(visType)\n          }) : i18n.t(\"'{{visualiationType}}' is intended to show maximum {{maxNumber}} number of items. Only the first {{maxNumber}} items will be used and saved.\", {\n            visualiationType: getDisplayNameByVisType(visType),\n            maxNumber: axisMaxNumberOfItems\n          });\n          selectedItems.forEach((item, index) => {\n            item.isActive = index < axisMaxNumberOfItems;\n          });\n        } else if (isScatterAttribute(dialogId) && numberOfItems > 1) {\n          infoBoxMessage = i18n.t(\"'Scatter' is intended to show a single data item per axis. Only the first item will be used and saved.\");\n          selectedItems.forEach((item, index) => {\n            item.isActive = index < 1;\n          });\n        }\n\n        let content = null;\n\n        if (dialogId === DIMENSION_ID_DATA || isScatterAttribute(dialogId)) {\n          const onSelect = isScatterAttribute(dialogId) ? defaultProps => this.selectUiItems({ ...defaultProps,\n            itemAttribute: dialogId\n          }) : dimensionProps.onSelect;\n          const dimensionSelector = /*#__PURE__*/React.createElement(DataDimension, {\n            displayNameProp: displayNameProperty,\n            selectedDimensions: selectedItems,\n            infoBoxMessage: infoBoxMessage,\n            onSelect: onSelect\n          });\n          const dataTabs = isScatterAttribute(dialogId) ? /*#__PURE__*/React.createElement(TabBar, {\n            dataTest: 'dialog-manager-modal-tabs',\n            className: styles.tabs\n          }, [{\n            key: ITEM_ATTRIBUTE_VERTICAL,\n            label: i18n.t('Vertical')\n          }, {\n            key: ITEM_ATTRIBUTE_HORIZONTAL,\n            label: i18n.t('Horizontal')\n          }].map(({\n            key,\n            label\n          }) => /*#__PURE__*/React.createElement(Tab, {\n            key: key,\n            onClick: () => this.props.changeDialog(key),\n            selected: key === dialogId\n          }, label))) : null;\n          content = dataTabs ? /*#__PURE__*/React.createElement(React.Fragment, null, dataTabs, dimensionSelector) : dimensionSelector;\n        } else if (dialogId === DIMENSION_ID_PERIOD) {\n          content = /*#__PURE__*/React.createElement(PeriodDimension, {\n            selectedPeriods: selectedItems,\n            onSelect: dimensionProps.onSelect // TODO: infoBoxMessage should ideally be implemented for all dimensions\n\n          });\n        } else if (filterOutPredefinedDimensions(Object.keys(this.props.dimensions)).includes(dialogId)) {\n          content = /*#__PURE__*/React.createElement(DynamicDimension, {\n            selectedItems: selectedItems,\n            dimensionId: dialogId,\n            onSelect: dimensionProps.onSelect,\n            dimensionTitle: this.props.dimensions[dialogId].name,\n            displayNameProp: displayNameProperty // TODO: infoBoxMessage should ideally be implemented for all dimensions\n\n          });\n        }\n\n        return content;\n      };\n\n      return /*#__PURE__*/React.createElement(Fragment, null, this.renderPersistedContent(dimensionProps), dialogId && dynamicContent());\n    });\n\n    _defineProperty(this, \"getPrimaryOnClick\", handler => () => {\n      handler();\n      this.closeDialog();\n    });\n  }\n\n  render() {\n    const {\n      dialogId,\n      dimensions\n    } = this.props;\n    const dimension = isScatterAttribute(dialogId) ? dimensions[DIMENSION_ID_DATA] : dimensions[dialogId];\n    return /*#__PURE__*/React.createElement(Fragment, null, dimension && /*#__PURE__*/React.createElement(Modal, {\n      onClose: this.closeDialog,\n      dataTest: \"dialog-manager-\".concat(dimension.id),\n      position: \"top\",\n      large: true\n    }, /*#__PURE__*/React.createElement(ModalTitle, {\n      dataTest: 'dialog-manager-modal-title'\n    }, dimension.name), /*#__PURE__*/React.createElement(ModalContent, {\n      dataTest: 'dialog-manager-modal-content'\n    }, this.renderDialogContent()), /*#__PURE__*/React.createElement(ModalActions, {\n      dataTest: 'dialog-manager-modal-actions'\n    }, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(HideButton, {\n      onClick: this.closeDialog,\n      dataTest: 'dialog-manager-modal-action-cancel'\n    }), /*#__PURE__*/React.createElement(UpdateVisualizationContainer, {\n      renderComponent: handler => this.props.dimensionIdsInLayout.includes(dialogId) || isScatterAttribute(dialogId) ? /*#__PURE__*/React.createElement(UpdateButton, {\n        onClick: this.getPrimaryOnClick(handler),\n        dataTest: 'dialog-manager-modal-action-confirm'\n      }) : /*#__PURE__*/React.createElement(AddToLayoutButton, {\n        onClick: this.getPrimaryOnClick(handler),\n        dataTest: 'dialog-manager-modal-action-confirm'\n      })\n    })))));\n  }\n\n}\nDialogManager.contextTypes = {\n  d2: PropTypes.object,\n  dataEngine: PropTypes.object\n};\nDialogManager.propTypes = {\n  changeDialog: PropTypes.func.isRequired,\n  dimensionIdsInLayout: PropTypes.array.isRequired,\n  ouIds: PropTypes.array.isRequired,\n  setRecommendedIds: PropTypes.func.isRequired,\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  dialogId: PropTypes.string,\n  dimensions: PropTypes.object,\n  displayNameProperty: PropTypes.string,\n  dxIds: PropTypes.array,\n  getAxisIdByDimensionId: PropTypes.func,\n  getItemsByAttribute: PropTypes.func,\n  metadata: PropTypes.object,\n  parentGraphMap: PropTypes.object,\n  removeUiItems: PropTypes.func,\n  selectedItems: PropTypes.object,\n  setUiItemAttributes: PropTypes.func,\n  setUiItems: PropTypes.func,\n  type: PropTypes.string\n};\nDialogManager.defaultProps = {\n  dialogId: null,\n  dxIds: []\n};\n\nconst mapStateToProps = state => ({\n  displayNameProperty: sGetSettingsDisplayNameProperty(state),\n  dialogId: sGetUiActiveModalDialog(state),\n  dimensions: sGetDimensions(state),\n  metadata: sGetMetadata(state),\n  parentGraphMap: sGetUiParentGraphMap(state),\n  dxIds: sGetUiItemsByDimension(state, DIMENSION_ID_DATA),\n  ouIds: sGetUiItemsByDimension(state, DIMENSION_ID_ORGUNIT),\n  selectedItems: sGetUiItems(state),\n  type: sGetUiType(state),\n  getAxisIdByDimensionId: dimensionId => sGetAxisIdByDimensionId(state, dimensionId),\n  dimensionIdsInLayout: sGetDimensionIdsFromLayout(state),\n  getItemsByAttribute: attribute => sGetUiItemsByAttribute(state, attribute)\n});\n\nexport default connect(mapStateToProps, {\n  changeDialog: acSetUiActiveModalDialog,\n  setRecommendedIds: acSetRecommendedIds,\n  setUiItems: acSetUiItems,\n  addMetadata: acAddMetadata,\n  removeUiItems: acRemoveUiItems,\n  addParentGraphMap: acAddParentGraphMap,\n  setUiItemAttributes: acSetUiItemAttributes\n})(DialogManager);","import { SET_RECOMMENDED_IDS } from '../reducers/recommendedIds';\nexport const acSetRecommendedIds = value => ({\n  type: SET_RECOMMENDED_IDS,\n  value\n});","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { DimensionItem } from '@dhis2/analytics';\nimport styles from './styles/DndDimensionItem.module.css';\nexport class DndDimensionItem extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"render\", () => {\n      const {\n        id,\n        index,\n        name,\n        isSelected,\n        isLocked,\n        isDeactivated,\n        isRecommended,\n        onClick,\n        onOptionsClick,\n        dataTest\n      } = this.props;\n      const itemCommonProps = {\n        id,\n        name,\n        isSelected,\n        isLocked,\n        isDeactivated,\n        isRecommended,\n        dataTest\n      };\n      return /*#__PURE__*/React.createElement(Draggable, {\n        draggableId: id,\n        index: index,\n        isDragDisabled: isSelected || isDeactivated || isLocked\n      }, (provided, snapshot) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DimensionItem, _extends({\n        innerRef: provided.innerRef\n      }, provided.draggableProps, provided.dragHandleProps, {\n        className: snapshot.isDragging ? styles.dragging : styles.notDragging,\n        onClick: onClick,\n        onOptionsClick: onOptionsClick\n      }, itemCommonProps)), snapshot.isDragging && /*#__PURE__*/React.createElement(DimensionItem, _extends({\n        className: styles.dimensionItemClone\n      }, itemCommonProps))));\n    });\n  }\n\n}\nDndDimensionItem.propTypes = {\n  dataTest: PropTypes.string,\n  id: PropTypes.string,\n  index: PropTypes.number,\n  isDeactivated: PropTypes.bool,\n  isLocked: PropTypes.bool,\n  isRecommended: PropTypes.bool,\n  isSelected: PropTypes.bool,\n  name: PropTypes.string,\n  onClick: PropTypes.func,\n  onOptionsClick: PropTypes.func\n};\nexport default DndDimensionItem;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Droppable } from 'react-beautiful-dnd';\nimport { createSelector } from 'reselect';\nimport { getDisallowedDimensions, getAllLockedDimensionIds, getFixedDimensions, getDynamicDimensions, getPredefinedDimensions } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport DndDimensionItem from './DndDimensionItem';\nimport * as fromReducers from '../../reducers';\nimport { SOURCE_DIMENSIONS } from '../../modules/layout';\nimport styles from './styles/DndDimensionList.module.css';\nexport class DndDimensionList extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"dndIndex\", 0);\n\n    _defineProperty(this, \"nameContainsFilterText\", dimension => dimension.name.toLowerCase().includes(this.props.filterText.toLowerCase()));\n\n    _defineProperty(this, \"isSelected\", id => this.props.selectedIds.includes(id));\n\n    _defineProperty(this, \"isDisabledDimension\", id => this.props.disallowedDimensions.includes(id));\n\n    _defineProperty(this, \"isLockedDimension\", id => this.props.lockedDimensions.includes(id));\n\n    _defineProperty(this, \"isRecommendedDimension\", id => this.props.recommendedIds.includes(id));\n\n    _defineProperty(this, \"renderItem\", ({\n      id,\n      name\n    }) => {\n      const itemProps = {\n        id,\n        name,\n        index: this.dndIndex++,\n        isSelected: this.isSelected(id),\n        isLocked: this.isLockedDimension(id),\n        isDeactivated: this.isDisabledDimension(id),\n        isRecommended: this.isRecommendedDimension(id),\n        onClick: this.props.onDimensionClick,\n        onOptionsClick: this.props.onDimensionOptionsClick,\n        dataTest: \"\".concat(this.props.dataTest, \"-dimension-item\")\n      };\n      return /*#__PURE__*/React.createElement(DndDimensionItem, _extends({\n        key: \"\".concat(SOURCE_DIMENSIONS, \"-\").concat(id)\n      }, itemProps));\n    });\n\n    _defineProperty(this, \"getDimensionItemsByFilter\", filter => this.props.dimensions.filter(filter).filter(this.nameContainsFilterText).map(this.renderItem));\n  }\n\n  render() {\n    this.dndIndex = 0;\n    const fixedDimensions = this.getDimensionItemsByFilter(dimension => Object.values(getFixedDimensions()).some(fixedDim => fixedDim.id === dimension.id));\n    const dynamicDimensions = this.getDimensionItemsByFilter(dimension => Object.values(getDynamicDimensions()).some(dynDim => dynDim.id === dimension.id));\n    const nonPredefinedDimensions = this.getDimensionItemsByFilter(dimension => !Object.values(getPredefinedDimensions()).some(predefDim => predefDim.id === dimension.id));\n    return /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: SOURCE_DIMENSIONS,\n      isDropDisabled: true\n    }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: styles.container,\n      ref: provided.innerRef\n    }, provided.droppableProps, {\n      \"data-test\": this.props.dataTest\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.wrapper\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: styles.header\n    }, i18n.t('Main dimensions')), /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.list,\n      \"data-test\": \"\".concat(this.props.dataTest, \"-fixed-dimensions\")\n    }, fixedDimensions)), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: styles.header\n    }, i18n.t('Other dimensions')), /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.list,\n      \"data-test\": \"\".concat(this.props.dataTest, \"-dynamic-dimensions\")\n    }, dynamicDimensions)), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.section\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: styles.header\n    }, i18n.t('Your dimensions')), /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.list,\n      \"data-test\": \"\".concat(this.props.dataTest, \"-non-predefined-dimensions\")\n    }, nonPredefinedDimensions))), provided.placeholder));\n  }\n\n}\nDndDimensionList.propTypes = {\n  dataTest: PropTypes.string,\n  dimensions: PropTypes.array,\n  disallowedDimensions: PropTypes.array,\n  filterText: PropTypes.string,\n  lockedDimensions: PropTypes.array,\n  recommendedIds: PropTypes.array,\n  selectedIds: PropTypes.array,\n  onDimensionClick: PropTypes.func,\n  onDimensionOptionsClick: PropTypes.func\n};\nconst getDisallowedDimensionsMemo = createSelector([fromReducers.fromUi.sGetUiType], type => getDisallowedDimensions(type));\nconst getisLockedDimensionsMemo = createSelector([fromReducers.fromUi.sGetUiType], type => getAllLockedDimensionIds(type));\n\nconst mapStateToProps = state => ({\n  dimensions: Object.values(fromReducers.fromDimensions.sGetDimensions(state)),\n  selectedIds: fromReducers.fromUi.sGetDimensionIdsFromLayout(state),\n  recommendedIds: fromReducers.fromRecommendedIds.sGetRecommendedIds(state),\n  disallowedDimensions: getDisallowedDimensionsMemo(state),\n  lockedDimensions: getisLockedDimensionsMemo(state)\n});\n\nexport default connect(mapStateToProps)(DndDimensionList);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { DimensionFilter } from '@dhis2/analytics';\nimport DndDimensionList from './DndDimensionList';\nimport styles from './styles/DndDimensionsPanel.module.css';\nexport class DndDimensionsPanel extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      filterText: ''\n    });\n\n    _defineProperty(this, \"onClearFilter\", () => {\n      this.setState({\n        filterText: ''\n      });\n    });\n\n    _defineProperty(this, \"onFilterTextChange\", filterText => {\n      this.setState({\n        filterText\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      \"data-test\": \"dimensions-panel\"\n    }, /*#__PURE__*/React.createElement(DimensionFilter, {\n      placeholder: i18n.t('Filter dimensions'),\n      text: this.state.filterText,\n      onChange: this.onFilterTextChange,\n      onClear: this.onClearFilter,\n      disableUnderline: true,\n      type: \"search\",\n      dataTest: \"dimensions-panel-filter\"\n    }), /*#__PURE__*/React.createElement(DndDimensionList, {\n      filterText: this.state.filterText,\n      onDimensionOptionsClick: this.props.onDimensionOptionsClick,\n      onDimensionClick: this.props.onDimensionClick,\n      dataTest: \"dimensions-panel-list\"\n    }));\n  }\n\n}\nDndDimensionsPanel.propTypes = {\n  onDimensionClick: PropTypes.func,\n  onDimensionOptionsClick: PropTypes.func\n};\nexport default DndDimensionsPanel;","import { colors } from '@dhis2/ui';\nexport const styles = {\n  divContainer: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: colors.grey050\n  }\n};","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DimensionMenu, DIMENSION_ID_ASSIGNED_CATEGORIES, DIMENSION_ID_DATA, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport { Layer, Popper } from '@dhis2/ui';\nimport DialogManager from './Dialogs/DialogManager';\nimport DndDimensionsPanel from './DndDimensionsPanel';\nimport * as fromReducers from '../../reducers';\nimport { styles } from './styles/DimensionsPanel.style';\nimport { acSetUiActiveModalDialog, acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui';\nimport { ITEM_ATTRIBUTE_VERTICAL } from '../../modules/ui';\nexport const Dimensions = ({\n  assignedCategoriesItemHandler,\n  axisItemHandler,\n  getCurrentAxisId,\n  itemsByDimension,\n  layoutHasAssignedCategories,\n  removeItemHandler,\n  ui,\n  onDimensionClick\n}) => {\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [dimensionId, setDimensionId] = useState(null);\n  const [ref, setRef] = useState();\n\n  const toggleMenu = () => {\n    if (menuIsOpen) {\n      setDimensionId(null);\n      setRef(null);\n    }\n\n    setMenuIsOpen(!menuIsOpen);\n  };\n\n  const openOptionsMenuForDimension = (event, id, ref) => {\n    event.stopPropagation();\n    setRef(ref.current);\n    setDimensionId(id);\n    toggleMenu();\n  };\n\n  const openDimensionModal = id => onDimensionClick(ui.type === VIS_TYPE_SCATTER && id === DIMENSION_ID_DATA ? ITEM_ATTRIBUTE_VERTICAL : id);\n\n  const getNumberOfDimensionItems = () => (itemsByDimension[dimensionId] || []).length;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.divContainer\n  }, /*#__PURE__*/React.createElement(DndDimensionsPanel, {\n    onDimensionClick: openDimensionModal,\n    onDimensionOptionsClick: openOptionsMenuForDimension\n  }), menuIsOpen && dimensionId && ref && /*#__PURE__*/React.createElement(Layer, {\n    position: \"fixed\",\n    level: 2000,\n    onClick: toggleMenu\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: ref,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(DimensionMenu, {\n    dimensionId: dimensionId,\n    currentAxisId: getCurrentAxisId(dimensionId),\n    visType: ui.type,\n    numberOfDimensionItems: getNumberOfDimensionItems(),\n    isAssignedCategoriesInLayout: layoutHasAssignedCategories,\n    assignedCategoriesItemHandler: destination => assignedCategoriesItemHandler(layoutHasAssignedCategories, destination),\n    axisItemHandler: axisItemHandler,\n    removeItemHandler: removeItemHandler,\n    onClose: toggleMenu,\n    dataTest: 'dimensions-panel-dimension-menu'\n  }))), /*#__PURE__*/React.createElement(DialogManager, null));\n};\nDimensions.propTypes = {\n  assignedCategoriesItemHandler: PropTypes.func,\n  axisItemHandler: PropTypes.func,\n  getCurrentAxisId: PropTypes.func,\n  itemsByDimension: PropTypes.object,\n  layoutHasAssignedCategories: PropTypes.bool,\n  removeItemHandler: PropTypes.func,\n  ui: PropTypes.object,\n  onDimensionClick: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  ui: fromReducers.fromUi.sGetUi(state),\n  dimensions: fromReducers.fromDimensions.sGetDimensions(state),\n  layout: fromReducers.fromUi.sGetUiLayout(state),\n  itemsByDimension: fromReducers.fromUi.sGetUiItems(state),\n  layoutHasAssignedCategories: fromReducers.fromUi.sLayoutHasAssignedCategories(state),\n  getCurrentAxisId: dimensionId => fromReducers.fromUi.sGetAxisIdByDimensionId(state, dimensionId)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  axisItemHandler: ({\n    dimensionId,\n    axisId,\n    numberOfDimensionItems,\n    requireItems,\n    isDimensionInLayout\n  }) => {\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }));\n\n    if (numberOfDimensionItems === 0 && requireItems && !isDimensionInLayout) {\n      dispatch(acSetUiActiveModalDialog(dimensionId));\n    }\n  },\n  removeItemHandler: dimensionId => {\n    dispatch(acRemoveUiLayoutDimensions(dimensionId));\n  },\n  assignedCategoriesItemHandler: (layoutHasAssignedCategories, axisId) => {\n    dispatch(layoutHasAssignedCategories ? acRemoveUiLayoutDimensions(DIMENSION_ID_ASSIGNED_CATEGORIES) : acAddUiLayoutDimensions({\n      [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        axisId\n      }\n    }));\n  },\n  onDimensionClick: id => dispatch(acSetUiActiveModalDialog(id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dimensions);","export default {\n  wrapper: {\n    position: 'relative',\n    width: '380px'\n  },\n  container: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%'\n  }\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport InterpretationsComponent from '@dhis2/d2-ui-interpretations';\nimport { sGetUiInterpretation } from '../../reducers/ui';\nimport { acSetUiInterpretation, acClearUiInterpretation } from '../../actions/ui';\nimport history from '../../modules/history';\nimport styles from './styles/Interpretations.style';\nexport class Interpretations extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onInterpretationChange\", interpretation => {\n      if (interpretation) {\n        const interpretationUrl = \"/\".concat(this.props.id, \"/interpretation/\").concat(interpretation.id); // this covers the case when the URL contains already an interpretation id,\n        // the Interpretations component loads it and fires this callback passing the interpretation\n        // object, the URL is not changing in this case.\n        // the other scenario is when the URL changes because of a click inside the Interpretations component\n\n        if (history.location.pathname !== interpretationUrl) {\n          history.push(interpretationUrl);\n          this.props.acSetUiInterpretation({\n            id: interpretation.id,\n            created: interpretation.created\n          });\n        }\n      } else {\n        history.push(\"/\".concat(this.props.id));\n      }\n    });\n  }\n\n  render() {\n    const {\n      type,\n      id,\n      interpretationId\n    } = this.props;\n    return id ? /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.wrapper\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.container\n    }, /*#__PURE__*/React.createElement(InterpretationsComponent, {\n      d2: this.context.d2,\n      type: type,\n      id: id,\n      currentInterpretationId: interpretationId,\n      onCurrentInterpretationChange: this.onInterpretationChange\n    }))) : null;\n  }\n\n}\nInterpretations.defaultProps = {\n  type: 'chart'\n};\nInterpretations.propTypes = {\n  acSetUiInterpretation: PropTypes.func,\n  id: PropTypes.string,\n  interpretationId: PropTypes.string,\n  type: PropTypes.string\n};\nInterpretations.contextTypes = {\n  d2: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  interpretationId: sGetUiInterpretation(state).id || null\n});\n\nexport default connect(mapStateToProps, {\n  acSetUiInterpretation,\n  acClearUiInterpretation\n})(Interpretations);","export default {\n  chartCanvas: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-start',\n    height: '100%'\n  },\n  loadingCover: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    left: 0,\n    top: 0,\n    zIndex: 100,\n    background: '#ffffffab'\n  }\n};","const legendSetsQuery = {\n  resource: 'legendSets',\n  params: ({\n    ids\n  }) => ({\n    fields: 'id,displayName~rename(name),legends[id,displayName~rename(name),startValue,endValue,color]',\n    filter: \"id:in:[\".concat(ids.join(','), \"]\")\n  })\n};\nexport const apiFetchLegendSets = async (dataEngine, ids) => {\n  const legendSetsData = await dataEngine.query({\n    legendSets: legendSetsQuery\n  }, {\n    variables: {\n      ids\n    }\n  });\n  return legendSetsData.legendSets.legendSets;\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ArrowUpwardIcon = ({\n  style = {\n    width: 18,\n    height: 18\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\",\n  fill: \"black\"\n}));\n\nArrowUpwardIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ArrowUpwardIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ArrowDownwardIcon = ({\n  style = {\n    width: 18,\n    height: 18\n  }\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  style: style\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\",\n  fill: \"black\"\n}));\n\nArrowDownwardIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ArrowDownwardIcon;","import React, { useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { Divider, FlyoutMenu, MenuItem } from '@dhis2/ui';\nimport ArrowUpwardIcon from './assets/ArrowUpwardIcon';\nimport ArrowDownwardIcon from './assets/ArrowDownwardIcon';\nimport { apiFetchOrganisationUnit } from '@dhis2/analytics';\nexport const ContextualMenu = ({\n  config,\n  ouLevels,\n  onClick\n}) => {\n  const engine = useDataEngine();\n  const [ouData, setOuData] = useState(undefined);\n  const [subLevelData, setSubLevelData] = useState(undefined);\n\n  const lookupLevel = levelId => ouLevels.find(item => item.level === levelId);\n\n  const doFetchOuData = useCallback(async ouId => {\n    const orgUnit = await apiFetchOrganisationUnit(engine, ouId);\n    return orgUnit;\n  }, [engine]);\n  useEffect(() => {\n    setOuData(null);\n\n    const doFetch = async () => {\n      const orgUnit = await doFetchOuData(config.ouId);\n      setOuData(orgUnit);\n    };\n\n    if (config.ouId) {\n      doFetch();\n    }\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n\n  }, [config]);\n  useEffect(() => {\n    setSubLevelData(null);\n\n    if (ouData !== null && ouData !== void 0 && ouData.children.length) {\n      const levelData = lookupLevel(ouData.children[0].level);\n\n      if (levelData) {\n        setSubLevelData(levelData);\n      }\n    }\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n\n  }, [ouData]);\n  const menuItemStyle = {\n    display: 'inline-block',\n    minWidth: 200\n  };\n  return /*#__PURE__*/React.createElement(FlyoutMenu, null, ouData && /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    label: i18n.t('Change org unit')\n  }, (ouData === null || ouData === void 0 ? void 0 : ouData.parent) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    icon: /*#__PURE__*/React.createElement(ArrowUpwardIcon, null),\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      style: menuItemStyle\n    }, ouData.parent.name),\n    onClick: () => onClick({\n      ou: {\n        id: ouData.parent.id\n      }\n    })\n  }), subLevelData && /*#__PURE__*/React.createElement(Divider, null)), subLevelData && /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    icon: /*#__PURE__*/React.createElement(ArrowDownwardIcon, null),\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      style: menuItemStyle\n    }, i18n.t('{{level}} level in {{orgunit}}', {\n      level: subLevelData.name,\n      orgunit: ouData.name\n    })),\n    onClick: () => onClick({\n      ou: {\n        id: ouData.id,\n        path: ouData.path,\n        level: subLevelData.id\n      }\n    })\n  })));\n};\nContextualMenu.propTypes = {\n  config: PropTypes.object,\n  ouLevels: PropTypes.array,\n  onClick: PropTypes.func\n};\nexport default ContextualMenu;","import React, { useRef, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { isSingleValue, createVisualization } from '@dhis2/analytics';\n\nconst ChartPlugin = ({\n  visualization,\n  responses,\n  extraOptions,\n  legendSets,\n  id: renderCounter,\n  style,\n  onChartGenerated,\n  animation: defaultAnimation\n}) => {\n  const canvasRef = useRef(undefined);\n  const prevStyle = useRef(style);\n  const prevRenderCounter = useRef(renderCounter);\n  const renderVisualization = useCallback(animation => {\n    const visualizationConfig = createVisualization(responses, visualization, canvasRef.current, { ...extraOptions,\n      animation,\n      legendSets\n    }, undefined, undefined, isSingleValue(visualization.type) ? 'dhis' : 'highcharts' // output format\n    );\n\n    if (isSingleValue(visualization.type)) {\n      onChartGenerated(visualizationConfig.visualization);\n    } else {\n      onChartGenerated(visualizationConfig.visualization.getSVGForExport({\n        sourceHeight: 768,\n        sourceWidth: 1024\n      }));\n    }\n  }, [canvasRef, visualization, onChartGenerated, responses, extraOptions, legendSets]);\n  useEffect(() => {\n    renderVisualization(defaultAnimation);\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, [visualization, responses, extraOptions]);\n  useEffect(() => {\n    if (renderCounter !== prevRenderCounter.current) {\n      renderVisualization(0);\n      prevRenderCounter.current = renderCounter;\n    }\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n\n  }, [renderCounter]);\n  useEffect(() => {\n    if (style.width !== prevStyle.current.width || style.height !== prevStyle.current.height) {\n      renderVisualization(0);\n      prevStyle.current = style;\n    }\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n\n  }, [style]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: canvasRef,\n    style: style\n  });\n};\n\nChartPlugin.defaultProps = {\n  visualization: {},\n  filters: {},\n  style: {},\n  animation: 200,\n  id: null,\n  onChartGenerated: Function.prototype\n};\nChartPlugin.propTypes = {\n  extraOptions: PropTypes.object.isRequired,\n  legendSets: PropTypes.arrayOf(PropTypes.object).isRequired,\n  responses: PropTypes.arrayOf(PropTypes.object).isRequired,\n  visualization: PropTypes.object.isRequired,\n  animation: PropTypes.number,\n  id: PropTypes.number,\n  style: PropTypes.object,\n  onChartGenerated: PropTypes.func\n};\nexport default ChartPlugin;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { PivotTable } from '@dhis2/analytics';\n\nconst PivotPlugin = ({\n  responses,\n  legendSets,\n  visualization,\n  style,\n  id: renderCounter,\n  onToggleContextualMenu\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(PivotTable, {\n    visualization: visualization,\n    data: responses[0].response,\n    legendSets: legendSets,\n    renderCounter: renderCounter,\n    onToggleContextualMenu: onToggleContextualMenu\n  }));\n};\n\nPivotPlugin.defaultProps = {\n  style: {}\n};\nPivotPlugin.propTypes = {\n  legendSets: PropTypes.arrayOf(PropTypes.object).isRequired,\n  responses: PropTypes.arrayOf(PropTypes.object).isRequired,\n  visualization: PropTypes.object.isRequired,\n  id: PropTypes.number,\n  style: PropTypes.object,\n  onToggleContextualMenu: PropTypes.func\n};\nexport default PivotPlugin;","import { getRelativePeriodsOptionsById, WEEKS, DAYS } from '@dhis2/analytics';\nexport const computeYoYMatrix = (responses, relativePeriodTypeUsed) => {\n  const periodGroups = responses.reduce((list, res) => {\n    list.push(res.metaData.dimensions.pe);\n    return list;\n  }, []);\n\n  if (relativePeriodTypeUsed === DAYS) {\n    periodGroups.sort((a, b) => a[0].substr(-2) - b[0].substr(-2));\n    const periodKeyAxisIndexMatrix = periodGroups.shift().map(periodId => [periodId]);\n    periodGroups.forEach(periodGroup => {\n      periodGroup.forEach(periodId => {\n        const matchGroups = periodId.match(/(\\d{4})(\\d{2})(\\d{2})/);\n        const month = matchGroups[2];\n        const day = matchGroups[3]; // find same month/day in 1st \"serie\"\n\n        const xAxisIndexForPeriod = periodKeyAxisIndexMatrix.findIndex(periodKeys => periodKeys[0].substr(4) === \"\".concat(month).concat(day));\n\n        if (xAxisIndexForPeriod !== -1) {\n          periodKeyAxisIndexMatrix[xAxisIndexForPeriod].push(periodId);\n        } else if (month === '02' && day === '29') {\n          // February 29 special case\n          // find index for february 28\n          const indexForFeb28 = periodKeyAxisIndexMatrix.findIndex(periodKeys => periodKeys.findIndex(periodKey => /0228$/.test(periodKey)) !== -1);\n\n          if (indexForFeb28 !== -1) {\n            periodKeyAxisIndexMatrix.splice(indexForFeb28 + 1, 0, [periodId]);\n          } else {\n            periodKeyAxisIndexMatrix.push([periodId]);\n          }\n        } else {\n          periodKeyAxisIndexMatrix.push([periodId]);\n        }\n      });\n    });\n    return periodKeyAxisIndexMatrix;\n  } else if (relativePeriodTypeUsed === WEEKS) {\n    periodGroups.sort((a, b) => b[0].split('W')[1] - a[0].split('W')[1]);\n    const periodKeyAxisIndexMatrix = periodGroups.shift().map(periodId => [periodId]);\n    periodGroups.forEach(periodGroup => {\n      periodGroup.forEach(periodId => {\n        const [year, week] = periodId.split('W'); // find week number in 1st \"serie\"\n\n        const xAxisIndexForPeriod = periodKeyAxisIndexMatrix.findIndex(periodKeys => periodKeys[0].split('W')[1] === week);\n\n        if (xAxisIndexForPeriod !== -1) {\n          periodKeyAxisIndexMatrix[xAxisIndexForPeriod].push(periodId);\n        } else if (week === '1') {\n          const indexForW2 = periodKeyAxisIndexMatrix.findIndex(periodKeys => periodKeys.findIndex(periodKey => /W2$/.test(periodKey)) !== -1);\n\n          if (indexForW2 !== -1) {\n            periodKeyAxisIndexMatrix[indexForW2].push(periodId);\n          } else {\n            periodKeyAxisIndexMatrix.push([periodId]);\n          }\n        } else {\n          // find the right spot considering also the year\n          const indexForPrevWeekInYear = periodKeyAxisIndexMatrix.findIndex(periodKeys => periodKeys.findIndex(periodKey => periodKey === \"\".concat(year, \"W\").concat(week - 1)) !== -1);\n          periodKeyAxisIndexMatrix.splice(indexForPrevWeekInYear + 1, 0, [periodId]);\n        }\n      });\n    });\n    return periodKeyAxisIndexMatrix;\n  } else {\n    const periodKeyAxisIndexMatrix = periodGroups.reduce((list, periodGroup) => {\n      periodGroup.forEach((periodId, index) => {\n        list[index].push(periodId);\n      });\n      return list;\n    }, Array.from({\n      length: periodGroups[0].length\n    }, () => []));\n    return periodKeyAxisIndexMatrix;\n  }\n};\nexport const computeGenericPeriodNamesFromMatrix = (periodKeyAxisIndexMatrix, relativePeriodTypeUsed) => {\n  switch (relativePeriodTypeUsed) {\n    case WEEKS:\n      return periodKeyAxisIndexMatrix // remove year, return \"Wnn\"\n      .map(periodKeys => periodKeys[0].substr(4)).flat();\n\n    case DAYS:\n      return periodKeyAxisIndexMatrix.map(periodKeys => // remove year, return \"dd-mm\"\n      periodKeys[0].substr(4).replace(/(\\d{2})(\\d{2})/, '$2-$1')).flat();\n  }\n};\nexport const computeGenericPeriodNames = responses => {\n  const xAxisRes = responses.reduce((out, res) => {\n    if (out.metaData) {\n      if (res.metaData.dimensions.pe.length > out.metaData.dimensions.pe.length) {\n        out = res;\n      }\n    } else {\n      out = res;\n    }\n\n    return out;\n  }, {});\n  const metadata = xAxisRes.metaData;\n  return metadata.dimensions.pe.reduce((genericPeriodNames, periodId) => {\n    const name = metadata.items[periodId].name; // until the day the backend will support this in the API:\n    // trim off the trailing year in the period name\n    // english names should all have the year at the end of the string\n\n    genericPeriodNames.push(name.replace(/\\s+\\d{4}$/, ''));\n    return genericPeriodNames;\n  }, []);\n};\nexport const getRelativePeriodTypeUsed = periodItems => {\n  if (getRelativePeriodsOptionsById(WEEKS).getPeriods().find(period => period.id === periodItems[0].id)) {\n    return WEEKS;\n  } else if (getRelativePeriodsOptionsById(DAYS).getPeriods().find(period => period.id === periodItems[0].id)) {\n    return DAYS;\n  }\n};","import { Analytics, VIS_TYPE_PIVOT_TABLE, layoutGetDimensionItems, DIMENSION_ID_PERIOD, DAYS, WEEKS } from '@dhis2/analytics';\nimport { getRelativePeriodTypeUsed } from '../modules/analytics';\nconst periodId = DIMENSION_ID_PERIOD;\nexport const apiFetchAnalytics = async (dataEngine, visualization, options) => {\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  const req = new analyticsEngine.request().fromVisualization(visualization).withParameters(options).withIncludeNumDen(visualization.type === VIS_TYPE_PIVOT_TABLE);\n  const rawResponse = await analyticsEngine.aggregate.get(req);\n  return [new analyticsEngine.response(rawResponse)];\n};\nexport const apiFetchAnalyticsForYearOverYear = async (dataEngine, visualization, options) => {\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  let yearlySeriesReq = new analyticsEngine.request().addPeriodDimension(visualization.yearlySeries).withSkipData(true).withSkipMeta(false).withIncludeMetadataDetails(true);\n\n  if (options.relativePeriodDate) {\n    yearlySeriesReq = yearlySeriesReq.withRelativePeriodDate(options.relativePeriodDate);\n  }\n\n  const yearlySeriesRes = await analyticsEngine.aggregate.fetch(yearlySeriesReq);\n  const periodDates = [];\n  const yearlySeriesLabels = [];\n  const now = new Date();\n  const currentDay = ('' + now.getDate()).padStart(2, 0);\n  const currentMonth = ('' + (now.getMonth() + 1)).padStart(2, 0);\n  const periodItems = layoutGetDimensionItems(visualization, periodId); // relative week period in use\n\n  if (getRelativePeriodTypeUsed(periodItems) === WEEKS) {\n    const relativeWeeksData = await prepareRequestsForRelativeWeeks({\n      analyticsEngine,\n      visualization,\n      options,\n      yearlySeriesRes,\n      currentMonth,\n      currentDay\n    });\n    periodDates.push(...relativeWeeksData.periodDates);\n    yearlySeriesLabels.push(...relativeWeeksData.yearlySeriesLabels);\n  } else if (getRelativePeriodTypeUsed(periodItems) === DAYS) {\n    const relativeDaysData = prepareRequestsForRelativeDays({\n      yearlySeriesRes,\n      currentMonth,\n      currentDay\n    });\n    periodDates.push(...relativeDaysData.periodDates);\n    yearlySeriesLabels.push(...relativeDaysData.yearlySeriesLabels);\n  } else {\n    yearlySeriesRes.metaData.dimensions[periodId].sort().reverse().forEach(year => {\n      yearlySeriesLabels.push(yearlySeriesRes.metaData.items[year].name);\n      periodDates.push(\"\".concat(year, \"-\").concat(currentMonth, \"-\").concat(currentDay));\n    });\n  } // request analytics data/metaData for each year in the serie with its own specific relativePeriodDate\n\n\n  const requests = periodDates.reduce((list, periodDate) => {\n    const req = new analyticsEngine.request().fromVisualization(visualization).withParameters(options).withRelativePeriodDate(periodDate);\n    list.push(analyticsEngine.aggregate.get(req));\n    return list;\n  }, []);\n  return Promise.all(requests).then(responses => ({\n    responses: responses.map(res => new analyticsEngine.response(res)),\n    yearlySeriesLabels\n  }));\n};\n\nconst prepareRequestsForRelativeDays = ({\n  yearlySeriesRes,\n  currentMonth,\n  currentDay\n}) => {\n  const yearlySeriesLabels = [];\n  const periodDates = [];\n  const yearlySeriesIds = yearlySeriesRes.metaData.dimensions[periodId].slice().sort().reverse();\n  const isFeb29 = currentMonth === '02' && currentDay === '29';\n  yearlySeriesIds.forEach(year => {\n    yearlySeriesLabels.push(yearlySeriesRes.metaData.items[year].name);\n    const isLeapYear = new Date(year, 1, 29).getDate() === 29; // 1. check if current date is feb 29\n    // 2. check if current year is NOT a leap year\n\n    if (isFeb29 && !isLeapYear) {\n      // 3. use feb 28 for that year as relativePeriodDate\n      periodDates.push(\"\".concat(year, \"-02-28\"));\n    } else {\n      periodDates.push(\"\".concat(year, \"-\").concat(currentMonth, \"-\").concat(currentDay));\n    }\n  });\n  return {\n    yearlySeriesLabels,\n    periodDates\n  };\n}; // special handling for when a relative weeks period is selected as category\n// this takes care of data alignment issues between different years when one of the years have 53 weeks\n// and more in general when the returned weeks for different years are not exactly the same range\n// and data points must be \"shifted\" in the right position\n// See https://jira.dhis2.org/browse/DHIS2-9729\n\n\nconst prepareRequestsForRelativeWeeks = async ({\n  analyticsEngine,\n  visualization,\n  options,\n  yearlySeriesRes,\n  currentMonth,\n  currentDay\n}) => {\n  const yearlySeriesLabels = [];\n  const periodDates = [];\n  const yearlySeriesIds = yearlySeriesRes.metaData.dimensions[periodId].slice().sort().reverse(); // 1. request metadata of last year of the serie (with relativePeriodDate === today)\n  // 2. extract the last week number of the LAST_x_WEEKS period\n  // 3. request metadata for the same week number for each one of the other years of the serie\n  // 3. compute relativePeriodDate for each other year of the serie:\n  //    this is done by adding 1 day to the endDate of the week period obtained above\n  // 4. request analytics data/metaData for each year in the serie with its own specific relativePeriodDate\n\n  const referencePeriodYear = yearlySeriesIds.shift();\n  yearlySeriesLabels.push(yearlySeriesRes.metaData.items[referencePeriodYear].name);\n  periodDates.push(\"\".concat(referencePeriodYear, \"-\").concat(currentMonth, \"-\").concat(currentDay)); // 1. request metadata of last year of the serie (with relativePeriodDate === today)\n\n  const referencePeriodReq = new analyticsEngine.request().fromVisualization(visualization).withParameters(options).withRelativePeriodDate(\"\".concat(referencePeriodYear, \"-\").concat(currentMonth, \"-\").concat(currentDay)).withSkipData(true).withSkipMeta(false);\n  const referencePeriodRes = await analyticsEngine.aggregate.fetch(referencePeriodReq); // 2. extract the last week number of the LAST_x_WEEKS period\n  //    special handling for the week 53 case as not all years have 53 weeks\n\n  const referenceWeekPeriod = referencePeriodRes.metaData.dimensions[periodId].pop();\n  const [referenceWeekYear, referenceWeekNumber] = referenceWeekPeriod.split('W');\n  const referenceWeekYearDelta = referencePeriodYear - referenceWeekYear;\n  const weekPeriods = yearlySeriesIds.reduce((periods, year) => {\n    yearlySeriesLabels.push(yearlySeriesRes.metaData.items[year].name);\n    periods.push(\"\".concat(year - referenceWeekYearDelta, \"W\").concat(referenceWeekNumber)); // edge case for week 53, not all years have it, so request also week 52\n\n    if (referenceWeekNumber === '53') {\n      periods.push(\"\".concat(year - referenceWeekYearDelta, \"W52\"));\n    }\n\n    return periods;\n  }, []);\n\n  if (weekPeriods.length) {\n    // 3. request metadata for the same week number for each one of the other years of the serie\n    const weekPeriodsReq = new analyticsEngine.request().addPeriodDimension(weekPeriods).withSkipData(true).withSkipMeta(false).withIncludeMetadataDetails(true);\n    const weekPeriodsRes = await analyticsEngine.aggregate.fetch(weekPeriodsReq); // 3. compute relativePeriodDate for each other year of the serie:\n    //    this is done by adding 1 day to the endDate of the week period obtained above\n\n    const seenYears = [];\n    weekPeriodsRes.metaData.dimensions[periodId].sort().reverse().forEach(period => {\n      const year = period.substr(0, 4); // make sure we only take W53 or W52 whichever is available\n\n      if (!seenYears.includes(year)) {\n        const periodDate = new Date(weekPeriodsRes.metaData.items[period].endDate);\n        periodDate.setDate(periodDate.getDate() + 1);\n        periodDates.push(\"\".concat(periodDate.getFullYear(), \"-\").concat(('' + (periodDate.getMonth() + 1)).padStart(2, 0), \"-\").concat(('' + periodDate.getDate()).padStart(2, 0)));\n        seenYears.unshift(year);\n      }\n    });\n  }\n\n  return {\n    yearlySeriesLabels,\n    periodDates\n  };\n};","import pick from 'lodash-es/pick';\nimport { COLOR_SET_DEFAULT } from '@dhis2/analytics';\nexport const options = {\n  axes: {\n    requestable: false,\n    savable: true,\n    defaultValue: []\n  },\n  colorSet: {\n    defaultValue: COLOR_SET_DEFAULT,\n    requestable: false,\n    savable: true\n  },\n  cumulativeValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRowItems: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  legend: {\n    defaultValue: {},\n    requestable: false,\n    savable: true\n  },\n  noSpaceBetweenColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  percentStackedValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regressionType: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  showData: {\n    defaultValue: true,\n    requestable: false,\n    savable: true\n  },\n  aggregationType: {\n    defaultValue: 'DEFAULT',\n    requestable: true,\n    savable: true\n  },\n  completedOnly: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  hideSubtitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideTitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  sortOrder: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  },\n  subtitle: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  title: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  series: {\n    defaultValue: [],\n    requestable: false,\n    savable: true\n  },\n  fontStyle: {\n    defaultValue: {},\n    requestable: false,\n    savable: true\n  },\n  // only for PT\n  colTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  colSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  showDimensionLabels: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRows: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  skipRounding: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  numberType: {\n    defaultValue: 'VALUE',\n    requestable: false,\n    savable: true\n  },\n  showHierarchy: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  legendSet: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStrategy: {\n    defaultValue: 'FIXED',\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStyle: {\n    defaultValue: 'FILL',\n    requestable: false,\n    savable: true\n  },\n  displayDensity: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  fontSize: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  digitGroupSeparator: {\n    defaultValue: 'SPACE',\n    requestable: false,\n    savable: true\n  },\n  approvalLevel: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: false\n  },\n  // these are stored in the AO under reportingParams\n  reportingPeriod: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  organisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  parentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  // not exposed in UI\n  grandParentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regression: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  cumulative: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  measureCriteria: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: true\n  },\n  topLimit: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  }\n};\nexport default options;\nexport const getOptionsForUi = () => {\n  return Object.entries({ ...options\n  }).reduce((map, [option, props]) => {\n    map[option] = props.defaultValue;\n    return map;\n  }, {});\n};\nexport const getOptionsForRequest = () => {\n  return Object.entries(options).filter(entry => entry[1].requestable // entry = [option, props]\n  );\n};\nexport const getOptionsFromVisualization = visualization => {\n  const optionsFromVisualization = { ...getOptionsForUi(),\n    ...pick(visualization, Object.keys(options))\n  }; // nested options under reportingParams\n\n  if (visualization.reportingParams) {\n    optionsFromVisualization.organisationUnit = visualization.reportingParams.organisationUnit;\n    optionsFromVisualization.reportingPeriod = visualization.reportingParams.reportingPeriod;\n    optionsFromVisualization.parentOrganisationUnit = visualization.reportingParams.parentOrganisationUnit;\n    optionsFromVisualization.grandParentOrganisationUnit = visualization.reportingParams.grandParentOrganisationUnit;\n  } // cast option values from Number for some options\n\n\n  ;\n  ['sortOrder', 'topLimit'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n      optionsFromVisualization[option] = String(visualization[option]);\n    }\n  });\n  return optionsFromVisualization;\n};","import { getOptionsForRequest } from './options';\nexport const getRequestOptions = (visualization, filters, userSettings) => {\n  const options = getOptionsForRequest().reduce((map, [option, props]) => {\n    // only add parameter if value !== default\n    if (visualization[option] !== undefined && visualization[option] !== props.defaultValue) {\n      map[option] = visualization[option];\n    }\n\n    return map;\n  }, {}); // interpretation filter\n\n  if (filters.relativePeriodDate) {\n    options.relativePeriodDate = filters.relativePeriodDate;\n  }\n\n  if (userSettings !== null && userSettings !== void 0 && userSettings.displayProperty) {\n    switch (userSettings.displayProperty) {\n      case 'displayShortName':\n        options.displayProperty = 'SHORTNAME';\n        break;\n\n      case 'displayName':\n        options.displayProperty = 'NAME';\n        break;\n    }\n  } // global filters\n  // userOrgUnit\n\n\n  if (filters.userOrgUnit && filters.userOrgUnit.length) {\n    const ouIds = filters.userOrgUnit.map(ouPath => ouPath.split('/').slice(-1)[0]);\n    options.userOrgUnit = ouIds.join(';');\n  }\n\n  return options;\n};","import { isYearOverYear, DIMENSION_ID_PERIOD, layoutGetDimensionItems } from '@dhis2/analytics';\nimport { apiFetchAnalyticsForYearOverYear, apiFetchAnalytics } from '../api/analytics';\nimport { computeGenericPeriodNames, computeYoYMatrix, computeGenericPeriodNamesFromMatrix, getRelativePeriodTypeUsed } from './analytics';\nimport { getRequestOptions } from './getRequestOptions';\nexport const fetchData = async ({\n  dataEngine,\n  visualization,\n  filters,\n  forDashboard,\n  userSettings\n}) => {\n  const options = getRequestOptions(visualization, filters, userSettings);\n  const extraOptions = {\n    dashboard: forDashboard\n  };\n\n  if (isYearOverYear(visualization.type)) {\n    const {\n      responses,\n      yearlySeriesLabels\n    } = await apiFetchAnalyticsForYearOverYear(dataEngine, visualization, options);\n    const peItems = layoutGetDimensionItems(visualization, DIMENSION_ID_PERIOD);\n    const relativePeriodTypeUsed = getRelativePeriodTypeUsed(peItems);\n    const periodKeyAxisIndexMatrix = computeYoYMatrix(responses, relativePeriodTypeUsed);\n    const periodKeyAxisIndexMap = periodKeyAxisIndexMatrix.reduce((map, periodKeys, index) => {\n      periodKeys.forEach(periodKey => map[periodKey] = index);\n      return map;\n    }, {});\n    const xAxisLabels = relativePeriodTypeUsed ? computeGenericPeriodNamesFromMatrix(periodKeyAxisIndexMatrix, relativePeriodTypeUsed) : computeGenericPeriodNames(responses);\n    return {\n      responses,\n      extraOptions: { ...extraOptions,\n        yearlySeries: yearlySeriesLabels,\n        xAxisLabels,\n        periodKeyAxisIndexMap\n      }\n    };\n  }\n\n  return {\n    responses: await apiFetchAnalytics(dataEngine, visualization, options),\n    extraOptions\n  };\n};","export default {\n  backdrop: {\n    position: 'fixed',\n    height: '100%',\n    width: '100%',\n    top: 0,\n    left: 0,\n    backgroundColor: 'transparent'\n  }\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { Popper } from '@dhis2/ui';\nimport { VIS_TYPE_PIVOT_TABLE, apiFetchOrganisationUnitLevels } from '@dhis2/analytics';\nimport { apiFetchLegendSets } from './api/legendSets';\nimport ContextualMenu from './ContextualMenu';\nimport ChartPlugin from './ChartPlugin';\nimport PivotPlugin from './PivotPlugin';\nimport { fetchData } from './modules/fetchData';\nimport styles from './styles/VisualizationPlugin.style.js';\nconst LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM';\nconst LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED';\nexport const VisualizationPlugin = ({\n  visualization,\n  filters,\n  forDashboard,\n  userSettings,\n  onError,\n  onLoadingComplete,\n  onResponsesReceived,\n  onDrill,\n  ...props\n}) => {\n  const engine = useDataEngine();\n  const [ouLevels, setOuLevels] = useState(undefined);\n  const [fetchResult, setFetchResult] = useState(null);\n  const [contextualMenuRef, setContextualMenuRef] = useState(undefined);\n  const [contextualMenuConfig, setContextualMenuConfig] = useState({});\n\n  const onToggleContextualMenu = (ref, data) => {\n    setContextualMenuRef(ref);\n    setContextualMenuConfig(data);\n  };\n\n  const closeContextualMenu = () => setContextualMenuRef(undefined);\n\n  const onContextualMenuItemClick = args => {\n    closeContextualMenu();\n    onDrill(args);\n  };\n\n  const doFetchData = useCallback(async () => {\n    const result = await fetchData({\n      dataEngine: engine,\n      visualization,\n      filters,\n      forDashboard,\n      userSettings\n    });\n\n    if (result.responses.length) {\n      onResponsesReceived(result.responses);\n    }\n\n    return result;\n  }, [engine, filters, forDashboard, userSettings, onResponsesReceived, visualization]);\n  const doFetchLegendSets = useCallback(async legendSetIds => {\n    if (!legendSetIds.length) {\n      return [];\n    }\n\n    const legendSets = await apiFetchLegendSets(engine, legendSetIds);\n    return legendSets;\n  }, [engine]);\n  useEffect(() => {\n    const doFetchOuLevels = async () => {\n      const ouLevels = await apiFetchOrganisationUnitLevels(engine);\n      setOuLevels(ouLevels);\n    };\n\n    doFetchOuLevels();\n  }, [engine]);\n  useEffect(() => {\n    setFetchResult(null);\n\n    const doFetchAll = async () => {\n      const {\n        responses,\n        extraOptions\n      } = await doFetchData(visualization, filters, forDashboard);\n      const legendSetIds = [];\n\n      switch (visualization.legendDisplayStrategy) {\n        case LEGEND_DISPLAY_STRATEGY_FIXED:\n          if (visualization.legendSet && visualization.legendSet.id) {\n            legendSetIds.push(visualization.legendSet.id);\n          }\n\n          break;\n\n        case LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM:\n          {\n            // parse responses to extract legendSet ids from metaData\n            // multiple responses are only for YOY which does not support legends\n            // safe to use only the 1st\n            // dx dimensions might not be present, the empty array covers that case\n            const dxIds = responses[0].metaData.dimensions.dx || [];\n            dxIds.forEach(dxId => {\n              const legendSetId = responses[0].metaData.items[dxId].legendSet;\n\n              if (legendSetId) {\n                legendSetIds.push(legendSetId);\n              }\n            });\n            break;\n          }\n      }\n\n      const legendSets = await doFetchLegendSets(legendSetIds);\n      setFetchResult({\n        visualization,\n        legendSets,\n        responses,\n        extraOptions\n      });\n      onLoadingComplete();\n    };\n\n    doFetchAll().catch(error => {\n      onError(error);\n    });\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, [visualization, filters, forDashboard]);\n\n  if (!fetchResult) {\n    return null;\n  }\n\n  const contextualMenuRect = contextualMenuRef && contextualMenuRef.current && contextualMenuRef.current.getBoundingClientRect();\n  const virtualContextualMenuElement = contextualMenuRect ? {\n    getBoundingClientRect: () => contextualMenuRect\n  } : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !fetchResult.visualization.type || fetchResult.visualization.type === VIS_TYPE_PIVOT_TABLE ? /*#__PURE__*/React.createElement(PivotPlugin, _extends({\n    visualization: fetchResult.visualization,\n    responses: fetchResult.responses,\n    legendSets: fetchResult.legendSets,\n    onToggleContextualMenu: onDrill ? onToggleContextualMenu : undefined\n  }, props)) : /*#__PURE__*/React.createElement(ChartPlugin, _extends({\n    visualization: fetchResult.visualization,\n    responses: fetchResult.responses,\n    extraOptions: fetchResult.extraOptions,\n    legendSets: fetchResult.legendSets\n  }, props)), contextualMenuRect && /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    onClick: closeContextualMenu,\n    style: styles.backdrop\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: virtualContextualMenuElement,\n    placement: \"right\"\n  }, /*#__PURE__*/React.createElement(ContextualMenu, {\n    config: contextualMenuConfig,\n    ouLevels: ouLevels,\n    onClick: onContextualMenuItemClick\n  }))), document.body));\n};\nVisualizationPlugin.defaultProps = {\n  filters: {},\n  forDashboard: false,\n  onError: Function.prototype,\n  onLoadingComplete: Function.prototype,\n  onResponsesReceived: Function.prototype,\n  visualization: {},\n  userSettings: {}\n};\nVisualizationPlugin.propTypes = {\n  visualization: PropTypes.object.isRequired,\n  filters: PropTypes.object,\n  forDashboard: PropTypes.bool,\n  userSettings: PropTypes.object,\n  onDrill: PropTypes.func,\n  onError: PropTypes.func,\n  onLoadingComplete: PropTypes.func,\n  onResponsesReceived: PropTypes.func\n};","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { visTypeIcons } from '@dhis2/analytics';\nimport styles from './styles/StartScreen.module.css';\nimport { sGetLoadError } from '../../reducers/loader';\nimport { apiFetchMostViewedVisualizations } from '../../api/mostViewedVisualizations';\nimport history from '../../modules/history';\nimport { VisualizationError, genericErrorTitle } from '../../modules/error';\nimport { GenericError } from '../../assets/ErrorIcons';\nimport { apiFetchVisualizations } from '../../api/visualization';\n\nconst StartScreen = ({\n  error\n}) => {\n  const [mostViewedVisualizations, setMostViewedVisualizations] = useState([]);\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function populateMostViewedVisualizations(engine) {\n      const mostViewedVisualizationsResult = await apiFetchMostViewedVisualizations(engine, 6);\n      const visualizations = mostViewedVisualizationsResult.visualization;\n\n      if (visualizations && visualizations.length) {\n        const visualizationsResult = await apiFetchVisualizations(engine, visualizations.map(vis => vis.id));\n        const visualizationsWithType = visualizationsResult.visualization.visualizations;\n        const result = visualizations.map(vis => ({ ...visualizationsWithType.find(visWithType => visWithType.id === vis.id && visWithType),\n          ...vis\n        }));\n        setMostViewedVisualizations(result);\n      }\n    }\n\n    populateMostViewedVisualizations(engine);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const getContent = () => error ? getErrorContent() : /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"start-screen\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title,\n    \"data-test\": \"start-screen-primary-section-title\"\n  }, i18n.t('Getting started')), /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.guide\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('All dimensions that you can use to build visualizations are shown in the left sidebar')), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Add dimensions to the layout above')), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Click a dimension to add or remove items')))), mostViewedVisualizations.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title,\n    \"data-test\": \"start-screen-secondary-section-title\"\n  }, i18n.t('Your most viewed charts and tables')), mostViewedVisualizations.map((visualization, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index,\n    className: styles.visualization,\n    onClick: () => history.push(\"/\".concat(visualization.id)),\n    \"data-test\": \"start-screen-most-viewed-list-item\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.visIcon\n  }, visTypeIcons[visualization.type]), /*#__PURE__*/React.createElement(\"span\", null, visualization.name)))));\n\n  const getErrorContent = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorContainer,\n    \"data-test\": \"start-screen-error-container\"\n  }, error instanceof VisualizationError ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorIcon\n  }, error.icon()), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorTitle\n  }, error.title), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorDescription\n  }, error.description)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.errorIcon\n  }, GenericError()), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorTitle\n  }, genericErrorTitle), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.errorDescription\n  }, error.message || error)));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.outer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inner\n  }, getContent()));\n};\n\nStartScreen.propTypes = {\n  error: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  error: sGetLoadError(state)\n});\n\nexport default connect(mapStateToProps)(StartScreen);","// TODO move into component StartScreen?\nimport { EVENT_TYPE } from './dataStatistics'; // most likely is not needed anywhere else\n\nexport const apiFetchMostViewedVisualizations = (dataEngine, pageSize) => {\n  const visualizationQuery = {\n    resource: 'dataStatistics/favorites',\n    params: {\n      eventType: EVENT_TYPE,\n      pageSize: pageSize || 10\n    }\n  };\n  return dataEngine.query({\n    visualization: visualizationQuery\n  });\n};","import React from 'react';\nimport styles from './styles/LoadingMask.module.css';\nimport { CircularLoader } from '@dhis2/ui';\n\nfunction LoadingMask() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.outer\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    className: styles.progress\n  }));\n}\n\nexport default LoadingMask;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport debounce from 'lodash-es/debounce';\nimport styles from './styles/Visualization.style';\nimport VisualizationPlugin from '@dhis2/data-visualizer-plugin';\nimport { sGetVisualization } from '../../reducers/visualization';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetUiRightSidebarOpen, sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetLoadError, sGetIsPluginLoading } from '../../reducers/loader';\nimport { acAddMetadata } from '../../actions/metadata';\nimport { acSetChart } from '../../actions/chart';\nimport { acSetLoadError, acSetPluginLoading } from '../../actions/loader';\nimport { acSetUiItems, acAddParentGraphMap } from '../../actions/ui';\nimport { tSetCurrentFromUi } from '../../actions/current';\nimport { removeLastPathSegment } from '../../modules/orgUnit';\nimport StartScreen from './StartScreen';\nimport { AssignedCategoriesDataElementsError, GenericServerError, EmptyResponseError, AssignedCategoriesAsFilterError, MultipleIndicatorAsFilterError, NoDataOrDataElementGroupSetError, CombinationDEGSRRError, NoOrgUnitResponseError } from '../../modules/error';\nimport LoadingMask from '../../widgets/LoadingMask';\nimport { sGetSettingsDisplayNameProperty } from '../../reducers/settings';\nexport class Visualization extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onError\", response => {\n      var _response$details;\n\n      let error;\n\n      if (response) {\n        switch ((_response$details = response.details) === null || _response$details === void 0 ? void 0 : _response$details.errorCode) {\n          case 'E7114':\n            error = new AssignedCategoriesDataElementsError();\n            break;\n\n          case 'E7110':\n            error = new AssignedCategoriesAsFilterError();\n            break;\n\n          case 'E7108':\n            error = new MultipleIndicatorAsFilterError();\n            break;\n\n          case 'E7102':\n            error = new NoDataOrDataElementGroupSetError(this.props.visualization.type);\n            break;\n\n          case 'E7112':\n            error = new CombinationDEGSRRError();\n            break;\n\n          case 'E7124':\n            error = new NoOrgUnitResponseError();\n            break;\n\n          default:\n            error = response;\n        }\n      } else {\n        error = new GenericServerError();\n      }\n\n      this.props.setLoadError(error);\n    });\n\n    _defineProperty(this, \"onChartGenerated\", svg => this.props.setChart(svg));\n\n    _defineProperty(this, \"onResponsesReceived\", responses => {\n      const forMetadata = {};\n      responses.forEach(response => {\n        Object.entries(response.metaData.items).forEach(([id, item]) => {\n          forMetadata[id] = {\n            id,\n            name: item.name || item.displayName,\n            displayName: item.displayName,\n            dimensionItemType: item.dimensionItemType\n          };\n        });\n      });\n      this.props.addMetadata(forMetadata);\n\n      if (!responses.some(response => response.rows && response.rows.length)) {\n        throw new EmptyResponseError();\n      }\n    });\n\n    _defineProperty(this, \"onDrill\", drillData => {\n      if (drillData !== null && drillData !== void 0 && drillData.ou) {\n        const ou = drillData.ou;\n        const itemIds = [ou.id];\n\n        if (ou.level) {\n          itemIds.push(\"LEVEL-\".concat(ou.level));\n        }\n\n        if (ou.path) {\n          const path = removeLastPathSegment(ou.path);\n          this.props.addParentGraphMap({\n            [ou.id]: path === \"/{\".concat(ou.id) ? '' : path.replace(/^\\//, '')\n          });\n        }\n\n        this.props.setUiItems({\n          dimensionId: 'ou',\n          itemIds\n        });\n      } // TODO drillData?.pe\n      // simulate an update for refreshing the visualization\n\n\n      this.props.setCurrent();\n    });\n\n    _defineProperty(this, \"getNewRenderId\", () => this.setState({\n      renderId: typeof this.state.renderId === 'number' ? this.state.renderId + 1 : 1\n    }));\n\n    _defineProperty(this, \"addResizeHandler\", () => {\n      window.addEventListener('resize', debounce(() => {\n        this.getNewRenderId();\n      }, 300));\n    });\n\n    this.state = {\n      renderId: null\n    };\n  }\n\n  componentDidMount() {\n    this.addResizeHandler();\n  }\n\n  componentDidUpdate(prevProps) {\n    // open sidebar\n    if (this.props.rightSidebarOpen !== prevProps.rightSidebarOpen) {\n      this.getNewRenderId();\n    }\n  }\n\n  render() {\n    const {\n      visualization,\n      visFilters,\n      userSettings,\n      error,\n      isLoading,\n      onLoadingComplete\n    } = this.props;\n    const {\n      renderId\n    } = this.state;\n    return !visualization || error ? /*#__PURE__*/React.createElement(StartScreen, null) : /*#__PURE__*/React.createElement(Fragment, null, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.loadingCover\n    }, /*#__PURE__*/React.createElement(LoadingMask, null)) : null, /*#__PURE__*/React.createElement(VisualizationPlugin, {\n      id: renderId,\n      visualization: visualization,\n      filters: visFilters,\n      onChartGenerated: this.onChartGenerated,\n      onLoadingComplete: onLoadingComplete,\n      onResponsesReceived: this.onResponsesReceived,\n      onError: this.onError,\n      onDrill: this.onDrill,\n      style: styles.chartCanvas,\n      userSettings: userSettings\n    }));\n  }\n\n}\nVisualization.propTypes = {\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  error: PropTypes.object,\n  isLoading: PropTypes.bool,\n  rightSidebarOpen: PropTypes.bool,\n  setChart: PropTypes.func,\n  setCurrent: PropTypes.func,\n  setLoadError: PropTypes.func,\n  setUiItems: PropTypes.func,\n  userSettings: PropTypes.object,\n  visFilters: PropTypes.object,\n  visualization: PropTypes.object,\n  onLoadingComplete: PropTypes.func\n};\nexport const visualizationSelector = createSelector([sGetCurrent, sGetVisualization, sGetUiInterpretation], (current, visualization, interpretation) => interpretation.id ? visualization : current);\nexport const visFiltersSelector = createSelector([sGetUiInterpretation], interpretation => interpretation.created ? {\n  relativePeriodDate: interpretation.created\n} : {});\nexport const userSettingsSelector = createSelector([sGetSettingsDisplayNameProperty], displayProperty => ({\n  displayProperty\n}));\n\nconst mapStateToProps = state => ({\n  visualization: visualizationSelector(state),\n  visFilters: visFiltersSelector(state),\n  rightSidebarOpen: sGetUiRightSidebarOpen(state),\n  error: sGetLoadError(state),\n  isLoading: sGetIsPluginLoading(state),\n  userSettings: userSettingsSelector(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoadingComplete: () => dispatch(acSetPluginLoading(false)),\n  addMetadata: metadata => dispatch(acAddMetadata(metadata)),\n  addParentGraphMap: parentGraphMap => dispatch(acAddParentGraphMap(parentGraphMap)),\n  setChart: chart => dispatch(acSetChart(chart)),\n  setLoadError: error => dispatch(acSetLoadError(error)),\n  setUiItems: data => dispatch(acSetUiItems(data)),\n  setCurrent: () => dispatch(tSetCurrentFromUi())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Visualization);","import { SET_CHART } from '../reducers/chart';\nexport const acSetChart = value => ({\n  type: SET_CHART,\n  value\n});","import { colors } from '@dhis2/ui';\nexport const styles = {\n  tooltip: {\n    fontFamily: 'roboto',\n    padding: '7px 9px',\n    color: colors.white,\n    fontSize: '12px',\n    backgroundColor: colors.grey900,\n    boxShadow: 'none',\n    borderRadius: '3px',\n    position: 'relative',\n    top: '5px',\n    maxWidth: '300px'\n  },\n  list: {\n    listStyleType: 'none',\n    margin: '0px',\n    marginBottom: '-3px',\n    padding: '0px'\n  },\n  item: {\n    marginBottom: '3px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  iconWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '5px'\n  },\n  label: {\n    whiteSpace: 'normal',\n    marginLeft: '6px'\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { ouIdHelper } from '@dhis2/analytics';\nimport { IconWarningFilled16, IconLock16 } from '@dhis2/ui';\nimport { sGetMetadata } from '../../reducers/metadata';\nimport { styles } from './styles/Tooltip.style';\nconst labels = {\n  noneSelected: i18n.t('None selected'),\n  onlyOneInUse: name => i18n.t(\"Only '{{- name}}' in use\", {\n    name\n  }),\n  onlyLimitedNumberInUse: number => i18n.t(\"Only '{{number}}' in use\", {\n    number\n  })\n};\nexport const TooltipContent = ({\n  dimensionId,\n  itemIds,\n  metadata,\n  displayLimitedAmount,\n  lockedLabel\n}) => {\n  const getWarningLabel = () => {\n    const warningLabel = itemIds.length === 1 ? labels.onlyOneInUse(metadata[itemIds[0]] ? metadata[itemIds[0]].name : itemIds[0]) : labels.onlyLimitedNumberInUse(itemIds.length);\n    return displayLimitedAmount ? warningLabel : null;\n  };\n\n  const getNameList = (idList, label, metadata) => idList.reduce((levelString, levelId, index) => \"\".concat(levelString).concat(index > 0 ? \", \" : \"\").concat(metadata[levelId] ? metadata[levelId].name : levelId), \"\".concat(label, \": \"));\n\n  const getItemDisplayNames = () => {\n    const levelIds = [];\n    const groupIds = [];\n    const itemDisplayNames = [];\n\n    if (!displayLimitedAmount) {\n      itemIds.forEach(id => {\n        if (ouIdHelper.hasLevelPrefix(id)) {\n          levelIds.push(ouIdHelper.removePrefix(id));\n        } else if (ouIdHelper.hasGroupPrefix(id)) {\n          groupIds.push(ouIdHelper.removePrefix(id));\n        } else {\n          itemDisplayNames.push(metadata[id] ? metadata[id].name : id);\n        }\n      });\n      levelIds.length && itemDisplayNames.push(getNameList(levelIds, i18n.t('Levels'), metadata));\n      groupIds.length && itemDisplayNames.push(getNameList(groupIds, i18n.t('Groups'), metadata));\n    }\n\n    return itemDisplayNames;\n  };\n\n  const renderWarningLabel = warningLabel => /*#__PURE__*/React.createElement(\"li\", {\n    style: styles.item\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.iconWrapper\n  }, /*#__PURE__*/React.createElement(IconWarningFilled16, null), /*#__PURE__*/React.createElement(\"span\", {\n    style: styles.label\n  }, warningLabel)));\n\n  const renderItems = itemDisplayNames => {\n    const renderLimit = 5;\n    const itemsToRender = itemDisplayNames.slice(0, renderLimit).map(name => /*#__PURE__*/React.createElement(\"li\", {\n      key: \"\".concat(dimensionId, \"-\").concat(name),\n      style: styles.item\n    }, name));\n\n    if (itemDisplayNames.length > renderLimit) {\n      itemsToRender.push( /*#__PURE__*/React.createElement(\"li\", {\n        key: \"\".concat(dimensionId, \"-render-limit\"),\n        style: styles.item\n      }, itemDisplayNames.length - renderLimit === 1 ? i18n.t('And 1 other...') : i18n.t('And {{numberOfItems}} others...', {\n        numberOfItems: itemDisplayNames.length - renderLimit\n      })));\n    }\n\n    return itemsToRender;\n  };\n\n  const renderLockedLabel = () => /*#__PURE__*/React.createElement(\"li\", {\n    style: styles.item\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.iconWrapper\n  }, /*#__PURE__*/React.createElement(IconLock16, null), /*#__PURE__*/React.createElement(\"span\", {\n    style: styles.label\n  }, lockedLabel)));\n\n  const renderNoItemsLabel = () => /*#__PURE__*/React.createElement(\"li\", {\n    key: \"\".concat(dimensionId, \"-\").concat(labels.noneSelected),\n    style: styles.item\n  }, labels.noneSelected);\n\n  const itemDisplayNames = getItemDisplayNames();\n  const warningLabel = getWarningLabel();\n  const hasNoItemsLabel = !itemDisplayNames.length && !warningLabel;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    style: styles.list\n  }, warningLabel && renderWarningLabel(warningLabel), lockedLabel && renderLockedLabel(), itemDisplayNames && renderItems(itemDisplayNames), hasNoItemsLabel && renderNoItemsLabel());\n};\nTooltipContent.propTypes = {\n  dimensionId: PropTypes.string.isRequired,\n  metadata: PropTypes.object.isRequired,\n  displayLimitedAmount: PropTypes.bool,\n  itemIds: PropTypes.array,\n  lockedLabel: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  metadata: sGetMetadata(state)\n});\n\nexport default connect(mapStateToProps)(TooltipContent);","const DATA_TYPE_TEXT = 'text';\nexport const setDataTransfer = (e, source) => {\n  e.dataTransfer.setData(DATA_TYPE_TEXT, JSON.stringify({\n    dimensionId: e.target.dataset.dimensionid,\n    source\n  }));\n};\nexport const decodeDataTransfer = e => JSON.parse(e.dataTransfer.getData(DATA_TYPE_TEXT));","import React from 'react';\n\nconst DynamicDimensionIcon = () => {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 16 16\",\n    version: \"1.1\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Exp\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard\",\n    transform: \"translate(-80.000000, -9.000000)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"icon_dimension_new\",\n    transform: \"translate(80.000000, 9.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"frame\",\n    x: \"0\",\n    y: \"0\",\n    width: \"16\",\n    height: \"16\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"module\",\n    transform: \"translate(4.000000, 4.000000)\",\n    stroke: \"#000000\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.33209728,1.1742111 L3.16308174,0.0641666694 C3.37911767,-0.0213888898 3.61963794,-0.0213888898 3.83567387,0.0641666694 L6.66665833,1.1742111 C6.87300668,1.26220739 7.00497003,1.467 6.99984343,1.69127776 L6.99984343,5.30887771 C7.00517859,5.53285411 6.87376309,5.73756106 6.66790272,5.82594437 L3.83691826,6.93629991 C3.62076407,7.02123336 3.38048032,7.02123336 3.16432613,6.93629991 L0.333341668,5.82594437 C0.126993317,5.73794808 -0.00497002591,5.53315547 0.000156574133,5.30887771 L0.000156574133,1.69127776 C-0.00517858533,1.46730136 0.126236906,1.26259441 0.33209728,1.1742111 Z\",\n    id: \"Shape\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.5,2.72795833 L0.322,1.48195833\",\n    id: \"Shape\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.5,2.72795833 L6.678,1.48195833\",\n    id: \"Shape\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.5,6.78125 L3.5,2.72795833\",\n    id: \"Shape\"\n  }))))));\n};\n\nexport default DynamicDimensionIcon;","import { colors, theme } from '@dhis2/ui'; // Layout\n\nexport const LAYOUT_HEIGHT = '78px'; // Axis\n\nexport const AXIS_PADDING = '4px 4px 2px 6px';\nexport const AXIS_LABEL_PADDING = '2px 0px 0px 4px';\nexport const AXIS_BORDER_COLOR = colors.grey300;\nexport const AXIS_BORDER_STYLE = 'solid';\nexport const AXIS_BORDER_WIDTH = '0px 0px 1px 1px';\nexport const AXIS_BACKGROUND_COLOR = colors.white; // Chip\n\nexport const CHIP_COLOR = colors.grey900;\nexport const CHIP_FONT_WEIGHT = 400;\nexport const CHIP_FONT_SIZE = '14px';\nexport const CHIP_BACKGROUND_COLOR = theme.secondary200;\nexport const CHIP_HEIGHT = '14px';\nexport const CHIP_MARGIN = '4px';\nexport const CHIP_PADDING = '1px 6px';\nexport const CHIP_BORDER_RADIUS = '2px';","import { colors } from '@dhis2/ui';\nimport * as layoutStyle from './style';\nconst baseChip = {\n  padding: layoutStyle.CHIP_PADDING,\n  fontSize: layoutStyle.CHIP_FONT_SIZE,\n  fontWeight: layoutStyle.CHIP_FONT_WEIGHT,\n  color: layoutStyle.CHIP_COLOR,\n  cursor: 'pointer',\n  minHeight: 24,\n  userSelect: 'none'\n};\nexport const styles = {\n  chipWrapper: {\n    display: 'flex',\n    margin: layoutStyle.CHIP_MARGIN,\n    backgroundColor: layoutStyle.CHIP_BACKGROUND_COLOR,\n    borderRadius: layoutStyle.CHIP_BORDER_RADIUS,\n    alignItems: 'center',\n    maxWidth: '400px'\n  },\n  chip: { ...baseChip,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  chipEmpty: {\n    backgroundColor: colors.grey300\n  },\n  fixedDimensionIcon: {\n    paddingRight: '6px'\n  },\n  leftIconWrapper: {\n    paddingRight: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  rightIconWrapper: {\n    paddingLeft: '6px'\n  },\n  label: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  }\n};\nstyles.chipLeft = { ...baseChip,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: 'flex',\n  borderTopRightRadius: '0px',\n  borderBottomRightRadius: '0px',\n  alignItems: 'center'\n};\nstyles.chipRight = { ...baseChip,\n  paddingLeft: '0px',\n  borderTopLeftRadius: '0px',\n  borderBottomLeftRadius: '0px'\n};","// TODO: Refactor chip to contain less logic\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Tooltip, IconLock16, IconWarningFilled16 } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPredefinedDimensionProp, getAxisMaxNumberOfItems, hasAxisTooManyItems, getDisplayNameByVisType, getAxisNameByLayoutType, getLayoutTypeByVisType, DIMENSION_ID_ASSIGNED_CATEGORIES, DIMENSION_PROP_NO_ITEMS, VIS_TYPE_SCATTER, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport TooltipContent from './TooltipContent';\nimport { setDataTransfer } from '../../modules/dnd';\nimport { sGetDimensions } from '../../reducers/dimensions';\nimport { sGetUiType } from '../../reducers/ui';\nimport DynamicDimensionIcon from '../../assets/DynamicDimensionIcon';\nimport { styles } from './styles/Chip.style';\nimport { sGetMetadata } from '../../reducers/metadata';\n\nconst Chip = ({\n  type,\n  dimensionId,\n  dimensionName,\n  axisId,\n  items,\n  onClick,\n  isLocked,\n  axisName,\n  metadata,\n  contextMenu\n}) => {\n  const id = Math.random().toString(36);\n  const dataTest = \"layout-chip-\".concat(dimensionId);\n  const LockIconWrapper = /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.rightIconWrapper,\n    \"data-test\": \"\".concat(dataTest, \"-lock-icon\")\n  }, /*#__PURE__*/React.createElement(IconLock16, null));\n  const WarningIconWrapper = /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.rightIconWrapper,\n    \"data-test\": \"\".concat(dataTest, \"-warning-icon\")\n  }, /*#__PURE__*/React.createElement(IconWarningFilled16, null));\n  const isSplitAxis = type === VIS_TYPE_SCATTER && dimensionId === DIMENSION_ID_DATA;\n\n  const getMaxNumberOfItems = () => getAxisMaxNumberOfItems(type, axisId);\n\n  const handleClick = () => {\n    if (!getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS)) {\n      onClick();\n    }\n  };\n\n  const getDragStartHandler = () => event => {\n    setDataTransfer(event, axisId);\n  };\n\n  const getWrapperStyles = () => ({ ...styles.chipWrapper,\n    ...(!getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS) && !items.length ? styles.chipEmpty : {})\n  });\n\n  const renderChipLabelSuffix = () => {\n    var _metadata$items$;\n\n    const numberOfItems = items.length;\n    const getItemsLabel = !!getMaxNumberOfItems() && numberOfItems > getMaxNumberOfItems() ? i18n.t(\"{{total}} of {{axisMaxNumberOfItems}} selected\", {\n      total: numberOfItems,\n      axisMaxNumberOfItems: getMaxNumberOfItems()\n    }) : isSplitAxis ? i18n.t(((_metadata$items$ = metadata[items[0]]) === null || _metadata$items$ === void 0 ? void 0 : _metadata$items$.name) || '') : i18n.t('{{total}} selected', {\n      total: numberOfItems\n    });\n    return \"\".concat(items.length > 0 ? \": \".concat(getItemsLabel) : '');\n  };\n\n  const renderChipIcon = () => {\n    const Icon = getPredefinedDimensionProp(dimensionId, 'icon');\n    return Icon ? /*#__PURE__*/React.createElement(Icon, {\n      style: styles.fixedDimensionIcon\n    }) : /*#__PURE__*/React.createElement(DynamicDimensionIcon, {\n      style: styles.dynamicDimensionIcon\n    });\n  };\n\n  const renderTooltipContent = () => {\n    const activeItemIds = getMaxNumberOfItems() ? items.slice(0, getMaxNumberOfItems()) : items;\n    const lockedLabel = isLocked ? i18n.t(\"{{dimensionName}} is locked to {{axisName}} for {{visTypeName}}\", {\n      dimensionName: dimensionName,\n      axisName: axisName || getAxisNameByLayoutType(axisId, getLayoutTypeByVisType(type)),\n      visTypeName: getDisplayNameByVisType(type)\n    }) : null;\n    return /*#__PURE__*/React.createElement(TooltipContent, {\n      dimensionId: dimensionId,\n      itemIds: activeItemIds,\n      lockedLabel: lockedLabel,\n      displayLimitedAmount: items.length > activeItemIds.length\n    });\n  };\n\n  const renderChipContent = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.leftIconWrapper\n  }, renderChipIcon()), /*#__PURE__*/React.createElement(\"span\", {\n    style: !isSplitAxis ? styles.label : {}\n  }, dimensionName), /*#__PURE__*/React.createElement(\"span\", {\n    style: isSplitAxis ? styles.label : {}\n  }, renderChipLabelSuffix()), hasAxisTooManyItems(type, axisId, items.length) && WarningIconWrapper, isLocked && LockIconWrapper);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: getWrapperStyles(),\n    \"data-dimensionid\": dimensionId,\n    draggable: !isLocked,\n    onDragStart: getDragStartHandler()\n  }, dimensionId !== DIMENSION_ID_ASSIGNED_CATEGORIES ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: renderTooltipContent(),\n    placement: \"bottom\"\n  }, ({\n    ref,\n    onMouseOver,\n    onMouseOut\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    id: id,\n    style: styles.chipLeft,\n    onClick: handleClick,\n    ref: ref,\n    onMouseOver: onMouseOver,\n    onMouseOut: onMouseOut\n  }, renderChipContent())) : /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    style: styles.chipLeft,\n    \"data-test\": dataTest,\n    onClick: handleClick\n  }, renderChipContent()), contextMenu && /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.chipRight\n  }, \" \", contextMenu));\n};\n\nChip.propTypes = {\n  axisId: PropTypes.string.isRequired,\n  dimensionId: PropTypes.string.isRequired,\n  dimensionName: PropTypes.string.isRequired,\n  isLocked: PropTypes.bool.isRequired,\n  metadata: PropTypes.object.isRequired,\n  type: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  axisName: PropTypes.string,\n  contextMenu: PropTypes.object,\n  items: PropTypes.array\n};\nChip.defaultProps = {\n  items: []\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  dimensionName: (sGetDimensions(state)[ownProps.dimensionId] || {}).name,\n  type: sGetUiType(state),\n  metadata: sGetMetadata(state)\n});\n\nexport default connect(mapStateToProps)(Chip);","import { colors } from '@dhis2/ui';\nimport * as layoutStyle from '../../styles/style';\nexport default {\n  axisContainer: {\n    display: 'flex',\n    backgroundColor: layoutStyle.AXIS_BACKGROUND_COLOR,\n    borderColor: layoutStyle.AXIS_BORDER_COLOR,\n    borderStyle: layoutStyle.AXIS_BORDER_STYLE,\n    borderWidth: layoutStyle.AXIS_BORDER_WIDTH,\n    padding: layoutStyle.AXIS_PADDING\n  },\n  axisContainerLeft: {\n    borderLeftWidth: 0\n  },\n  label: {\n    minWidth: 55,\n    maxWidth: 55,\n    padding: '2px 0px 0px 0px',\n    fontSize: 11,\n    color: colors.grey700,\n    userSelect: 'none',\n    letterSpacing: '0.2px'\n  }\n}; // TODO: Refactor this file and all other affected files (DefaultLayout + everything in ../../styles/) to css modules","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MoreHorizontalIcon = ({\n  style\n}) => {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    style: { ...style\n    },\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"22\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n  }));\n};\n\nMoreHorizontalIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default MoreHorizontalIcon;","import { colors } from '@dhis2/ui';\nexport const styles = {\n  icon: {\n    width: 22,\n    height: 22,\n    background: 'none',\n    color: colors.black,\n    padding: 0\n  }\n};","import PropTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './styles/IconButton.module.css';\n\nconst IconButton = ({\n  children,\n  dataTest,\n  disabled,\n  name,\n  onBlur,\n  onClick,\n  onFocus,\n  style,\n  ariaOwns,\n  ariaHaspopup\n}) => /*#__PURE__*/React.createElement(\"button\", {\n  className: styles.iconButton,\n  \"data-test\": dataTest,\n  disabled: disabled,\n  name: name,\n  onBlur: onBlur,\n  onClick: onClick,\n  onFocus: onFocus,\n  style: style,\n  \"aria-owns\": ariaOwns,\n  \"aria-haspopup\": ariaHaspopup\n}, children);\n\nIconButton.propTypes = {\n  ariaHaspopup: PropTypes.bool,\n  ariaOwns: PropTypes.string,\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  style: PropTypes.object,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default IconButton;","import React, { useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DimensionMenu, DIMENSION_ID_ASSIGNED_CATEGORIES } from '@dhis2/analytics';\nimport { Layer, Popper } from '@dhis2/ui';\nimport * as fromReducers from '../../reducers';\nimport MoreHorizontalIcon from '../../assets/MoreHorizontalIcon';\nimport { styles } from './styles/Menu.style';\nimport { acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui';\nimport IconButton from '../IconButton/IconButton';\n\nconst ChipMenu = ({\n  assignedCategoriesItemHandler,\n  axisItemHandler,\n  currentAxisId,\n  dimensionId,\n  id,\n  layoutHasAssignedCategories,\n  numberOfDimensionItems,\n  removeItemHandler,\n  visType\n}) => {\n  const buttonRef = useRef();\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n\n  const toggleMenu = () => setMenuIsOpen(!menuIsOpen);\n\n  const getMenuId = () => \"menu-for-\".concat(id);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    ariaOwns: menuIsOpen ? getMenuId() : null,\n    ariaHaspopup: true,\n    onClick: toggleMenu,\n    style: styles.icon,\n    dataTest: \"layout-chip-menu-button-\".concat(dimensionId)\n  }, /*#__PURE__*/React.createElement(MoreHorizontalIcon, {\n    style: styles.icon\n  }))), menuIsOpen && /*#__PURE__*/React.createElement(Layer, {\n    position: \"fixed\",\n    level: 2000,\n    onClick: toggleMenu\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: buttonRef,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(DimensionMenu, {\n    dimensionId: dimensionId,\n    currentAxisId: currentAxisId,\n    visType: visType,\n    numberOfDimensionItems: numberOfDimensionItems,\n    isAssignedCategoriesInLayout: layoutHasAssignedCategories,\n    assignedCategoriesItemHandler: destination => assignedCategoriesItemHandler(layoutHasAssignedCategories, destination),\n    axisItemHandler: axisItemHandler,\n    removeItemHandler: removeItemHandler,\n    onClose: toggleMenu,\n    dataTest: 'layout-chip-menu-dimension-menu'\n  }))));\n};\n\nChipMenu.propTypes = {\n  assignedCategoriesItemHandler: PropTypes.func,\n  axisItemHandler: PropTypes.func,\n  currentAxisId: PropTypes.string,\n  dimensionId: PropTypes.string,\n  id: PropTypes.string,\n  layoutHasAssignedCategories: PropTypes.bool,\n  numberOfDimensionItems: PropTypes.number,\n  removeItemHandler: PropTypes.func,\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => {\n  return {\n    layoutHasAssignedCategories: fromReducers.fromUi.sLayoutHasAssignedCategories(state)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  axisItemHandler: ({\n    dimensionId,\n    axisId\n  }) => {\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }));\n  },\n  removeItemHandler: dimensionId => {\n    dispatch(acRemoveUiLayoutDimensions(dimensionId));\n  },\n  assignedCategoriesItemHandler: (layoutHasAssignedCategories, axisId) => {\n    dispatch(layoutHasAssignedCategories ? acRemoveUiLayoutDimensions(DIMENSION_ID_ASSIGNED_CATEGORIES) : acAddUiLayoutDimensions({\n      [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        axisId\n      }\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChipMenu);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport { getAxisNameByLayoutType, getLayoutTypeByVisType, isDimensionLocked } from '@dhis2/analytics';\nimport Chip from '../Chip';\nimport { sGetUi, sGetUiItemsByDimension, sGetUiLayout, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiActiveModalDialog } from '../../../actions/ui';\nimport styles from './styles/DefaultAxis.style';\nimport stylesModule from './styles/DefaultAxis.module.css';\nimport ChipMenu from '../ChipMenu';\n\nclass Axis extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onDragOver\", e => {\n      e.preventDefault();\n    });\n  }\n\n  render() {\n    const {\n      axisId,\n      axis,\n      style,\n      type,\n      getOpenHandler,\n      getItemsByDimension\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: axisId,\n      \"data-test\": \"\".concat(axisId, \"-axis\"),\n      style: { ...styles.axisContainer,\n        ...style\n      },\n      onDragOver: this.onDragOver\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.label\n    }, this.props.label || getAxisNameByLayoutType(axisId, getLayoutTypeByVisType(type))), /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: axisId,\n      direction: \"horizontal\"\n    }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: stylesModule.content,\n      ref: provided.innerRef\n    }, provided.droppableProps), axis.map((dimensionId, index) => {\n      const key = \"\".concat(axisId, \"-\").concat(dimensionId);\n      const isLocked = isDimensionLocked(type, dimensionId);\n      const items = getItemsByDimension(dimensionId);\n      return /*#__PURE__*/React.createElement(Draggable, {\n        key: key,\n        draggableId: key,\n        index: index,\n        isDragDisabled: isLocked\n      }, provided => /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: provided.innerRef\n      }, provided.draggableProps, provided.dragHandleProps), /*#__PURE__*/React.createElement(Chip, {\n        onClick: getOpenHandler(dimensionId),\n        axisId: axisId,\n        dimensionId: dimensionId,\n        isLocked: isLocked,\n        items: items,\n        contextMenu: !isLocked ? /*#__PURE__*/React.createElement(ChipMenu, {\n          dimensionId: dimensionId,\n          currentAxisId: axisId,\n          visType: type,\n          numberOfDimensionItems: items.length\n        }) : null\n      })));\n    }), provided.placeholder)));\n  }\n\n}\n\nAxis.propTypes = {\n  axis: PropTypes.array,\n  axisId: PropTypes.string,\n  classes: PropTypes.object,\n  getItemsByDimension: PropTypes.func,\n  getMoveHandler: PropTypes.func,\n  getOpenHandler: PropTypes.func,\n  getRemoveHandler: PropTypes.func,\n  label: PropTypes.string,\n  layout: PropTypes.object,\n  style: PropTypes.object,\n  type: PropTypes.string,\n  ui: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  ui: sGetUi(state),\n  type: sGetUiType(state),\n  layout: sGetUiLayout(state),\n  getItemsByDimension: dimensionId => sGetUiItemsByDimension(state, dimensionId) || []\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOpenHandler: dimensionId => () => dispatch(acSetUiActiveModalDialog(dimensionId))\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => ({ ...stateProps,\n  ...dispatchProps,\n  ...ownProps,\n  axis: stateProps.ui.layout[ownProps.axisId]\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(Axis);","import { LAYOUT_HEIGHT } from '../../styles/style'; // Axis\n\nexport const FILTER_AXIS_WIDTH = '50%';\nexport const DIMENSION_AXIS_CONTENT_HEIGHT = '36px'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = \"\".concat(100 - parseInt(FILTER_AXIS_WIDTH, 10), \"%\");\nexport default {\n  ct: {\n    display: 'flex',\n    minHeight: LAYOUT_HEIGHT\n  },\n  axisGroup: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  },\n  columns: {\n    flexBasis: '50%'\n  },\n  rows: {\n    flexBasis: '50%'\n  },\n  filters: {\n    flexBasis: '100%'\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from './DefaultAxis';\nimport styles from './styles/DefaultLayout.style';\nimport defaultAxisStyles from './styles/DefaultAxis.style';\n\nconst Layout = () => /*#__PURE__*/React.createElement(\"div\", {\n  id: \"layout-ct\",\n  style: styles.ct\n}, /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-1\",\n  style: { ...styles.axisGroup,\n    ...styles.axisGroupLeft\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_COLUMNS,\n  style: { ...styles.columns,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n}), /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_ROWS,\n  style: { ...styles.rows,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n})), /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-2\",\n  style: { ...styles.axisGroup,\n    ...styles.axisGroupRight\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_FILTERS,\n  style: styles.filters\n})));\n\nLayout.displayName = 'Layout';\nexport default Layout;","export default {\n  content: {\n    flex: '1 1 0%'\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getAxisNameByLayoutType, LAYOUT_TYPE_YEAR_OVER_YEAR } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport { sGetUiYearOverYearSeries, sGetUiYearOverYearCategory } from '../../../reducers/ui';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport YearOverYearAxisStyles from './styles/YearOverYearAxis.style';\n\nconst YearOverYearAxis = props => /*#__PURE__*/React.createElement(\"div\", {\n  id: props.axisId,\n  \"data-test\": \"\".concat(props.axisId, \"-axis\"),\n  style: { ...defaultAxisStyles.axisContainer,\n    ...props.style\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"label\",\n  style: defaultAxisStyles.label\n}, getAxisNameByLayoutType(props.axisId, LAYOUT_TYPE_YEAR_OVER_YEAR)), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"content\",\n  style: { ...defaultAxisStyles.content,\n    ...YearOverYearAxisStyles.content\n  }\n}, props.children));\n\nYearOverYearAxis.propTypes = {\n  axisId: PropTypes.string,\n  children: PropTypes.node,\n  style: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  yearOverYearSeries: sGetUiYearOverYearSeries(state),\n  yearOverYearCategory: sGetUiYearOverYearCategory(state)\n});\n\nexport default connect(mapStateToProps)(YearOverYearAxis);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { MultiSelect, MultiSelectOption, SingleSelect, SingleSelectOption } from '@dhis2/ui';\n\nconst SinglePeriodSelector = ({\n  options,\n  selected,\n  onChange,\n  dataTest\n}) => /*#__PURE__*/React.createElement(SingleSelect, {\n  onChange: onChange,\n  selected: selected,\n  placeholder: i18n.t('Select a period'),\n  dense: true,\n  dataTest: dataTest\n}, options.map(option => /*#__PURE__*/React.createElement(SingleSelectOption, {\n  key: option.id,\n  value: option.id,\n  label: option.getName(),\n  dataTest: \"\".concat(dataTest, \"-option-\").concat(option.id)\n})));\n\nSinglePeriodSelector.propTypes = {\n  dataTest: PropTypes.string,\n  options: PropTypes.array,\n  selected: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst MultiPeriodSelector = ({\n  options,\n  selected,\n  onChange,\n  dataTest\n}) => /*#__PURE__*/React.createElement(MultiSelect, {\n  onChange: onChange,\n  selected: selected,\n  placeholder: i18n.t('Select years'),\n  dense: true,\n  dataTest: dataTest\n}, options.map(option => /*#__PURE__*/React.createElement(MultiSelectOption, {\n  key: option.id,\n  value: option.id,\n  label: option.getName()\n})));\n\nMultiPeriodSelector.propTypes = {\n  dataTest: PropTypes.string,\n  options: PropTypes.array,\n  selected: PropTypes.array,\n  onChange: PropTypes.func\n};\n\nconst YearOverYearSelect = ({\n  multiple,\n  value,\n  ...props\n}) => multiple === 'true' ? /*#__PURE__*/React.createElement(MultiPeriodSelector, _extends({\n  selected: value\n}, props)) : /*#__PURE__*/React.createElement(SinglePeriodSelector, _extends({\n  selected: value\n}, props));\n\nYearOverYearSelect.propTypes = {\n  dataTest: PropTypes.string,\n  multiple: PropTypes.string,\n  options: PropTypes.array,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  onChange: PropTypes.func\n};\nexport default YearOverYearSelect;","import { FILTER_AXIS_WIDTH } from '../../DefaultLayout/styles/DefaultLayout.style'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = \"\".concat(100 - parseInt(FILTER_AXIS_WIDTH, 10), \"%\");\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import i18n from '@dhis2/d2-i18n'; // Fixed years generator\n\nconst getFixedYears = len => {\n  let year = new Date().getFullYear();\n  return new Array(len).fill(null).map(() => {\n    const yearString = String(year--);\n    return {\n      id: yearString,\n      getName: () => yearString\n    };\n  });\n}; // Options for the year on year series dropdown\n\n\nexport const seriesOptions = [{\n  id: 'THIS_YEAR',\n  getName: () => i18n.t('This year')\n}, {\n  id: 'LAST_YEAR',\n  getName: () => i18n.t('Last year')\n}, {\n  id: 'LAST_5_YEARS',\n  getName: () => i18n.t('Last 5 years')\n}, ...getFixedYears(10)]; // Options for the year on year category dropdown\n\nexport const categoryOptions = [{\n  id: 'LAST_3_DAYS',\n  getName: () => i18n.t('Last 3 days')\n}, {\n  id: 'LAST_7_DAYS',\n  getName: () => i18n.t('Last 7 days')\n}, {\n  id: 'LAST_14_DAYS',\n  getName: () => i18n.t('Last 14 days')\n}, {\n  id: 'LAST_4_WEEKS',\n  getName: () => i18n.t('Last 4 weeks')\n}, {\n  id: 'LAST_12_WEEKS',\n  getName: () => i18n.t('Last 12 weeks')\n}, {\n  id: 'LAST_52_WEEKS',\n  getName: () => i18n.t('Last 52 weeks')\n}, {\n  id: 'WEEKS_THIS_YEAR',\n  getName: () => i18n.t('Weeks per year')\n}, {\n  id: 'LAST_3_MONTHS',\n  getName: () => i18n.t('Last 3 months')\n}, {\n  id: 'LAST_6_MONTHS',\n  getName: () => i18n.t('Last 6 months')\n}, {\n  id: 'LAST_12_MONTHS',\n  getName: () => i18n.t('Last 12 months')\n}, {\n  id: 'MONTHS_THIS_YEAR',\n  getName: () => i18n.t('Months per year')\n}, {\n  id: 'LAST_6_BIMONTHS',\n  getName: () => i18n.t('Last 6 bimonths')\n}, {\n  id: 'BIMONTHS_THIS_YEAR',\n  getName: () => i18n.t('Bimonths per year')\n}, {\n  id: 'LAST_4_QUARTERS',\n  getName: () => i18n.t('Last 4 quarters')\n}, {\n  id: 'QUARTERS_THIS_YEAR',\n  getName: () => i18n.t('Quarters per year')\n}, {\n  id: 'LAST_2_SIXMONTHS',\n  getName: () => i18n.t('Last 2 six-months')\n}];","import React from 'react';\nimport { connect } from 'react-redux';\nimport { AXIS_ID_FILTERS, AXIS_ID_COLUMNS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport YearOverYearAxis from './YearOverYearAxis';\nimport YearOverYearSelect from './YearOverYearSelect';\nimport YearOverYearLayoutStyles from './styles/YearOverYearLayout.style';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport { sGetUiYearOverYearSeries, sGetUiYearOverYearCategory } from '../../../reducers/ui';\nimport { acSetUiYearOverYearSeries, acSetUiYearOverYearCategory } from '../../../actions/ui';\nimport { seriesOptions, categoryOptions } from '../../../modules/yearOverYear';\n\nconst Layout = props => /*#__PURE__*/React.createElement(\"div\", {\n  id: \"layout-ct\",\n  style: defaultLayoutStyles.ct\n}, /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-1\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...YearOverYearLayoutStyles.axisGroupLeft\n  }\n}, /*#__PURE__*/React.createElement(YearOverYearAxis, {\n  axisId: AXIS_ID_COLUMNS,\n  style: { ...defaultLayoutStyles.columns,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n}, /*#__PURE__*/React.createElement(YearOverYearSelect, {\n  multiple: \"true\",\n  value: props.yearOverYearSeries,\n  onChange: props.onSeriesChange,\n  options: seriesOptions,\n  dataTest: \"yoy-layout-\".concat(AXIS_ID_COLUMNS, \"-select\")\n})), /*#__PURE__*/React.createElement(YearOverYearAxis, {\n  axisId: AXIS_ID_ROWS,\n  style: { ...defaultLayoutStyles.rows,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n}, /*#__PURE__*/React.createElement(YearOverYearSelect, {\n  value: props.yearOverYearCategory[0],\n  onChange: props.onCategoryChange,\n  options: categoryOptions,\n  dataTest: \"yoy-layout-\".concat(AXIS_ID_ROWS, \"-select\")\n}))), /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-2\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...YearOverYearLayoutStyles.axisGroupRight\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_FILTERS,\n  style: defaultLayoutStyles.filters\n})));\n\nLayout.displayName = 'Layout';\nLayout.propTypes = {\n  yearOverYearCategory: PropTypes.array,\n  yearOverYearSeries: PropTypes.array,\n  onCategoryChange: PropTypes.func,\n  onSeriesChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  yearOverYearSeries: sGetUiYearOverYearSeries(state),\n  yearOverYearCategory: sGetUiYearOverYearCategory(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onSeriesChange: ({\n    selected\n  }) => {\n    dispatch(acSetUiYearOverYearSeries(selected));\n  },\n  onCategoryChange: ({\n    selected\n  }) => {\n    dispatch(acSetUiYearOverYearCategory(selected));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);","// Axis\nexport const FILTER_AXIS_WIDTH = '70%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = \"\".concat(100 - parseInt(FILTER_AXIS_WIDTH, 10), \"%\");\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport pieLayoutStyles from './styles/PieLayout.style';\n\nconst Layout = () => /*#__PURE__*/React.createElement(\"div\", {\n  id: \"layout-ct\",\n  style: defaultLayoutStyles.ct\n}, /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-1\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...pieLayoutStyles.axisGroupLeft\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_COLUMNS,\n  style: { ...defaultLayoutStyles.filters,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n})), /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-2\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...pieLayoutStyles.axisGroupRight\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_FILTERS,\n  style: defaultLayoutStyles.filters\n})));\n\nexport default Layout;","// Axis\nexport const FILTER_AXIS_WIDTH = '50%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = \"\".concat(100 - parseInt(FILTER_AXIS_WIDTH, 10), \"%\");\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport pivotTableLayoutStyles from './styles/PivotTableLayout.style';\n\nconst Layout = () => /*#__PURE__*/React.createElement(\"div\", {\n  id: \"layout-ct\",\n  style: defaultLayoutStyles.ct\n}, /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-1\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...pivotTableLayoutStyles.axisGroupLeft\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_COLUMNS,\n  style: { ...defaultLayoutStyles.columns,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n}), /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_ROWS,\n  style: { ...defaultLayoutStyles.rows,\n    ...defaultAxisStyles.axisContainerLeft\n  }\n})), /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-2\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...pivotTableLayoutStyles.axisGroupRight\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_FILTERS,\n  style: defaultLayoutStyles.filters\n})));\n\nLayout.displayName = 'Layout';\nexport default Layout;","import { colors } from '@dhis2/ui';\nimport * as layoutStyle from '../../styles/style';\nexport default {\n  axisContainer: {\n    display: 'flex',\n    backgroundColor: layoutStyle.AXIS_BACKGROUND_COLOR,\n    borderColor: layoutStyle.AXIS_BORDER_COLOR,\n    borderStyle: layoutStyle.AXIS_BORDER_STYLE,\n    borderWidth: layoutStyle.AXIS_BORDER_WIDTH,\n    padding: layoutStyle.AXIS_PADDING\n  },\n  axisContainerLeft: {\n    borderLeftWidth: 0\n  },\n  label: {\n    minWidth: 55,\n    maxWidth: 55,\n    padding: '2px 0px 0px 0px',\n    fontSize: 11,\n    color: colors.grey700,\n    userSelect: 'none',\n    letterSpacing: '0.2px',\n    display: 'flex',\n    flexDirection: 'column'\n  }\n}; // TODO: Refactor this file and all other affected files (DefaultLayout + everything in ../../styles/) to css modules","import React from 'react';\n\nconst VerticalIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"12\",\n  viewBox: \"0 0 12 12\",\n  width: \"12\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m0 11h12v1h-12z\",\n  fill: \"#d5dde5\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m0 0h1v12h-1z\",\n  fill: \"#404b5a\"\n})));\n\nexport default VerticalIcon;","import React from 'react';\n\nconst HorizontalIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"12\",\n  viewBox: \"0 0 12 12\",\n  width: \"12\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m0 0h1v12h-1z\",\n  fill: \"#d5dde5\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m0 11h12v1h-12z\",\n  fill: \"#404b5a\"\n})));\n\nexport default HorizontalIcon;","import React, { useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Popper, Layer, FlyoutMenu, Tooltip, MenuItem, MenuDivider } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { AXIS_ID_COLUMNS, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport Chip from '../Chip';\nimport { sGetUi, sGetUiLayout } from '../../../reducers/ui';\nimport { acSetUiActiveModalDialog } from '../../../actions/ui';\nimport styles from './styles/ScatterAxis.style';\nimport IconButton from '../../IconButton/IconButton';\nimport MoreHorizontalIcon from '../../../assets/MoreHorizontalIcon';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../../../modules/ui';\nimport { acSetUiItemAttributes, acRemoveUiItemAttributes } from '../../../actions/ui';\nimport { sGetUiItemsByAttribute } from '../../../reducers/ui';\nimport VerticalIcon from '../../../assets/VerticalIcon';\nimport HorizontalIcon from '../../../assets/HorizontalIcon';\n\nconst Axis = ({\n  label,\n  style,\n  getOpenHandler,\n  items,\n  itemAttribute,\n  getItemsByAttribute,\n  setItemAttributes,\n  removeItemAttributes\n}) => {\n  const buttonRef = useRef();\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n\n  const toggleMenu = () => setDialogIsOpen(!dialogIsOpen);\n\n  const destination = itemAttribute === ITEM_ATTRIBUTE_VERTICAL ? ITEM_ATTRIBUTE_HORIZONTAL : ITEM_ATTRIBUTE_VERTICAL;\n\n  const onSwap = () => {\n    toggleMenu();\n    const verticalItems = getItemsByAttribute(ITEM_ATTRIBUTE_VERTICAL);\n    const horizontalItems = getItemsByAttribute(ITEM_ATTRIBUTE_HORIZONTAL);\n    removeItemAttributes(DIMENSION_ID_DATA, verticalItems, ITEM_ATTRIBUTE_VERTICAL);\n    removeItemAttributes(DIMENSION_ID_DATA, horizontalItems, ITEM_ATTRIBUTE_HORIZONTAL);\n    setItemAttributes(DIMENSION_ID_DATA, horizontalItems, ITEM_ATTRIBUTE_VERTICAL);\n    setItemAttributes(DIMENSION_ID_DATA, verticalItems, ITEM_ATTRIBUTE_HORIZONTAL);\n  };\n\n  const renderChipMenu = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    ariaOwns: dialogIsOpen ? \"menu-for-\".concat(itemAttribute) : null,\n    ariaHaspopup: true,\n    onClick: toggleMenu,\n    style: styles.icon,\n    dataTest: \"layout-chip-menu-button-\".concat(itemAttribute)\n  }, /*#__PURE__*/React.createElement(MoreHorizontalIcon, {\n    style: styles.icon\n  }))), dialogIsOpen && /*#__PURE__*/React.createElement(Layer, {\n    position: \"fixed\",\n    level: 2000,\n    onClick: toggleMenu\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: buttonRef,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, {\n    dense: true,\n    dataTest: 'layout-chip-menu-dimension-menu'\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    key: \"assigned-categories-item-\".concat(DIMENSION_ID_DATA),\n    content: i18n.t('Not available for Scatter'),\n    \"aria-label\": \"disabled\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    disabled: true,\n    dense: true,\n    label: i18n.t('Add Assigned Categories'),\n    dataTest: \"layout-chip-menu-dimension-menu-item-co-menu\"\n  })), /*#__PURE__*/React.createElement(MenuDivider, {\n    dense: true,\n    key: 'assigned-categories-divider'\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    key: \"\".concat(itemAttribute, \"-to-\").concat(destination),\n    onClick: onSwap,\n    label: i18n.t(\"Swap with {{axisName}} axis\", {\n      axisName: destination === ITEM_ATTRIBUTE_VERTICAL ? i18n.t('vertical') : i18n.t('horizontal')\n    }),\n    dataTest: \"layout-chip-menu-dimension-menu-item-action-\".concat(itemAttribute, \"-to-\").concat(destination)\n  })))));\n\n  const renderIcon = () => itemAttribute === ITEM_ATTRIBUTE_VERTICAL ? /*#__PURE__*/React.createElement(VerticalIcon, null) : /*#__PURE__*/React.createElement(HorizontalIcon, null);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: label,\n    \"data-test\": \"\".concat(label, \"-axis\"),\n    style: { ...styles.axisContainer,\n      ...style\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.label\n  }, label, renderIcon()), /*#__PURE__*/React.createElement(Chip, {\n    axisId: AXIS_ID_COLUMNS,\n    axisName: label,\n    onClick: getOpenHandler(itemAttribute),\n    dimensionId: DIMENSION_ID_DATA,\n    items: items,\n    isLocked: true,\n    contextMenu: renderChipMenu()\n  }));\n};\n\nAxis.propTypes = {\n  getItemsByAttribute: PropTypes.func,\n  getOpenHandler: PropTypes.func,\n  itemAttribute: PropTypes.string,\n  items: PropTypes.array,\n  label: PropTypes.string,\n  removeItemAttributes: PropTypes.func,\n  setItemAttributes: PropTypes.func,\n  style: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  ui: sGetUi(state),\n  layout: sGetUiLayout(state),\n  getItemsByAttribute: attribute => sGetUiItemsByAttribute(state, attribute)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOpenHandler: dialogId => () => dispatch(acSetUiActiveModalDialog(dialogId)),\n  setItemAttributes: (dimensionId, itemIds, attribute) => dispatch(acSetUiItemAttributes({\n    dimensionId,\n    itemIds,\n    attribute\n  })),\n  removeItemAttributes: (dimensionId, itemIdsToRemove, attribute) => dispatch(acRemoveUiItemAttributes({\n    dimensionId,\n    itemIdsToRemove,\n    attribute\n  }))\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => ({ ...stateProps,\n  ...dispatchProps,\n  ...ownProps\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(Axis);","// Axis\nexport const FILTER_AXIS_WIDTH = '70%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = \"\".concat(100 - parseInt(FILTER_AXIS_WIDTH, 10), \"%\");\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { AXIS_ID_FILTERS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiItemsByAttribute } from '../../../reducers/ui';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport ScatterAxis from './ScatterAxis';\nimport scatterLayoutStyles from './styles/ScatterLayout.style';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../../../modules/ui';\n\nconst Layout = ({\n  getItemsByAttribute\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  id: \"layout-ct\",\n  style: defaultLayoutStyles.ct\n}, /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-1\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...scatterLayoutStyles.axisGroupLeft\n  }\n}, /*#__PURE__*/React.createElement(ScatterAxis, {\n  style: { ...defaultLayoutStyles.filters,\n    ...defaultAxisStyles.axisContainerLeft\n  },\n  itemAttribute: ITEM_ATTRIBUTE_VERTICAL,\n  items: getItemsByAttribute(ITEM_ATTRIBUTE_VERTICAL),\n  label: i18n.t('Vertical')\n}), /*#__PURE__*/React.createElement(ScatterAxis, {\n  style: defaultLayoutStyles.filters,\n  itemAttribute: ITEM_ATTRIBUTE_HORIZONTAL,\n  items: getItemsByAttribute(ITEM_ATTRIBUTE_HORIZONTAL),\n  label: i18n.t('Horizontal')\n})), /*#__PURE__*/React.createElement(\"div\", {\n  id: \"axis-group-2\",\n  style: { ...defaultLayoutStyles.axisGroup,\n    ...scatterLayoutStyles.axisGroupRight\n  }\n}, /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_ROWS,\n  style: { ...defaultLayoutStyles.filters\n  }\n}), /*#__PURE__*/React.createElement(DefaultAxis, {\n  axisId: AXIS_ID_FILTERS,\n  style: defaultLayoutStyles.filters\n})));\n\nLayout.propTypes = {\n  getItemsByAttribute: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  getItemsByAttribute: attribute => sGetUiItemsByAttribute(state, attribute)\n});\n\nexport default connect(mapStateToProps)(Layout);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { LAYOUT_TYPE_DEFAULT, LAYOUT_TYPE_PIE, LAYOUT_TYPE_YEAR_OVER_YEAR, LAYOUT_TYPE_PIVOT_TABLE, getLayoutTypeByVisType, LAYOUT_TYPE_SCATTER } from '@dhis2/analytics';\nimport DefaultLayout from './DefaultLayout/DefaultLayout';\nimport YearOverYearLayout from './YearOverYearLayout/YearOverYearLayout';\nimport PieLayout from './PieLayout/PieLayout';\nimport { sGetUiType } from '../../reducers/ui';\nimport PivotTableLayout from './PivotTableLayout/PivotTableLayout';\nimport ScatterLayout from './ScatterLayout/ScatterLayout';\nconst componentMap = {\n  [LAYOUT_TYPE_DEFAULT]: DefaultLayout,\n  [LAYOUT_TYPE_PIE]: PieLayout,\n  [LAYOUT_TYPE_YEAR_OVER_YEAR]: YearOverYearLayout,\n  [LAYOUT_TYPE_PIVOT_TABLE]: PivotTableLayout,\n  [LAYOUT_TYPE_SCATTER]: ScatterLayout\n};\n\nconst Layout = ({\n  visType\n}) => {\n  const layoutType = getLayoutTypeByVisType(visType);\n  const LayoutComponent = componentMap[layoutType];\n  return /*#__PURE__*/React.createElement(LayoutComponent, {\n    visType: visType\n  });\n};\n\nLayout.propTypes = {\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps, null)(Layout);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { CssVariables, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button } from '@dhis2/ui';\nimport DndContext from './DndContext';\nimport Snackbar from '../components/Snackbar/Snackbar';\nimport MenuBar from './MenuBar/MenuBar';\nimport TitleBar from './TitleBar/TitleBar';\nimport VisualizationTypeSelector from './VisualizationTypeSelector/VisualizationTypeSelector';\nimport DimensionsPanel from './DimensionsPanel/DimensionsPanel';\nimport Interpretations from './Interpretations/Interpretations';\nimport Visualization from './Visualization/Visualization';\nimport Layout from './Layout/Layout';\nimport * as fromReducers from '../reducers';\nimport * as fromActions from '../actions';\nimport history from '../modules/history';\nimport defaultMetadata from '../modules/metadata';\nimport { apiFetchAOFromUserDataStore, CURRENT_AO_KEY } from '../api/userDataStore';\nimport './App.css';\nimport './scrollbar.css';\nimport { getParentGraphMapFromVisualization } from '../modules/ui';\nimport { APPROVAL_LEVEL_OPTION_AUTH } from './VisualizationOptions/Options/ApprovalLevel';\nimport { sGetVisualization } from '../reducers/visualization';\nimport { STATE_DIRTY, getVisualizationState } from '../modules/visualization';\nexport class App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"unlisten\", null);\n\n    _defineProperty(this, \"apiObjectName\", 'visualization');\n\n    _defineProperty(this, \"state\", {\n      previousLocation: null,\n      initialLoadIsComplete: false,\n      locationToConfirm: false\n    });\n\n    _defineProperty(this, \"refetch\", location => {\n      if (!this.state.previousLocation) {\n        return true;\n      }\n\n      const id = location.pathname.slice(1).split('/')[0];\n      const prevId = this.state.previousLocation.slice(1).split('/')[0];\n\n      if (id !== prevId || this.state.previousLocation === location.pathname) {\n        return true;\n      }\n\n      return false;\n    });\n\n    _defineProperty(this, \"parseLocation\", location => {\n      const pathParts = location.pathname.slice(1).split('/');\n      const id = pathParts[0];\n      const interpretationId = pathParts[2];\n      return {\n        id,\n        interpretationId\n      };\n    });\n\n    _defineProperty(this, \"loadVisualization\", async location => {\n      const {\n        store\n      } = this.context;\n\n      if (location.pathname.length > 1) {\n        // /currentAnalyticalObject\n        // /${id}/\n        // /${id}/interpretation/${interpretationId}\n        const {\n          id,\n          interpretationId\n        } = this.parseLocation(location);\n        const urlContainsCurrentAOKey = id === CURRENT_AO_KEY;\n\n        if (urlContainsCurrentAOKey) {\n          const AO = await apiFetchAOFromUserDataStore();\n          this.props.addParentGraphMap(getParentGraphMapFromVisualization(AO)); // clear visualization and current\n          // to avoid leave them \"dirty\" when navigating to\n          // /currentAnalyticalObject from a previous saved AO\n\n          this.props.clearVisualization();\n          this.props.clearCurrent();\n          this.props.setUiFromVisualization(AO);\n          this.props.setCurrentFromUi(this.props.ui);\n        }\n\n        if (!urlContainsCurrentAOKey && this.refetch(location)) {\n          await store.dispatch(fromActions.tDoLoadVisualization({\n            id,\n            interpretationId,\n            ouLevels: this.props.ouLevels\n          }));\n        }\n\n        if (!interpretationId) {\n          store.dispatch(fromActions.fromUi.acClearUiInterpretation());\n        }\n      } else {\n        fromActions.clearVisualization(store.dispatch, store.getState);\n        fromActions.fromUi.acClearUiInterpretation(store.dispatch);\n      }\n\n      this.setState({\n        initialLoadIsComplete: true\n      });\n      this.setState({\n        previousLocation: location.pathname\n      });\n    });\n\n    _defineProperty(this, \"componentDidMount\", async () => {\n      const {\n        store\n      } = this.context;\n      const {\n        d2,\n        userSettings\n      } = this.props;\n      await store.dispatch(fromActions.fromSettings.tAddSettings(userSettings));\n      store.dispatch(fromActions.fromUser.acReceivedUser(d2.currentUser));\n      store.dispatch(fromActions.fromUser.tLoadUserAuthority(APPROVAL_LEVEL_OPTION_AUTH));\n      store.dispatch(fromActions.fromDimensions.tSetDimensions());\n      const rootOrgUnit = this.props.settings.rootOrganisationUnit;\n\n      if (rootOrgUnit && rootOrgUnit.id) {\n        store.dispatch(fromActions.fromMetadata.acAddMetadata({ ...defaultMetadata(),\n          [rootOrgUnit.id]: { ...rootOrgUnit,\n            path: \"/\".concat(rootOrgUnit.id)\n          }\n        }));\n      }\n\n      this.loadVisualization(this.props.location);\n      this.unlisten = history.listen(location => {\n        var _location$state, _location$state2, _location$state3;\n\n        const isSaving = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.isSaving;\n        const isOpening = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.isOpening;\n        const isResetting = (_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.isResetting;\n        const {\n          interpretationId\n        } = this.parseLocation(location);\n\n        if ( // currently editing\n        getVisualizationState(this.props.visualization, this.props.current) === STATE_DIRTY && // wanting to navigate elsewhere\n        this.state.previousLocation !== location.pathname && // currently *not* viewing an interpretation\n        !(this.props.interpretation.id || interpretationId) && // not saving\n        !isSaving) {\n          this.setState({\n            locationToConfirm: location\n          });\n        } else {\n          if (isSaving || isOpening || isResetting || this.state.previousLocation !== location.pathname) {\n            this.loadVisualization(location);\n          }\n\n          this.setState({\n            locationToConfirm: null\n          });\n        }\n      });\n      document.body.addEventListener('keyup', e => e.key === 'Enter' && e.ctrlKey === true && this.props.setCurrentFromUi(this.props.ui));\n      window.addEventListener('beforeunload', event => {\n        if (getVisualizationState(this.props.visualization, this.props.current) === STATE_DIRTY) {\n          event.preventDefault();\n          event.returnValue = i18n.t('You have unsaved changes.');\n        }\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.unlisten) {\n      this.unlisten();\n    }\n  }\n\n  getChildContext() {\n    return {\n      baseUrl: this.props.baseUrl,\n      i18n,\n      d2: this.props.d2,\n      dataEngine: this.props.dataEngine\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-visualizer-app flex-ct flex-dir-col\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"section-toolbar flex-ct\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-type\"\n    }, /*#__PURE__*/React.createElement(VisualizationTypeSelector, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-menubar flex-grow-1\"\n    }, /*#__PURE__*/React.createElement(MenuBar, {\n      apiObjectName: this.apiObjectName,\n      dataTest: 'app-menubar'\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"section-main flex-grow-1 flex-ct\"\n    }, /*#__PURE__*/React.createElement(DndContext, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-left\"\n    }, /*#__PURE__*/React.createElement(DimensionsPanel, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-center flex-grow-1 flex-basis-0 flex-ct flex-dir-col\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-center-layout\"\n    }, /*#__PURE__*/React.createElement(Layout, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-center-titlebar\"\n    }, /*#__PURE__*/React.createElement(TitleBar, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-center-canvas flex-grow-1\"\n    }, this.state.initialLoadIsComplete && /*#__PURE__*/React.createElement(Visualization, null)))), this.props.ui.rightSidebarOpen && this.props.current && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-right\"\n    }, /*#__PURE__*/React.createElement(Interpretations, {\n      type: this.apiObjectName,\n      id: this.props.current.id\n    })))), this.state.locationToConfirm && /*#__PURE__*/React.createElement(Modal, {\n      small: true,\n      dataTest: 'confirm-leave-modal'\n    }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Discard unsaved changes?')), /*#__PURE__*/React.createElement(ModalContent, null, i18n.t('Are you sure you want to leave this visualization? Any unsaved changes will be lost.')), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n      end: true\n    }, /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      onClick: () => {\n        this.setState({\n          locationToConfirm: null\n        });\n        history.goBack();\n      },\n      dataTest: 'confirm-leave-modal-option-cancel'\n    }, i18n.t('No, cancel')), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        this.loadVisualization(this.state.locationToConfirm);\n        this.setState({\n          locationToConfirm: null\n        });\n      },\n      primary: true,\n      dataTest: 'confirm-leave-modal-option-confirm'\n    }, i18n.t('Yes, leave'))))), /*#__PURE__*/React.createElement(Snackbar, null), /*#__PURE__*/React.createElement(CssVariables, {\n      colors: true,\n      spacers: true\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  settings: fromReducers.fromSettings.sGetSettings(state),\n  current: fromReducers.fromCurrent.sGetCurrent(state),\n  interpretation: fromReducers.fromUi.sGetUiInterpretation(state),\n  ui: fromReducers.fromUi.sGetUi(state),\n  visualization: sGetVisualization(state),\n  snackbar: fromReducers.fromSnackbar.sGetSnackbar(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentFromUi: ui => dispatch(fromActions.fromCurrent.acSetCurrentFromUi(ui)),\n  clearVisualization: () => dispatch(fromActions.fromVisualization.acClear()),\n  clearCurrent: () => dispatch(fromActions.fromCurrent.acClear()),\n  setUiFromVisualization: visualization => dispatch(fromActions.fromUi.acSetUiFromVisualization(visualization)),\n  addParentGraphMap: parentGraphMap => dispatch(fromActions.fromUi.acAddParentGraphMap(parentGraphMap)),\n  clearSnackbar: () => dispatch(fromActions.fromSnackbar.acClearSnackbar())\n});\n\nApp.contextTypes = {\n  store: PropTypes.object\n};\nApp.childContextTypes = {\n  d2: PropTypes.object,\n  dataEngine: PropTypes.object,\n  baseUrl: PropTypes.string,\n  i18n: PropTypes.object\n};\nApp.propTypes = {\n  addParentGraphMap: PropTypes.func,\n  baseUrl: PropTypes.string,\n  clearCurrent: PropTypes.func,\n  clearVisualization: PropTypes.func,\n  current: PropTypes.object,\n  d2: PropTypes.object,\n  dataEngine: PropTypes.object,\n  interpretation: PropTypes.object,\n  location: PropTypes.object,\n  ouLevels: PropTypes.array,\n  setCurrentFromUi: PropTypes.func,\n  setUiFromVisualization: PropTypes.func,\n  settings: PropTypes.object,\n  ui: PropTypes.object,\n  userSettings: PropTypes.object,\n  visualization: PropTypes.object\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import i18n from '@dhis2/d2-i18n';\n\nconst getRelativePeriods = () => ({\n  TODAY: i18n.t('Today'),\n  YESTERDAY: i18n.t('Yesterday'),\n  LAST_3_DAYS: i18n.t('Last 3 days'),\n  LAST_7_DAYS: i18n.t('Last 7 days'),\n  LAST_14_DAYS: i18n.t('Last 14 days'),\n  THIS_WEEK: i18n.t('This week'),\n  LAST_WEEK: i18n.t('Last week'),\n  LAST_4_WEEKS: i18n.t('Last 4 weeks'),\n  LAST_12_WEEKS: i18n.t('Last 12 weeks'),\n  LAST_52_WEEKS: i18n.t('Last 52 weeks'),\n  WEEKS_THIS_YEAR: i18n.t('Weeks this year'),\n  THIS_MONTH: i18n.t('This month'),\n  LAST_MONTH: i18n.t('Last month'),\n  LAST_3_MONTHS: i18n.t('Last 3 months'),\n  LAST_6_MONTHS: i18n.t('Last 6 months'),\n  LAST_12_MONTHS: i18n.t('Last 12 months'),\n  MONTHS_THIS_YEAR: i18n.t('Months this year'),\n  THIS_BIMONTH: i18n.t('This bimonth'),\n  LAST_BIMONTH: i18n.t('Last bimonth'),\n  LAST_6_BIMONTHS: i18n.t('Last 6 bimonths'),\n  BIMONTHS_THIS_YEAR: i18n.t('Bimonths this year'),\n  THIS_QUARTER: i18n.t('This quarter'),\n  LAST_QUARTER: i18n.t('Last quarter'),\n  LAST_4_QUARTERS: i18n.t('Last 4 quarters'),\n  QUARTERS_THIS_YEAR: i18n.t('Quarters this year'),\n  THIS_SIX_MONTH: i18n.t('This six-month'),\n  LAST_SIX_MONTH: i18n.t('Last six-month'),\n  LAST_2_SIXMONTHS: i18n.t('Last 2 six-months'),\n  THIS_FINANCIAL_YEAR: i18n.t('This financial year'),\n  LAST_FINANCIAL_YEAR: i18n.t('Last financial year'),\n  LAST_5_FINANCIAL_YEARS: i18n.t('Last 5 financial years'),\n  THIS_YEAR: i18n.t('This year'),\n  LAST_YEAR: i18n.t('Last year'),\n  LAST_5_YEARS: i18n.t('Last 5 years')\n});\n\nconst getOrganisationUnits = () => ({\n  USER_ORGUNIT: i18n.t('User org unit'),\n  USER_ORGUNIT_CHILDREN: i18n.t('User org unit children'),\n  USER_ORGUNIT_GRANDCHILDREN: i18n.t('User org unit grand children')\n});\n\nexport default function () {\n  return Object.entries({ ...getRelativePeriods(),\n    ...getOrganisationUnits()\n  }).reduce((obj, [key, value]) => ({ ...obj,\n    [key]: {\n      name: value\n    }\n  }), {});\n}","import React, { useContext, useState, useEffect, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDataEngine } from '@dhis2/app-runtime';\nexport const userSettingsQuery = {\n  resource: 'userSettings',\n  params: {\n    key: ['keyUiLocale', 'keyAnalysisDisplayProperty']\n  }\n};\nexport const UserSettingsCtx = /*#__PURE__*/createContext({});\n\nconst UserSettingsProvider = ({\n  children\n}) => {\n  const [settings, setSettings] = useState([]);\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        userSettings\n      } = await engine.query({\n        userSettings: userSettingsQuery\n      });\n      setSettings({ ...userSettings,\n        displayProperty: userSettings.keyAnalysisDisplayProperty,\n        displayPropertyName: userSettings.keyAnalysisDisplayProperty === 'name' ? 'displayName' : 'displayShortName',\n        uiLocale: userSettings.keyUiLocale\n      });\n    }\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(UserSettingsCtx.Provider, {\n    value: {\n      userSettings: settings\n    }\n  }, children);\n};\n\nUserSettingsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default UserSettingsProvider;\nexport const useUserSettings = () => useContext(UserSettingsCtx);","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import React, { useState, useEffect, useCallback } from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport { useConfig, useDataEngine } from '@dhis2/app-runtime';\nimport { D2Shim } from '@dhis2/app-runtime-adapter-d2';\nimport history from './modules/history';\nimport configureStore from './configureStore';\nimport metadataMiddleware from './middleware/metadata';\nimport App from './components/App';\nimport UserSettingsProvider, { UserSettingsCtx } from './components/UserSettingsProvider';\nimport { apiFetchOrganisationUnitLevels } from '@dhis2/analytics';\nimport './locales';\n\nconst AppWrapper = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  const engine = useDataEngine();\n  const store = configureStore([thunk.withExtraArgument(engine), metadataMiddleware]);\n\n  if (window.Cypress) {\n    window.store = store;\n  }\n\n  const [ouLevels, setOuLevels] = useState(null);\n  const doFetchOuLevelsData = useCallback(async () => {\n    const ouLevels = await apiFetchOrganisationUnitLevels(engine);\n    return ouLevels;\n  }, [engine]);\n  useEffect(() => {\n    const doFetch = async () => {\n      const ouLevelsData = await doFetchOuLevelsData();\n      setOuLevels(ouLevelsData);\n    };\n\n    doFetch();\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n  const schemas = ['visualization', 'organisationUnit', 'userGroup'];\n  const d2Config = {\n    schemas\n  };\n  return /*#__PURE__*/React.createElement(ReduxProvider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(UserSettingsProvider, null, /*#__PURE__*/React.createElement(UserSettingsCtx.Consumer, null, ({\n    userSettings\n  }) => {\n    return userSettings !== null && userSettings !== void 0 && userSettings.keyUiLocale ? /*#__PURE__*/React.createElement(D2Shim, {\n      d2Config: d2Config,\n      i18nRoot: \"./i18n-old\",\n      locale: userSettings.keyUiLocale\n    }, ({\n      d2\n    }) => {\n      if (!d2) {\n        // TODO: Handle errors in d2 initialization\n        return null;\n      } else {\n        return /*#__PURE__*/React.createElement(App, {\n          d2: d2,\n          location: history.location,\n          baseUrl: baseUrl,\n          dataEngine: engine,\n          ouLevels: ouLevels,\n          userSettings: userSettings\n        });\n      }\n    }) : null;\n  })));\n};\n\nexport default AppWrapper;"],"sourceRoot":""}