{"version":3,"sources":["D2App/components/Snackbar/styles/Snackbar.module.css","D2App/components/MenuButton/styles/MenuButton.module.css","D2App/components/Interpretations/styles/InterpretationsButton.module.css","D2App/components/VisualizationOptions/styles/VisualizationOptionsManager.module.css","D2App/components/VisualizationOptions/styles/TextStyle.module.css","D2App/components/VisualizationOptions/styles/SeriesTable.module.css","D2App/components/VisualizationOptions/styles/AxisRange.module.css","D2App/components/VisualizationOptions/styles/Outliers.module.css","D2App/components/MenuBar/styles/MenuBar.module.css","D2App/modules/formatDate.js","D2App/components/DimensionsPanel/Dialogs/styles/DialogManager.module.css","D2App/components/DimensionsPanel/styles/DndDimensionItem.module.css","D2App/components/DimensionsPanel/styles/DndDimensionList.module.css","D2App/components/DimensionsPanel/styles/DndDimensionsPanel.module.css","D2App/components/Visualization/styles/StartScreen.module.css","D2App/widgets/styles/LoadingMask.module.css","D2App/components/Layout/DefaultLayout/styles/DefaultAxis.module.css","D2App/components/IconButton/styles/IconButton.module.css","D2App/modules/history.js","D2App/D2Shim.js","D2App/modules/settings.js","D2App/reducers/visualization.js","D2App/modules/options.js","D2App/modules/layout.js","D2App/modules/fields/baseFields.js","D2App/modules/orgUnit.js","D2App/modules/ui.js","D2App/modules/current.js","D2App/reducers/current.js","D2App/reducers/dimensions.js","D2App/reducers/recommendedIds.js","D2App/reducers/ui.js","D2App/reducers/metadata.js","D2App/reducers/settings.js","D2App/reducers/user.js","D2App/reducers/snackbar.js","D2App/reducers/loader.js","D2App/reducers/chart.js","D2App/reducers/index.js","D2App/configureStore.js","D2App/actions/metadata.js","D2App/middleware/metadata.js","D2App/actions/ui.js","D2App/components/DndContext.js","D2App/actions/snackbar.js","D2App/components/Snackbar/Snackbar.js","D2App/components/UpdateButton/UpdateButton.js","D2App/api/analytics.js","D2App/components/MenuButton/MenuButton.js","D2App/components/DownloadMenu/DownloadMenu.js","D2App/components/Interpretations/InterpretationsButton.js","D2App/components/HideButton/HideButton.js","D2App/modules/fields/nestedFields.js","D2App/api/visualization.js","D2App/modules/fields/index.js","D2App/actions/visualization.js","D2App/actions/current.js","D2App/actions/dimensions.js","D2App/api/index.js","D2App/api/settings.js","D2App/actions/settings.js","D2App/actions/loader.js","D2App/assets/ErrorIcons.js","D2App/modules/error.js","D2App/api/user.js","D2App/actions/user.js","D2App/modules/visualization.js","D2App/api/dataStatistics.js","D2App/actions/index.js","D2App/modules/layoutValidation.js","D2App/api/userDataStore.js","D2App/components/UpdateButton/UpdateVisualizationContainer.js","D2App/components/VisualizationOptions/styles/VisualizationOptions.style.js","D2App/components/VisualizationOptions/NoticeBox.js","D2App/components/VisualizationOptions/Options/SelectBaseOption.js","D2App/components/VisualizationOptions/Options/AggregationType.js","D2App/assets/FontColorIcon.js","D2App/assets/BoldIcon.js","D2App/assets/ItalicIcon.js","D2App/components/VisualizationOptions/Options/TextStyle.js","D2App/components/VisualizationOptions/Options/CheckboxBaseOption.js","D2App/components/VisualizationOptions/Options/ShowDimensionLabels.js","D2App/components/VisualizationOptions/Options/SkipRounding.js","D2App/components/VisualizationOptions/Options/ColTotals.js","D2App/components/VisualizationOptions/Options/ColSubTotals.js","D2App/components/VisualizationOptions/Options/RowTotals.js","D2App/components/VisualizationOptions/Options/RowSubTotals.js","D2App/components/VisualizationOptions/Options/HideEmptyColumns.js","D2App/components/VisualizationOptions/Options/HideEmptyRows.js","D2App/components/VisualizationOptions/Options/NumberType.js","D2App/components/VisualizationOptions/Options/TextBaseOption.js","D2App/components/VisualizationOptions/Options/Title.js","D2App/components/VisualizationOptions/Options/DisplayDensity.js","D2App/components/VisualizationOptions/Options/FontSize.js","D2App/components/VisualizationOptions/Options/DigitGroupSeparator.js","D2App/components/VisualizationOptions/Options/ParamReportingPeriod.js","D2App/components/VisualizationOptions/Options/ParamOrganisationUnit.js","D2App/components/VisualizationOptions/Options/ParamParentOrganisationUnit.js","D2App/components/VisualizationOptions/Options/Regression.js","D2App/components/VisualizationOptions/Options/Cumulative.js","D2App/components/VisualizationOptions/Options/SortOrder.js","D2App/components/VisualizationOptions/Options/TopLimit.js","D2App/components/VisualizationOptions/Options/ApprovalLevel.js","D2App/components/VisualizationOptions/Options/ShowHierarchy.js","D2App/components/VisualizationOptions/Options/CompletedOnly.js","D2App/assets/AxisIcons.js","D2App/components/VisualizationOptions/Options/SeriesTable.js","D2App/modules/options/tabs/series.js","D2App/modules/options/tabs/data.js","D2App/modules/options/sections/templates/advanced.js","D2App/modules/options/sections/templates/display.js","D2App/modules/options/sections/templates/totals.js","D2App/modules/options/sections/templates/emptyData.js","D2App/components/VisualizationOptions/Options/RadioBaseOption.js","D2App/components/VisualizationOptions/Options/LegendDisplayStyle.js","D2App/components/VisualizationOptions/Options/LegendSet.js","D2App/components/VisualizationOptions/Options/LegendDisplayStrategy.js","D2App/components/VisualizationOptions/Options/Legend.js","D2App/modules/options/tabs/legend.js","D2App/modules/options/tabs/style.js","D2App/components/VisualizationOptions/Options/MeasureCriteria.js","D2App/modules/options/tabs/limitValues.js","D2App/components/VisualizationOptions/Options/ColorSet.js","D2App/modules/options/sections/colorSet.js","D2App/modules/options/sections/advanced.js","D2App/components/VisualizationOptions/Options/HideTitle.js","D2App/components/VisualizationOptions/Options/Subtitle.js","D2App/components/VisualizationOptions/Options/HideSubtitle.js","D2App/modules/options/sections/titles.js","D2App/components/VisualizationOptions/Options/NumberBaseType.js","D2App/components/VisualizationOptions/Options/RegressionLineValue.js","D2App/components/VisualizationOptions/Options/RegressionLineTitle.js","D2App/components/VisualizationOptions/Options/RegressionLine.js","D2App/components/VisualizationOptions/Options/TargetLine.js","D2App/components/VisualizationOptions/Options/BaseLine.js","D2App/components/VisualizationOptions/Options/AxisMinValue.js","D2App/components/VisualizationOptions/Options/AxisMaxValue.js","D2App/components/VisualizationOptions/Options/AxisRange.js","D2App/components/VisualizationOptions/Options/AxisLabels.js","D2App/modules/options/tabs/axes.js","D2App/modules/options/sections/templates/verticalAxis.js","D2App/modules/options/sections/templates/lines.js","D2App/modules/options/gaugeConfig.js","D2App/components/VisualizationOptions/Options/RegressionType.js","D2App/modules/options/sections/lines.js","D2App/components/VisualizationOptions/Options/AxisTitle.js","D2App/components/VisualizationOptions/Options/PositiveNumberBaseType.js","D2App/components/VisualizationOptions/Options/AxisSteps.js","D2App/components/VisualizationOptions/Options/AxisDecimals.js","D2App/modules/options/sections/verticalAxis.js","D2App/modules/options/sections/horizontalAxis.js","D2App/components/VisualizationOptions/Options/CumulativeValues.js","D2App/components/VisualizationOptions/Options/HideEmptyRowItems.js","D2App/components/VisualizationOptions/Options/PercentStackedValues.js","D2App/modules/options/sections/display.js","D2App/components/VisualizationOptions/Options/HideLegend.js","D2App/components/VisualizationOptions/Options/NoSpaceBetweenColumns.js","D2App/components/VisualizationOptions/Options/ShowData.js","D2App/modules/options/sections/templates/chartStyle.js","D2App/modules/options/sections/chartStyle.js","D2App/components/VisualizationOptions/InfoText.js","D2App/components/VisualizationOptions/Options/OutlierDetectionMethod.js","D2App/components/VisualizationOptions/Options/ExtremeLines.js","D2App/components/VisualizationOptions/Options/Outliers.js","D2App/modules/options/scatterConfig.js","D2App/modules/options/config.js","D2App/modules/options/pieConfig.js","D2App/modules/options/singleValueConfig.js","D2App/modules/options/pivotTableConfig.js","D2App/modules/options/tabs/outliers.js","D2App/modules/options/defaultConfig.js","D2App/components/VisualizationOptions/VisualizationOptions.js","D2App/components/VisualizationOptions/VisualizationOptionsManager.js","D2App/components/MenuBar/MenuBar.js","D2App/assets/InterpretationIcon.js","D2App/components/TitleBar/styles/TitleBar.style.js","D2App/components/TitleBar/TitleBar.js","D2App/modules/currentAnalyticalObject.js","D2App/assets/ColumnIcon.js","D2App/assets/StackedColumnIcon.js","D2App/assets/BarIcon.js","D2App/assets/StackedBarIcon.js","D2App/assets/PieIcon.js","D2App/assets/GaugeIcon.js","D2App/assets/LineIcon.js","D2App/assets/AreaIcon.js","D2App/assets/StackedAreaIcon.js","D2App/assets/RadarIcon.js","D2App/assets/YearOverYearLineIcon.js","D2App/assets/YearOverYearColumnIcon.js","D2App/assets/SingleValueIcon.js","D2App/assets/GlobeIcon.js","D2App/assets/PivotTableIcon.js","D2App/assets/ScatterIcon.js","D2App/components/VisualizationTypeSelector/ListItemIcon.js","D2App/components/VisualizationTypeSelector/VisualizationTypeListItem.js","D2App/components/VisualizationTypeSelector/VisualizationTypeSelector.js","D2App/components/DimensionsPanel/Dialogs/AddToLayoutButton/AddToLayoutButton.js","D2App/components/DimensionsPanel/Dialogs/DialogManager.js","D2App/actions/recommendedIds.js","D2App/components/DimensionsPanel/DndDimensionItem.js","D2App/components/DimensionsPanel/DndDimensionList.js","D2App/components/DimensionsPanel/DndDimensionsPanel.js","D2App/components/DimensionsPanel/styles/DimensionsPanel.style.js","D2App/components/DimensionsPanel/DimensionsPanel.js","D2App/components/Interpretations/styles/Interpretations.style.js","D2App/components/Interpretations/Interpretations.js","D2App/components/Visualization/styles/Visualization.style.js","../../../src/api/legendSets.js","../../../src/assets/ArrowUpwardIcon.js","../../../src/assets/ArrowDownwardIcon.js","../../../src/ContextualMenu.js","../../../src/ChartPlugin.js","../../../src/PivotPlugin.js","../../../src/modules/analytics.js","../../../src/api/analytics.js","../../../src/modules/options.js","../../../src/modules/getRequestOptions.js","../../../src/modules/fetchData.js","../../../src/styles/VisualizationPlugin.style.js","../../../src/VisualizationPlugin.js","D2App/components/Visualization/StartScreen.js","D2App/api/mostViewedVisualizations.js","D2App/widgets/LoadingMask.js","D2App/components/Visualization/Visualization.js","D2App/actions/chart.js","D2App/components/Layout/styles/Tooltip.style.js","D2App/components/Layout/TooltipContent.js","D2App/modules/dnd.js","D2App/assets/DynamicDimensionIcon.js","D2App/components/Layout/styles/style.js","D2App/components/Layout/styles/Chip.style.js","D2App/components/Layout/Chip.js","D2App/components/Layout/DefaultLayout/styles/DefaultAxis.style.js","D2App/assets/MoreHorizontalIcon.js","D2App/components/Layout/styles/Menu.style.js","D2App/components/IconButton/IconButton.js","D2App/components/Layout/ChipMenu.js","D2App/components/Layout/DefaultLayout/DefaultAxis.js","D2App/components/Layout/DefaultLayout/styles/DefaultLayout.style.js","D2App/components/Layout/DefaultLayout/DefaultLayout.js","D2App/components/Layout/YearOverYearLayout/styles/YearOverYearAxis.style.js","D2App/components/Layout/YearOverYearLayout/YearOverYearAxis.js","D2App/components/Layout/YearOverYearLayout/YearOverYearSelect.js","D2App/components/Layout/YearOverYearLayout/styles/YearOverYearLayout.style.js","D2App/modules/yearOverYear.js","D2App/components/Layout/YearOverYearLayout/YearOverYearLayout.js","D2App/components/Layout/PieLayout/styles/PieLayout.style.js","D2App/components/Layout/PieLayout/PieLayout.js","D2App/components/Layout/PivotTableLayout/styles/PivotTableLayout.style.js","D2App/components/Layout/PivotTableLayout/PivotTableLayout.js","D2App/components/Layout/ScatterLayout/styles/ScatterAxis.style.js","D2App/assets/VerticalIcon.js","D2App/assets/HorizontalIcon.js","D2App/components/Layout/ScatterLayout/ScatterAxis.js","D2App/components/Layout/ScatterLayout/styles/ScatterLayout.style.js","D2App/components/Layout/ScatterLayout/ScatterLayout.js","D2App/components/Layout/Layout.js","D2App/components/App.js","D2App/modules/metadata.js","D2App/locales/index.js","D2App/AppWrapper.js","D2App/components/VisualizationTypeSelector/styles/VisualizationTypeSelector.module.css"],"names":["module","exports","formatDate","value","uiLocale","global","Intl","DateTimeFormat","year","month","day","format","Date","substr","replace","createHashHistory","initD2","async","baseUrl","apiVersion","initConfig","apiUrl","d2Config","userSettings","settings","displayNameProperty","keyAnalysisDisplayProperty","keyUiLocale","extractUserSettings","getUserSettings","i18n","sources","add","configI18n","d2","d2Init","location","history","D2Shim","children","appConfig","useConfig","params","setParams","useState","useEffect","then","translucent","SET_VISUALIZATION","CLEAR_VISUALIZATION","DEFAULT_VISUALIZATION","sGetVisualization","state","visualization","OPTION_HIDE_LEGEND","OPTION_AXIS_STEPS","OPTION_AXIS_DECIMALS","OPTION_AXIS_MAX_VALUE","OPTION_AXIS_MIN_VALUE","OPTION_AXIS_TITLE","OPTION_AXIS_TITLE_ENABLED","OPTION_BASE_LINE_ENABLED","OPTION_BASE_LINE_TITLE","OPTION_BASE_LINE_VALUE","OPTION_BASE_LINE_TITLE_FONT_STYLE","OPTION_TARGET_LINE_ENABLED","OPTION_TARGET_LINE_TITLE","OPTION_TARGET_LINE_VALUE","OPTION_TARGET_LINE_TITLE_FONT_STYLE","options","axes","requestable","savable","defaultValue","colorSet","COLOR_SET_DEFAULT","cumulativeValues","hideEmptyRowItems","legend","noSpaceBetweenColumns","percentStackedValues","regressionType","showData","aggregationType","completedOnly","hideSubtitle","hideTitle","sortOrder","subtitle","undefined","title","series","fontStyle","outlierAnalysis","colTotals","colSubTotals","rowTotals","rowSubTotals","showDimensionLabels","hideEmptyColumns","hideEmptyRows","skipRounding","numberType","showHierarchy","legendSet","legendDisplayStrategy","legendDisplayStyle","displayDensity","fontSize","digitGroupSeparator","approvalLevel","reportingPeriod","organisationUnit","parentOrganisationUnit","grandParentOrganisationUnit","regression","cumulative","measureCriteria","topLimit","getOptionsForUi","Object","entries","reduce","map","option","props","getOptionsFromVisualization","optionsFromVisualization","pick","keys","axis","targetLine","baseLine","clonedAxis","enabled","reportingParams","forEach","prototype","hasOwnProperty","call","String","SOURCE_DIMENSIONS","getFilteredLayout","layout","excludedIds","ids","Array","isArray","AXIS_ID_COLUMNS","filter","dim","includes","AXIS_ID_ROWS","AXIS_ID_FILTERS","getInverseLayout","axisId","dimensionIds","id","getRetransfer","transfer","visType","inverseLayout","retransfer","sourceAxis","destinationAxisId","dimensionsAtDestination","isAxisFull","length","transferableDimension","getTransferableDimension","getAvailableAxes","find","getAxisMaxNumberOfDimensions","BASE_FIELD_NAME","BASE_FIELD_TYPE","BASE_FIELD_YEARLY_SERIES","getFieldObject","name","fieldsByType","reportTable","chart","excluded","eventReport","reportTable_eventReport","chart_eventChart","eventReport_eventChart","reportTable_chart_eventReport","reportTable_eventReport_eventChart","reportTable_chart_eventReport_eventChart","extractName","propObj","markExcluded","fieldObj","moveExcludedToEnd","acc","current","curIndex","array","slice","charAt","push","shift","getAllFieldObjectsByType","type","fields","key","concat","isOuLevelIntId","ouIdHelper","hasLevelPrefix","Number","isInteger","parseInt","removePrefix","convertOuLevelsToUids","ouLevels","ouDimension","layoutGetDimension","DIMENSION_ID_ORGUNIT","dimensionGetItems","some","item","replaceNumericOuLevel","ouIntId","ouUid","l","level","assign","addLevelPrefix","replaceNumericOuLevelWithUid","updatedOuItems","layoutReplaceDimension","removeLastPathSegment","path","match","lastIndexOf","getOuPath","metadata","parentGraphMap","SERIES_ITEM_TYPE_PROP","ITEM_ATTRIBUTE_VERTICAL","ITEM_ATTRIBUTE_HORIZONTAL","defaultUiAdapter","ui","getAdaptedUiLayoutByType","getAdaptedUiByType","VIS_TYPE_YEAR_OVER_YEAR_LINE","VIS_TYPE_YEAR_OVER_YEAR_COLUMN","items","itemsByDimension","DIMENSION_ID_PERIOD","yearOverYearUiAdapter","VIS_TYPE_PIVOT_TABLE","VIS_TYPE_GAUGE","VIS_TYPE_SINGLE_VALUE","adaptedUi","singleValueUiAdapter","VIS_TYPE_SCATTER","dataItems","DIMENSION_ID_DATA","itemAttributes","attribute","scatterUiAdapter","getParentGraphMapFromVisualization","vis","dimensionIdsByAxis","layoutGetAxisIdDimensionIdsObject","ouAxis","dimension","orgUnit","getAxesFromUi","dimensionId","hasItems","object","getPredefinedDimensionProp","DIMENSION_PROP_NO_ITEMS","dimensionCreate","getOptionsFromUi","optionsFromUi","rest","getSingleValueCurrentFromUi","action","axesFromUi","dxItems","layoutGetDimensionItems","singleValueAxesFromUi","getScatterCurrentFromUi","verticalItem","horizontalItem","scatterAxesFromUi","getPieCurrentFromUi","VIS_TYPE_PIE","getYearOverYearCurrentFromUi","periodDimension","yearOverYearCategory","filters","yearOverYearSeries","SET_CURRENT","SET_CURRENT_FROM_UI","CLEAR_CURRENT","DEFAULT_CURRENT","getDefaultFromUi","sGetCurrent","sGetCurrentFromUi","SET_DIMENSIONS","SET_SELECTED_DIMENSION","DEFAULT_DIMENSIONS","getPredefinedDimensions","sGetDimensions","dimensions","SET_RECOMMENDED_IDS","DEFAULT_RECOMMENDED_IDS","sGetRecommendedIds","recommendedIds","SET_UI","SET_UI_FROM_VISUALIZATION","SET_UI_TYPE","SET_UI_OPTIONS","SET_UI_OPTION","SET_UI_LAYOUT","ADD_UI_LAYOUT_DIMENSIONS","REMOVE_UI_LAYOUT_DIMENSIONS","SET_UI_ITEMS","ADD_UI_ITEMS","REMOVE_UI_ITEMS","SET_UI_PARENT_GRAPH_MAP","ADD_UI_PARENT_GRAPH_MAP","SET_UI_ACTIVE_MODAL_DIALOG","SET_UI_YEAR_ON_YEAR_SERIES","SET_UI_YEAR_ON_YEAR_CATEGORY","SET_UI_ITEM_ATTRIBUTES","REMOVE_UI_ITEM_ATTRIBUTES","CLEAR_UI","TOGGLE_UI_RIGHT_SIDEBAR_OPEN","SET_UI_RIGHT_SIDEBAR_OPEN","SET_UI_INTERPRETATION","CLEAR_UI_INTERPRETATION","CLEAR_SERIES_TYPE","UPDATE_UI_SERIES_ITEM","DEFAULT_UI","defaultVisType","columns","rows","activeModalDialog","rightSidebarOpen","interpretation","PRESELECTED_YEAR_OVER_YEAR_SERIES","PRESELECTED_YEAR_OVER_YEAR_CATEGORY","currentState","layoutGetDimensionIdItemIdsObject","isYearOverYear","getUiFromVisualization","optionId","axisType","axisIndex","split","fontStyleOption","pushAxis","index","getAxis","hidden","text","prop","defaultFontStyle","FONT_STYLE_REGRESSION_LINE_LABEL","FONT_STYLE_VERTICAL_AXIS_TITLE","FONT_STYLE_HORIZONTAL_AXIS_TITLE","FONT_STYLE_AXIS_LABELS","label","FONT_STYLE_LEGEND","FONT_STYLE_VISUALIZATION_TITLE","FONT_STYLE_VISUALIZATION_SUBTITLE","deepClean","cleanAxis","i","transfers","newLayout","canDimensionBeAddedToAxis","splice","itemIds","currentItemIds","Set","itemIdsToRemove","castArray","itemId","itemAttribute","rootOrganisationUnit","relativePeriod","rootOrganisationUnits","getPreselectedUi","changedItem","itemIndex","findIndex","dimensionItem","remove","sGetUi","sGetUiType","sGetUiOptions","sGetUiLayout","sGetUiItems","sGetUiYearOverYearSeries","sGetUiYearOverYearCategory","sGetUiItemsByAttribute","sGetUiParentGraphMap","sGetUiActiveModalDialog","sGetUiRightSidebarOpen","sGetUiInterpretation","sGetAxes","sGetAxisIdByDimensionId","sGetUiItemsByDimension","sGetDimensionItemsByAxis","sGetDimensionIdsFromLayout","values","axisDimensionIds","sLayoutHasDimension","sLayoutHasAssignedCategories","DIMENSION_ID_ASSIGNED_CATEGORIES","sGetAxisSetup","sGetUiOption","getConsolidatedFontStyle","fontStyleKey","input","result","objectClean","ADD_METADATA","DEFAULT_METADATA","sGetMetadata","SET_SETTINGS","ADD_SETTINGS","DEFAULT_SETTINGS","keyDateFormat","keyAnalysisRelativePeriod","keyAnalysisDigitGroupSeparator","keyIgnoreAnalyticsApprovalYearThreshold","sGetSettings","sGetSettingsDisplayNameProperty","sGetSettingsDigitGroupSeparator","sGetRootOrgUnit","sGetRelativePeriod","sGetUiLocale","RECEIVED_USER","SET_USER_AUTHORITY","DEFAULT_USER","username","isSuperuser","authorities","sGetUser","user","RECEIVED_SNACKBAR_MESSAGE","CLEAR_SNACKBAR","DEFAULT_SNACKBAR","message","duration","sGetSnackbar","snackbar","SET_LOAD_ERROR","CLEAR_LOAD_ERROR","SET_LOADING","SET_PLUGIN_LOADING","DEFAULT_LOADING","isLoading","loadingError","isPluginLoading","sGetLoadError","loader","sGetIsPluginLoading","SET_CHART","sGetChart","combineReducers","d2Object","has","sGetSeriesSetupItems","fromUi","fromMetadata","configureStore","middleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","acAddMetadata","dispatch","next","acSetUi","acClear","acSetUiFromVisualization","acSetUiType","acSetUiOptions","acSetUiOption","acUpdateUiSeriesItem","acSetUiLayout","acAddUiLayoutDimensions","acRemoveUiLayoutDimensions","acSetUiItems","acAddUiItems","acRemoveUiItems","acSetUiYearOverYearSeries","acSetUiYearOverYearCategory","acSetUiItemAttributes","acRemoveUiItemAttributes","acAddParentGraphMap","acSetParentGraphMap","acSetUiActiveModalDialog","acToggleUiRightSidebarOpen","acSetUiRightSidebarOpen","acSetUiInterpretation","acClearUiInterpretation","acClearSeriesType","DndContext","Component","rearrangeLayoutDimensions","sourceAxisId","sourceIndex","destinationIndex","this","sourceList","from","moved","onReorderDimensions","onAddDimensions","addDimensionToLayout","Boolean","onDropWithoutItems","onDragEnd","source","destination","draggableId","droppableId","render","connect","acReceivedSnackbarMessage","acClearSnackbar","VARIANT_ERROR","VARIANT_SUCCESS","VARIANT_WARNING","onClose","variant","className","styles","container","critical","success","warning","permanent","onHidden","UpdateButton","onClick","primary","t","addCommonParameters","req","withSkipRounding","withAggregationType","withMeasureCriteria","withParameters","displayProperty","withDisplayProperty","withApprovalLevel","relativePeriodDate","withRelativePeriodDate","MenuButton","dataTest","disabled","onBlur","onFocus","menuButton","data-test","DenseMenuItem","Icon","dense","icon","color","colors","grey600","relativePeriodDateSelector","createSelector","created","dataEngine","useDataEngine","menuIsOpen","setMenuIsOpen","toggleMenu","downloadImage","formData","URLSearchParams","append","blob","api","getInstance","Api","getApi","url","fetch","method","body","headers","Headers","defaultHeaders","res","apiDownloadImage","URL","createObjectURL","open","downloadData","idScheme","Analytics","getAnalytics","request","fromVisualization","withFormat","withShowHierarchy","withHierarchyMeta","withIncludeMetadataDetails","withIncludeNumDen","withPath","withOutputIdScheme","buildUrl","origin","pathname","buildQuery","searchParams","apiDownloadData","downloadTable","withTableLayout","withRows","join","withColumns","withHideEmptyColumns","withHideEmptyRows","apiDownloadTable","plainDataSourceSubLevel","React","Children","toArray","buttonRef","createRef","onKeyDown","e","keyCode","ref","position","reference","placement","IconImage24","IconFileDocument24","HideButton","secondary","NAME","DIMENSION_ITEM","LEGEND_SET","USER","ITEMS","AXIS","nestedFields","interpretations","extendFields","field","visualizationQuery","resource","sort","visualizationsQuery","visualizationIds","acSetVisualization","acSetCurrent","acSetCurrentFromUi","tSetCurrentFromUi","getState","acSetDimensions","keyBy","sortBy","d","toLowerCase","tSetDimensions","engine","displayNameProp","onSuccess","apiFetchDimensions","err","error","console","log","onError","systemSettingsQuery","acSetSettings","acAddSettings","tAddSettings","extraSettings","fetchSystemSettings","query","systemSettings","apiFetchSystemSettings","fetchOrgUnitRoots","apiFetchOrganisationUnitRoots","orgUnitRoots","Promise","all","fetchedSettings","acSetLoadError","acClearLoadError","acSetPluginLoading","EmptyBox","width","height","xmlns","fill","fillRule","PeriodError","DataError","EmptySeries","EmptyCategory","GenericError","viewBox","transform","VisualizationError","constructor","description","EmptyResponseError","super","NoSeriesError","axisName","getAxisNameByLayoutType","getLayoutTypeByVisType","NoCategoryError","NoSeriesOrCategoryError","columnsAxisName","rowsAxisName","visualizationType","getDisplayNameByVisType","NoPeriodError","getAvailableAxesDescription","NoPointsError","NoVerticalError","NoHorizontalError","DuplicateItemsError","NoDataOrDataElementGroupSetError","lockedAxis","getAxisPerLockedDimension","NoDataError","MultipleIndicatorAsFilterError","CombinationDEGSRRError","genericErrorTitle","GenericClientError","GenericServerError","AssignedCategoriesDataElementsError","AssignedCategoriesAsFilterError","VisualizationNotFoundError","axesDescription","userAuthorityQuery","authority","authorityId","acReceivedUser","acSetUserAuthority","tLoadUserAuthority","authorityKey","response","variables","getVisualizationState","STATE_EMPTY","STATE_UNSAVED","STATE_SAVED","STATE_DIRTY","dataStatisticMutation","favorite","eventType","logError","tDoLoadVisualization","interpretationId","fromLoader","mutate","apiPostDataStatistics","fromCurrent","apiFetchVisualization","errorResponse","details","httpStatusCode","clearVisualization","tDoSaveVisualization","copy","getVisualizationFromCurrent","date","toLocaleDateString","mutation","data","skipTranslations","skipSharing","apiSaveVisualization","status","uid","isSaving","isAxisValid","isValid","axisItem","dimensionIsValid","requireItems","validateDimension","validateAxis","validateLayout","validatePieLayout","validateYearOverYearLayout","validateSingleValueLayout","validatePivotTableLayout","verticalItems","horizontalItems","validateScatterLayout","validateDefaultLayout","NAMESPACE","CURRENT_AO_KEY","hasNamespace","currentUser","dataStore","getNamespace","get","create","apiSaveAOInUserDataStore","namespace","set","apiSave","apiFetchAOFromUserDataStore","apiFetch","mapDispatchToProps","getCurrent","getCurrentFromUi","onUpdate","fromActions","onLoadingStart","renderComponent","urlContainsCurrentAOKey","pathWithoutInterpretation","tabBar","spacers","dp24","tabContent","tabSection","dp16","grey300","dp8","tabSectionTitle","dp12","grey900","tabSectionTitleMargin","tabSectionOption","tabSectionOptionItem","tabSectionOptionText","grey700","tabSectionOptionToggleable","dp4","tabSectionToggleableSubsection","tabSectionOptionComplexInline","tabSectionOptionIcon","NoticeBox","ownProps","onChange","helpText","toggleable","checked","setChecked","selected","onToggle","inputWidth","AggregationType","FontColorIcon","cx","cy","r","defaultProps","BoldIcon","ItalicIcon","isVertical","fontSizeOptions","getFontSizeOptions","textAlignOptions","getTextAlignOptions","isVerticalType","setFontSize","FONT_STYLE_OPTION_FONT_SIZE","textAlign","setTextAlign","FONT_STYLE_OPTION_TEXT_ALIGN","textColor","setTextColor","FONT_STYLE_OPTION_TEXT_COLOR","bold","setBold","FONT_STYLE_OPTION_BOLD","italic","setItalic","FONT_STYLE_OPTION_ITALIC","onChangeColor","debounce","toString","prefix","fontSizeSelect","textAlignSelect","textColorLabel","target","textColorInput","textColorIcon","small","toggled","inverted","ShowDimensionLabels","SkipRounding","ColTotals","ColSubTotals","RowTotals","RowSubTotals","HideEmptyColumns","HideEmptyRows","NumberType","TextBaseOption","placeholder","inline","enabledId","Title","DisplayDensity","FontSize","DigitGroupSeparator","ParamReportingPeriod","ParamOrganisationUnit","ParamParentOrganisationUnit","Regression","Cumulative","optionName","SortOrder","TopLimit","APPROVAL_LEVEL_OPTION_AUTH","dataApprovalLevels","order","paging","ApprovalLevelSelect","loading","loadingText","displayName","approvalLevelEnabledSelector","setOptions","isLoaded","setIsLoaded","ShowHierarchy","CompletedOnly","AxisOne","y","x","opacity","AxisTwo","AxisThree","AxisFour","availableAxes","allTypes","VIS_TYPE_COLUMN","VIS_TYPE_LINE","SeriesTable","layoutItems","optionItems","onItemChange","showAxisOptions","showTypeOptions","availableTypes","matchedItems","matchedItem","renderAxisIcon","renderError","errorContainer","errorIcon","errorTitle","errorDescription","hasRelativeItems","suppressZebraStriping","table","nameColumn","typeColumn","axisColumn","tableHead","tableRow","tableCell","axisIcon","tableBody","itemName","itemType","typeContainer","radioInput","visIcon","visTypeIcons","itemAxis","content","LEGEND_DISPLAY_STYLE_OPTION_NAME","LEGEND_DISPLAY_STYLE_FILL","LegendDisplayStyle","LEGEND_SET_OPTION_NAME","legendSets","LegendSetSelect","LEGEND_DISPLAY_STRATEGY_OPTION_NAME","LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM","LEGEND_DISPLAY_STRATEGY_FIXED","hideStyleOptions","legendEnabled","setLegendEnabled","OperatorSelect","style","tabIndex","inputMaxWidth","ValueInput","MeasureCriteria","onClear","setState","defaultState","op1","v1","op2","v2","paddingTop","COLOR_SET_OPTION_NAME","ColorSetPreview","display","marginLeft","patterns","pattern","stroke","strokeWidth","backgroundColor","COLOR_SET_BRIGHT","COLOR_SET_DARK","COLOR_SET_GRAY","COLOR_SET_COLOR_BLIND","COLOR_SET_PATTERNS","colorSets","hasDisabledSections","getAdvancedTemplate","HIDE_TITLE_AUTO","HIDE_TITLE_NONE","HIDE_TITLE_CUSTOM","HideTitle","onGroupChange","hideTitleSelector","uiOptions","Subtitle","HIDE_SUBTITLE_AUTO","HIDE_SUBTITLE_NONE","HIDE_SUBTITLE_CUSTOM","HideSubtitle","hideSubtitleSelector","RegressionLineValue","RegressionLineTitle","valueId","titleId","TargetLine","BaseLine","AxisMinValue","AxisMaxValue","AxisRange","alignItems","AxisLabels","RegressionType","getLinesTemplate","AxisTitle","parsedValue","Math","round","AxisSteps","AxisDecimals","getVerticalAxisTemplate","CumulativeValues","HideEmptyRowItems","PercentStackedValues","defaultContent","stackedContent","isStacked","getDisplayTemplate","HideLegend","NoSpaceBetweenColumns","ShowData","columnContent","isColumnBased","getChartStyleTemplate","InfoText","OutlierDetectionMethod","methods","currentMethodId","onMethodChange","currentThreshold","onThresholdChange","min","step","ExtremeLines","isEnabled","onEnabledChange","currentValue","onValueChange","ENABLED_PROP","METHOD_PROP","THRESHOLD_PROP","EL_ENABLED_PROP","EL_VALUE_PROP","OUTLIER_ANALYSIS_OPTION_NAME","defaultThreshold","DEFAULT_STATE","extremeLines","storeProp","storeExtremeLinesProp","divider","verticalAxisId","horisontalAxisId","getOptionsByType","isStackedType","isColumnBasedType","supportsLegends","isLegendSetType","supportsMultiAxes","isDualAxisType","supportsMultiType","isMultiType","getDataTab","getAdvancedSection","getLegendTab","getAxesTab","getSeriesTab","getStyleTab","getTitlesSection","getColorSetSection","getLimitValuesTab","getTotalsTemplate","getEmptyDataTemplate","scatterConfig","getDisplaySection","getLinesSection","getVerticalAxisSection","getChartStyleSection","defaultConfig","VisualizationOptions","activeTabKey","selectTab","tabKey","generateTabContent","sections","generateTabs","tabs","columnDimensionItems","filteredSeries","seriesItem","layoutItem","optionsConfig","hasCustomAxes","activeTabIndex","tab","VisualizationOptionsManager","toggleVisualizationOptionsDialog","dialogIsOpen","getPrimaryOnClick","handler","large","modalContent","onOpen","isOpening","onNew","isResetting","getOnRename","onRenameVisualization","getOnSave","onSaveVisualization","getOnSaveAs","getOnDelete","onDeleteVisualization","getOnError","MenuBar","context","menuBar","updateButton","fileType","apiObjectName","fileObject","onRename","onSave","onSaveAs","onDelete","grow","contextTypes","PropTypes","updatedVisualization","updatedCurrent","fromSnackbar","deletedObject","errorCode","statusCode","InterpretationIcon","version","rx","strokeLinecap","strokeLinejoin","points","titleBar","justifyContent","cell","background","white","padding","borderRadius","margin","suffix","paddingLeft","interpretationIcon","marginRight","titleUnsaved","grey500","titleDirty","defaultTitleStyle","defaultInterpretationStyle","getTitleText","titleState","getCustomTitleStyle","getSuffix","stateProps","dispatchProps","titleText","interpretationDate","titleStyle","getPathForOrgUnit","prepareCurrentAnalyticalObject","removeUnnecessaryAttributesFromAnalyticalObject","appendNames","appendDimensionItemNamesToAnalyticalObject","appendDimensionType","dimensionItemType","appendDimensionItemTypeToAnalyticalObject","appendPathsToOrgUnits","appendCompleteParentGraphMap","ColumnIcon","paddingRight","StackedColumnIcon","BarIcon","StackedBarIcon","PieIcon","GaugeIcon","LineIcon","AreaIcon","StackedAreaIcon","RadarIcon","YearOverYearLineIcon","YearOverYearColumnIcon","SingleValueIcon","fontFamily","fontWeight","letterSpacing","GlobeIcon","PivotTableIcon","ScatterIcon","ListItemIcon","iconType","VIS_TYPE_STACKED_COLUMN","VIS_TYPE_BAR","VIS_TYPE_STACKED_BAR","VIS_TYPE_AREA","VIS_TYPE_STACKED_AREA","VIS_TYPE_RADAR","VisualizationTypeListItem","isSelected","classNames","listItem","listItemActive","listItemDisabled","listItemIcon","listItemText","listItemName","listItemDescription","VisualizationTypeSelector","setUi","onItemClick","listIsOpen","setListIsOpen","toggleList","handleListItemClick","VisTypesList","listContainer","listSection","visTypeDisplayNames","visTypeDescriptions","event","stopPropagation","currentAnalyticalObject","href","button","createPortal","backdrop","cardContainer","document","string","dialogId","onAddDimension","AddToLayoutButton","SplitButton","Button","clickHandler","component","maxWidth","isScatterAttribute","DialogManager","onMounted","componentDidUpdate","prevProps","isEqual","dxIds","ouIds","fetchRecommended","ouMounted","apiFetchRecommendedIds","setRecommendedIds","selectUiItems","setUiItemAttributes","setUiItems","forMetadata","forParentGraphMap","ou","addMetadata","addParentGraphMap","obj","closeDialog","changeDialog","getSelectedItems","getItemsByAttribute","selectedItems","getOrgUnitsFromIds","renderPersistedContent","dimensionProps","ouItems","renderDialogContent","removeUiItems","onSelect","onDeselect","onReorder","infoBoxMessage","getAxisIdByDimensionId","numberOfItems","axisMaxNumberOfItems","getAxisMaxNumberOfItems","visualiationType","maxNumber","isActive","dimensionSelector","selectedDimensions","dataTabs","selectedPeriods","filterOutPredefinedDimensions","dimensionTitle","dynamicContent","dimensionIdsInLayout","DndDimensionItem","isLocked","isDeactivated","isRecommended","onOptionsClick","itemCommonProps","isDragDisabled","provided","snapshot","innerRef","draggableProps","dragHandleProps","isDragging","dragging","notDragging","dimensionItemClone","DndDimensionList","dndIndex","nameContainsFilterText","filterText","selectedIds","isDisabledDimension","disallowedDimensions","isLockedDimension","lockedDimensions","isRecommendedDimension","renderItem","itemProps","onDimensionClick","onDimensionOptionsClick","getDimensionItemsByFilter","fixedDimensions","getFixedDimensions","fixedDim","dynamicDimensions","getDynamicDimensions","dynDim","nonPredefinedDimensions","predefDim","isDropDisabled","droppableProps","wrapper","section","header","list","getDisallowedDimensionsMemo","fromReducers","getDisallowedDimensions","getisLockedDimensionsMemo","getAllLockedDimensionIds","DndDimensionsPanel","onClearFilter","onFilterTextChange","disableUnderline","divContainer","flexDirection","grey050","layoutHasAssignedCategories","getCurrentAxisId","axisItemHandler","numberOfDimensionItems","isDimensionInLayout","removeItemHandler","assignedCategoriesItemHandler","setDimensionId","setRef","currentAxisId","isAssignedCategoriesInLayout","Interpretations","onInterpretationChange","interpretationUrl","currentInterpretationId","onCurrentInterpretationChange","chartCanvas","loadingCover","left","top","zIndex","legendSetsQuery","ArrowUpwardIcon","ArrowDownwardIcon","ContextualMenu","ouData","setOuData","subLevelData","setSubLevelData","doFetchOuData","useCallback","apiFetchOrganisationUnit","config","doFetch","levelData","levelId","menuItemStyle","minWidth","orgunit","func","ChartPlugin","animation","defaultAnimation","canvasRef","useRef","renderVisualization","visualizationConfig","createVisualization","isSingleValue","onChartGenerated","sourceHeight","sourceWidth","responses","renderCounter","Function","extraOptions","PivotPlugin","onToggleContextualMenu","getRelativePeriodTypeUsed","periodItems","getRelativePeriodsOptionsById","period","periodId","apiFetchAnalytics","analyticsEngine","rawResponse","prepareRequestsForRelativeDays","currentDay","yearlySeriesLabels","periodDates","yearlySeriesIds","yearlySeriesRes","isFeb29","currentMonth","isLeapYear","getDate","prepareRequestsForRelativeWeeks","referencePeriodYear","referencePeriodReq","referenceWeekPeriod","referencePeriodRes","referenceWeekYear","referenceWeekNumber","referenceWeekYearDelta","weekPeriods","periods","weekPeriodsReq","weekPeriodsRes","seenYears","periodDate","getRequestOptions","entry","ouPath","fetchData","dashboard","forDashboard","yearlySeriesReq","now","relativeWeeksData","relativeDaysData","requests","apiFetchAnalyticsForYearOverYear","peItems","relativePeriodTypeUsed","periodKeyAxisIndexMatrix","periodGroups","a","b","periodGroup","matchGroups","xAxisIndexForPeriod","periodKeys","indexForFeb28","periodKey","test","week","indexForW2","indexForPrevWeekInYear","computeYoYMatrix","periodKeyAxisIndexMap","xAxisLabels","computeGenericPeriodNamesFromMatrix","out","genericPeriodNames","computeGenericPeriodNames","yearlySeries","VisualizationPlugin","setOuLevels","fetchResult","setFetchResult","contextualMenuRef","setContextualMenuRef","contextualMenuConfig","setContextualMenuConfig","closeContextualMenu","doFetchData","onResponsesReceived","doFetchLegendSets","legendSetIds","legendSetsData","apiFetchLegendSets","apiFetchOrganisationUnitLevels","doFetchOuLevels","dxId","legendSetId","onLoadingComplete","doFetchAll","contextualMenuRect","virtualContextualMenuElement","getBoundingClientRect","onDrill","args","mostViewedVisualizations","setMostViewedVisualizations","visualizations","pageSize","apiFetchMostViewedVisualizations","visualizationsWithType","visWithType","populateMostViewedVisualizations","getErrorContent","outer","inner","guide","guideItem","LoadingMask","progress","Visualization","setLoadError","svg","setChart","metaData","drillData","setCurrent","getNewRenderId","renderId","addResizeHandler","addEventListener","componentDidMount","visFilters","visualizationSelector","visFiltersSelector","tooltip","boxShadow","listStyleType","marginBottom","whiteSpace","overflow","textOverflow","iconWrapper","warningLabel","labels","noneSelected","onlyOneInUse","onlyLimitedNumberInUse","number","displayLimitedAmount","lockedLabel","getNameList","idList","levelString","itemDisplayNames","levelIds","groupIds","hasGroupPrefix","getItemDisplayNames","getWarningLabel","hasNoItemsLabel","renderWarningLabel","itemsToRender","renderItems","DATA_TYPE_TEXT","DynamicDimensionIcon","AXIS_PADDING","AXIS_BORDER_COLOR","AXIS_BORDER_STYLE","AXIS_BORDER_WIDTH","AXIS_BACKGROUND_COLOR","CHIP_FONT_SIZE","baseChip","layoutStyle","cursor","minHeight","userSelect","chipWrapper","theme","secondary200","chip","chipEmpty","fixedDimensionIcon","warningIcon","warningIconWrapper","lockIcon","lockIconWrapper","chipLeft","borderTopRightRadius","borderBottomRightRadius","chipRight","borderTopLeftRadius","borderBottomLeftRadius","Chip","dimensionName","contextMenu","random","LockIconWrapper","WarningIconWrapper","isSplitAxis","getMaxNumberOfItems","handleClick","renderChipContent","dynamicDimensionIcon","renderChipIcon","getItemsLabel","total","renderChipLabelSuffix","hasAxisTooManyItems","data-dimensionid","draggable","onDragStart","dataTransfer","setData","JSON","stringify","dataset","dimensionid","activeItemIds","visTypeName","renderTooltipContent","onMouseOver","onMouseOut","axisContainer","borderColor","borderStyle","borderWidth","axisContainerLeft","borderLeftWidth","MoreHorizontalIcon","black","IconButton","ariaOwns","ariaHaspopup","iconButton","aria-owns","aria-haspopup","Axis","onDragOver","preventDefault","getOpenHandler","getItemsByDimension","direction","stylesModule","isDimensionLocked","FILTER_AXIS_WIDTH","ct","axisGroup","axisGroupLeft","flexBasis","axisGroupRight","Layout","DefaultAxis","defaultAxisStyles","flex","LAYOUT_TYPE_YEAR_OVER_YEAR","YearOverYearAxisStyles","SinglePeriodSelector","getName","MultiPeriodSelector","YearOverYearSelect","multiple","seriesOptions","len","getFullYear","yearString","getFixedYears","categoryOptions","defaultLayoutStyles","YearOverYearLayoutStyles","onSeriesChange","onCategoryChange","pieLayoutStyles","pivotTableLayoutStyles","VerticalIcon","HorizontalIcon","setItemAttributes","removeItemAttributes","setDialogIsOpen","onSwap","aria-label","scatterLayoutStyles","ScatterAxis","componentMap","LAYOUT_TYPE_DEFAULT","DefaultLayout","LAYOUT_TYPE_PIE","PieLayout","YearOverYearLayout","LAYOUT_TYPE_PIVOT_TABLE","PivotTableLayout","LAYOUT_TYPE_SCATTER","ScatterLayout","layoutType","LayoutComponent","App","unlisten","previousLocation","initialLoadIsComplete","locationToConfirm","refetch","parseLocation","pathParts","loadVisualization","store","AO","clearCurrent","setUiFromVisualization","setCurrentFromUi","rootOrgUnit","TODAY","YESTERDAY","LAST_3_DAYS","LAST_7_DAYS","LAST_14_DAYS","THIS_WEEK","LAST_WEEK","LAST_4_WEEKS","LAST_12_WEEKS","LAST_52_WEEKS","WEEKS_THIS_YEAR","THIS_MONTH","LAST_MONTH","LAST_3_MONTHS","LAST_6_MONTHS","LAST_12_MONTHS","MONTHS_THIS_YEAR","THIS_BIMONTH","LAST_BIMONTH","LAST_6_BIMONTHS","BIMONTHS_THIS_YEAR","THIS_QUARTER","LAST_QUARTER","LAST_4_QUARTERS","QUARTERS_THIS_YEAR","THIS_SIX_MONTH","LAST_SIX_MONTH","LAST_2_SIXMONTHS","THIS_FINANCIAL_YEAR","LAST_FINANCIAL_YEAR","LAST_5_FINANCIAL_YEARS","THIS_YEAR","LAST_YEAR","LAST_5_YEARS","USER_ORGUNIT","USER_ORGUNIT_CHILDREN","USER_ORGUNIT_GRANDCHILDREN","listen","ctrlKey","returnValue","componentWillUnmount","getChildContext","DimensionsPanel","end","goBack","childContextTypes","clearSnackbar","addResources","arTranslations","ar_IQTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","AppWrapper","thunk","withExtraArgument","metadataMiddleware","Cypress","doFetchOuLevelsData","ouLevelsData","schemas"],"mappings":"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","file":"static/js/app.d88d8f4b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Snackbar_container__3g0Vn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"MenuButton_menuButton__1AF2U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"InterpretationsButton_icon__o3tNb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalContent\":\"VisualizationOptionsManager_modalContent__1SIRu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TextStyle_container__3Vjzk\",\"fontSizeSelect\":\"TextStyle_fontSizeSelect__1coQa\",\"textAlignSelect\":\"TextStyle_textAlignSelect__1BWew\",\"textColorLabel\":\"TextStyle_textColorLabel__3_9vF\",\"textColorInput\":\"TextStyle_textColorInput__RRc04\",\"textColorIcon\":\"TextStyle_textColorIcon__U5wlq\",\"disabled\":\"TextStyle_disabled__3jpDQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nameColumn\":\"SeriesTable_nameColumn__1lKoI\",\"typeColumn\":\"SeriesTable_typeColumn__3IJyD\",\"tableHead\":\"SeriesTable_tableHead__mKvSY\",\"tableCell\":\"SeriesTable_tableCell__19T31\",\"tableBody\":\"SeriesTable_tableBody__3ZBSF\",\"itemName\":\"SeriesTable_itemName__2IJxR\",\"typeContainer\":\"SeriesTable_typeContainer__362YU\",\"visIcon\":\"SeriesTable_visIcon__1knYT\",\"axisIcon\":\"SeriesTable_axisIcon__jMyg-\",\"errorContainer\":\"SeriesTable_errorContainer__3RrKX\",\"errorIcon\":\"SeriesTable_errorIcon__2iTpj\",\"errorTitle\":\"SeriesTable_errorTitle__3e3NZ\",\"errorDescription\":\"SeriesTable_errorDescription__2SfGB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"AxisRange_label__3EO63\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"Outliers_divider__2KHJJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuBar\":\"MenuBar_menuBar__3-AXT\",\"updateButton\":\"MenuBar_updateButton__1NS3q\",\"grow\":\"MenuBar_grow__1w_QG\"};","/**\n *\n * @param {Date} value Javascript date\n * @param {String} uiLocale\n * @returns {String}\n */\nconst formatDate = (value = '', uiLocale = 'en') => {\n  if (typeof global.Intl !== 'undefined' && Intl.DateTimeFormat) {\n    return new Intl.DateTimeFormat(uiLocale, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    }).format(new Date(value));\n  }\n\n  return value.substr(0, 19).replace('T', ' ');\n};\n\nexport default formatDate;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"DialogManager_tabs__3ckG3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notDragging\":\"DndDimensionItem_notDragging__3jgQJ\",\"dragging\":\"DndDimensionItem_dragging__1uXIT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DndDimensionList_container__DCFRx\",\"wrapper\":\"DndDimensionList_wrapper__1gYqU\",\"list\":\"DndDimensionList_list__1sErz\",\"header\":\"DndDimensionList_header__Ugsfp\",\"section\":\"DndDimensionList_section__1KL69\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DndDimensionsPanel_container__1gaeS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer\":\"StartScreen_outer__2nbkE\",\"inner\":\"StartScreen_inner__2exeL\",\"errorContainer\":\"StartScreen_errorContainer__u2dgL\",\"errorIcon\":\"StartScreen_errorIcon__1QTyz\",\"errorTitle\":\"StartScreen_errorTitle__2Ksw9\",\"errorDescription\":\"StartScreen_errorDescription__syq9m\",\"title\":\"StartScreen_title__2-0vP\",\"section\":\"StartScreen_section__3ITr1\",\"guide\":\"StartScreen_guide__d793i\",\"guideItem\":\"StartScreen_guideItem__13mvT\",\"visualization\":\"StartScreen_visualization__3FqSm\",\"visIcon\":\"StartScreen_visIcon__2SFAA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progress\":\"LoadingMask_progress__2bHzE\",\"outer\":\"LoadingMask_outer__d-GDr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"DefaultAxis_content__VAbLV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconButton\":\"IconButton_iconButton__2bUtk\"};","import { createHashHistory } from 'history';\nexport default createHashHistory();","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { useState } from 'react';\nimport { init as d2Init, config as d2Config, getUserSettings } from 'd2';\nimport { extractUserSettings } from './modules/settings';\nimport history from './modules/history';\nimport { Layer, CenteredContent, CircularLoader } from '@dhis2/ui';\n\nconst configI18n = async userSettings => {\n  const uiLocale = userSettings.uiLocale; // TODO: Remove and port to modern i18n\n\n  if (uiLocale && uiLocale !== 'en') {\n    d2Config.i18n.sources.add(`./i18n_old/i18n_module_${uiLocale}.properties`);\n  }\n\n  d2Config.i18n.sources.add('./i18n_old/i18n_module_en.properties');\n};\n\nconst initD2 = async ({\n  baseUrl,\n  apiVersion\n}, initConfig) => {\n  const apiUrl = `${baseUrl}/api/${apiVersion}`;\n  d2Config.baseUrl = apiUrl;\n  const userSettings = extractUserSettings(await getUserSettings());\n  await configI18n(userSettings);\n  const d2 = await d2Init({ ...initConfig,\n    baseUrl: apiUrl\n  });\n  return {\n    location: history.location,\n    baseUrl,\n    d2,\n    userSettings\n  };\n};\n\nexport const D2Shim = ({\n  children,\n  ...initConfig\n}) => {\n  const appConfig = useConfig();\n  const [params, setParams] = useState(null);\n  useEffect(() => {\n    initD2(appConfig, initConfig).then(setParams);\n  }, []);\n  /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  if (!params) {\n    return <Layer translucent>\n                <CenteredContent>\n                    <CircularLoader />\n                </CenteredContent>\n            </Layer>;\n  }\n\n  return children(params);\n};\nD2Shim.propTypes = {\n  children: PropTypes.func\n};","export const SYSTEM_SETTINGS = ['keyDateFormat', 'keyAnalysisRelativePeriod', 'keyAnalysisDigitGroupSeparator', 'keyIgnoreAnalyticsApprovalYearThreshold'];\nexport const extractUserSettings = settings => {\n  const nameProp = settings.keyAnalysisDisplayProperty;\n  return {\n    displayNameProperty: nameProp === 'name' ? 'displayName' : 'displayShortName',\n    uiLocale: settings.keyUiLocale\n  };\n};","export const SET_VISUALIZATION = 'SET_VISUALIZATION';\nexport const CLEAR_VISUALIZATION = 'CLEAR_VISUALIZATION';\nexport const DEFAULT_VISUALIZATION = null;\nexport default ((state = DEFAULT_VISUALIZATION, action) => {\n  switch (action.type) {\n    case SET_VISUALIZATION:\n      {\n        return action.value;\n      }\n\n    case CLEAR_VISUALIZATION:\n      {\n        return DEFAULT_VISUALIZATION;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetVisualization = state => state.visualization;\nexport const sGetInterpretations = state => state.visualization ? state.visualization.interpretations : [];","import pick from 'lodash-es/pick';\nimport { COLOR_SET_DEFAULT } from '@dhis2/analytics';\nexport const OPTION_HIDE_LEGEND = 'hideLegend';\nexport const OPTION_AXIS_STEPS = 'steps';\nexport const OPTION_AXIS_DECIMALS = 'decimals';\nexport const OPTION_AXIS_MAX_VALUE = 'maxValue';\nexport const OPTION_AXIS_MIN_VALUE = 'minValue';\nexport const OPTION_AXIS_TITLE = 'axisTitle';\nexport const OPTION_AXIS_TITLE_ENABLED = 'axisTitleEnabled';\nexport const OPTION_BASE_LINE_ENABLED = 'baseLineEnabled';\nexport const OPTION_BASE_LINE_TITLE = 'baseLineTitle';\nexport const OPTION_BASE_LINE_VALUE = 'baseLineValue';\nexport const OPTION_BASE_LINE_TITLE_FONT_STYLE = 'baseLineTitleFontStyle';\nexport const OPTION_TARGET_LINE_ENABLED = 'targetLineEnabled';\nexport const OPTION_TARGET_LINE_TITLE = 'targetLineTitle';\nexport const OPTION_TARGET_LINE_VALUE = 'targetLineValue';\nexport const OPTION_TARGET_LINE_TITLE_FONT_STYLE = 'targetLineTitleFontStyle';\nexport const options = {\n  axes: {\n    requestable: false,\n    savable: true,\n    defaultValue: []\n  },\n  colorSet: {\n    defaultValue: COLOR_SET_DEFAULT,\n    requestable: false,\n    savable: true\n  },\n  cumulativeValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRowItems: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  legend: {\n    defaultValue: {},\n    requestable: false,\n    savable: true\n  },\n  noSpaceBetweenColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  percentStackedValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regressionType: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  showData: {\n    defaultValue: true,\n    requestable: false,\n    savable: true\n  },\n  aggregationType: {\n    defaultValue: 'DEFAULT',\n    requestable: true,\n    savable: true\n  },\n  completedOnly: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  hideSubtitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideTitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  sortOrder: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  },\n  subtitle: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  title: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  series: {\n    defaultValue: [],\n    requestable: false,\n    savable: true\n  },\n  fontStyle: {\n    defaultValue: {},\n    requestable: false,\n    savable: true\n  },\n  outlierAnalysis: {\n    requestable: false,\n    savable: true,\n    defaultValue: null\n  },\n  // only for PT\n  colTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  colSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  showDimensionLabels: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRows: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  skipRounding: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  numberType: {\n    defaultValue: 'VALUE',\n    requestable: false,\n    savable: true\n  },\n  showHierarchy: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  legendSet: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStrategy: {\n    defaultValue: 'FIXED',\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStyle: {\n    defaultValue: 'FILL',\n    requestable: false,\n    savable: true\n  },\n  displayDensity: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  fontSize: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  digitGroupSeparator: {\n    defaultValue: 'SPACE',\n    requestable: false,\n    savable: true\n  },\n  approvalLevel: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: false\n  },\n  // these are stored in the AO under reportingParams\n  reportingPeriod: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  organisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  parentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  // not exposed in UI\n  grandParentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regression: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  cumulative: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  measureCriteria: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: true\n  },\n  topLimit: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  }\n};\nexport default options;\nexport const getOptionsForUi = () => {\n  return Object.entries({ ...options\n  }).reduce((map, [option, props]) => {\n    map[option] = props.defaultValue;\n    return map;\n  }, {});\n};\nexport const getOptionsForRequest = () => {\n  return Object.entries(options).filter(entry => entry[1].requestable // entry = [option, props]\n  );\n};\nexport const getOptionsFromVisualization = visualization => {\n  const optionsFromVisualization = { ...getOptionsForUi(),\n    ...pick(visualization, Object.keys(options))\n  };\n  optionsFromVisualization.axes = optionsFromVisualization.axes.map(axis => {\n    if (axis.title || axis.targetLine || axis.baseLine) {\n      const clonedAxis = { ...axis\n      };\n\n      if (clonedAxis.title) {\n        clonedAxis.title = { ...clonedAxis.title,\n          enabled: true\n        };\n      }\n\n      if (clonedAxis.targetLine) {\n        clonedAxis.targetLine = { ...clonedAxis.targetLine,\n          enabled: true\n        };\n      }\n\n      if (clonedAxis.baseLine) {\n        clonedAxis.baseLine = { ...clonedAxis.baseLine,\n          enabled: true\n        };\n      }\n\n      return clonedAxis;\n    } else {\n      return axis;\n    }\n  }); // nested options under reportingParams\n\n  if (visualization.reportingParams) {\n    optionsFromVisualization.organisationUnit = visualization.reportingParams.organisationUnit;\n    optionsFromVisualization.reportingPeriod = visualization.reportingParams.reportingPeriod;\n    optionsFromVisualization.parentOrganisationUnit = visualization.reportingParams.parentOrganisationUnit;\n    optionsFromVisualization.grandParentOrganisationUnit = visualization.reportingParams.grandParentOrganisationUnit;\n  } // cast option values from Number for some options\n\n\n  ;\n  ['sortOrder', 'topLimit'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n      optionsFromVisualization[option] = String(visualization[option]);\n    }\n  });\n  return optionsFromVisualization;\n};","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, getAxisMaxNumberOfDimensions, getAvailableAxes, isAxisFull, getTransferableDimension } from '@dhis2/analytics'; // Names for dnd sources\n\nexport const SOURCE_DIMENSIONS = 'dimensions'; // Layout utility functions\n// Exclude one or many dimensions from layout\n\nexport const getFilteredLayout = (layout, excludedIds) => {\n  const ids = Array.isArray(excludedIds) ? excludedIds : [excludedIds];\n  return {\n    [AXIS_ID_COLUMNS]: layout[AXIS_ID_COLUMNS]?.filter(dim => !ids.includes(dim)) || [],\n    [AXIS_ID_ROWS]: layout[AXIS_ID_ROWS]?.filter(dim => !ids.includes(dim)) || [],\n    [AXIS_ID_FILTERS]: layout[AXIS_ID_FILTERS]?.filter(dim => !ids.includes(dim)) || []\n  };\n}; // Accepts layout: { columns: ['dx'] }\n// Returns inverse layout: { dx: 'columns' }\n\nexport const getInverseLayout = layout => {\n  const entries = Object.entries(layout);\n  const map = {};\n  entries.forEach(([axisId, dimensionIds]) => {\n    dimensionIds.forEach(id => {\n      map[id] = axisId;\n    });\n  });\n  return map;\n}; // Accepts layout and transfer object\n// Returns transfer with possible retransfers\n\nexport const getRetransfer = (layout, transfer, visType) => {\n  const inverseLayout = getInverseLayout(layout);\n  const dimensionIds = Object.keys(transfer);\n  const retransfer = {};\n  dimensionIds.forEach(id => {\n    const sourceAxis = inverseLayout[id] || null;\n    const destinationAxisId = transfer[id].axisId;\n    const dimensionsAtDestination = layout[destinationAxisId] || [];\n\n    if (isAxisFull(visType, destinationAxisId, dimensionsAtDestination.length)) {\n      const transferableDimension = getTransferableDimension(visType, destinationAxisId, layout[destinationAxisId]);\n\n      if (transferableDimension) {\n        const axisId = sourceAxis ? sourceAxis : getAvailableAxes(visType).find(axis => !getAxisMaxNumberOfDimensions(visType, axis));\n        retransfer[transferableDimension] = {\n          axisId\n        };\n      }\n    }\n  });\n  return retransfer;\n};","export const BASE_FIELD_NAME = 'name';\nexport const BASE_FIELD_TYPE = 'type';\nexport const BASE_FIELD_YEARLY_SERIES = 'yearlySeries';\n\nconst getFieldObject = (name, props = {}) => ({\n  [BASE_FIELD_NAME]: name,\n  ...props\n}); // fields by type\n\n\nexport const fieldsByType = {\n  reportTable: [getFieldObject('cumulative', {\n    option: true\n  }), getFieldObject('hideEmptyColumns', {\n    option: true\n  }), getFieldObject('legendDisplayStyle', {\n    option: true\n  }), getFieldObject('measureCriteria', {\n    option: true\n  }), getFieldObject('numberType', {\n    option: true\n  }), getFieldObject('regression', {\n    option: true\n  }), getFieldObject('reportingParams', {\n    option: true\n  }), getFieldObject('skipRounding', {\n    option: true\n  })],\n  chart: [getFieldObject('category', {\n    excluded: true\n  }), getFieldObject(BASE_FIELD_YEARLY_SERIES)],\n  eventReport: [getFieldObject('dataType')],\n  reportTable_eventReport: [getFieldObject('colSubTotals', {\n    option: true\n  }), getFieldObject('colTotals', {\n    option: true\n  }), getFieldObject('displayDensity', {\n    option: true\n  }), getFieldObject('fontSize', {\n    option: true\n  }), getFieldObject('hideEmptyRows', {\n    option: true\n  }), getFieldObject('rowSubTotals', {\n    option: true\n  }), getFieldObject('rowTotals', {\n    option: true\n  }), getFieldObject('showDimensionLabels', {\n    option: true\n  }), getFieldObject('showHierarchy', {\n    option: true\n  })],\n  chart_eventChart: [getFieldObject('axes', {\n    option: true\n  }), getFieldObject('colorSet', {\n    option: true\n  }), getFieldObject('cumulativeValues', {\n    option: true\n  }), getFieldObject('fontStyle', {\n    option: true\n  }), getFieldObject('hideEmptyRowItems', {\n    option: true\n  }), getFieldObject('legend', {\n    option: true\n  }), getFieldObject('noSpaceBetweenColumns', {\n    option: true\n  }), getFieldObject('percentStackedValues', {\n    option: true\n  }), getFieldObject('regressionType', {\n    option: true\n  }), getFieldObject('series', {\n    option: true\n  }), getFieldObject('showData', {\n    option: true\n  }), getFieldObject(BASE_FIELD_TYPE, {\n    option: true\n  })],\n  eventReport_eventChart: [getFieldObject('attributeValueDimension'), getFieldObject('collapseDataDimensions'), getFieldObject('dataElementValueDimension'), getFieldObject('endDate'), getFieldObject('eventStatus', {\n    option: true\n  }), getFieldObject('hideNaData', {\n    option: true\n  }), getFieldObject('outputType', {\n    option: true\n  }), getFieldObject('program'), getFieldObject('programStage'), getFieldObject('programStatus', {\n    option: true\n  }), getFieldObject('startDate'), getFieldObject('value')],\n  reportTable_chart_eventReport: [getFieldObject('legendDisplayStrategy', {\n    option: true\n  }), getFieldObject('legendSet', {\n    option: true\n  })],\n  reportTable_eventReport_eventChart: [getFieldObject('columnDimensions', {\n    excluded: true\n  }), getFieldObject('rowDimensions', {\n    excluded: true\n  })],\n  reportTable_chart_eventReport_eventChart: [getFieldObject('access'), getFieldObject('aggregationType', {\n    option: true\n  }), getFieldObject('attributeDimensions', {\n    excluded: true\n  }), getFieldObject('attributeValues', {\n    excluded: true\n  }), getFieldObject('categoryDimensions', {\n    excluded: true\n  }), getFieldObject('categoryOptionGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('code', {\n    excluded: true\n  }), getFieldObject('columns'), getFieldObject('completedOnly', {\n    option: true\n  }), getFieldObject('created'), getFieldObject('dataDimensionItems', {\n    excluded: true\n  }), getFieldObject('dataElementDimensions', {\n    excluded: true\n  }), getFieldObject('dataElementGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('description'), getFieldObject('digitGroupSeparator'), getFieldObject('displayDescription'), getFieldObject('displayName'), getFieldObject('displayShortName'), getFieldObject('externalAccess', {\n    excluded: true\n  }), getFieldObject('favorite'), getFieldObject('favorites'), getFieldObject('filterDimensions', {\n    excluded: true\n  }), getFieldObject('filters'), getFieldObject('hideSubtitle', {\n    option: true\n  }), getFieldObject('hideTitle', {\n    option: true\n  }), getFieldObject('href'), // required for translations via analytics FileMenu and d2-ui TranslationDialog\n  getFieldObject('id'), getFieldObject('interpretations'), getFieldObject('itemOrganisationUnitGroups', {\n    excluded: true\n  }), getFieldObject('lastUpdated'), getFieldObject('lastUpdatedBy'), getFieldObject('name'), getFieldObject('organisationUnitGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('organisationUnitLevels', {\n    excluded: true\n  }), getFieldObject('organisationUnits', {\n    excluded: true\n  }), getFieldObject('parentGraphMap'), getFieldObject('periods', {\n    excluded: true\n  }), getFieldObject('programIndicatorDimensions', {\n    excluded: true\n  }), getFieldObject('publicAccess'), getFieldObject('relativePeriods', {\n    excluded: true\n  }), getFieldObject('rows'), getFieldObject('shortName'), getFieldObject('sortOrder', {\n    option: true\n  }), getFieldObject('subscribed'), getFieldObject('subscribers'), getFieldObject('subtitle', {\n    option: true\n  }), getFieldObject('timeField'), getFieldObject('title', {\n    option: true\n  }), getFieldObject('topLimit', {\n    option: true\n  }), getFieldObject('translations'), getFieldObject('user'), getFieldObject('userAccesses'), getFieldObject('userGroupAccesses'), getFieldObject('userOrganisationUnit', {\n    excluded: true\n  }), getFieldObject('userOrganisationUnitChildren', {\n    excluded: true\n  }), getFieldObject('userOrganisationUnitGrandChildren', {\n    excluded: true\n  })]\n};\nfieldsByType.visualization = [...fieldsByType.reportTable, ...fieldsByType.chart, ...fieldsByType.reportTable_eventReport, ...fieldsByType.chart_eventChart, ...fieldsByType.reportTable_chart_eventReport, ...fieldsByType.reportTable_eventReport_eventChart, ...fieldsByType.reportTable_chart_eventReport_eventChart]; // actions\n\nexport const extractName = propObj => propObj[BASE_FIELD_NAME];\nexport const markExcluded = fieldObj => fieldObj.excluded === true ? { ...fieldObj,\n  [BASE_FIELD_NAME]: `!${fieldObj[BASE_FIELD_NAME]}`\n} : fieldObj;\n/* eslint-disable-next-line max-params */\n\nexport const moveExcludedToEnd = (acc, current, curIndex, array) => {\n  !acc && (acc = array.slice());\n  current.charAt(0) === '!' && acc.push(acc.shift());\n  return acc;\n}; // getters\n\nexport const getAllFieldObjectsByType = type => Object.entries(fieldsByType).reduce((fields, [key, value]) => key.includes(type) ? fields.concat(value) : fields, []);","import { ouIdHelper, DIMENSION_ID_ORGUNIT, dimensionGetItems, layoutReplaceDimension, layoutGetDimension } from '@dhis2/analytics';\n\nconst isOuLevelIntId = id => ouIdHelper.hasLevelPrefix(id) ? Number.isInteger(parseInt(ouIdHelper.removePrefix(id), 10)) : false;\n\nconst replaceNumericOuLevelWithUid = ouLevels => item => {\n  if (!isOuLevelIntId(item.id)) {\n    return item;\n  }\n\n  const ouIntId = parseInt(ouIdHelper.removePrefix(item.id), 10);\n  const ouUid = ouLevels.find(l => parseInt(l.level, 10) === ouIntId).id;\n  return Object.assign({}, item, {\n    id: ouIdHelper.addLevelPrefix(ouUid)\n  });\n};\n\nexport const convertOuLevelsToUids = (ouLevels, layout) => {\n  const ouDimension = layoutGetDimension(layout, DIMENSION_ID_ORGUNIT);\n  const hasNumericOuLevels = ouDimension && dimensionGetItems(ouDimension).some(item => isOuLevelIntId(item.id));\n\n  if (hasNumericOuLevels) {\n    const replaceNumericOuLevel = replaceNumericOuLevelWithUid(ouLevels);\n    const updatedOuItems = dimensionGetItems(ouDimension).map(replaceNumericOuLevel);\n    return layoutReplaceDimension(layout, DIMENSION_ID_ORGUNIT, updatedOuItems);\n  }\n\n  return layout;\n};\nexport const removeLastPathSegment = path => {\n  // if root path, then return unprocessed path\n  if (path.match(/\\//g).length === 1) {\n    return path;\n  }\n\n  return path.substr(0, path.lastIndexOf('/'));\n};\n/**\n * Get org unit path by ou id\n * @param id\n * @param metadata\n * @param parentGraphMap\n * @returns {*}\n */\n\nexport const getOuPath = (id, metadata, parentGraphMap) => {\n  if (metadata[id] && metadata[id].path) {\n    return metadata[id].path;\n  } // for root org units\n\n\n  if (parentGraphMap[id] === id || parentGraphMap[id] === '') {\n    return `/${id}`;\n  }\n\n  return parentGraphMap[id] ? `/${parentGraphMap[id]}/${id}` : undefined;\n};","import { DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, DIMENSION_ID_DATA, layoutGetAxisIdDimensionIdsObject, layoutGetDimensionIdItemIdsObject, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_SCATTER, defaultVisType, isYearOverYear, getAdaptedUiLayoutByType, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout';\nimport { getOptionsFromVisualization } from './options';\nimport { BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { removeLastPathSegment } from './orgUnit';\nexport const SERIES_ITEM_TYPE_PROP = 'type';\nexport const SERIES_ITEM_AXIS_PROP = 'axis';\nexport const ITEM_ATTRIBUTE_VERTICAL = 'VERTICAL';\nexport const ITEM_ATTRIBUTE_HORIZONTAL = 'HORIZONTAL'; // Transform from backend model to store.ui format\n\nexport const getUiFromVisualization = (vis, currentState = {}) => ({ ...currentState,\n  type: vis.type || defaultVisType,\n  options: getOptionsFromVisualization(vis),\n  layout: layoutGetAxisIdDimensionIdsObject(vis),\n  itemsByDimension: layoutGetDimensionIdItemIdsObject(vis),\n  parentGraphMap: vis.parentGraphMap || getParentGraphMapFromVisualization(vis) || currentState.parentGraphMap,\n  yearOverYearSeries: isYearOverYear(vis.type) && vis[BASE_FIELD_YEARLY_SERIES] ? vis[BASE_FIELD_YEARLY_SERIES] : currentState.yearOverYearSeries,\n  yearOverYearCategory: isYearOverYear(vis.type) ? vis.rows[0].items.map(item => item.id) : currentState.yearOverYearCategory\n}); // Transform from store.ui to default format\n\nconst defaultUiAdapter = ui => ({ ...ui,\n  layout: getAdaptedUiLayoutByType(ui.layout, ui.type)\n}); // Transform from store.ui to year on year format\n\n\nconst yearOverYearUiAdapter = ui => {\n  const state = Object.assign({}, ui);\n  const items = Object.assign({}, state.itemsByDimension);\n  delete items[DIMENSION_ID_PERIOD];\n  return { ...state,\n    layout: getAdaptedUiLayoutByType(ui.layout, ui.type),\n    itemsByDimension: items\n  };\n};\n\nconst singleValueUiAdapter = ui => {\n  const adaptedUi = defaultUiAdapter(ui);\n  adaptedUi.options.measureCriteria = undefined;\n  return adaptedUi;\n}; // Transform from store.ui to scatter format\n\n\nconst scatterUiAdapter = ui => {\n  const adaptedUi = { ...ui,\n    layout: getAdaptedUiLayoutByType(ui.layout, ui.type)\n  };\n  const dataItems = ui.itemsByDimension[DIMENSION_ID_DATA] || [];\n  adaptedUi.itemAttributes = [// TODO: Should this be cleared for all other uiAdapters?\n  ...(dataItems[0] ? [{\n    id: dataItems[0],\n    attribute: ITEM_ATTRIBUTE_VERTICAL\n  }] : []), ...(dataItems[1] ? [{\n    id: dataItems[1],\n    attribute: ITEM_ATTRIBUTE_HORIZONTAL\n  }] : [])];\n  const items = Object.assign({}, ui.itemsByDimension);\n  items[DIMENSION_ID_DATA] = dataItems.slice(0, 2);\n  adaptedUi.itemsByDimension = items;\n  adaptedUi.options.measureCriteria = undefined;\n  return adaptedUi;\n};\n\nexport const getAdaptedUiByType = ui => {\n  switch (ui.type) {\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      {\n        return yearOverYearUiAdapter(ui);\n      }\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return ui;\n\n    case VIS_TYPE_GAUGE:\n    case VIS_TYPE_SINGLE_VALUE:\n      return singleValueUiAdapter(ui);\n\n    case VIS_TYPE_SCATTER:\n      return scatterUiAdapter(ui);\n\n    default:\n      return defaultUiAdapter(ui);\n  }\n};\nexport const getParentGraphMapFromVisualization = vis => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(vis);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n\n  if (!ouAxis) {\n    return {};\n  }\n\n  const parentGraphMap = {};\n  const ouDimension = vis[ouAxis].find(dimension => dimension.dimension === DIMENSION_ID_ORGUNIT);\n  ouDimension.items.filter(orgUnit => orgUnit.path).forEach(orgUnit => {\n    if ('/' + orgUnit.id === orgUnit.path) {\n      // root org unit case\n      parentGraphMap[orgUnit.id] = '';\n    } else {\n      const path = removeLastPathSegment(orgUnit.path);\n      parentGraphMap[orgUnit.id] = path[0] === '/' ? path.substr(1) : path;\n    }\n  });\n  return parentGraphMap;\n};\nexport const mergeUiMaps = (destinationMap, sourceMap, propName) => {\n  Object.keys(sourceMap || {}).forEach(key => {\n    if (!(key in destinationMap)) {\n      destinationMap[key] = {};\n    }\n\n    destinationMap[key][propName] = sourceMap[key];\n  });\n};","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport pick from 'lodash-es/pick';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIE, dimensionCreate, layoutGetDimensionItems, layoutReplaceDimension, getPredefinedDimensionProp, DIMENSION_PROP_NO_ITEMS, getAdaptedUiLayoutByType, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport options from './options';\nimport './layout';\nimport { BASE_FIELD_TYPE, BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../modules/ui';\n\nconst hasItems = (object, id) => Array.isArray(object[id]) && object[id].length;\n\nexport const getAxesFromUi = ui => Object.entries(ui.layout).reduce((layout, [axisId, dimensionIds]) => ({ ...layout,\n  [axisId]: dimensionIds.map(dimensionId => hasItems(ui.itemsByDimension, dimensionId) || getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS) ? dimensionCreate(dimensionId, ui.itemsByDimension[dimensionId]) : null).filter(dim => dim !== null)\n}), {});\nexport const getOptionsFromUi = ui => {\n  const optionsFromUi = pick(ui.options, Object.keys(options));\n\n  if (optionsFromUi.axes && optionsFromUi.axes.length) {\n    optionsFromUi.axes = [...optionsFromUi.axes.map(axis => ({ ...axis\n    }))];\n    optionsFromUi.axes.forEach(axis => {\n      if (axis.title) {\n        const {\n          enabled,\n          ...rest\n        } = axis.title;\n        axis.title = { ...rest\n        };\n      }\n\n      if (axis.targetLine) {\n        const {\n          enabled,\n          ...rest\n        } = axis.targetLine;\n        axis.targetLine = { ...rest\n        };\n      }\n\n      if (axis.baseLine) {\n        const {\n          enabled,\n          ...rest\n        } = axis.baseLine;\n        axis.baseLine = { ...rest\n        };\n      }\n    });\n  } // approvalLevel is stored as an object { id, level, displayName }\n  // only pass approvalLevel id\n\n\n  if (optionsFromUi.approvalLevel !== options.approvalLevel.defaultValue) {\n    optionsFromUi.approvalLevel = optionsFromUi.approvalLevel.id;\n  } // nested options under reportingParams\n\n\n  optionsFromUi.reportingParams = {};\n  ['organisationUnit', 'reportingPeriod', 'parentOrganisationUnit', 'grandParentOrganisationUnit'].forEach(option => {\n    optionsFromUi.reportingParams[option] = optionsFromUi[option];\n    delete optionsFromUi[option];\n  }) // cast option values to Number for some options\n  ;\n  ['sortOrder', 'topLimit'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(optionsFromUi, option)) {\n      if (optionsFromUi[option] !== undefined && optionsFromUi[option] !== '') {\n        optionsFromUi[option] = Number(optionsFromUi[option]);\n      }\n    }\n  });\n  return optionsFromUi;\n};\nexport const getSeriesFromUi = ui => {\n  return ui.options.series ? [...ui.options.series] : [];\n};\nexport const getSingleValueCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...getAdaptedUiLayoutByType(action.value.layout, VIS_TYPE_SINGLE_VALUE)\n    }\n  };\n  const axesFromUi = getAxesFromUi(ui); // only save the first dx item\n\n  const dxItems = layoutGetDimensionItems(axesFromUi, DIMENSION_ID_DATA);\n  const singleValueAxesFromUi = layoutReplaceDimension(axesFromUi, DIMENSION_ID_DATA, [dxItems[0]]);\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...singleValueAxesFromUi,\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getScatterCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...getAdaptedUiLayoutByType(action.value.layout, VIS_TYPE_SCATTER)\n    }\n  };\n  const axesFromUi = getAxesFromUi(ui); // only save first vertical and first horizontal dx items\n\n  const verticalItem = ui.itemAttributes.find(item => item.attribute === ITEM_ATTRIBUTE_VERTICAL) || {};\n  const horizontalItem = ui.itemAttributes.find(item => item.attribute === ITEM_ATTRIBUTE_HORIZONTAL) || {};\n  const scatterAxesFromUi = layoutReplaceDimension(axesFromUi, DIMENSION_ID_DATA, [verticalItem, horizontalItem].map(item => ({\n    id: item.id\n  })));\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...scatterAxesFromUi,\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getPieCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...getAdaptedUiLayoutByType(action.value.layout, VIS_TYPE_PIE)\n    }\n  };\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...getAxesFromUi(ui),\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getYearOverYearCurrentFromUi = (state, action) => {\n  const ui = action.value;\n  const periodDimension = dimensionCreate(DIMENSION_ID_PERIOD, ui.yearOverYearCategory);\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    [AXIS_ID_COLUMNS]: [],\n    [AXIS_ID_ROWS]: [periodDimension],\n    [AXIS_ID_FILTERS]: getAxesFromUi(ui).filters,\n    [[BASE_FIELD_YEARLY_SERIES]]: ui.yearOverYearSeries,\n    ...getOptionsFromUi(ui)\n  };\n};","import { VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport { getAxesFromUi, getOptionsFromUi, getPieCurrentFromUi, getYearOverYearCurrentFromUi, getSingleValueCurrentFromUi, getSeriesFromUi, getScatterCurrentFromUi } from '../modules/current';\nimport { BASE_FIELD_TYPE } from '../modules/fields/baseFields';\nexport const SET_CURRENT = 'SET_CURRENT';\nexport const SET_CURRENT_FROM_UI = 'SET_CURRENT_FROM_UI';\nexport const CLEAR_CURRENT = 'CLEAR_CURRENT';\nexport const DEFAULT_CURRENT = null;\n\nconst getDefaultFromUi = (state, action) => {\n  const axesFromUi = getAxesFromUi(action.value);\n  const optionsFromUi = getOptionsFromUi(action.value);\n  const series = getSeriesFromUi(action.value);\n  return { ...state,\n    [BASE_FIELD_TYPE]: action.value.type,\n    ...axesFromUi,\n    ...optionsFromUi,\n    series\n  };\n};\n\nexport default ((state = DEFAULT_CURRENT, action) => {\n  switch (action.type) {\n    case SET_CURRENT:\n      {\n        return action.value;\n      }\n\n    case SET_CURRENT_FROM_UI:\n      {\n        switch (action.value.type) {\n          case VIS_TYPE_PIE:\n            return getPieCurrentFromUi(state, action);\n\n          case VIS_TYPE_SINGLE_VALUE:\n          case VIS_TYPE_GAUGE:\n            return getSingleValueCurrentFromUi(state, action);\n\n          case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n          case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n            return getYearOverYearCurrentFromUi(state, action);\n\n          case VIS_TYPE_SCATTER:\n            return getScatterCurrentFromUi(state, action);\n\n          default:\n            {\n              return getDefaultFromUi(state, action);\n            }\n        }\n      }\n\n    case CLEAR_CURRENT:\n      return DEFAULT_CURRENT;\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetCurrent = state => state.current;\nexport const sGetCurrentFromUi = state => {\n  const ui = state.ui;\n\n  switch (ui.type) {\n    case VIS_TYPE_PIE:\n      return getPieCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      return getSingleValueCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return getYearOverYearCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_SCATTER:\n      return getScatterCurrentFromUi(state, {\n        value: ui\n      });\n\n    default:\n      {\n        return getDefaultFromUi(state, {\n          value: ui\n        });\n      }\n  }\n};","import { getPredefinedDimensions } from '@dhis2/analytics';\nexport const SET_DIMENSIONS = 'SET_DIMENSIONS';\nexport const SET_SELECTED_DIMENSION = 'SET_SELECTED_DIMENSION';\nexport const DEFAULT_DIMENSIONS = getPredefinedDimensions();\nexport default ((state = DEFAULT_DIMENSIONS, action) => {\n  switch (action.type) {\n    case SET_DIMENSIONS:\n      {\n        return { ...DEFAULT_DIMENSIONS,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\n/**\n * Selector which returns dimensions from the state object\n * If state.dimensions is null, then the dimensions api request\n * has not yet completed. If state.dimensions is an empty object\n * then the dimensions api request is complete, and there are no\n * dimensions\n *\n * @function\n * @param {Object} state The current state\n * @returns {Array}\n */\n\nexport const sGetDimensions = state => state.dimensions;","export const SET_RECOMMENDED_IDS = 'SET_RECOMMENDED_IDS';\nexport const DEFAULT_RECOMMENDED_IDS = [];\nexport default ((state = DEFAULT_RECOMMENDED_IDS, action) => {\n  switch (action.type) {\n    case SET_RECOMMENDED_IDS:\n      {\n        return action.value || DEFAULT_RECOMMENDED_IDS;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetRecommendedIds = state => state.recommendedIds;","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport castArray from 'lodash-es/castArray';\nimport { DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, DIMENSION_ID_ASSIGNED_CATEGORIES, canDimensionBeAddedToAxis, defaultVisType, defaultFontStyle, FONT_STYLE_LEGEND, FONT_STYLE_VISUALIZATION_TITLE, FONT_STYLE_VISUALIZATION_SUBTITLE, FONT_STYLE_AXIS_LABELS, FONT_STYLE_HORIZONTAL_AXIS_TITLE, FONT_STYLE_VERTICAL_AXIS_TITLE, FONT_STYLE_REGRESSION_LINE_LABEL } from '@dhis2/analytics';\nimport objectClean from 'd2-utilizr/lib/objectClean';\nimport { getFilteredLayout, getInverseLayout, getRetransfer } from '../modules/layout';\nimport { getOptionsForUi, OPTION_AXIS_DECIMALS, OPTION_HIDE_LEGEND, OPTION_AXIS_MAX_VALUE, OPTION_AXIS_MIN_VALUE, OPTION_AXIS_STEPS, OPTION_AXIS_TITLE, OPTION_AXIS_TITLE_ENABLED, OPTION_BASE_LINE_TITLE, OPTION_BASE_LINE_VALUE, OPTION_BASE_LINE_TITLE_FONT_STYLE, OPTION_TARGET_LINE_VALUE, OPTION_TARGET_LINE_TITLE_FONT_STYLE, OPTION_TARGET_LINE_TITLE, OPTION_BASE_LINE_ENABLED, OPTION_TARGET_LINE_ENABLED } from '../modules/options';\nimport { getAdaptedUiByType, getUiFromVisualization, SERIES_ITEM_TYPE_PROP } from '../modules/ui';\nexport const SET_UI = 'SET_UI';\nexport const SET_UI_FROM_VISUALIZATION = 'SET_UI_FROM_VISUALIZATION';\nexport const SET_UI_TYPE = 'SET_UI_TYPE';\nexport const SET_UI_OPTIONS = 'SET_UI_OPTIONS';\nexport const SET_UI_OPTION = 'SET_UI_OPTION';\nexport const SET_UI_LAYOUT = 'SET_UI_LAYOUT';\nexport const ADD_UI_LAYOUT_DIMENSIONS = 'ADD_UI_LAYOUT_DIMENSIONS';\nexport const REMOVE_UI_LAYOUT_DIMENSIONS = 'REMOVE_UI_LAYOUT_DIMENSIONS';\nexport const SET_UI_ITEMS = 'SET_UI_ITEMS';\nexport const ADD_UI_ITEMS = 'ADD_UI_ITEMS';\nexport const REMOVE_UI_ITEMS = 'REMOVE_UI_ITEMS';\nexport const SET_UI_PARENT_GRAPH_MAP = 'SET_UI_PARENT_GRAPH_MAP';\nexport const ADD_UI_PARENT_GRAPH_MAP = 'ADD_UI_PARENT_GRAPH_MAP';\nexport const SET_UI_ACTIVE_MODAL_DIALOG = 'SET_UI_ACTIVE_MODAL_DIALOG';\nexport const SET_UI_YEAR_ON_YEAR_SERIES = 'SET_UI_YEAR_ON_YEAR_SERIES';\nexport const SET_UI_YEAR_ON_YEAR_CATEGORY = 'SET_UI_YEAR_ON_YEAR_CATEGORY';\nexport const SET_UI_ITEM_ATTRIBUTES = 'SET_UI_ITEM_ATTRIBUTES';\nexport const REMOVE_UI_ITEM_ATTRIBUTES = 'REMOVE_UI_ITEM_ATTRIBUTES';\nexport const CLEAR_UI = 'CLEAR_UI';\nexport const TOGGLE_UI_RIGHT_SIDEBAR_OPEN = 'TOGGLE_UI_RIGHT_SIDEBAR_OPEN';\nexport const SET_UI_RIGHT_SIDEBAR_OPEN = 'SET_UI_RIGHT_SIDEBAR_OPEN';\nexport const SET_UI_INTERPRETATION = 'SET_UI_INTERPRETATION';\nexport const CLEAR_UI_INTERPRETATION = 'CLEAR_UI_INTERPRETATION';\nexport const CLEAR_SERIES_TYPE = 'CLEAR_SERIES_TYPE';\nexport const UPDATE_UI_SERIES_ITEM = 'UPDATE_UI_SERIES_ITEM';\nexport const DEFAULT_UI = {\n  type: defaultVisType,\n  options: getOptionsForUi(),\n  layout: {\n    columns: [DIMENSION_ID_DATA],\n    rows: [DIMENSION_ID_PERIOD],\n    filters: [DIMENSION_ID_ORGUNIT]\n  },\n  itemsByDimension: {\n    [DIMENSION_ID_ORGUNIT]: [],\n    [DIMENSION_ID_PERIOD]: []\n  },\n  yearOverYearSeries: [],\n  yearOverYearCategory: [],\n  itemAttributes: [],\n  parentGraphMap: {},\n  activeModalDialog: null,\n  rightSidebarOpen: false,\n  interpretation: {},\n  outlierAnalysis: null\n};\nexport const PRESELECTED_YEAR_OVER_YEAR_SERIES = ['THIS_YEAR', 'LAST_YEAR'];\nexport const PRESELECTED_YEAR_OVER_YEAR_CATEGORY = ['MONTHS_THIS_YEAR'];\n\nconst getPreselectedUi = options => {\n  const {\n    rootOrganisationUnit,\n    relativePeriod,\n    digitGroupSeparator\n  } = options;\n  const rootOrganisationUnits = [];\n  const parentGraphMap = { ...DEFAULT_UI.parentGraphMap\n  };\n\n  if (rootOrganisationUnit && rootOrganisationUnit.id) {\n    rootOrganisationUnits.push(rootOrganisationUnit.id);\n    parentGraphMap[rootOrganisationUnit.id] = '';\n  }\n\n  return { ...DEFAULT_UI,\n    options: { ...DEFAULT_UI.options,\n      digitGroupSeparator\n    },\n    itemsByDimension: { ...DEFAULT_UI.itemsByDimension,\n      [DIMENSION_ID_ORGUNIT]: rootOrganisationUnits,\n      [DIMENSION_ID_PERIOD]: [relativePeriod]\n    },\n    yearOverYearSeries: PRESELECTED_YEAR_OVER_YEAR_SERIES,\n    yearOverYearCategory: PRESELECTED_YEAR_OVER_YEAR_CATEGORY,\n    parentGraphMap\n  };\n};\n\nexport default ((state = DEFAULT_UI, action) => {\n  switch (action.type) {\n    case SET_UI:\n      {\n        return { ...action.value\n        };\n      }\n\n    case SET_UI_FROM_VISUALIZATION:\n      {\n        return getAdaptedUiByType(getUiFromVisualization(action.value, state));\n      }\n\n    case SET_UI_TYPE:\n      {\n        return { ...state,\n          type: action.value\n        };\n      }\n\n    case SET_UI_OPTIONS:\n      {\n        return { ...state,\n          options: { ...state.options,\n            ...action.value\n          }\n        };\n      }\n\n    case SET_UI_OPTION:\n      {\n        const options = {\n          axes: state.options.axes || [],\n          legend: state.options.legend || {},\n          fontStyle: state.options.fontStyle || {}\n        };\n        const value = action.value.value;\n        const optionId = action.value.optionId;\n        const [axisType, axisIndex] = (action.value.axisId || '').split('_');\n        const fontStyleOption = action.value.fontStyleOption;\n\n        const pushAxis = axis => {\n          options.axes = options.axes.filter(filter => filter.index !== Number(axis.index) || filter.type !== axis.type);\n          options.axes.push(axis);\n        };\n\n        switch (optionId) {\n          case OPTION_AXIS_DECIMALS:\n          case OPTION_AXIS_STEPS:\n          case OPTION_AXIS_MAX_VALUE:\n          case OPTION_AXIS_MIN_VALUE:\n            {\n              pushAxis({ ...getAxis(options.axes, Number(axisIndex), axisType),\n                [optionId]: value\n              });\n              break;\n            }\n\n          case OPTION_HIDE_LEGEND:\n            options.legend = { ...options.legend,\n              hidden: value\n            };\n            break;\n\n          case OPTION_AXIS_TITLE:\n            {\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              pushAxis({ ...axis,\n                title: { ...axis.title,\n                  text: value\n                }\n              });\n              break;\n            }\n\n          case OPTION_AXIS_TITLE_ENABLED:\n            {\n              pushAxis({ ...getAxis(options.axes, Number(axisIndex), axisType),\n                title: value ? {\n                  enabled: value\n                } : null\n              });\n              break;\n            }\n\n          case OPTION_BASE_LINE_ENABLED:\n          case OPTION_TARGET_LINE_ENABLED:\n            {\n              const prop = optionId === OPTION_BASE_LINE_ENABLED ? 'baseLine' : 'targetLine';\n              pushAxis({ ...getAxis(options.axes, Number(axisIndex), axisType),\n                [prop]: value ? {\n                  enabled: value\n                } : null\n              });\n              break;\n            }\n\n          case OPTION_BASE_LINE_TITLE:\n          case OPTION_TARGET_LINE_TITLE:\n            {\n              const prop = optionId === OPTION_BASE_LINE_TITLE ? 'baseLine' : 'targetLine';\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis[prop] = { ...axis[prop],\n                title: { ...axis[prop]?.title,\n                  text: value || undefined\n                }\n              };\n              pushAxis(axis);\n              break;\n            }\n\n          case OPTION_BASE_LINE_VALUE:\n          case OPTION_TARGET_LINE_VALUE:\n            {\n              const prop = optionId === OPTION_BASE_LINE_VALUE ? 'baseLine' : 'targetLine';\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis[prop] = { ...axis[prop],\n                value: value || value === 0 ? value : undefined\n              };\n              pushAxis(axis);\n              break;\n            }\n\n          case OPTION_BASE_LINE_TITLE_FONT_STYLE:\n          case OPTION_TARGET_LINE_TITLE_FONT_STYLE:\n            {\n              const prop = optionId === OPTION_BASE_LINE_TITLE_FONT_STYLE ? 'baseLine' : 'targetLine';\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis[prop].title = { ...axis[prop].title,\n                fontStyle: { ...axis[prop].title?.fontStyle,\n                  [fontStyleOption]: defaultFontStyle[FONT_STYLE_REGRESSION_LINE_LABEL][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              pushAxis(axis);\n              break;\n            }\n\n          case FONT_STYLE_VERTICAL_AXIS_TITLE:\n          case FONT_STYLE_HORIZONTAL_AXIS_TITLE:\n            {\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis.title = { ...axis.title,\n                fontStyle: { ...axis.title?.fontStyle,\n                  [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              pushAxis(axis);\n              break;\n            }\n\n          case FONT_STYLE_AXIS_LABELS:\n            {\n              const axis = getAxis(options.axes, Number(axisIndex), axisType);\n              axis.label = { ...axis.label,\n                fontStyle: { ...axis.label?.fontStyle,\n                  [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              pushAxis(axis);\n              break;\n            }\n\n          case FONT_STYLE_LEGEND:\n            {\n              options.legend = { ...options.legend,\n                label: {\n                  fontStyle: { ...options.legend.label?.fontStyle,\n                    [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                  }\n                }\n              };\n              break;\n            }\n\n          case FONT_STYLE_VISUALIZATION_TITLE:\n          case FONT_STYLE_VISUALIZATION_SUBTITLE:\n            {\n              options.fontStyle = { ...options.fontStyle,\n                [optionId]: { ...options.fontStyle[optionId],\n                  [fontStyleOption]: defaultFontStyle[optionId][fontStyleOption] !== value ? value : undefined\n                }\n              };\n              break;\n            }\n\n          default:\n            {\n              options[optionId] = value;\n              break;\n            }\n        }\n\n        options.fontStyle = deepClean(options.fontStyle);\n        options.legend = deepClean(options.legend);\n        options.axes = options.axes.map(axis => {\n          const cleanAxis = deepClean(axis);\n          return !Object.keys(cleanAxis).filter(key => !['type', 'index'].includes(key)).length ? null : cleanAxis;\n        }).filter(i => i);\n        return { ...state,\n          options: { ...state.options,\n            ...options\n          }\n        };\n      }\n\n    case SET_UI_LAYOUT:\n      {\n        return { ...state,\n          layout: { ...action.value\n          }\n        };\n      }\n    // action.value: transfer object (dimensionId:axisId) saying what to add where: { ou: 'rows' }\n    // Reducer takes care of swapping (retransfer) if dimension already exists in layout\n\n    case ADD_UI_LAYOUT_DIMENSIONS:\n      {\n        const transfers = { ...action.value,\n          ...getRetransfer(state.layout, action.value, state.type)\n        };\n        let newLayout = state.layout; // Add dimension ids to destination (axisId === null means remove from layout)\n\n        Object.entries(transfers).forEach(([dimensionId, {\n          axisId,\n          index\n        }]) => {\n          if (newLayout[axisId] && canDimensionBeAddedToAxis(state.type, newLayout[axisId], axisId)) {\n            // Filter out transferred dimension id (remove from source)\n            newLayout = getFilteredLayout(newLayout, [dimensionId]);\n\n            if (index === null || index === undefined) {\n              newLayout[axisId].push(dimensionId);\n            } else {\n              newLayout[axisId].splice(index, 0, dimensionId);\n            }\n          }\n        });\n        return { ...state,\n          layout: newLayout\n        };\n      }\n\n    case REMOVE_UI_LAYOUT_DIMENSIONS:\n      {\n        return { ...state,\n          layout: getFilteredLayout(state.layout, action.value)\n        };\n      }\n\n    case SET_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: itemIds\n          }\n        };\n      }\n\n    case ADD_UI_ITEMS:\n      {\n        // FIXME: Unused, remove?\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        const currentItemIds = state.itemsByDimension[dimensionId] || [];\n        const dxItems = [...new Set([...currentItemIds, ...itemIds])];\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          }\n        };\n      }\n\n    case REMOVE_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIdsToRemove\n        } = action.value;\n        const dxItems = (state.itemsByDimension[dimensionId] || []).filter(id => !itemIdsToRemove.includes(id));\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          }\n        };\n      }\n\n    case SET_UI_YEAR_ON_YEAR_SERIES:\n      {\n        return { ...state,\n          yearOverYearSeries: action.value || DEFAULT_UI.yearOverYearSeries\n        };\n      }\n\n    case SET_UI_YEAR_ON_YEAR_CATEGORY:\n      {\n        return { ...state,\n          yearOverYearCategory: action.value ? castArray(action.value) : DEFAULT_UI.yearOverYearCategory\n        };\n      }\n\n    case SET_UI_ITEM_ATTRIBUTES:\n      {\n        const {\n          attribute,\n          itemIds,\n          dimensionId\n        } = action.value;\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: [...new Set([...state.itemsByDimension[dimensionId], ...itemIds])]\n          },\n          itemAttributes: [...state.itemAttributes.filter(item => item.attribute !== attribute), ...itemIds.map(id => ({\n            id,\n            attribute\n          }))]\n        };\n      }\n\n    case REMOVE_UI_ITEM_ATTRIBUTES:\n      {\n        const {\n          dimensionId,\n          itemIdsToRemove,\n          attribute\n        } = action.value;\n        const itemAttributes = (state.itemAttributes || []).filter(({\n          id: itemId,\n          attribute: itemAttribute\n        }) => !(itemIdsToRemove.includes(itemId) && itemAttribute === attribute));\n        const dxItems = (state.itemsByDimension[dimensionId] || []).filter(id => itemAttributes.some(({\n          id: itemId\n        }) => itemId === id) || !itemIdsToRemove.includes(id));\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          },\n          itemAttributes\n        };\n      }\n\n    case SET_UI_PARENT_GRAPH_MAP:\n      {\n        return { ...state,\n          parentGraphMap: action.value\n        };\n      }\n\n    case ADD_UI_PARENT_GRAPH_MAP:\n      {\n        return { ...state,\n          parentGraphMap: { ...state.parentGraphMap,\n            ...action.value\n          }\n        };\n      }\n\n    case SET_UI_ACTIVE_MODAL_DIALOG:\n      {\n        return { ...state,\n          activeModalDialog: action.value || DEFAULT_UI.activeModalDialog\n        };\n      }\n\n    case CLEAR_UI:\n      {\n        return getPreselectedUi(action.value);\n      }\n\n    case TOGGLE_UI_RIGHT_SIDEBAR_OPEN:\n      return { ...state,\n        rightSidebarOpen: !state.rightSidebarOpen\n      };\n\n    case SET_UI_RIGHT_SIDEBAR_OPEN:\n      return { ...state,\n        rightSidebarOpen: true\n      };\n\n    case SET_UI_INTERPRETATION:\n      return { ...state,\n        interpretation: action.value\n      };\n\n    case CLEAR_UI_INTERPRETATION:\n      return { ...state,\n        interpretation: DEFAULT_UI.interpretation\n      };\n\n    case CLEAR_SERIES_TYPE:\n      return { ...state,\n        options: { ...state.options,\n          series: state.options.series.map(({\n            type,\n            ...rest\n          }) => rest)\n        }\n      };\n\n    case UPDATE_UI_SERIES_ITEM:\n      {\n        const {\n          changedItem,\n          value,\n          prop\n        } = action.value;\n        const series = [...state.options.series];\n        const itemIndex = series.findIndex(item => item.dimensionItem == changedItem.dimensionItem);\n\n        if (prop === SERIES_ITEM_TYPE_PROP && value === state.type) {\n          const {\n            [prop]: remove,\n            ...rest\n          } = series[itemIndex];\n          series[itemIndex] = { ...rest\n          };\n        } else {\n          series[itemIndex] = Object.assign({}, series[itemIndex], {\n            [prop]: value\n          });\n        }\n\n        return { ...state,\n          options: { ...state.options,\n            series\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetUi = state => state.ui;\nexport const sGetUiType = state => sGetUi(state).type;\nexport const sGetUiOptions = state => sGetUi(state).options;\nexport const sGetUiLayout = state => sGetUi(state).layout;\nexport const sGetUiItems = state => sGetUi(state).itemsByDimension;\nexport const sGetUiYearOverYearSeries = state => sGetUi(state).yearOverYearSeries;\nexport const sGetUiYearOverYearCategory = state => sGetUi(state).yearOverYearCategory;\nexport const sGetUiItemsByAttribute = (state, attribute) => (sGetUi(state).itemAttributes || []).filter(item => item.attribute === attribute).map(item => item.id);\nexport const sGetUiParentGraphMap = state => sGetUi(state).parentGraphMap;\nexport const sGetUiActiveModalDialog = state => sGetUi(state).activeModalDialog;\nexport const sGetUiRightSidebarOpen = state => sGetUi(state).rightSidebarOpen;\nexport const sGetUiInterpretation = state => sGetUi(state).interpretation;\nexport const sGetAxes = state => sGetUi(state).axes; // Selectors level 2\n\nexport const sGetAxisIdByDimensionId = (state, dimensionId) => (getInverseLayout(sGetUiLayout(state)) || {})[dimensionId];\nexport const sGetUiItemsByDimension = (state, dimension) => sGetUiItems(state)[dimension] || DEFAULT_UI.itemsByDimension[dimension];\nexport const sGetDimensionItemsByAxis = (state, axisId) => sGetUiItemsByDimension(state, (sGetUiLayout(state) || {})[axisId]) || [];\nexport const sGetDimensionIdsFromLayout = state => Object.values(sGetUiLayout(state)).reduce((ids, axisDimensionIds) => ids.concat(axisDimensionIds), []);\nexport const sLayoutHasDimension = (state, dimension) => sGetDimensionIdsFromLayout(state).includes(dimension);\nexport const sLayoutHasAssignedCategories = state => sLayoutHasDimension(state, DIMENSION_ID_ASSIGNED_CATEGORIES);\nexport const sGetAxisSetup = state => {\n  const columns = sGetUiLayout(state).columns;\n  const items = sGetUiItems(state);\n  const axes = sGetAxes(state) || {};\n  return Array.isArray(items[columns[0]]) && items[columns[0]].length ? items[columns[0]].map(id => ({\n    id,\n    axis: id in axes ? axes[id] : 0\n  })) : [];\n};\nexport const sGetUiOption = (state, option) => {\n  const options = sGetUi(state).options;\n  const [axisType, axisIndex] = (option.axisId || '').split('_');\n  let value;\n\n  if (option.name) {\n    value = options[option.name];\n  } else if (option.id) {\n    switch (option.id) {\n      case OPTION_AXIS_MAX_VALUE:\n      case OPTION_AXIS_MIN_VALUE:\n      case OPTION_AXIS_DECIMALS:\n      case OPTION_AXIS_STEPS:\n        value = getAxis(options.axes, Number(axisIndex), axisType)[option.id];\n        break;\n\n      case OPTION_AXIS_TITLE_ENABLED:\n        value = getAxis(options.axes, Number(axisIndex), axisType).title?.enabled;\n        break;\n\n      case OPTION_AXIS_TITLE:\n        value = getAxis(options.axes, Number(axisIndex), axisType).title?.text;\n        break;\n\n      case OPTION_HIDE_LEGEND:\n        value = options.legend?.hidden;\n        break;\n\n      case FONT_STYLE_LEGEND:\n        value = getConsolidatedFontStyle(option.id, options.legend?.label?.fontStyle);\n        break;\n\n      case OPTION_BASE_LINE_ENABLED:\n        value = getAxis(options.axes, Number(axisIndex), axisType).baseLine?.enabled;\n        break;\n\n      case OPTION_BASE_LINE_TITLE:\n        value = getAxis(options.axes, Number(axisIndex), axisType).baseLine?.title?.text;\n        break;\n\n      case OPTION_BASE_LINE_VALUE:\n        value = getAxis(options.axes, Number(axisIndex), axisType).baseLine?.value;\n        break;\n\n      case OPTION_BASE_LINE_TITLE_FONT_STYLE:\n        value = getConsolidatedFontStyle(FONT_STYLE_REGRESSION_LINE_LABEL, getAxis(options.axes, Number(axisIndex), axisType).baseLine?.title?.fontStyle);\n        break;\n\n      case OPTION_TARGET_LINE_ENABLED:\n        value = getAxis(options.axes, Number(axisIndex), axisType).targetLine?.enabled;\n        break;\n\n      case OPTION_TARGET_LINE_TITLE:\n        value = getAxis(options.axes, Number(axisIndex), axisType).targetLine?.title?.text;\n        break;\n\n      case OPTION_TARGET_LINE_VALUE:\n        value = getAxis(options.axes, Number(axisIndex), axisType).targetLine?.value;\n        break;\n\n      case OPTION_TARGET_LINE_TITLE_FONT_STYLE:\n        value = getConsolidatedFontStyle(FONT_STYLE_REGRESSION_LINE_LABEL, getAxis(options.axes, Number(axisIndex), axisType).targetLine?.title?.fontStyle);\n        break;\n\n      case FONT_STYLE_AXIS_LABELS:\n        value = getConsolidatedFontStyle(option.id, getAxis(options.axes, Number(axisIndex), axisType).label?.fontStyle);\n        break;\n\n      case FONT_STYLE_VERTICAL_AXIS_TITLE:\n      case FONT_STYLE_HORIZONTAL_AXIS_TITLE:\n        value = getConsolidatedFontStyle(option.id, getAxis(options.axes, Number(axisIndex), axisType).title?.fontStyle);\n        break;\n\n      case FONT_STYLE_VISUALIZATION_TITLE:\n      case FONT_STYLE_VISUALIZATION_SUBTITLE:\n        value = getConsolidatedFontStyle(option.id, (options.fontStyle || {})[option.id]);\n        break;\n    }\n  }\n\n  return value;\n};\n\nconst getAxis = (axes = [], axisIndex, axisType) => ({ ...(axes.find(axis => axis.index === axisIndex && axis.type === axisType) || {\n    index: Number(axisIndex),\n    type: axisType\n  })\n});\n\nconst getConsolidatedFontStyle = (fontStyleKey, fontStyle) => ({ ...defaultFontStyle[fontStyleKey],\n  ...(fontStyle || {})\n});\n\nconst deepClean = input => {\n  const result = objectClean(input);\n  Object.keys(result).forEach(key => {\n    if (typeof result[key] === 'object') {\n      result[key] = deepClean(result[key]);\n\n      if (!Object.keys(result[key]).length) {\n        delete result[key];\n      }\n    }\n  });\n  return result;\n};","export const ADD_METADATA = 'ADD_METADATA';\nexport const DEFAULT_METADATA = {};\nexport default ((state = DEFAULT_METADATA, action) => {\n  switch (action.type) {\n    case ADD_METADATA:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetMetadata = state => state.metadata;","export const SET_SETTINGS = 'SET_SETTINGS';\nexport const ADD_SETTINGS = 'ADD_SETTINGS';\nexport const DEFAULT_SETTINGS = {\n  keyDateFormat: 'yyyy-MM-dd',\n  keyAnalysisRelativePeriod: 'LAST_12_MONTHS',\n  keyAnalysisDigitGroupSeparator: 'SPACE',\n  keyIgnoreAnalyticsApprovalYearThreshold: -1,\n  displayNameProperty: 'displayName',\n  uiLocale: 'en',\n  rootOrganisationUnit: {}\n};\nexport default ((state = DEFAULT_SETTINGS, action) => {\n  switch (action.type) {\n    case SET_SETTINGS:\n      {\n        return Object.assign({}, action.value);\n      }\n\n    case ADD_SETTINGS:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetSettings = state => state.settings;\nexport const sGetSettingsDisplayNameProperty = state => sGetSettings(state).displayNameProperty;\nexport const sGetSettingsDigitGroupSeparator = state => sGetSettings(state).keyAnalysisDigitGroupSeparator;\nexport const sGetRootOrgUnit = state => sGetSettings(state).rootOrganisationUnit;\nexport const sGetRelativePeriod = state => sGetSettings(state).keyAnalysisRelativePeriod;\nexport const sGetUiLocale = state => sGetSettings(state).uiLocale;","export const RECEIVED_USER = 'RECEIVED_USER';\nexport const SET_USER_AUTHORITY = 'SET_USER_AUTHORITY';\nexport const DEFAULT_USER = {\n  id: '',\n  username: '',\n  uiLocale: '',\n  isSuperuser: false,\n  authorities: {}\n};\nexport default ((state = DEFAULT_USER, action) => {\n  switch (action.type) {\n    case RECEIVED_USER:\n      {\n        return fromD2ToUserObj(action.value);\n      }\n\n    case SET_USER_AUTHORITY:\n      {\n        return { ...state,\n          authorities: { ...state.authorities,\n            ...action.value\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n});\n\nfunction fromD2ToUserObj(d2Object) {\n  return {\n    id: d2Object.id,\n    username: d2Object.username,\n    uiLocale: d2Object.settings.keyUiLocale,\n    isSuperuser: d2Object.authorities.has('ALL')\n  };\n} // Selectors\n\n\nexport const sGetUser = state => state.user;\nexport const sGetUserId = state => sGetUser(state).id;\nexport const sGetUsername = state => sGetUser(state).username;\nexport const sGetIsSuperuser = state => sGetUser(state).isSuperuser;\nexport const sGetUiLocale = state => sGetUser(state).uiLocale;\nexport const sGetUserAuthorities = state => sGetUser(state).authorities;","export const RECEIVED_SNACKBAR_MESSAGE = 'RECEIVED_SNACKBAR_MESSAGE';\nexport const CLEAR_SNACKBAR = 'CLEAR_SNACKBAR';\nexport const DEFAULT_SNACKBAR = {\n  message: null,\n  duration: null\n};\nexport default ((state = DEFAULT_SNACKBAR, action) => {\n  switch (action.type) {\n    case RECEIVED_SNACKBAR_MESSAGE:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    case CLEAR_SNACKBAR:\n      {\n        return DEFAULT_SNACKBAR;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetSnackbar = state => state.snackbar;","export const SET_LOAD_ERROR = 'SET_LOAD_ERROR';\nexport const CLEAR_LOAD_ERROR = 'CLEAR_LOAD_ERROR';\nexport const SET_LOADING = 'SET_LOADING';\nexport const SET_PLUGIN_LOADING = 'SET_PLUGIN_LOADING';\nexport const DEFAULT_LOADING = {\n  isLoading: false,\n  loadingError: null,\n  isPluginLoading: true\n};\nexport default ((state = DEFAULT_LOADING, action) => {\n  switch (action.type) {\n    case SET_LOAD_ERROR:\n      {\n        return { ...state,\n          loadingError: action.value\n        };\n      }\n\n    case CLEAR_LOAD_ERROR:\n      return { ...state,\n        loadingError: DEFAULT_LOADING.loadingError\n      };\n\n    case SET_LOADING:\n      return { ...state,\n        isLoading: action.value\n      };\n\n    case SET_PLUGIN_LOADING:\n      return { ...state,\n        isPluginLoading: action.value\n      };\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetLoadError = state => state.loader.loadingError;\nexport const sGetIsLoading = state => state.loader.isLoading;\nexport const sGetIsPluginLoading = state => state.loader.isPluginLoading;","export const SET_CHART = 'SET_CHART';\nexport const DEFAULT_CHART = null;\nexport default ((state = DEFAULT_CHART, action) => {\n  switch (action.type) {\n    case SET_CHART:\n      {\n        return action.value;\n      }\n\n    default:\n      return state;\n  }\n});\nexport const sGetChart = state => state.chart;","import { combineReducers } from 'redux';\nimport visualization, * as fromVisualization from './visualization';\nimport current, * as fromCurrent from './current';\nimport dimensions, * as fromDimensions from './dimensions';\nimport recommendedIds, * as fromRecommendedIds from './recommendedIds';\nimport ui, * as fromUi from './ui';\nimport metadata, * as fromMetadata from './metadata';\nimport settings, * as fromSettings from './settings';\nimport user, * as fromUser from './user';\nimport snackbar, * as fromSnackbar from './snackbar';\nimport loader, * as fromLoader from './loader';\nimport chart, * as fromChart from './chart'; // Reducers\n\nexport default combineReducers({\n  visualization,\n  current,\n  dimensions,\n  recommendedIds,\n  ui,\n  metadata,\n  settings,\n  user,\n  snackbar,\n  loader,\n  chart\n}); // Selectors\n\nexport { fromVisualization, fromCurrent, fromDimensions, fromRecommendedIds, fromUi, fromMetadata, fromSettings, fromUser, fromSnackbar, fromLoader, fromChart };\nexport const sGetSeriesSetupItems = state => fromUi.sGetAxisSetup(state).map(item => ({\n  dimensionItem: item.id,\n  axis: item.axis,\n  name: fromMetadata.sGetMetadata(state)[item.id]?.name\n}));","import { createStore, applyMiddleware, compose } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport reducer from './reducers';\n\nconst configureStore = middleware => {\n  // Enable Redux devtools if extension is installed instead of redux-logger\n  // const composeEnhancers =\n  //     window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const composeEnhancers = typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: 'data-visualizer-app'\n  }) : compose;\n\n  if (!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV !== 'production') {\n    middleware.push(createLogger());\n  }\n\n  return createStore(reducer, composeEnhancers(applyMiddleware(...middleware)));\n};\n\nexport default configureStore;","import { ADD_METADATA } from '../reducers/metadata';\nexport const acAddMetadata = value => ({\n  type: ADD_METADATA,\n  value\n});","import { acAddMetadata } from '../actions/metadata';\nexport default (({\n  dispatch\n}) => next => action => {\n  typeof action.metadata === 'object' && !Array.isArray(action.metadata) && dispatch(acAddMetadata(action.metadata));\n  next(action);\n});","import { SET_UI, CLEAR_UI, SET_UI_FROM_VISUALIZATION, SET_UI_TYPE, SET_UI_OPTIONS, SET_UI_LAYOUT, ADD_UI_LAYOUT_DIMENSIONS, REMOVE_UI_LAYOUT_DIMENSIONS, SET_UI_ITEMS, ADD_UI_ITEMS, REMOVE_UI_ITEMS, ADD_UI_PARENT_GRAPH_MAP, SET_UI_PARENT_GRAPH_MAP, SET_UI_ACTIVE_MODAL_DIALOG, SET_UI_YEAR_ON_YEAR_SERIES, SET_UI_YEAR_ON_YEAR_CATEGORY, SET_UI_ITEM_ATTRIBUTES, REMOVE_UI_ITEM_ATTRIBUTES, TOGGLE_UI_RIGHT_SIDEBAR_OPEN, SET_UI_RIGHT_SIDEBAR_OPEN, SET_UI_INTERPRETATION, CLEAR_UI_INTERPRETATION, CLEAR_SERIES_TYPE, UPDATE_UI_SERIES_ITEM, SET_UI_OPTION } from '../reducers/ui';\nexport const acSetUi = value => ({\n  type: SET_UI,\n  value\n});\nexport const acClear = value => ({\n  type: CLEAR_UI,\n  value\n});\nexport const acSetUiFromVisualization = value => ({\n  type: SET_UI_FROM_VISUALIZATION,\n  value\n});\nexport const acSetUiType = value => ({\n  type: SET_UI_TYPE,\n  value\n});\nexport const acSetUiOptions = value => ({\n  type: SET_UI_OPTIONS,\n  value\n});\nexport const acSetUiOption = value => ({\n  type: SET_UI_OPTION,\n  value\n});\nexport const acUpdateUiSeriesItem = value => ({\n  type: UPDATE_UI_SERIES_ITEM,\n  value\n});\nexport const acSetUiLayout = value => ({\n  type: SET_UI_LAYOUT,\n  value\n});\nexport const acAddUiLayoutDimensions = value => ({\n  type: ADD_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acRemoveUiLayoutDimensions = value => ({\n  type: REMOVE_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acSetUiItems = value => ({\n  type: SET_UI_ITEMS,\n  value\n});\nexport const acAddUiItems = value => ({\n  type: ADD_UI_ITEMS,\n  value\n});\nexport const acRemoveUiItems = value => ({\n  type: REMOVE_UI_ITEMS,\n  value\n});\nexport const acSetUiYearOverYearSeries = value => ({\n  type: SET_UI_YEAR_ON_YEAR_SERIES,\n  value\n});\nexport const acSetUiYearOverYearCategory = value => ({\n  type: SET_UI_YEAR_ON_YEAR_CATEGORY,\n  value\n});\nexport const acSetUiItemAttributes = value => ({\n  type: SET_UI_ITEM_ATTRIBUTES,\n  value\n});\nexport const acRemoveUiItemAttributes = value => ({\n  type: REMOVE_UI_ITEM_ATTRIBUTES,\n  value\n});\nexport const acAddParentGraphMap = value => ({\n  type: ADD_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetParentGraphMap = value => ({\n  type: SET_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetUiActiveModalDialog = value => ({\n  type: SET_UI_ACTIVE_MODAL_DIALOG,\n  value\n});\nexport const acToggleUiRightSidebarOpen = () => ({\n  type: TOGGLE_UI_RIGHT_SIDEBAR_OPEN\n});\nexport const acSetUiRightSidebarOpen = () => ({\n  type: SET_UI_RIGHT_SIDEBAR_OPEN\n});\nexport const acSetUiInterpretation = value => ({\n  type: SET_UI_INTERPRETATION,\n  value\n});\nexport const acClearUiInterpretation = () => ({\n  type: CLEAR_UI_INTERPRETATION\n});\nexport const acClearSeriesType = () => ({\n  type: CLEAR_SERIES_TYPE\n});","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport { canDimensionBeAddedToAxis, getPredefinedDimensionProp, DIMENSION_PROP_NO_ITEMS } from '@dhis2/analytics';\nimport { sGetUiLayout, sGetUiItems, sGetUiType } from '../reducers/ui';\nimport { acAddUiLayoutDimensions, acSetUiActiveModalDialog, acSetUiLayout } from '../actions/ui';\nimport { SOURCE_DIMENSIONS } from '../modules/layout';\n\nclass DndContext extends Component {\n  rearrangeLayoutDimensions = ({\n    sourceAxisId,\n    sourceIndex,\n    destinationAxisId,\n    destinationIndex\n  }) => {\n    const layout = this.props.layout;\n    const sourceList = Array.from(layout[sourceAxisId]);\n    const [moved] = sourceList.splice(sourceIndex, 1);\n\n    if (sourceAxisId === destinationAxisId) {\n      sourceList.splice(destinationIndex, 0, moved);\n      this.props.onReorderDimensions({ ...layout,\n        [sourceAxisId]: sourceList\n      });\n    } else {\n      if (canDimensionBeAddedToAxis(this.props.type, layout[destinationAxisId], destinationAxisId)) {\n        this.props.onAddDimensions({\n          [moved]: {\n            axisId: destinationAxisId,\n            index: destinationIndex\n          }\n        });\n      }\n    }\n  };\n  addDimensionToLayout = ({\n    axisId,\n    index,\n    dimensionId\n  }) => {\n    const {\n      layout,\n      type\n    } = this.props;\n\n    if (!canDimensionBeAddedToAxis(type, layout[axisId], axisId)) {\n      return;\n    }\n\n    this.props.onAddDimensions({\n      [dimensionId]: {\n        axisId,\n        index\n      }\n    });\n    const items = this.props.itemsByDimension[dimensionId];\n    const hasNoItems = Boolean(!items || !items.length);\n\n    if (hasNoItems && !getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS)) {\n      this.props.onDropWithoutItems(dimensionId);\n    }\n  };\n  onDragEnd = result => {\n    const {\n      source,\n      destination,\n      draggableId\n    } = result;\n\n    if (!destination) {\n      return;\n    }\n\n    if (source.droppableId === SOURCE_DIMENSIONS) {\n      this.addDimensionToLayout({\n        axisId: destination.droppableId,\n        index: destination.index,\n        dimensionId: draggableId\n      });\n    } else {\n      this.rearrangeLayoutDimensions({\n        sourceAxisId: source.droppableId,\n        sourceIndex: source.index,\n        destinationAxisId: destination.droppableId,\n        destinationIndex: destination.index\n      });\n    }\n  };\n\n  render() {\n    return <DragDropContext onDragEnd={this.onDragEnd}>\n                {this.props.children}\n            </DragDropContext>;\n  }\n\n}\n\nDndContext.propTypes = {\n  children: PropTypes.node,\n  itemsByDimension: PropTypes.object,\n  layout: PropTypes.object,\n  type: PropTypes.string,\n  onAddDimensions: PropTypes.func,\n  onDropWithoutItems: PropTypes.func,\n  onReorderDimensions: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  layout: sGetUiLayout(state),\n  type: sGetUiType(state),\n  itemsByDimension: sGetUiItems(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onAddDimensions: map => dispatch(acAddUiLayoutDimensions(map)),\n  onDropWithoutItems: dimensionId => dispatch(acSetUiActiveModalDialog(dimensionId)),\n  onReorderDimensions: layout => dispatch(acSetUiLayout(layout))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DndContext);","import { RECEIVED_SNACKBAR_MESSAGE, CLEAR_SNACKBAR } from '../reducers/snackbar';\nexport const acReceivedSnackbarMessage = value => ({\n  type: RECEIVED_SNACKBAR_MESSAGE,\n  value\n});\nexport const acClearSnackbar = () => ({\n  type: CLEAR_SNACKBAR\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { AlertBar } from '@dhis2/ui';\nimport styles from './styles/Snackbar.module.css';\nimport { sGetSnackbar } from '../../reducers/snackbar';\nimport { acClearSnackbar } from '../../actions/snackbar';\nexport const VARIANT_ERROR = 'error';\nexport const VARIANT_SUCCESS = 'success';\nexport const VARIANT_WARNING = 'warning';\nexport const Snackbar = ({\n  snackbar,\n  onClose\n}) => {\n  const {\n    variant,\n    message,\n    duration\n  } = snackbar;\n  return message && <div className={styles.container}>\n                <AlertBar duration={duration} critical={variant === VARIANT_ERROR} success={variant === VARIANT_SUCCESS} warning={variant === VARIANT_WARNING} permanent={variant === VARIANT_ERROR || variant === VARIANT_WARNING} onHidden={onClose}>\n                    {message}\n                </AlertBar>\n            </div>;\n};\nSnackbar.propTypes = {\n  snackbar: PropTypes.object,\n  onClose: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  snackbar: sGetSnackbar(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClose: () => dispatch(acClearSnackbar())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Snackbar);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\n\nconst UpdateButton = ({\n  onClick,\n  ...props\n}) => {\n  return <Button {...props} onClick={onClick} type=\"button\" primary>\n            {i18n.t('Update')}\n        </Button>;\n};\n\nUpdateButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default UpdateButton;","import { getInstance } from 'd2';\nimport { Analytics } from '@dhis2/analytics';\nexport const apiDownloadImage = async ({\n  baseUrl,\n  type,\n  formData\n}) => {\n  const d2 = await getInstance();\n  const api = d2.Api.getApi();\n  const url = `${baseUrl}/api/svg.${type}`;\n  return api.fetch(url, {\n    method: 'POST',\n    body: formData,\n    headers: new Headers(api.defaultHeaders)\n  }).then(res => res.blob());\n};\n\nconst addCommonParameters = (req, visualization, options) => {\n  req = req.withSkipRounding(visualization.skipRounding).withAggregationType(visualization.aggregationType).withMeasureCriteria(visualization.measureCriteria).withParameters({\n    completedOnly: visualization.completedOnly\n  }); //        .withUserOrgUnit(?) TODO\n\n  if (visualization.displayProperty) {\n    req = req.withDisplayProperty(visualization.displayProperty);\n  }\n\n  if (visualization.approvalLevel) {\n    req = req.withApprovalLevel(visualization.approvalLevel);\n  }\n\n  if (options.relativePeriodDate) {\n    req = req.withRelativePeriodDate(options.relativePeriodDate);\n  }\n\n  return req;\n};\n\nexport const apiDownloadTable = ({\n  dataEngine,\n  baseUrl,\n  visualization,\n  format,\n  options,\n  rows,\n  columns\n}) => {\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  let req = new analyticsEngine.request().fromVisualization(visualization).withFormat(format).withTableLayout().withRows(rows.join(';')).withColumns(columns.join(';'));\n  req = addCommonParameters(req, visualization, options);\n\n  if (visualization.hideEmptyColumns) {\n    req = req.withHideEmptyColumns();\n  }\n\n  if (visualization.hideEmptyRows) {\n    req = req.withHideEmptyRows();\n  }\n\n  if (visualization.showHierarchy) {\n    req = req.withShowHierarchy();\n  }\n\n  const url = new URL(`${baseUrl}/api/${req.buildUrl()}`, `${window.location.origin}${window.location.pathname}`);\n  Object.entries(req.buildQuery()).forEach(([key, value]) => url.searchParams.append(key, value));\n  return url;\n};\nexport const apiDownloadData = ({\n  baseUrl,\n  dataEngine,\n  visualization,\n  format,\n  options,\n  idScheme,\n  path\n}) => {\n  const analyticsEngine = Analytics.getAnalytics(dataEngine);\n  let req = new analyticsEngine.request().fromVisualization(visualization, path === 'dataValueSet').withFormat(format).withShowHierarchy(visualization.showHierarchy).withHierarchyMeta(visualization.showHierarchy).withIncludeMetadataDetails(true).withIncludeNumDen(); //.withApprovalLevel(visualization.?) TODO\n\n  req = addCommonParameters(req, visualization, options);\n\n  if (path) {\n    req = req.withPath(path);\n  }\n\n  if (idScheme) {\n    req = req.withOutputIdScheme(idScheme);\n  }\n\n  const url = new URL(`${baseUrl}/api/${req.buildUrl()}`, `${window.location.origin}${window.location.pathname}`);\n  Object.entries(req.buildQuery()).forEach(([key, value]) => url.searchParams.append(key, value));\n  return url;\n};","import PropTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './styles/MenuButton.module.css';\n\nconst MenuButton = ({\n  children,\n  dataTest,\n  disabled,\n  name,\n  onBlur,\n  onClick,\n  onFocus\n}) => <button className={styles.menuButton} data-test={dataTest} disabled={disabled} name={name} onBlur={onBlur} onClick={onClick} onFocus={onFocus}>\n        {children}\n    </button>;\n\nMenuButton.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default MenuButton;","import React, { useState, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { useConfig, useDataEngine } from '@dhis2/app-runtime';\nimport { FlyoutMenu, Layer, MenuSectionHeader, MenuItem, Popper, IconImage24, IconFileDocument24, colors } from '@dhis2/ui';\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport { sGetUiType, sGetUiLayout, sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetChart } from '../../reducers/chart';\nimport { apiDownloadImage, apiDownloadData, apiDownloadTable } from '../../api/analytics';\nimport MenuButton from '../MenuButton/MenuButton';\n\nconst DenseMenuItem = ({\n  Icon,\n  children,\n  ...rest\n}) => <MenuItem dense icon={Icon && <Icon color={colors.grey600} />} {...rest}>\n        {children}\n    </MenuItem>;\n\nDenseMenuItem.propTypes = {\n  Icon: PropTypes.elementType,\n  children: PropTypes.array\n};\nexport const DownloadMenu = ({\n  current,\n  rows,\n  columns,\n  chart,\n  relativePeriodDate,\n  visType\n}) => {\n  const dataEngine = useDataEngine();\n  const {\n    baseUrl\n  } = useConfig();\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n\n  const onKeyDown = e => {\n    if (e?.keyCode === 27) {\n      setMenuIsOpen(false);\n    }\n  };\n\n  const toggleMenu = () => setMenuIsOpen(!menuIsOpen);\n\n  const downloadImage = format => async () => {\n    const formData = new URLSearchParams();\n    formData.append('filename', current.name);\n\n    if (chart) {\n      formData.append('svg', chart);\n    }\n\n    const blob = await apiDownloadImage({\n      baseUrl,\n      type: format,\n      formData\n    });\n    const url = URL.createObjectURL(blob);\n    toggleMenu();\n    window.open(url, '_blank');\n  };\n\n  const downloadData = (format, idScheme, path) => async () => {\n    const url = await apiDownloadData({\n      baseUrl,\n      dataEngine,\n      visualization: current,\n      format,\n      options: {\n        relativePeriodDate\n      },\n      idScheme,\n      path\n    });\n    toggleMenu();\n    window.open(url, format.match(/(xls|csv)/) ? '_top' : '_blank');\n  };\n\n  const downloadTable = format => async () => {\n    const url = await apiDownloadTable({\n      baseUrl,\n      dataEngine,\n      visualization: current,\n      format,\n      options: {\n        relativePeriodDate\n      },\n      rows,\n      columns\n    });\n    toggleMenu();\n    window.open(url, format === 'html' ? '_blank' : '_top');\n  };\n  /* eslint-disable react/jsx-key */\n\n\n  const graphicsMenuSection = () => React.Children.toArray([<MenuSectionHeader label={i18n.t('Graphics')} />, <DenseMenuItem Icon={IconImage24} label={i18n.t('Image (.png)')} onClick={downloadImage('png')} />, <DenseMenuItem Icon={IconFileDocument24} label={i18n.t('PDF (.pdf)')} onClick={downloadImage('pdf')} />]);\n\n  const tableMenuSection = () => React.Children.toArray([<MenuSectionHeader label={i18n.t('Table layout')} />, <DenseMenuItem label={i18n.t('Excel (.xls)')} onClick={downloadTable('xls')} />, <DenseMenuItem label={i18n.t('CSV (.csv)')} onClick={downloadTable('csv')} />, <DenseMenuItem label={i18n.t('HTML (.html)')} onClick={downloadTable('html')} />]);\n\n  const plainDataSourceSubLevel = format => React.Children.toArray([<MenuSectionHeader label={i18n.t('Metadata ID scheme')} />, <DenseMenuItem label={i18n.t('ID')} onClick={downloadData(format, 'UID')} />, <DenseMenuItem label={i18n.t('Code')} onClick={downloadData(format, 'CODE')} />, <DenseMenuItem label={i18n.t('Name')} onClick={downloadData(format, 'NAME')} />]);\n  /* eslint-enable react/jsx-key */\n\n\n  const buttonRef = createRef();\n  return <div onKeyDown={onKeyDown}>\n            <div ref={buttonRef}>\n                <MenuButton onClick={toggleMenu} disabled={!current}>\n                    {i18n.t('Download')}\n                </MenuButton>\n            </div>\n            {menuIsOpen && <Layer position=\"fixed\" level={2000} onClick={toggleMenu}>\n                    <Popper reference={buttonRef} placement=\"bottom-start\">\n                        <FlyoutMenu>\n                            {visType === VIS_TYPE_PIVOT_TABLE ? tableMenuSection() : graphicsMenuSection()}\n                            <MenuSectionHeader label={i18n.t('Plain data source')} />\n                            <DenseMenuItem label={i18n.t('JSON')}>\n                                {plainDataSourceSubLevel('json')}\n                            </DenseMenuItem>\n                            <DenseMenuItem label={i18n.t('XML')}>\n                                {plainDataSourceSubLevel('xml')}\n                            </DenseMenuItem>\n                            <DenseMenuItem label={i18n.t('Excel')}>\n                                {plainDataSourceSubLevel('xls')}\n                            </DenseMenuItem>\n                            <DenseMenuItem label={i18n.t('CSV')}>\n                                {plainDataSourceSubLevel('csv')}\n                            </DenseMenuItem>\n                            <DenseMenuItem label={i18n.t('Advanced')}>\n                                <MenuSectionHeader label={i18n.t('Data value set')} />\n                                <DenseMenuItem label={i18n.t('JSON')} onClick={downloadData('json', null, 'dataValueSet')} />\n                                <DenseMenuItem label={i18n.t('XML')} onClick={downloadData('xml', null, 'dataValueSet')} />\n                                <MenuSectionHeader label={i18n.t('Other formats')} />\n                                <DenseMenuItem label={i18n.t('JRXML')} onClick={downloadData('jrxml')} />\n                                <DenseMenuItem label={i18n.t('Raw data SQL')} onClick={downloadData('sql', null, 'debug/sql')} />\n                            </DenseMenuItem>\n                        </FlyoutMenu>\n                    </Popper>\n                </Layer>}\n        </div>;\n};\nconst relativePeriodDateSelector = createSelector([sGetUiInterpretation], interpretation => interpretation.created || undefined);\nDownloadMenu.propTypes = {\n  chart: PropTypes.string,\n  columns: PropTypes.array,\n  current: PropTypes.object,\n  relativePeriodDate: PropTypes.string,\n  rows: PropTypes.array,\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  current: sGetCurrent(state),\n  relativePeriodDate: relativePeriodDateSelector(state),\n  rows: sGetUiLayout(state).rows,\n  columns: sGetUiLayout(state).columns,\n  chart: sGetChart(state),\n  visType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps)(DownloadMenu);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiRightSidebarOpen } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { acToggleUiRightSidebarOpen } from '../../actions/ui';\nimport MenuButton from '../MenuButton/MenuButton';\nimport styles from './styles/InterpretationsButton.module.css';\nexport const InterpretationsButton = props => <MenuButton disabled={!props.id} onClick={props.onClick}>\n        {props.rightSidebarOpen ? <KeyboardArrowRightIcon className={styles.icon} /> : <KeyboardArrowLeftIcon className={styles.icon} />}\n        {i18n.t('Interpretations')}\n    </MenuButton>;\nInterpretationsButton.propTypes = {\n  id: PropTypes.string,\n  rightSidebarOpen: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  rightSidebarOpen: sGetUiRightSidebarOpen(state),\n  id: (sGetCurrent(state) || {}).id\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClick: () => dispatch(acToggleUiRightSidebarOpen())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InterpretationsButton);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\n\nconst HideButton = ({\n  onClick,\n  ...props\n}) => <Button {...props} type=\"button\" secondary onClick={onClick}>\n        {i18n.t('Hide')}\n    </Button>;\n\nHideButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default HideButton;","// constants\nconst ID = 'id';\nconst NAME = 'name,displayName,displayShortName';\nconst DIMENSION_ITEM = `dimensionItem~rename(${ID})`;\nconst LEGEND_SET = `${ID},${NAME}`;\nconst USER = `${NAME},userCredentials[username]`;\nconst ITEMS = `${DIMENSION_ITEM},${NAME},dimensionItemType`;\nconst AXIS = `dimension,filter,legendSet[${LEGEND_SET}],items[${ITEMS}]`;\nconst INTERPRETATIONS = 'id,created'; // nested fields map\n\nexport const nestedFields = {\n  columns: AXIS,\n  rows: AXIS,\n  filters: AXIS,\n  user: USER,\n  interpretations: INTERPRETATIONS,\n  legendSet: LEGEND_SET\n};\nexport const extendFields = field => `${field}${nestedFields[field] ? `[${nestedFields[field]}]` : ''}`;","import { getFieldsStringByType } from '../modules/fields';\nconst visualizationQuery = {\n  visualization: {\n    resource: 'visualizations',\n    id: ({\n      id\n    }) => id,\n    params: {\n      fields: getFieldsStringByType('visualization')\n    }\n  }\n};\nconst visualizationsQuery = {\n  visualization: {\n    resource: 'visualizations',\n    params: ({\n      visualizationIds\n    }) => ({\n      filter: `id:in:[${visualizationIds}]`,\n      fields: ['id', 'type']\n    })\n  }\n};\nexport const apiFetchVisualization = (dataEngine, id) => {\n  return dataEngine.query(visualizationQuery, {\n    variables: {\n      id\n    }\n  });\n};\nexport const apiFetchVisualizations = (dataEngine, visualizationIds) => {\n  return dataEngine.query(visualizationsQuery, {\n    variables: {\n      visualizationIds\n    }\n  });\n};\nexport const apiSaveVisualization = (dataEngine, visualization) => {\n  const mutation = {\n    type: 'create',\n    resource: 'visualizations',\n    data: visualization,\n    params: {\n      skipTranslations: 'true',\n      skipSharing: 'true'\n    }\n  };\n\n  if (visualization.id) {\n    mutation.type = 'update';\n    mutation.id = visualization.id;\n  }\n\n  return dataEngine.mutate(mutation);\n};","import { getAllFieldObjectsByType, extractName, markExcluded, moveExcludedToEnd } from './baseFields';\nimport { extendFields } from './nestedFields';\nexport { getAllFieldObjectsByType };\nexport const getOptionsByType = type => getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.option === true);\nexport const getIncludedByType = type => getAllFieldObjectsByType(type).filter(fieldObj => !fieldObj.excluded);\nexport const getExcludedByType = type => getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.excluded === true);\nexport const getFieldsStringByType = type => getAllFieldObjectsByType(type).map(markExcluded).map(extractName).sort().reduce(moveExcludedToEnd, null).map(extendFields).join(',');","import { SET_VISUALIZATION, CLEAR_VISUALIZATION } from '../reducers/visualization';\nexport const acSetVisualization = visualization => ({\n  type: SET_VISUALIZATION,\n  value: visualization\n});\nexport const acClear = () => ({\n  type: CLEAR_VISUALIZATION\n});","import { SET_CURRENT, SET_CURRENT_FROM_UI, CLEAR_CURRENT } from '../reducers/current';\nimport { sGetUi } from '../reducers/ui';\nexport const acSetCurrent = value => ({\n  type: SET_CURRENT,\n  value\n});\nexport const acClear = () => ({\n  type: CLEAR_CURRENT\n});\nexport const acSetCurrentFromUi = value => ({\n  type: SET_CURRENT_FROM_UI,\n  value\n});\nexport const tSetCurrentFromUi = () => async (dispatch, getState) => {\n  dispatch(acSetCurrentFromUi(sGetUi(getState())));\n};","import keyBy from 'lodash-es/keyBy';\nimport sortBy from 'lodash-es/sortBy';\nimport { SET_DIMENSIONS } from '../reducers/dimensions';\nimport { apiFetchDimensions } from '@dhis2/analytics';\nimport { sGetSettingsDisplayNameProperty } from '../reducers/settings';\nexport const acSetDimensions = dimensions => ({\n  type: SET_DIMENSIONS,\n  value: keyBy(sortBy(dimensions, [d => d.name.toLowerCase()]), 'id')\n});\nexport const tSetDimensions = () => async (dispatch, getState, engine) => {\n  const onSuccess = dimensions => {\n    dispatch(acSetDimensions(dimensions));\n  };\n\n  const onError = error => {\n    console.log('Error (apiFetchDimensions): ', error);\n    return error;\n  };\n\n  try {\n    const displayNameProp = sGetSettingsDisplayNameProperty(getState());\n    const dimensions = await apiFetchDimensions(engine, displayNameProp);\n    return onSuccess(dimensions);\n  } catch (err) {\n    return onError(err);\n  }\n};","// Helper functions\nexport const onError = error => console.log('Error: ', error);","import { onError } from './index';\nimport { SYSTEM_SETTINGS } from '../modules/settings';\nconst systemSettingsQuery = {\n  resource: 'systemSettings',\n  params: {\n    key: SYSTEM_SETTINGS\n  }\n};\nexport const apiFetchSystemSettings = async dataEngine => {\n  const systemSettingsData = await dataEngine.query({\n    systemSettings: systemSettingsQuery\n  }, {\n    onError\n  });\n  return systemSettingsData.systemSettings;\n};","import { SET_SETTINGS, ADD_SETTINGS } from '../reducers/settings';\nimport { apiFetchSystemSettings } from '../api/settings';\nimport { apiFetchOrganisationUnitRoots } from '@dhis2/analytics';\nexport const acSetSettings = value => ({\n  type: SET_SETTINGS,\n  value\n});\nexport const acAddSettings = value => ({\n  type: ADD_SETTINGS,\n  value\n});\nexport const tAddSettings = (...extraSettings) => async (dispatch, getState, engine) => {\n  const onSuccess = fetchedSettings => {\n    dispatch(acAddSettings(Object.assign({}, fetchedSettings, ...extraSettings)));\n  };\n\n  const onError = error => {\n    console.log('Error (apiFetchSystemSettings): ', error);\n    return error;\n  };\n\n  try {\n    const fetchSystemSettings = apiFetchSystemSettings(engine);\n    const fetchOrgUnitRoots = apiFetchOrganisationUnitRoots(engine); // run in parallel\n\n    const [systemSettings, orgUnitRoots] = await Promise.all([fetchSystemSettings, fetchOrgUnitRoots]);\n    return onSuccess({ ...systemSettings,\n      rootOrganisationUnit: orgUnitRoots[0]\n    });\n  } catch (err) {\n    return onError(err);\n  }\n};","import { SET_LOAD_ERROR, CLEAR_LOAD_ERROR, SET_LOADING, SET_PLUGIN_LOADING } from '../reducers/loader';\nexport const acSetLoadError = value => ({\n  type: SET_LOAD_ERROR,\n  value\n});\nexport const acClearLoadError = () => ({\n  type: CLEAR_LOAD_ERROR\n});\nexport const acSetLoading = value => ({\n  type: SET_LOADING,\n  value\n});\nexport const acSetPluginLoading = value => ({\n  type: SET_PLUGIN_LOADING,\n  value\n});","import React from 'react';\nexport const EmptyBox = () => <svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M96.4184693 4.6480742l-2.9759268 2.6728C91.5558812 5.2202435 88.8786031 4 86 4V0c4.0260387 0 7.7809122 1.7113874 10.4184693 4.6480742zM100 19.269042h-4l-.0000544-5.3024514c-.0043849-1.346405-.2739964-2.6517927-.7866406-3.8623659l3.6833463-1.559795c.7189815 1.6978243 1.0971493 3.5288134 1.1032837 5.4156229L100 19.269042zm0 13.9999755h-4v-10h4v10zm0 14h-4v-10h4v10zm0 14h-4v-10h4v10zm0 13.9999995h-4v-9.9999995h4v9.9999995zm-.516108 14.50858l-3.8521996-1.077292C95.8751624 87.829701 96 86.924153 96 86v-6.730983h4V86c0 1.289184-.1747984 2.557136-.516108 3.777597zM87.7213345 99.895024l-.4874961-3.970182c2.8302961-.34753 5.3578432-1.892491 6.9762006-4.213767l3.2812621 2.287645c-2.2629208 3.245799-5.802045 5.409086-9.7699666 5.896304zM73.461965 100v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zM3.17264828 94.875717l3.09219912-2.537382c1.79303608 2.185097 4.4211055 3.525451 7.2855127 3.651773l-.176231 3.996116c-4.01094422-.176885-7.69477669-2.055693-10.20148082-5.110507zM0 80.192922h4l.00006331 5.84312c.00418159 1.190127.21554574 2.348454.61951638 3.438567L.86883696 90.864547C.3022517 89.335619.0059261 87.711683.00007566 86.043095L0 80.192922zm0-13.999974h4v10H0v-10zm0-14.0000005h4v10H0v-10zm0-14h4v10H0v-10zm0-14h4v10H0v-10zM.701349 9.6140131l3.79891292 1.2523021C4.17021443 11.8675286 4 12.9209553 4 14v6.1929475H0V14c0-1.5058511.2385093-2.9819426.701349-4.3859869zM12.9113947.0417954l.3073341 3.9881757c-2.8514503.2197365-5.43930476 1.6474003-7.16021518 3.8917822l-3.1742768-2.4339201C5.29022999 2.3499781 8.91606935.3496804 12.9113947.0417954zM27.07607 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10z\" fill=\"#A0ADBA\" fillRule=\"nonzero\" />\n    </svg>;\nexport const PeriodError = () => <svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"#A0ADBA\" fillRule=\"nonzero\">\n            <path d=\"M72.9999996 82.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM72.9999996 60.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\" />\n            <path d=\"M72.9999996 45.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L82.0312812 51.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\" />\n            <path d=\"M49.9999996-3.4e-7c27.6142375 0 50 22.38576254 50 50.00000004 0 3.4254464-.3449043 6.8082851-1.0236569 10.111998-.3334386 1.6229556-1.9194094 2.6683156-3.542365 2.334877-1.6229555-.3334386-2.6683156-1.9194094-2.334877-3.5423649.5972413-2.9069705.9008989-5.8852591.9008989-8.9045101 0-24.300529-19.699471-44.00000004-44-44.00000004S5.99999963 25.6994707 5.99999963 49.9999997c0 20.0457004 13.52123857 37.4107541 32.60787227 42.5117075 1.6006767.4277851 2.5514932 2.0721783 2.1237081 3.672855-.4277851 1.6006767-2.0721782 2.5514932-3.672855 2.1237082C15.3630605 92.5100466-3.7e-7 72.7795776-3.7e-7 49.9999997-3.7e-7 22.3857622 22.3857621-3.4e-7 49.9999996-3.4e-7z\" />\n            <path d=\"M31.9999996 52.4999997c-1.3807118 0-2.5-1.1192882-2.5-2.5 0-1.3254834 1.031536-2.4100387 2.3356243-2.4946824l.1643757-.0053176 15.4995614-.0008627.0004386-24.4991373c0-1.3807119 1.1192882-2.5 2.5-2.5 1.3254834 0 2.4100387 1.0315359 2.4946823 2.3356243l.0053177.1643757v27c0 1.3254834-1.0315359 2.4100386-2.3356243 2.4946823l-.1643757.0053177h-18z\" />\n        </g>\n    </svg>;\nexport const DataError = () => <svg width=\"98\" height=\"97\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"#A0ADBA\" fillRule=\"nonzero\">\n            <path d=\"M47.9999996-3.4e-7c26.375131 0 48 8.64933258 48 21.00093054 0 6.7822228-6.3726775 12.3999932-16.8111022 16.1776421-1.5579685.5638263-3.2780231-.2420853-3.8418493-1.8000538-.5638263-1.5579685.2420852-3.2780231 1.8000537-3.8418493 8.3196582-3.0108708 12.8528978-7.007103 12.8528978-10.535739 0-7.5352197-18.6656043-15.00093054-42-15.00093054-23.3343956 0-41.99999997 7.46571084-41.99999997 15.00093054 0 8.3458435 22.23414277 16.1998284 47.97788217 14.8410919 1.6545514-.087326 3.066622 1.1831611 3.1539481 2.8377124.087326 1.6545514-1.1831611 3.066622-2.8377125 3.1539481C25.4193432 43.3576729-3.7e-7 34.3785482-3.7e-7 21.0009302-3.7e-7 8.64933224 21.6248687-3.4e-7 47.9999996-3.4e-7z\" />\n            <path d=\"M92.9999996 17.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v24c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-24c0-1.6568543 1.3431458-3 3-3zM2.99999963 17.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.0917782c0 6.7884007 15.40674827 13.7997289 36.16062537 14.9125249 1.6544777.088711 2.9237824 1.5018446 2.8350715 3.1563223-.088711 1.6544776-1.5018446 2.9237823-3.1563223 2.8350714C18.3983599 64.7388196.36378289 56.6257218.00543546 45.431923L-3.7e-7 45.0917779V20.9999997c0-1.6568543 1.34314575-3 3-3z\" />\n            <path d=\"M2.99999963 41.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.011713c0 5.6006467 10.94212037 11.6895243 27.41972777 14.017794 1.6405579.2318092 2.7825744 1.7496627 2.5507652 3.3902207-.2318092 1.640558-1.7496627 2.7825745-3.3902207 2.5507653l-1.1438963-.168296C13.057544 85.989973.26320686 78.7580311.00401161 69.3047869L-3.7e-7 69.0117127v-24.011713c0-1.6568543 1.34314575-3 3-3zM70.9999996 79.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM70.9999996 57.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\" />\n            <path d=\"M70.9999996 42.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L80.0312812 48.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\" />\n        </g>\n    </svg>;\nexport const EmptySeries = () => <svg height=\"100\" width=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\">\n            <path d=\"M92 52c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V60c0-4.418278 3.581722-8 8-8zm0 4H8c-2.209139 0-4 1.790861-4 4v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V60c0-2.209139-1.790861-4-4-4z\" fill=\"#e8edf2\" />\n            <path d=\"M99.5567844 7.04865205l-3.8222065 1.17929519C94.9653901 5.7349373 92.6508139 4 90 4V0c4.4179248 0 8.2737479 2.89021004 9.5567844 7.04865205zM100 21.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 48v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 43.8539409 9.22479438 44 10 44h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 33.461965h4V38c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 42.558667 0 40.3386428 0 38zm0-14h4v10H0zM1.6090385 4.55843779L4.96347541 6.7373717C4.33751189 7.70103338 4 8.82295605 4 10v5.461965H0V10c0-1.95639059.56487346-3.8340854 1.6090385-5.44156221zM16.0507133 0v4H10c-1.00213211 0-1.96454891.24434864-2.82591887.70537441L5.28653945 1.17873487C6.72503094.40881989 8.33525118 0 10 0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0z\" fill=\"#a0adba\" />\n        </g>\n    </svg>;\nexport const EmptyCategory = () => <svg height=\"100\" width=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\">\n            <path d=\"M92 0c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V8c0-4.418278 3.581722-8 8-8zm0 4H8C5.790861 4 4 5.790861 4 8v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V8c0-2.209139-1.790861-4-4-4z\" fill=\"#e8edf2\" />\n            <path d=\"M99.5567844 59.048652l-3.8222065 1.1792952C94.9653901 57.7349373 92.6508139 56 90 56v-4c4.4179248 0 8.2737479 2.89021 9.5567844 7.048652zM100 73.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 100v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 95.8539409 9.22479438 96 10 96h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 85.461965h4V90c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 94.558667 0 92.3386428 0 90zm0-14h4v10H0zm1.6090385-14.9035272l3.35443691 2.1789339C4.33751189 59.7010334 4 60.822956 4 62v5.461965H0V62c0-1.9563906.56487346-3.8340854 1.6090385-5.4415622zM16.0507133 52v4H10c-1.00213211 0-1.96454891.2443486-2.82591887.7053744l-1.88754168-3.5266395C6.72503094 52.4088199 8.33525118 52 10 52zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4z\" fill=\"#a0adba\" />\n        </g>\n    </svg>;\nexport const GenericError = () => <svg height=\"96\" viewBox=\"0 0 96 96\" width=\"96\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"#a0adba\" transform=\"translate(3 3)\">\n            <path d=\"m40.5 73.5000001c0 2.4852813 2.0147186 4.5 4.5 4.5s4.5-2.0147187 4.5-4.5c0-2.4142734-1.9012365-4.3844892-4.2881643-4.4951021l-.2128322-.0048979c-2.4848234.0005384-4.4990035 2.0150507-4.4990035 4.5z\" />\n            <path d=\"m48 60v-30c0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3v30c0 1.6568542 1.3431458 3 3 3s3-1.3431458 3-3z\" />\n            <path d=\"m45-2.99904788c3.8985931 0 7.4578604 2.21715778 9.1770339 5.71709169l37.8912554 77.19048409c1.3845546 2.8165473 1.2171646 6.1482722-.4427191 8.811863-1.6598833 2.6635901-4.5771005 4.2816904-7.7135702 4.2796124h-77.82201115c-3.13845856.002078-6.05567574-1.6160223-7.71555901-4.2796124-1.65988369-2.6635908-1.82727377-5.9953157-.44346379-8.8103471l37.89234295-77.19269833c1.7188306-3.49923557 5.2780979-5.71639335 9.176691-5.71639335zm0 6c-1.6106864 0-3.0811818.91600885-3.7909661 2.36100407l-37.89274459 77.19351591c-.47005356.9562122-.41322496 2.0873262.15030227 2.99161.56352731.9042839 1.5539177 1.4529206 2.62140842 1.4529206h77.8259889c1.0655018 0 2.0558922-.5486367 2.6194195-1.4529206.5635272-.9042838.6203558-2.0353978.1495577-2.9931259l-37.8916571-77.19130167c-.7101272-1.44569356-2.1806226-2.36170241-3.791309-2.36170241z\" />\n        </g>\n    </svg>;","import i18n from '@dhis2/d2-i18n';\nimport { getDisplayNameByVisType, getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType, getAxisPerLockedDimension, DIMENSION_ID_DATA, AXIS_ID_COLUMNS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport { EmptySeries, EmptyCategory, PeriodError, DataError, GenericError, EmptyBox } from '../assets/ErrorIcons';\nimport { VARIANT_ERROR, VARIANT_WARNING } from '../components/Snackbar/Snackbar';\nexport class VisualizationError {\n  constructor(icon, title, description) {\n    this.icon = icon;\n    this.title = title;\n    this.description = description;\n  }\n\n}\nexport class EmptyResponseError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('No data available'), i18n.t('The selected dimensions didnt return any data. There may be no data, or you may not have access to it.'));\n  }\n\n}\nexport class NoSeriesError extends VisualizationError {\n  constructor(visType) {\n    super(EmptySeries, i18n.t(`{{axisName}} is empty`, {\n      axisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoCategoryError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyCategory, i18n.t(`{{axisName}} is empty`, {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoSeriesOrCategoryError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyBox, i18n.t(`{{columnsAxisName}} and {{rowsAxisName}} are empty`, {\n      columnsAxisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType)),\n      rowsAxisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{columnsAxisName}} or {{rowsAxisName}} to create a {{visualizationType}}.', {\n      columnsAxisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType)),\n      rowsAxisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType)),\n      visualizationType: getDisplayNameByVisType(visType)\n    }));\n  }\n\n}\nexport class NoPeriodError extends VisualizationError {\n  constructor(visType) {\n    super(PeriodError, i18n.t('No period selected'), i18n.t('{{visualizationType}} must have at least one period selected in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class NoPointsError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyBox, i18n.t(`{{axisName}} is empty`, {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add organisation units to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoVerticalError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('Vertical is empty'), i18n.t('Add a data item to the vertical axis.'));\n  }\n\n}\nexport class NoHorizontalError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('Horizontal is empty'), i18n.t('Add a data item to the horizontal axis.'));\n  }\n\n}\nexport class DuplicateItemsError extends VisualizationError {\n  constructor() {\n    super(DataError, i18n.t('Axes data items are the same'), i18n.t('The horizontal and vertical axes have the same data item. Scatter chart axes must have different data for each axis.'));\n  }\n\n}\nexport class NoDataOrDataElementGroupSetError extends VisualizationError {\n  constructor(visType) {\n    const lockedAxis = getAxisPerLockedDimension(visType, DIMENSION_ID_DATA);\n    super(DataError, i18n.t('No data selected'), i18n.t('{{visualizationType}} must have at least one data item or data element group set item in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: lockedAxis ? getAxisNameByLayoutType(lockedAxis, getLayoutTypeByVisType(visType)) : getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class NoDataError extends VisualizationError {\n  constructor(visType) {\n    const lockedAxis = getAxisPerLockedDimension(visType, DIMENSION_ID_DATA);\n    super(DataError, i18n.t('No data selected'), i18n.t('{{visualizationType}} must have at least one data item in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: lockedAxis ? getAxisNameByLayoutType(lockedAxis, getLayoutTypeByVisType(visType)) : getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class MultipleIndicatorAsFilterError extends VisualizationError {\n  constructor() {\n    super(DataError, i18n.t(\"There's a problem with the layout\"), i18n.t('A single indicator must be the only data item when using indicators as Data in Filter.'));\n  }\n\n}\nexport class CombinationDEGSRRError extends VisualizationError {\n  constructor() {\n    super(DataError, genericErrorTitle, i18n.t('Data Element Group Sets and Reporting Rates cannot be used together.'));\n  }\n\n}\nexport class GenericClientError extends VisualizationError {\n  constructor(visType) {\n    super(GenericError, genericErrorTitle, i18n.t('There is a problem with this {{visualizationType}} visualization.', {\n      visualizationType: getDisplayNameByVisType(visType)\n    }));\n  }\n\n}\nexport class GenericServerError extends VisualizationError {\n  constructor() {\n    super(GenericError, genericErrorTitle, i18n.t('There was a problem getting the data from the server.'));\n  }\n\n}\nexport class AssignedCategoriesDataElementsError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Assigned Categories can only be used with data elements'), i18n.t('Fix this problem by selecting data elements or removing Assigned Categories.'));\n  }\n\n}\nexport class AssignedCategoriesAsFilterError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Assigned Categories cannot be used as Filter'), i18n.t('Fix this problem by moving or removing Assigned Categories.'));\n  }\n\n}\nexport class VisualizationNotFoundError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Visualization not found'), i18n.t('The visualization you are trying to view could not be found, the ID could be incorrect or it could have been deleted.'));\n  }\n\n}\nexport const genericErrorTitle = i18n.t('Something went wrong');\n\nconst getAvailableAxesDescription = visType => {\n  const axes = getAvailableAxes(visType);\n  let axesDescription = '';\n\n  for (let index = 0; index < axes.length; index++) {\n    axesDescription += getAxisNameByLayoutType(axes[index], getLayoutTypeByVisType(visType));\n\n    if (index < axes.length - 2) {\n      axesDescription += ', ';\n    } else if (index < axes.length - 1) {\n      axesDescription += ` ${i18n.t('or')} `;\n    }\n  }\n\n  return axesDescription;\n};\n\nexport const getErrorVariantByStatusCode = statusCode => String(statusCode).match(/50\\d/) ? VARIANT_ERROR : VARIANT_WARNING;","const userAuthorityQuery = {\n  authority: {\n    resource: 'me/authorization',\n    id: ({\n      authorityId\n    }) => authorityId\n  }\n};\nexport const apiFetchUserAuthority = (dataEngine, authorityId) => dataEngine.query(userAuthorityQuery, {\n  variables: {\n    authorityId\n  }\n});","import { RECEIVED_USER, SET_USER_AUTHORITY } from '../reducers/user';\nimport { acSetLoadError } from './loader';\nimport { GenericServerError } from '../modules/error';\nimport { apiFetchUserAuthority } from '../api/user';\nexport const acReceivedUser = value => ({\n  type: RECEIVED_USER,\n  value\n});\nexport const acSetUserAuthority = value => ({\n  type: SET_USER_AUTHORITY,\n  value\n});\nexport const tLoadUserAuthority = authorityKey => async (dispatch, getState, engine) => {\n  const onSuccess = response => {\n    dispatch(acSetUserAuthority({\n      [authorityKey]: response.authority\n    }));\n  };\n\n  try {\n    return onSuccess(await apiFetchUserAuthority(engine, authorityKey));\n  } catch (err) {\n    dispatch(acSetLoadError(new GenericServerError()));\n  }\n};","import options from './options';\nimport { DEFAULT_VISUALIZATION } from '../reducers/visualization';\nimport { DEFAULT_CURRENT } from '../reducers/current';\nexport const getVisualizationFromCurrent = current => {\n  const visualization = Object.assign({}, current);\n  const nonSavableOptions = Object.keys(options).filter(option => !options[option].savable);\n  nonSavableOptions.forEach(option => delete visualization[option]);\n  return visualization;\n};\nexport const getVisualizationState = (visualization, current) => {\n  if (current === DEFAULT_CURRENT) {\n    return STATE_EMPTY;\n  } else if (visualization === DEFAULT_VISUALIZATION) {\n    return STATE_UNSAVED;\n  } else if (current === visualization) {\n    return STATE_SAVED;\n  } else {\n    return STATE_DIRTY;\n  }\n};\nexport const STATE_EMPTY = 'EMPTY';\nexport const STATE_SAVED = 'SAVED';\nexport const STATE_UNSAVED = 'UNSAVED';\nexport const STATE_DIRTY = 'DIRTY';","import { onError } from './index';\nconst EVENT_TYPE_CHART_VIEW = 'CHART_VIEW';\nconst dataStatisticMutation = {\n  resource: 'dataStatistics',\n  params: ({\n    id\n  }) => ({\n    favorite: id,\n    eventType: EVENT_TYPE_CHART_VIEW\n  }),\n  type: 'create'\n};\nexport const apiPostDataStatistics = (dataEngine, id) => dataEngine.mutate(dataStatisticMutation, {\n  variables: {\n    id\n  },\n  onError\n});","import i18n from '@dhis2/d2-i18n';\nimport { apiFetchVisualization, apiSaveVisualization } from '../api/visualization';\nimport * as fromVisualization from './visualization';\nimport * as fromCurrent from './current';\nimport * as fromDimensions from './dimensions';\nimport * as fromRecommended from './recommendedIds';\nimport * as fromUi from './ui';\nimport * as fromMetadata from './metadata';\nimport * as fromSettings from './settings';\nimport * as fromUser from './user';\nimport * as fromChart from './chart';\nimport * as fromSnackbar from './snackbar';\nimport * as fromLoader from './loader';\nimport { VARIANT_SUCCESS } from '../components/Snackbar/Snackbar';\nimport { sGetCurrent } from '../reducers/current';\nimport { sGetVisualization } from '../reducers/visualization';\nimport { sGetRootOrgUnit, sGetRelativePeriod, sGetSettingsDigitGroupSeparator } from '../reducers/settings';\nimport history from '../modules/history';\nimport { getVisualizationFromCurrent } from '../modules/visualization';\nimport { convertOuLevelsToUids } from '../modules/orgUnit';\nimport { apiPostDataStatistics } from '../api/dataStatistics';\nimport { GenericServerError, VisualizationNotFoundError } from '../modules/error';\nimport { getDisplayNameByVisType } from '@dhis2/analytics';\nexport { fromVisualization, fromCurrent, fromDimensions, fromRecommended, fromUi, fromMetadata, fromSettings, fromUser, fromChart, fromSnackbar, fromLoader };\n\nconst logError = (action, error) => {\n  console.log(`Error in action ${action}: ${error}`);\n}; // visualization, current, ui\n\n\nexport const tDoLoadVisualization = ({\n  id,\n  interpretationId,\n  ouLevels\n}) => async (dispatch, getState, engine) => {\n  const onSuccess = async response => {\n    dispatch(fromLoader.acSetPluginLoading(true));\n    const visualization = convertOuLevelsToUids(ouLevels, response.visualization);\n\n    if (interpretationId) {\n      const interpretation = visualization.interpretations.find(i => i.id === interpretationId);\n\n      if (interpretation) {\n        dispatch(fromUi.acSetUiInterpretation(interpretation));\n        dispatch(fromUi.acSetUiRightSidebarOpen());\n      }\n    }\n\n    apiPostDataStatistics(engine, visualization.id);\n    dispatch(fromVisualization.acSetVisualization(visualization));\n    dispatch(fromCurrent.acSetCurrent(visualization));\n    dispatch(fromUi.acSetUiFromVisualization(visualization));\n    dispatch(fromLoader.acClearLoadError());\n  };\n\n  try {\n    return onSuccess(await apiFetchVisualization(engine, id));\n  } catch (errorResponse) {\n    let error = errorResponse;\n\n    if (errorResponse?.details?.httpStatusCode === 404) {\n      error = new VisualizationNotFoundError();\n    } else if (errorResponse?.message) {\n      error = errorResponse.message;\n    } else {\n      error = new GenericServerError();\n    }\n\n    clearVisualization(dispatch, getState, error);\n    logError('tDoLoadVisualization', error);\n  }\n};\nexport const clearVisualization = (dispatch, getState, error = null) => {\n  if (error) {\n    dispatch(fromLoader.acSetLoadError(error));\n  } else {\n    dispatch(fromLoader.acClearLoadError());\n  }\n\n  dispatch(fromVisualization.acClear());\n  dispatch(fromCurrent.acClear());\n  const rootOrganisationUnit = sGetRootOrgUnit(getState());\n  const relativePeriod = sGetRelativePeriod(getState());\n  const digitGroupSeparator = sGetSettingsDigitGroupSeparator(getState());\n  dispatch(fromUi.acClear({\n    rootOrganisationUnit,\n    relativePeriod,\n    digitGroupSeparator\n  }));\n};\nexport const tDoRenameVisualization = ({\n  name,\n  description\n}) => (dispatch, getState) => {\n  const state = getState();\n  const visualization = sGetVisualization(state);\n  const current = sGetCurrent(state);\n  const updatedVisualization = { ...visualization\n  };\n  const updatedCurrent = { ...current\n  };\n\n  if (name) {\n    updatedVisualization.name = updatedCurrent.name = name;\n  }\n\n  if (description) {\n    updatedVisualization.description = updatedCurrent.description = description;\n  }\n\n  dispatch(fromVisualization.acSetVisualization(updatedVisualization)); // keep the same reference for current if there are no changes\n  // other than the name/description\n\n  if (visualization === current) {\n    dispatch(fromCurrent.acSetCurrent(updatedVisualization));\n  } else {\n    dispatch(fromCurrent.acSetCurrent(updatedCurrent));\n  }\n\n  dispatch(fromSnackbar.acReceivedSnackbarMessage({\n    variant: VARIANT_SUCCESS,\n    message: i18n.t('Rename successful'),\n    duration: 2000\n  }));\n};\nexport const tDoSaveVisualization = ({\n  name,\n  description\n}, copy) => async (dispatch, getState, engine) => {\n  const onSuccess = res => {\n    if (res.status === 'OK' && res.response.uid) {\n      if (copy) {\n        history.push({\n          pathname: `/${res.response.uid}`,\n          state: {\n            isSaving: true\n          }\n        }); // Save as\n      } else {\n        history.replace({\n          pathname: `/${res.response.uid}`,\n          state: {\n            isSaving: true\n          }\n        }); // Save\n      }\n    }\n  };\n\n  try {\n    dispatch(fromLoader.acSetPluginLoading(true));\n    const visualization = getVisualizationFromCurrent(sGetCurrent(getState())); // remove the id to trigger a POST request and save a new AO\n\n    if (copy) {\n      delete visualization.id;\n    }\n\n    visualization.name = // name provided in the Save dialog\n    name || // existing name when saving the same modified visualization\n    visualization.name || // new visualization with no name provided in Save dialog\n    i18n.t('Untitled {{visualizationType}} visualization, {{date}}', {\n      visualizationType: getDisplayNameByVisType(visualization.type),\n      date: new Date().toLocaleDateString(undefined, {\n        year: 'numeric',\n        month: 'short',\n        day: '2-digit'\n      })\n    });\n\n    if (description) {\n      visualization.description = description;\n    }\n\n    return onSuccess(await apiSaveVisualization(engine, visualization));\n  } catch (error) {\n    dispatch(fromLoader.acSetPluginLoading(false));\n    logError('tDoSaveVisualization', error); // TODO: Once the API returns custom error codes for validation errors, make sure they're relayed properly to be displayed to the user\n    // In the meantime we only display a generic error (doesn't give any constructive information but at least it doesn't fail silently any more)\n\n    dispatch(fromLoader.acSetLoadError(new GenericServerError()));\n  }\n};\nexport const tDoDeleteVisualization = () => (dispatch, getState) => {\n  const current = sGetCurrent(getState());\n  dispatch(fromSnackbar.acReceivedSnackbarMessage({\n    variant: VARIANT_SUCCESS,\n    message: i18n.t('\"{{deletedObject}}\" successfully deleted.', {\n      deletedObject: current.name\n    }),\n    duration: 2000\n  }));\n  history.push('/');\n};","import { AXIS, DIMENSION_ID_PERIOD, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_SCATTER, getPredefinedDimensionProp, dimensionIsValid, layoutGetDimension, DIMENSION_PROP_NO_ITEMS, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport { BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { NoSeriesError, NoCategoryError, NoPeriodError, NoDataError, NoSeriesOrCategoryError, NoPointsError, NoVerticalError, NoHorizontalError, DuplicateItemsError } from './error';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from './ui'; // Layout validation helper functions\n\nconst isAxisValid = axis => AXIS.isValid(axis) && axis.some(axisItem => dimensionIsValid(axisItem, {\n  requireItems: !getPredefinedDimensionProp(axisItem.dimension, DIMENSION_PROP_NO_ITEMS)\n}));\n\nconst validateDimension = (dimension, error) => {\n  if (!(dimension && dimensionIsValid(dimension, {\n    requireItems: true\n  }))) {\n    throw error;\n  }\n};\n\nconst validateAxis = (axis, error) => {\n  if (!isAxisValid(axis)) {\n    throw error;\n  }\n}; // Layout validation\n\n\nconst validateDefaultLayout = layout => {\n  validateAxis(layout.columns, new NoSeriesError(layout.type));\n  validateAxis(layout.rows, new NoCategoryError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), // TODO: old validation rule, refactor\n  new NoPeriodError(layout.type));\n};\n\nconst validatePivotTableLayout = layout => {\n  if (!isAxisValid(layout.columns) && !isAxisValid(layout.rows)) {\n    throw new NoSeriesOrCategoryError(layout.type);\n  }\n\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateYearOverYearLayout = layout => {\n  if (!(Array.isArray(layout[BASE_FIELD_YEARLY_SERIES]) && typeof layout[BASE_FIELD_YEARLY_SERIES][0] === 'string')) {\n    throw new NoSeriesError(layout.type);\n  }\n\n  validateAxis(layout.rows, new NoCategoryError(layout.type));\n};\n\nconst validatePieLayout = layout => {\n  validateAxis(layout.columns, new NoSeriesError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateSingleValueLayout = layout => {\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_DATA), new NoDataError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateScatterLayout = layout => {\n  const verticalItems = layout.ui.itemAttributes?.filter(item => item.attribute === ITEM_ATTRIBUTE_VERTICAL) || [];\n  const horizontalItems = layout.ui.itemAttributes?.filter(item => item.attribute === ITEM_ATTRIBUTE_HORIZONTAL) || [];\n\n  if (!verticalItems.length) {\n    throw new NoVerticalError();\n  } else if (!horizontalItems.length) {\n    throw new NoHorizontalError();\n  } else if (verticalItems[0].id === horizontalItems[0].id) {\n    throw new DuplicateItemsError();\n  }\n\n  validateAxis(layout.rows, new NoPointsError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nexport const validateLayout = layout => {\n  switch (layout.type) {\n    case VIS_TYPE_PIE:\n      return validatePieLayout(layout);\n\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n      return validateYearOverYearLayout(layout);\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      return validateSingleValueLayout(layout);\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return validatePivotTableLayout(layout);\n\n    case VIS_TYPE_SCATTER:\n      return validateScatterLayout(layout);\n\n    default:\n      return validateDefaultLayout(layout);\n  }\n};","import { getInstance } from 'd2';\nimport { onError } from './index';\nexport const NAMESPACE = 'analytics';\nexport const CURRENT_AO_KEY = 'currentAnalyticalObject';\nexport const hasNamespace = async (d2) => await d2.currentUser.dataStore.has(NAMESPACE);\nexport const getNamespace = async (d2, hasNamespace) => hasNamespace ? await d2.currentUser.dataStore.get(NAMESPACE) : await d2.currentUser.dataStore.create(NAMESPACE);\nexport const apiSave = async (data, key, namespace) => {\n  try {\n    const d2 = await getInstance();\n    const ns = namespace || (await getNamespace(d2, await hasNamespace(d2)));\n    return ns.set(key, data);\n  } catch (error) {\n    return onError(error);\n  }\n};\nexport const apiFetch = async (key, namespace) => {\n  try {\n    const d2 = await getInstance();\n    const ns = namespace || (await getNamespace(d2, await hasNamespace(d2)));\n    return ns.get(key);\n  } catch (error) {\n    return onError(error);\n  }\n};\nexport const apiSaveAOInUserDataStore = (current, key = CURRENT_AO_KEY) => apiSave(current, key);\nexport const apiFetchAOFromUserDataStore = (key = CURRENT_AO_KEY) => apiFetch(key);","import { connect } from 'react-redux';\nimport { sGetCurrent, sGetCurrentFromUi } from '../../reducers/current';\nimport * as fromActions from '../../actions';\nimport { validateLayout } from '../../modules/layoutValidation';\nimport { acSetLoadError, acClearLoadError, acSetPluginLoading } from '../../actions/loader';\nimport history from '../../modules/history';\nimport { CURRENT_AO_KEY } from '../../api/userDataStore';\nimport { GenericClientError } from '../../modules/error';\n\nconst UpdateVisualizationContainer = ({\n  renderComponent,\n  getCurrent,\n  getCurrentFromUi,\n  onUpdate,\n  acSetLoadError,\n  acClearLoadError,\n  onLoadingStart\n}) => {\n  // validate layout on update\n  // validation error message will be shown without loading the plugin first\n  const onClick = () => {\n    try {\n      validateLayout(getCurrentFromUi());\n      acClearLoadError();\n    } catch (error) {\n      acSetLoadError(error || new GenericClientError());\n    }\n\n    onLoadingStart();\n    onUpdate();\n    const urlContainsCurrentAOKey = history.location.pathname === '/' + CURRENT_AO_KEY;\n    const current = getCurrent();\n    const pathWithoutInterpretation = current && current.id ? `/${current.id}` : '/';\n\n    if (!urlContainsCurrentAOKey && history.location.pathname !== pathWithoutInterpretation) {\n      history.push(pathWithoutInterpretation);\n    }\n  };\n\n  return renderComponent(onClick);\n};\n\nconst mapDispatchToProps = {\n  getCurrent: () => (dispatch, getState) => sGetCurrent(getState()),\n  getCurrentFromUi: () => (dispatch, getState) => sGetCurrentFromUi(getState()),\n  onUpdate: fromActions.fromCurrent.tSetCurrentFromUi,\n  acSetLoadError,\n  acClearLoadError,\n  onLoadingStart: () => acSetPluginLoading(true)\n};\nexport default connect(null, mapDispatchToProps)(UpdateVisualizationContainer);","import _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\n/* eslint-disable-line no-unused-vars */\n\nimport { colors, spacers } from '@dhis2/ui';\nexport const tabBar = {\n  styles: <_JSXStyle id={\"3103009923\"}>{[`div.jsx-3103009923{padding-right:${spacers.dp24};}`]}</_JSXStyle>,\n  className: \"jsx-3103009923\"\n};\nexport const tabContent = {\n  styles: <_JSXStyle id={\"2208787536\"}>{[`div.jsx-2208787536{overflow:auto;padding-right:${spacers.dp24};}`]}</_JSXStyle>,\n  className: \"jsx-2208787536\"\n};\nexport const tabSection = {\n  styles: <_JSXStyle id={\"1427514941\"}>{[`div.jsx-1427514941{padding:${spacers.dp16} 0;}`, `div.jsx-1427514941:not(:last-child){border-bottom:1px solid ${colors.grey300};margin-bottom:${spacers.dp8};}`]}</_JSXStyle>,\n  className: \"jsx-1427514941\"\n};\nexport const tabSectionContent = {\n  styles: <_JSXStyle id={\"1655721637\"}>{[\"div.jsx-1655721637{overflow-y:auto;}\"]}</_JSXStyle>,\n  className: \"jsx-1655721637\"\n};\nexport const tabSectionTitle = {\n  styles: <_JSXStyle id={\"3115295887\"}>{[`span.jsx-3115295887{display:inline-block;padding-bottom:${spacers.dp12};font-size:15px;color:${colors.grey900};font-weight:500;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;}`]}</_JSXStyle>,\n  className: \"jsx-3115295887\"\n};\nexport const tabSectionTitleMargin = {\n  styles: <_JSXStyle id={\"642558349\"}>{[`span.jsx-642558349{margin-top:${spacers.dp8};}`]}</_JSXStyle>,\n  className: \"jsx-642558349\"\n};\nexport const tabSectionOption = {\n  styles: <_JSXStyle id={\"1665807213\"}>{[`div.jsx-1665807213:not(:last-child):not(.inline){padding-bottom:${spacers.dp16};}`]}</_JSXStyle>,\n  className: \"jsx-1665807213\"\n};\nexport const tabSectionOptionItem = {\n  styles: <_JSXStyle id={\"2983019948\"}>{[`div.jsx-2983019948:not(:last-child){padding-bottom:${spacers.dp8};}`]}</_JSXStyle>,\n  className: \"jsx-2983019948\"\n};\nexport const tabSectionOptionText = {\n  styles: <_JSXStyle id={\"3330936769\"}>{[`p.jsx-3330936769{margin:0;padding-bottom:${spacers.dp8};font-size:14px;line-height:19px;color:${colors.grey700};}`]}</_JSXStyle>,\n  className: \"jsx-3330936769\"\n};\nexport const tabSectionOptionToggleable = {\n  styles: <_JSXStyle id={\"684239008\"}>{[`div.jsx-684239008{margin:${spacers.dp4} 0 0 23px;}`]}</_JSXStyle>,\n  className: \"jsx-684239008\"\n};\nexport const tabSectionToggleableSubsection = {\n  styles: <_JSXStyle id={\"1383096027\"}>{[\"div.jsx-1383096027{margin-left:23px;}\"]}</_JSXStyle>,\n  className: \"jsx-1383096027\"\n};\nexport const tabSectionOptionComplexInline = {\n  styles: <_JSXStyle id={\"1912734430\"}>{[\"div.jsx-1912734430{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\"]}</_JSXStyle>,\n  className: \"jsx-1912734430\"\n};\nexport const tabSectionOptionIcon = {\n  styles: <_JSXStyle id={\"112181591\"}>{[`span.jsx-112181591{vertical-align:top;margin-right:${spacers.dp4};color:${colors.grey600};}`]}</_JSXStyle>,\n  className: \"jsx-112181591\"\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NoticeBox as UiNoticeBox } from '@dhis2/ui';\nimport { tabSectionOption } from './styles/VisualizationOptions.style.js';\n\nconst NoticeBox = ({\n  title,\n  text,\n  warning = false,\n  error = false\n}) => <div className={tabSectionOption.className}>\n        <UiNoticeBox title={title} warning={warning} error={error}>\n            {text}\n        </UiNoticeBox>\n    </div>;\n\nNoticeBox.propTypes = {\n  error: PropTypes.bool,\n  text: PropTypes.string,\n  title: PropTypes.string,\n  warning: PropTypes.bool\n};\nexport default NoticeBox;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox, SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nexport const SelectBaseOption = ({\n  option,\n  label,\n  helpText,\n  toggleable,\n  value,\n  onChange,\n  disabled,\n  dataTest\n}) => {\n  const defaultValue = option.defaultValue;\n  const [checked, setChecked] = useState(value !== defaultValue);\n  const selected = option.items.find(item => item.value === value)?.value;\n\n  const onToggle = checked => {\n    setChecked(checked);\n    onChange(checked ? option.items[0].value : defaultValue);\n  };\n\n  return <div className={tabSectionOption.className}>\n            {toggleable ? <Checkbox checked={checked} label={label} name={`${option.name}-toggle`} onChange={({\n      checked\n    }) => onToggle(checked)} dense disabled={disabled} dataTest={`${dataTest}-checkbox`} /> : null}\n            {(!toggleable || checked) && !disabled ? <div className={toggleable ? tabSectionOptionToggleable.className : ''}>\n                    <SingleSelectField name={`${option.name}-select`} label={toggleable ? '' : label} onChange={({\n        selected\n      }) => onChange(selected)} selected={selected} helpText={helpText} inputWidth=\"280px\" dense dataTest={`${dataTest}-select`}>\n                        {option.items.map(({\n          value,\n          label\n        }) => <SingleSelectOption key={value} value={value} label={label} dataTest={`${dataTest}-option`} />)}\n                    </SingleSelectField>\n                </div> : null}\n        </div>;\n};\nSelectBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  toggleable: PropTypes.bool\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst AggregationType = () => <SelectBaseOption label={i18n.t('Aggregation type')} helpText={i18n.t('Overrides aggregation type for all data values.')} option={{\n  name: 'aggregationType',\n  items: [{\n    value: 'DEFAULT',\n    label: i18n.t('By data element')\n  }, {\n    value: 'COUNT',\n    label: i18n.t('Count')\n  }, {\n    value: 'AVERAGE',\n    label: i18n.t('Average')\n  }, {\n    value: 'AVERAGE_SUM_ORG_UNIT',\n    label: i18n.t('Average (sum in org unit hierarchy)')\n  }, {\n    value: 'SUM',\n    label: i18n.t('Sum')\n  }, {\n    value: 'LAST',\n    label: i18n.t('Last value')\n  }, {\n    value: 'LAST_AVERAGE_ORG_UNIT',\n    label: i18n.t('Last value (average in org unit hierarchy)')\n  }, {\n    value: 'MIN',\n    label: i18n.t('Min')\n  }, {\n    value: 'MAX',\n    label: i18n.t('Max')\n  }, {\n    value: 'STDDEV',\n    label: i18n.t('Standard deviation')\n  }, {\n    value: 'VARIANCE',\n    label: i18n.t('Variance')\n  }]\n}} />;\n\nexport default AggregationType;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst FontColorIcon = ({\n  color\n}) => <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"12\" cy=\"12\" fillRule=\"evenodd\" fill={color} r=\"7\" />\n    </svg>;\n\nFontColorIcon.defaultProps = {\n  color: '#000000'\n};\nFontColorIcon.propTypes = {\n  color: PropTypes.string\n};\nexport default FontColorIcon;","import React from 'react';\n\nconst BoldIcon = () => <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"m7 5h6c2.209139 0 4 1.790861 4 4 0 .97998001-.3524116 1.8776499-.9374171 2.5731919 1.1608063.6986588 1.9374171 1.9720399 1.9374171 3.4268081 0 2.209139-1.790861 4-4 4h-7zm7 8h-5v4h5c1.1045695 0 2-.8954305 2-2 0-1.0543618-.8158778-1.9181651-1.8507377-1.9945143zm-1-6h-4v4h4c1.1045695 0 2-.8954305 2-2 0-1.0543618-.8158778-1.91816512-1.8507377-1.99451426z\" fill=\"#inherit\" />\n    </svg>;\n\nexport default BoldIcon;","import React from 'react';\n\nconst ItalicIcon = () => <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"m13.5 7h-3.5v-2h9v2h-3.5l-5 10h3.5v2h-9v-2h3.5z\" fill=\"#inherit\" />\n    </svg>;\n\nexport default ItalicIcon;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelect, SingleSelectOption, Button } from '@dhis2/ui';\nimport { getFontSizeOptions, getTextAlignOptions, FONT_STYLE_OPTION_FONT_SIZE, FONT_STYLE_OPTION_BOLD, FONT_STYLE_OPTION_ITALIC, FONT_STYLE_OPTION_TEXT_COLOR, FONT_STYLE_OPTION_TEXT_ALIGN, isVerticalType } from '@dhis2/analytics';\nimport cx from 'classnames';\nimport debounce from 'lodash-es/debounce';\nimport styles from '../styles/TextStyle.module.css';\nimport FontColorIcon from '../../../assets/FontColorIcon';\nimport BoldIcon from '../../../assets/BoldIcon';\nimport ItalicIcon from '../../../assets/ItalicIcon';\nimport { sGetUiOption, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\n\nconst TextStyle = ({\n  fontStyleKey,\n  fontStyle,\n  visType,\n  onChange,\n  disabled,\n  dataTest,\n  isVertical\n}) => {\n  const fontSizeOptions = Object.values(getFontSizeOptions(fontStyleKey));\n  const textAlignOptions = getTextAlignOptions(fontStyleKey, isVertical || isVerticalType(visType));\n  const [fontSize, setFontSize] = useState(fontStyle[FONT_STYLE_OPTION_FONT_SIZE]);\n  const [textAlign, setTextAlign] = useState(fontStyle[FONT_STYLE_OPTION_TEXT_ALIGN]);\n  const [textColor, setTextColor] = useState(fontStyle[FONT_STYLE_OPTION_TEXT_COLOR]);\n  const [bold, setBold] = useState(fontStyle[FONT_STYLE_OPTION_BOLD]);\n  const [italic, setItalic] = useState(fontStyle[FONT_STYLE_OPTION_ITALIC]);\n  const onChangeColor = debounce(value => {\n    setTextColor(value);\n    onChange(FONT_STYLE_OPTION_TEXT_COLOR, value);\n  }, 100);\n  return <div className={styles.container} data-test={dataTest}>\n            {fontSize && <SingleSelect onChange={({\n      selected\n    }) => {\n      setFontSize(Number(selected));\n      onChange(FONT_STYLE_OPTION_FONT_SIZE, Number(selected));\n    }} selected={fontSize.toString()} prefix={i18n.t('Size')} dense className={styles.fontSizeSelect} disabled={disabled} dataTest={`${dataTest}-font-size-select`}>\n                    {fontSizeOptions.map(option => <SingleSelectOption key={option.value?.toString()} value={option.value?.toString()} label={option.label} dataTest={`${dataTest}-font-size-option-${option.value?.toString()}`} />)}\n                </SingleSelect>}\n            {textAlign && <SingleSelect onChange={({\n      selected\n    }) => {\n      setTextAlign(selected);\n      onChange(FONT_STYLE_OPTION_TEXT_ALIGN, selected);\n    }} selected={textAlign} prefix={i18n.t('Position')} dense className={styles.textAlignSelect} disabled={disabled} dataTest={`${dataTest}-text-align-select`}>\n                    {textAlignOptions.map(option => <SingleSelectOption key={option.value} value={option.value} label={option.label} dataTest={`${dataTest}-text-align-option-${option.value?.toString()}`} />)}\n                </SingleSelect>}\n            {textColor && <label className={cx(styles.textColorLabel, {\n      [styles.disabled]: disabled\n    })} data-test={`${dataTest}-text-color-picker`}>\n                    <input type=\"color\" value={textColor} onChange={e => onChangeColor(e.target.value)} className={styles.textColorInput} disabled={disabled} />\n                    <div className={styles.textColorIcon}>\n                        <FontColorIcon color={textColor} />\n                    </div>\n                </label>}\n            {bold != null && <Button icon={<BoldIcon />} onClick={() => {\n      onChange(FONT_STYLE_OPTION_BOLD, !bold);\n      setBold(!bold);\n    }} small secondary toggled={bold} disabled={disabled} dataTest={`${dataTest}-bold-toggle`} />}\n            {italic != null && <Button icon={<ItalicIcon />} onClick={() => {\n      onChange(FONT_STYLE_OPTION_ITALIC, !italic);\n      setItalic(!italic);\n    }} small secondary disabled={disabled} toggled={italic} dataTest={`${dataTest}-italic-toggle`} />}\n        </div>;\n};\n\nTextStyle.propTypes = {\n  fontStyleKey: PropTypes.string.isRequired,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyle: PropTypes.object,\n  isVertical: PropTypes.bool,\n  visType: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  fontStyle: sGetUiOption(state, {\n    id: ownProps.fontStyleKey,\n    axisId: ownProps.axisId\n  }) || {},\n  visType: sGetUiType(state)\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: (option, value) => dispatch(acSetUiOption({\n    optionId: ownProps.fontStyleKey,\n    axisId: ownProps.axisId,\n    //FIXME: Should axisId be listed in propTypes?\n    fontStyleOption: option,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TextStyle);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nexport const CheckboxBaseOption = ({\n  option,\n  label,\n  value,\n  onChange,\n  inverted,\n  fontStyleKey\n}) => <div className={tabSectionOption.className}>\n        <Checkbox checked={inverted ? !value : value} label={label} name={option.name} onChange={({\n    checked\n  }) => onChange(inverted ? !checked : checked)} dense />\n        {(!inverted && value || inverted && !value) && fontStyleKey ? <div className={tabSectionOptionToggleable.className}>\n                <TextStyle fontStyleKey={fontStyleKey} />\n            </div> : null}\n    </div>;\nCheckboxBaseOption.propTypes = {\n  fontStyleKey: PropTypes.string,\n  inverted: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  value: PropTypes.bool,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckboxBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowDimensionLabels = () => <CheckboxBaseOption label={i18n.t('Dimension labels')} option={{\n  name: 'showDimensionLabels'\n}} />;\n\nexport default ShowDimensionLabels;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst SkipRounding = () => <CheckboxBaseOption label={i18n.t('Skip rounding')} option={{\n  name: 'skipRounding'\n}} />;\n\nexport default SkipRounding;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ColTotals = () => <CheckboxBaseOption label={i18n.t('Columns totals')} option={{\n  name: 'colTotals'\n}} />;\n\nexport default ColTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ColSubTotals = () => <CheckboxBaseOption label={i18n.t('Column sub-totals')} option={{\n  name: 'colSubTotals'\n}} />;\n\nexport default ColSubTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst RowTotals = () => <CheckboxBaseOption label={i18n.t('Row totals')} option={{\n  name: 'rowTotals'\n}} />;\n\nexport default RowTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst RowSubTotals = () => <CheckboxBaseOption label={i18n.t('Row sub-totals')} option={{\n  name: 'rowSubTotals'\n}} />;\n\nexport default RowSubTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideEmptyColumns = () => <CheckboxBaseOption label={i18n.t('Hide empty columns')} option={{\n  name: 'hideEmptyColumns'\n}} />;\n\nexport default HideEmptyColumns;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideEmptyRows = () => <CheckboxBaseOption label={i18n.t('Hide empty rows')} option={{\n  name: 'hideEmptyRows'\n}} />;\n\nexport default HideEmptyRows;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst NumberType = () => <SelectBaseOption label={i18n.t('Number type')} helpText={i18n.t('Display the value of percentages of the total')} option={{\n  name: 'numberType',\n  items: [{\n    value: 'VALUE',\n    label: i18n.t('Value')\n  }, {\n    value: 'ROW_PERCENTAGE',\n    label: i18n.t('Percentage of row')\n  }, {\n    value: 'COLUMN_PERCENTAGE',\n    label: i18n.t('Percentage of column')\n  }]\n}} />;\n\nexport default NumberType;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox, Box, Input, InputField } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nexport const TextBaseOption = ({\n  type,\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  onToggle,\n  fontStyleKey,\n  toggleable,\n  checked,\n  inline,\n  disabled,\n  dataTest,\n  isVertical\n}) => <div className={inline ? '' : tabSectionOption.className}>\n        {toggleable ? <Checkbox checked={checked} label={label} name={`${option.name}-toggle`} onChange={({\n    checked\n  }) => onToggle(checked)} dense disabled={disabled} dataTest={`${dataTest}-checkbox`} /> : null}\n        {!toggleable || checked ? <div className={toggleable ? tabSectionOptionToggleable.className : ''}>\n                {inline ? <Box width={width}>\n                        <Input type={type} onChange={({\n        value\n      }) => onChange(value)} name={option.name} value={value.toString()} placeholder={placeholder} dense disabled={disabled} dataTest={`${dataTest}-input`} />\n                    </Box> : <InputField type={type} label={toggleable ? '' : label} onChange={({\n      value\n    }) => onChange(value)} name={option.name} value={value} helpText={disabled ? '' : helpText} placeholder={placeholder} inputWidth={width} dense disabled={disabled} dataTest={`${dataTest}-input`} />}\n                {fontStyleKey ? <TextStyle fontStyleKey={fontStyleKey} disabled={disabled} dataTest={`${dataTest}-text-style`} axisId={option.axisId} isVertical={isVertical} /> : null}\n            </div> : null}\n    </div>;\nTextBaseOption.defaultProps = {\n  option: {}\n};\nTextBaseOption.propTypes = {\n  checked: PropTypes.bool,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyleKey: PropTypes.string,\n  helpText: PropTypes.string,\n  inline: PropTypes.bool,\n  isVertical: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  toggleable: PropTypes.bool,\n  type: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.string,\n  onChange: PropTypes.func,\n  onToggle: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option) || '',\n  checked: sGetUiOption(state, {\n    id: ownProps.option.enabledId,\n    axisId: ownProps.option.axisId\n  }) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value\n  })),\n  onToggle: checked => dispatch(acSetUiOption({\n    optionId: ownProps.option.enabledId,\n    axisId: ownProps.option.axisId,\n    value: checked\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TextBaseOption);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst Title = ({\n  label,\n  inline\n}) => <TextBaseOption type=\"text\" width=\"280px\" label={label} placeholder={i18n.t('Add a title')} option={{\n  name: 'title'\n}} inline={inline} />;\n\nTitle.defaultProps = {\n  inline: false\n};\nTitle.propTypes = {\n  inline: PropTypes.bool,\n  label: PropTypes.string\n};\nexport default Title;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst DisplayDensity = () => <SelectBaseOption label={i18n.t('Display density')} option={{\n  name: 'displayDensity',\n  items: [{\n    value: 'COMFORTABLE',\n    label: i18n.t('Comfortable')\n  }, {\n    value: 'NORMAL',\n    label: i18n.t('Normal')\n  }, {\n    value: 'COMPACT',\n    label: i18n.t('Compact')\n  }]\n}} />;\n\nexport default DisplayDensity;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst FontSize = () => <SelectBaseOption label={i18n.t('Font size')} option={{\n  name: 'fontSize',\n  items: [{\n    value: 'LARGE',\n    label: i18n.t('Large')\n  }, {\n    value: 'NORMAL',\n    label: i18n.t('Normal')\n  }, {\n    value: 'SMALL',\n    label: i18n.t('Small')\n  }]\n}} />;\n\nexport default FontSize;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst DigitGroupSeparator = () => <SelectBaseOption label={i18n.t('Digit group separator')} option={{\n  name: 'digitGroupSeparator',\n  items: [{\n    value: 'NONE',\n    label: i18n.t('None')\n  }, {\n    value: 'SPACE',\n    label: i18n.t('Space')\n  }, {\n    value: 'COMMA',\n    label: i18n.t('Comma')\n  }]\n}} />;\n\nexport default DigitGroupSeparator;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamReportingPeriod = () => <CheckboxBaseOption label={i18n.t('Reporting period')} option={{\n  name: 'reportingPeriod'\n}} />;\n\nexport default ParamReportingPeriod;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamOrganisationUnit = () => <CheckboxBaseOption label={i18n.t('Organisation unit')} option={{\n  name: 'organisationUnit'\n}} />;\n\nexport default ParamOrganisationUnit;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamParentOrganisationUnit = () => <CheckboxBaseOption label={i18n.t('Parent organisation unit')} option={{\n  name: 'parentOrganisationUnit'\n}} />;\n\nexport default ParamParentOrganisationUnit;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst Regression = () => <CheckboxBaseOption label={i18n.t('Include regression')} option={{\n  name: 'regression'\n}} />;\n\nexport default Regression;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst Cumulative = () => <CheckboxBaseOption label={i18n.t('Include cumulative')} option={{\n  name: 'cumulative'\n}} />;\n\nexport default Cumulative;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'sortOrder';\nconst defaultValue = options[optionName].defaultValue;\n\nconst SortOrder = () => <SelectBaseOption label={i18n.t('Custom sort order')} toggleable={true} option={{\n  name: optionName,\n  defaultValue: defaultValue,\n  items: [{\n    value: '-1',\n    label: i18n.t('Low to high')\n  }, {\n    value: '1',\n    label: i18n.t('High to low')\n  }]\n}} />;\n\nexport default SortOrder;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst TopLimit = () => <SelectBaseOption label={i18n.t('Top limit')} option={{\n  name: 'topLimit',\n  items: [{\n    value: '0',\n    label: i18n.t('None')\n  }, {\n    value: '5',\n    label: '5'\n  }, {\n    value: '10',\n    label: '10'\n  }, {\n    value: '20',\n    label: '20'\n  }, {\n    value: '50',\n    label: '50'\n  }, {\n    value: '100',\n    label: '100'\n  }]\n}} />;\n\nexport default TopLimit;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { sGetUserAuthorities } from '../../../reducers/user';\nimport { sGetSettings } from '../../../reducers/settings';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const APPROVAL_LEVEL_OPTION_AUTH = 'F_VIEW_UNAPPROVED_DATA';\nconst optionName = 'approvalLevel';\nconst query = {\n  dataApprovalLevels: {\n    resource: 'dataApprovalLevels.json',\n    params: {\n      order: 'level:asc',\n      fields: 'id,displayName~rename(name),level',\n      paging: 'false'\n    }\n  }\n};\n\nconst ApprovalLevelSelect = ({\n  value,\n  loading,\n  options,\n  onFocus,\n  onChange\n}) => <SingleSelectField name=\"approvalLevelSelect\" label={i18n.t('Data approved at level')} selected={value?.id} inputWidth=\"280px\" placeholder={i18n.t('Select from predefined levels')} loadingText={i18n.t('Loading data approval levels')} loading={loading} dense onFocus={onFocus} onChange={({\n  selected\n}) => onChange({\n  id: selected,\n  displayName: options.find(option => option.value === selected).label\n})}>\n        {options.map(({\n    value,\n    label\n  }) => <SingleSelectOption key={value} value={value} label={label} />)}\n    </SingleSelectField>;\n\nApprovalLevelSelect.propTypes = {\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\n\nconst ApprovalLevel = ({\n  value,\n  onChange,\n  enabled\n}) => {\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  if (!enabled) {\n    return null;\n  }\n\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        dataApprovalLevels\n      } = await engine.query(query);\n\n      if (dataApprovalLevels) {\n        const options = dataApprovalLevels.dataApprovalLevels.map(level => ({\n          value: level.id,\n          label: level.name\n        }));\n        setOptions(options);\n      }\n\n      setIsLoaded(true);\n    }\n  };\n\n  return <ApprovalLevelSelect loading={!isLoaded} value={value} options={options} onChange={onChange} onFocus={onSelectFocus} />;\n};\n\nApprovalLevel.propTypes = {\n  enabled: PropTypes.bool,\n  value: PropTypes.object,\n  onChange: PropTypes.func\n};\nconst approvalLevelEnabledSelector = createSelector([sGetSettings, sGetUserAuthorities], (settings, authorities) => settings.keyIgnoreAnalyticsApprovalYearThreshold !== -1 && authorities[APPROVAL_LEVEL_OPTION_AUTH]);\n\nconst mapStateToProps = state => ({\n  enabled: approvalLevelEnabledSelector(state),\n  value: sGetUiOptions(state)[optionName] || {}\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    id,\n    displayName\n  }) => dispatch(acSetUiOptions({\n    [optionName]: {\n      id,\n      displayName\n    }\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ApprovalLevel);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowHierarchy = () => <CheckboxBaseOption label={i18n.t('Display organisation unit hierarchy')} option={{\n  name: 'showHierarchy'\n}} />;\n\nexport default ShowHierarchy;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label } from '@dhis2/ui';\nimport CheckboxBaseOption from './CheckboxBaseOption';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst CompletedOnly = () => <div className={tabSectionOption.className}>\n        <Label>{i18n.t('Event data')}</Label>\n        <CheckboxBaseOption label={i18n.t('Only include completed events')} option={{\n    name: 'completedOnly'\n  }} />\n    </div>;\n\nexport default CompletedOnly;","import React from 'react';\nexport const AxisOne = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"16\" viewBox=\"0 0 18 16\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <rect width=\"18\" height=\"1\" y=\"15\" fill=\"#7B8998\" />\n            <rect width=\"2\" height=\"16\" x=\"4\" fill=\"#404B5A\" />\n            <rect width=\"1\" height=\"16\" x=\"13\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" x=\"17\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" fill=\"#7B8998\" opacity=\".50\" />\n        </g>\n    </svg>;\nexport const AxisTwo = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"16\" viewBox=\"0 0 18 16\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <rect width=\"18\" height=\"1\" y=\"15\" fill=\"#7B8998\" />\n            <rect width=\"2\" height=\"16\" x=\"12\" fill=\"#404B5A\" />\n            <rect width=\"1\" height=\"16\" x=\"4\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" x=\"17\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" fill=\"#7B8998\" opacity=\".50\" />\n        </g>\n    </svg>;\nexport const AxisThree = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"16\" viewBox=\"0 0 18 16\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <rect width=\"18\" height=\"1\" y=\"15\" fill=\"#7B8998\" />\n            <rect width=\"2\" height=\"16\" fill=\"#404B5A\" />\n            <rect width=\"1\" height=\"16\" x=\"13\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" x=\"17\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" x=\"4\" fill=\"#7B8998\" opacity=\".50\" />\n        </g>\n    </svg>;\nexport const AxisFour = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"16\" viewBox=\"0 0 18 16\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <rect width=\"18\" height=\"1\" y=\"15\" fill=\"#7B8998\" />\n            <rect width=\"2\" height=\"16\" x=\"16\" fill=\"#404B5A\" />\n            <rect width=\"1\" height=\"16\" x=\"13\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" x=\"4\" fill=\"#7B8998\" opacity=\".50\" />\n            <rect width=\"1\" height=\"16\" fill=\"#7B8998\" opacity=\".50\" />\n        </g>\n    </svg>;","/*eslint no-unused-vars: [\"error\", { \"ignoreRestSiblings\": true }]*/\nimport React, { useEffect } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Table, TableHead, TableRow, TableCell, TableBody, Radio } from '@dhis2/ui';\nimport { VIS_TYPE_COLUMN, VIS_TYPE_LINE, visTypeIcons, hasRelativeItems } from '@dhis2/analytics';\nimport styles from '../styles/SeriesTable.module.css';\nimport { acSetUiOptions, acUpdateUiSeriesItem } from '../../../actions/ui';\nimport { sGetUiLayout, sGetUiOptions, sGetUiType } from '../../../reducers/ui';\nimport { sGetSeriesSetupItems } from '../../../reducers';\nimport { EmptySeries, EmptyBox, GenericError } from '../../../assets/ErrorIcons';\nimport { AxisOne, AxisTwo, AxisThree, AxisFour } from '../../../assets/AxisIcons';\nimport { SERIES_ITEM_TYPE_PROP, SERIES_ITEM_AXIS_PROP } from '../../../modules/ui';\nconst availableAxes = [0, 1, 2, 3];\nconst allTypes = [VIS_TYPE_COLUMN, VIS_TYPE_LINE];\n\nconst SeriesTable = ({\n  columns,\n  layoutItems,\n  optionItems,\n  onChange,\n  onItemChange,\n  visType,\n  showAxisOptions,\n  showTypeOptions\n}) => {\n  const availableTypes = [visType, ...allTypes.filter(type => type !== visType)];\n  useEffect(() => {\n    if (!optionItems.length) {\n      onChange(layoutItems);\n    } else {\n      const matchedItems = layoutItems.map(item => {\n        const matchedItem = optionItems.find(option => option.dimensionItem === item.dimensionItem);\n\n        if (matchedItem) {\n          matchedItem.name = item.name;\n        }\n\n        return matchedItem || item;\n      });\n      onChange(matchedItems);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const renderTable = () => <Table suppressZebraStriping className={styles.table}>\n            <colgroup>\n                <col className={styles.nameColumn} />\n                <col className={styles.typeColumn} />\n                <col className={styles.axisColumn} />\n            </colgroup>\n            <TableHead className={styles.tableHead}>\n                <TableRow className={styles.tableRow}>\n                    <TableCell className={styles.tableCell}>\n                        {i18n.t('Data item')}\n                    </TableCell>\n\n                    <TableCell className={styles.tableCell}>\n                        {showTypeOptions && i18n.t('Visualization type')}\n                    </TableCell>\n\n                    {showAxisOptions && availableAxes.map((axis, index) => <TableCell key={index} className={styles.tableCell}>\n                                {i18n.t('Axis {{axisId}}', {\n            axisId: index + 1\n          })}\n                                <div className={styles.axisIcon}>\n                                    {renderAxisIcon(index + 1)}\n                                </div>\n                            </TableCell>)}\n                </TableRow>\n            </TableHead>\n            <TableBody className={styles.tableBody}>\n                {optionItems.map(item => <TableRow key={`multiaxis-table-row-${item.dimensionItem}`}>\n                        <TableCell className={styles.itemName}>\n                            {item.name}\n                        </TableCell>\n                        <TableCell className={styles.itemType}>\n                            {showTypeOptions && availableTypes.map(type => <div className={styles.typeContainer} key={type}>\n                                        <Radio className={styles.radioInput} key={type} onChange={() => onItemChange({\n              changedItem: item,\n              value: type,\n              prop: SERIES_ITEM_TYPE_PROP\n            })} checked={item.type ? item.type === type : visType === type} label={<span className={styles.visIcon}>\n                                                    {visTypeIcons[type]}\n                                                </span>} dense />\n                                    </div>)}\n                        </TableCell>\n                        {showAxisOptions && availableAxes.map(axis => <TableCell key={axis} className={styles.itemAxis}>\n                                    <Radio onChange={() => onItemChange({\n            changedItem: item,\n            value: axis,\n            prop: SERIES_ITEM_AXIS_PROP\n          })} checked={item.axis === axis} dense />\n                                </TableCell>)}\n                    </TableRow>)}\n            </TableBody>\n        </Table>;\n\n  const renderAxisIcon = axis => {\n    switch (axis) {\n      case 1:\n        return <AxisOne />;\n\n      case 2:\n        return <AxisTwo />;\n\n      case 3:\n        return <AxisThree />;\n\n      case 4:\n        return <AxisFour />;\n    }\n  };\n\n  const renderError = (title, description, icon) => <div className={styles.errorContainer}>\n            <div className={styles.errorIcon}>{icon}</div>\n            <p className={styles.errorTitle}>{title}</p>\n            <p className={styles.errorDescription}>{description}</p>\n        </div>;\n\n  const renderEmptySeriesError = () => renderError(i18n.t('Series is empty'), i18n.t('Options for selected items will be available here'), EmptySeries());\n\n  const renderNoSeriesOptionsError = () => renderError(i18n.t('No Series options'), i18n.t(\"There aren't any Series options for this visualization type\"), EmptyBox());\n\n  const renderRelativeItemsError = () => renderError(i18n.t('Series options unavailable'), i18n.t('Series options are not available when using relative selections for periods, org units or categories'), GenericError());\n\n  if (!showAxisOptions && !showTypeOptions) {\n    return renderNoSeriesOptionsError();\n  } else if (hasRelativeItems(columns[0], layoutItems.map(item => item.dimensionItem))) {\n    return renderRelativeItemsError();\n  } else {\n    return Object.keys(layoutItems).length && optionItems.length ? renderTable() : renderEmptySeriesError();\n  }\n};\n\nSeriesTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  visType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onItemChange: PropTypes.func.isRequired,\n  layoutItems: PropTypes.array,\n  optionItems: PropTypes.array,\n  showAxisOptions: PropTypes.bool,\n  showTypeOptions: PropTypes.bool\n};\nSeriesTable.defaultProps = {\n  layoutItems: [],\n  optionItems: [],\n  showAxisOptions: false,\n  showTypeOptions: false\n};\n\nconst mapStateToProps = state => ({\n  layoutItems: sGetSeriesSetupItems(state),\n  columns: sGetUiLayout(state).columns,\n  optionItems: sGetUiOptions(state).series,\n  visType: sGetUiType(state)\n});\n\nconst mapDispatchToProps = {\n  onChange: series => dispatch => {\n    dispatch(acSetUiOptions({\n      series\n    }));\n  },\n  onItemChange: ({\n    changedItem,\n    value,\n    prop\n  }) => dispatch => {\n    dispatch(acUpdateUiSeriesItem({\n      changedItem,\n      value,\n      prop\n    }));\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SeriesTable);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SeriesTable from '../../../components/VisualizationOptions/Options/SeriesTable';\nexport default (({\n  showAxisOptions,\n  showTypeOptions\n} = {}) => ({\n  key: 'series-tab',\n  label: i18n.t('Series'),\n  content: [{\n    key: 'series-table',\n    content: React.Children.toArray([<SeriesTable showAxisOptions={showAxisOptions} showTypeOptions={showTypeOptions} />])\n  }]\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-advanced',\n  label: i18n.t('Advanced'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-display',\n  label: i18n.t('Display'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-totals',\n  label: i18n.t('Totals'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'data-empty-data',\n  label: i18n.t('Empty data'),\n  content\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Field, Radio } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const RadioBaseOption = ({\n  option,\n  label,\n  value,\n  onChange,\n  disabled\n}) => <Field name={option.name} label={label} dense>\n        {option.items.map(({\n    id,\n    label\n  }) => <Radio key={id} label={label} value={id} checked={value === id} onChange={({\n    value\n  }) => onChange(value)} disabled={disabled} dense />)}\n    </Field>;\nRadioBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  label: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RadioBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport RadioBaseOption from './RadioBaseOption';\nexport const LEGEND_DISPLAY_STYLE_OPTION_NAME = 'legendDisplayStyle';\nexport const LEGEND_DISPLAY_STYLE_FILL = 'FILL';\nexport const LEGEND_DISPLAY_STYLE_TEXT = 'TEXT';\n\nconst LegendDisplayStyle = () => <RadioBaseOption option={{\n  name: LEGEND_DISPLAY_STYLE_OPTION_NAME,\n  items: [{\n    id: LEGEND_DISPLAY_STYLE_FILL,\n    label: i18n.t('Legend changes background color')\n  }, {\n    id: LEGEND_DISPLAY_STYLE_TEXT,\n    label: i18n.t('Legend changes text color')\n  }]\n}} />;\n\nexport default LegendDisplayStyle;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const LEGEND_SET_OPTION_NAME = 'legendSet';\nconst query = {\n  legendSets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'legends[id,displayName~rename(name),startValue,endValue,color]'],\n      paging: 'false'\n    }\n  }\n};\n\nconst LegendSetSelect = ({\n  value,\n  loading,\n  options,\n  onFocus,\n  onChange\n}) => <SingleSelectField name=\"legendSetSelect\" label={i18n.t('Legend')} selected={value?.id} inputWidth=\"280px\" placeholder={i18n.t('Select from legends')} loadingText={i18n.t('Loading legends')} loading={loading} dense onFocus={onFocus} onChange={({\n  selected\n}) => onChange({\n  id: selected,\n  displayName: options.find(option => option.value === selected).label\n})}>\n        {options.map(({\n    value,\n    label\n  }) => <SingleSelectOption key={value} value={value} label={label} />)}\n    </SingleSelectField>;\n\nLegendSetSelect.propTypes = {\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\n\nconst LegendSet = ({\n  value,\n  onChange\n}) => {\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        legendSets\n      } = await engine.query(query);\n\n      if (legendSets) {\n        const options = legendSets.legendSets.map(legendSet => ({\n          value: legendSet.id,\n          label: legendSet.name\n        }));\n        setOptions(options);\n      }\n\n      setIsLoaded(true);\n    }\n  };\n\n  return <LegendSetSelect loading={!isLoaded} value={value} options={options} onChange={onChange} onFocus={onSelectFocus} />;\n};\n\nLegendSet.propTypes = {\n  value: PropTypes.object,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[LEGEND_SET_OPTION_NAME] || {}\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    id,\n    displayName\n  }) => dispatch(acSetUiOptions({\n    [LEGEND_SET_OPTION_NAME]: {\n      id,\n      displayName\n    }\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendSet);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Radio, Field } from '@dhis2/ui';\nimport LegendSet from './LegendSet';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const LEGEND_DISPLAY_STRATEGY_OPTION_NAME = 'legendDisplayStrategy';\nexport const LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM';\nexport const LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED';\nimport { tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\n\nconst LegendDisplayStrategy = ({\n  value,\n  onChange\n}) => <Fragment>\n        <Field name={LEGEND_DISPLAY_STRATEGY_OPTION_NAME} dense>\n            <Radio key={LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM} label={i18n.t('Use pre-defined legend per data item')} value={LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM} checked={value === LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM} onChange={onChange} dense />\n            <Radio key={LEGEND_DISPLAY_STRATEGY_FIXED} label={i18n.t('Select a single legend for the entire visualization')} value={LEGEND_DISPLAY_STRATEGY_FIXED} checked={value === LEGEND_DISPLAY_STRATEGY_FIXED} onChange={onChange} dense />\n        </Field>\n        {value === LEGEND_DISPLAY_STRATEGY_FIXED ? <div className={tabSectionOptionToggleable.className}>\n                <LegendSet />\n            </div> : null}\n    </Fragment>;\n\nLegendDisplayStrategy.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[LEGEND_DISPLAY_STRATEGY_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    value\n  }) => dispatch(acSetUiOptions({\n    [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendDisplayStrategy);","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, FieldSet, Legend as UiCoreLegend } from '@dhis2/ui';\nimport LegendDisplayStyle, { LEGEND_DISPLAY_STYLE_OPTION_NAME, LEGEND_DISPLAY_STYLE_FILL } from './LegendDisplayStyle';\nimport LegendDisplayStrategy, { LEGEND_DISPLAY_STRATEGY_OPTION_NAME, LEGEND_DISPLAY_STRATEGY_FIXED, LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM } from './LegendDisplayStrategy';\nimport { LEGEND_SET_OPTION_NAME } from './LegendSet';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOptionToggleable, tabSectionOption, tabSectionTitle, tabSectionTitleMargin } from '../styles/VisualizationOptions.style.js';\n\nconst Legend = ({\n  legendSet,\n  legendDisplayStrategy,\n  onChange,\n  hideStyleOptions\n}) => {\n  const [legendEnabled, setLegendEnabled] = useState(!(legendDisplayStrategy === LEGEND_DISPLAY_STRATEGY_FIXED && !legendSet));\n\n  const onCheckboxChange = ({\n    checked\n  }) => {\n    setLegendEnabled(checked);\n\n    if (checked) {\n      onChange({\n        [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM\n      });\n    } else {\n      onChange({\n        [LEGEND_SET_OPTION_NAME]: undefined,\n        [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: LEGEND_DISPLAY_STRATEGY_FIXED,\n        [LEGEND_DISPLAY_STYLE_OPTION_NAME]: LEGEND_DISPLAY_STYLE_FILL\n      });\n    }\n  };\n\n  return <div className={tabSectionOption.className}>\n            <Checkbox checked={legendEnabled} label={i18n.t('Display legend')} onChange={onCheckboxChange} dense />\n            {legendEnabled ? <div className={tabSectionOptionToggleable.className}>\n                    {!hideStyleOptions ? <div className={tabSectionOption.className}>\n                            <FieldSet>\n                                <UiCoreLegend>\n                                    <span className={cx(tabSectionTitle.className, tabSectionTitleMargin.className)}>\n                                        {i18n.t('Legend style')}\n                                    </span>\n                                </UiCoreLegend>\n                                <div className={tabSectionOption.className}>\n                                    <LegendDisplayStyle />\n                                </div>\n                            </FieldSet>\n                        </div> : null}\n                    <div>\n                        <FieldSet>\n                            <UiCoreLegend>\n                                <span className={cx(tabSectionTitle.className, {\n              [tabSectionTitleMargin.className]: hideStyleOptions\n            })}>\n                                    {i18n.t('Legend type')}\n                                </span>\n                            </UiCoreLegend>\n                            <div className={tabSectionOption.className}>\n                                <LegendDisplayStrategy />\n                            </div>\n                        </FieldSet>\n                    </div>\n                </div> : null}\n        </div>;\n};\n\nLegend.propTypes = {\n  legendDisplayStrategy: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  hideStyleOptions: PropTypes.bool,\n  legendSet: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  legendSet: sGetUiOptions(state)[LEGEND_SET_OPTION_NAME],\n  legendDisplayStrategy: sGetUiOptions(state)[LEGEND_DISPLAY_STRATEGY_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions(value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Legend);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport Legend from '../../../components/VisualizationOptions/Options/Legend';\nexport default (({\n  hideStyleOptions\n} = {}) => ({\n  key: 'legend-tab',\n  label: i18n.t('Legend'),\n  content: [{\n    key: 'legend-section-1',\n    content: React.Children.toArray([<Legend hideStyleOptions={hideStyleOptions} />])\n  }]\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content\n}));","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Input, Label, SingleSelect, SingleSelectOption } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionText, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\n\nconst OperatorSelect = ({\n  name,\n  value,\n  onChange\n}) => {\n  const options = [{\n    id: 'EQ',\n    label: '='\n  }, {\n    id: 'GT',\n    label: '>'\n  }, {\n    id: 'GE',\n    label: '>='\n  }, {\n    id: 'LT',\n    label: '<'\n  }, {\n    id: 'LE',\n    label: '<='\n  }];\n  return <div style={{\n    width: '112px'\n  }}>\n            <SingleSelect name={name} onChange={({\n      selected\n    }) => {\n      onChange(selected);\n    }} selected={value} tabIndex=\"0\" inputMaxWidth=\"106px\" dense>\n                {options.map(({\n        id,\n        label\n      }) => <SingleSelectOption key={id} value={id} label={label} />)}\n            </SingleSelect>\n        </div>;\n};\n\nOperatorSelect.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst ValueInput = ({\n  name,\n  value,\n  onChange\n}) => <Input name={name} value={value} type=\"number\" onChange={({\n  value\n}) => onChange(value)} width=\"72px\" dense />;\n\nValueInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nclass MeasureCriteria extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      op1: '',\n      v1: '',\n      op2: '',\n      v2: ''\n    };\n    const [op1 = '', v1 = '', op2 = '', v2 = ''] = props.value.split(/[;:]/);\n    this.state = {\n      op1,\n      v1,\n      op2,\n      v2\n    };\n  }\n\n  onClear = () => this.setState(this.defaultState, this.props.onChange(''));\n  onChange = name => value => {\n    this.setState({\n      [name]: value\n    }, () => {\n      const {\n        op1,\n        v1,\n        op2,\n        v2\n      } = this.state;\n      const value = [];\n\n      if (op1 && v1) {\n        value.push(`${op1}:${v1}`);\n      }\n\n      if (op2 && v2) {\n        value.push(`${op2}:${v2}`);\n      }\n\n      this.props.onChange(value.length > 0 ? value.join(';') : '');\n    });\n  };\n\n  render() {\n    const {\n      op1,\n      v1,\n      op2,\n      v2\n    } = this.state;\n    return <div className={tabSectionOption.className}>\n                <p className={tabSectionOptionText.className}>\n                    {i18n.t('You can set a minimum or maximum value. This will apply to the entire visualization, all values outside of the minimum/maximum range will not be displayed')}\n                </p>\n                <div className={tabSectionOptionComplexInline.className}>\n                    <div style={{\n          width: '250px'\n        }}>\n                        <Label>{i18n.t('Minimum data value')}</Label>\n                        <div className={tabSectionOptionComplexInline.className}>\n                            <OperatorSelect name=\"op1\" value={op1} onChange={this.onChange('op1')} />\n                            <ValueInput name=\"v1\" value={v1} onChange={this.onChange('v1')} />\n                        </div>\n                    </div>\n                    <div style={{\n          width: '250px'\n        }}>\n                        <Label>{i18n.t('Maximum data value')}</Label>\n                        <div className={tabSectionOptionComplexInline.className}>\n                            <OperatorSelect name=\"op2\" value={op2} onChange={this.onChange('op2')} />\n                            <ValueInput name=\"v2\" value={v2} onChange={this.onChange('v2')} />\n                        </div>\n                    </div>\n                </div>\n                <div style={{\n        paddingTop: '16px'\n      }}>\n                    <Button onClick={this.onClear}>\n                        {i18n.t('Clear min/max limits')}\n                    </Button>\n                </div>\n            </div>;\n  }\n\n}\n\nMeasureCriteria.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state).measureCriteria || ''\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions({\n    measureCriteria: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasureCriteria);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport MeasureCriteria from '../../../components/VisualizationOptions/Options/MeasureCriteria';\nexport default (() => ({\n  key: 'limitValues-tab',\n  label: i18n.t('Limit values'),\n  content: [\n  /*\n  {\n      key: 'limitValues-limit-numbers',\n      label: i18n.t('Limit number of values'),\n      content: [<TopLimit />],\n  },*/\n  {\n    key: 'limitValues-limit-min-max',\n    label: i18n.t('Limit minimum/maximum values'),\n    content: React.Children.toArray([<MeasureCriteria />])\n  }]\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field, Radio } from '@dhis2/ui';\nimport { colorSets, COLOR_SET_DEFAULT, COLOR_SET_BRIGHT, COLOR_SET_DARK, COLOR_SET_GRAY, COLOR_SET_COLOR_BLIND, COLOR_SET_PATTERNS } from '@dhis2/analytics';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nexport const COLOR_SET_OPTION_NAME = 'colorSet';\n\nconst ColorSet = ({\n  value,\n  onChange,\n  disabled\n}) => <div className={tabSectionOption.className}>\n        <Field name=\"colorSet-selector\" dense>\n            {[[{\n      id: COLOR_SET_DEFAULT,\n      label: i18n.t('Default')\n    }, {\n      id: COLOR_SET_BRIGHT,\n      label: i18n.t('Bright')\n    }, {\n      id: COLOR_SET_DARK,\n      label: i18n.t('Dark')\n    }, {\n      id: COLOR_SET_GRAY,\n      label: i18n.t('Gray')\n    }, {\n      id: COLOR_SET_COLOR_BLIND,\n      label: i18n.t('Color blind')\n    }, {\n      id: COLOR_SET_PATTERNS,\n      label: i18n.t('Patterns')\n    }].map(({\n      id,\n      label\n    }) => <span key={id}>\n                        <Radio label={<>\n                                    {label}\n                                    <ColorSetPreview colorSet={colorSets[id]} disabled={disabled} />\n                                </>} value={id} dense onChange={({\n        value\n      }) => onChange(value)} checked={value === id} disabled={disabled} />\n                    </span>)]}\n        </Field>\n    </div>;\n\nColorSet.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\n\nconst ColorSetPreview = ({\n  colorSet,\n  disabled\n}) => <div style={{\n  display: 'flex',\n  marginLeft: 4,\n  opacity: disabled ? 0.3 : 1\n}}>\n        {colorSet?.patterns && colorSet.patterns.map((pattern, index) => <div key={`pattern-${index}`}>\n                    <svg width={14} height={14} xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d={pattern.path} stroke={pattern.color} strokeWidth={2} fill=\"none\" />\n                    </svg>\n                </div>)}\n        {colorSet?.colors && colorSet.colors.map(color => <div key={color} style={{\n    backgroundColor: color,\n    width: 14,\n    height: 14\n  }} />)}\n    </div>;\n\nColorSetPreview.propTypes = {\n  colorSet: PropTypes.object.isRequired,\n  disabled: PropTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[COLOR_SET_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: colorSet => dispatch(acSetUiOptions({\n    [COLOR_SET_OPTION_NAME]: colorSet\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorSet);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport ColorSet from '../../../components/VisualizationOptions/Options/ColorSet';\nexport default (hasDisabledSections => ({\n  key: 'style-color-set',\n  label: i18n.t('Color set'),\n  helpText: hasDisabledSections ? i18n.t('Color sets are not supported yet when using multiple axes') : null,\n  content: React.Children.toArray([<ColorSet disabled={hasDisabledSections} />])\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport AggregationType from '../../../components/VisualizationOptions/Options/AggregationType';\nimport CompletedOnly from '../../../components/VisualizationOptions/Options/CompletedOnly';\nimport getAdvancedTemplate from './templates/advanced';\nexport default (() => ({ ...getAdvancedTemplate({\n    content: React.Children.toArray([<AggregationType />, <CompletedOnly />])\n  })\n}));","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Field, Radio } from '@dhis2/ui';\nimport { FONT_STYLE_VISUALIZATION_TITLE } from '@dhis2/analytics';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport Title from './Title';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nconst HIDE_TITLE_AUTO = 'AUTO';\nconst HIDE_TITLE_NONE = 'NONE';\nconst HIDE_TITLE_CUSTOM = 'CUSTOM';\n\nclass HideTitle extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      value: HIDE_TITLE_AUTO\n    };\n    this.state = props.value ? {\n      value: props.value\n    } : this.defaultState;\n  }\n\n  onGroupChange = ({\n    value\n  }) => {\n    this.setState({\n      value\n    });\n    this.props.onChange(value === HIDE_TITLE_NONE, value === HIDE_TITLE_AUTO ? undefined : this.props.title || undefined);\n  };\n\n  render() {\n    const {\n      value\n    } = this.state;\n    return <div className={tabSectionOption.className} data-test={'option-chart-title'}>\n                <Label>{i18n.t('Chart title')}</Label>\n                <Field name=\"hideTitle-selector\" dense>\n                    {[{\n          id: HIDE_TITLE_AUTO,\n          label: i18n.t('Auto generated')\n        }, {\n          id: HIDE_TITLE_NONE,\n          label: i18n.t('None')\n        }, {\n          id: HIDE_TITLE_CUSTOM,\n          label: i18n.t('Custom')\n        }].map(({\n          id,\n          label\n        }) => <Radio key={id} label={label} value={id} dense onChange={this.onGroupChange} checked={value === id} />)}\n                </Field>\n                {value === HIDE_TITLE_CUSTOM ? <div className={tabSectionOptionToggleable.className}>\n                        <Title inline />\n                    </div> : null}\n                {value === HIDE_TITLE_AUTO || value === HIDE_TITLE_CUSTOM ? <div className={tabSectionOptionToggleable.className}>\n                        <TextStyle fontStyleKey={FONT_STYLE_VISUALIZATION_TITLE} dataTest={'option-chart-title-text-style'} />\n                    </div> : null}\n            </div>;\n  }\n\n}\n\nHideTitle.propTypes = {\n  title: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst hideTitleSelector = createSelector([sGetUiOptions], uiOptions => uiOptions.hideTitle ? HIDE_TITLE_NONE : uiOptions.title === undefined ? HIDE_TITLE_AUTO : HIDE_TITLE_CUSTOM);\n\nconst mapStateToProps = state => ({\n  value: hideTitleSelector(state),\n  title: sGetUiOptions(state).title\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (hideTitle, title) => dispatch(acSetUiOptions({\n    hideTitle,\n    title\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HideTitle);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst Subtitle = ({\n  dataTest\n}) => <TextBaseOption type=\"text\" width=\"280px\" placeholder={i18n.t('Add a subtitle')} option={{\n  name: 'subtitle'\n}} dataTest={dataTest} />;\n\nSubtitle.propTypes = {\n  dataTest: PropTypes.string\n};\nexport default Subtitle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Radio, Field } from '@dhis2/ui';\nimport { VIS_TYPE_PIVOT_TABLE, FONT_STYLE_VISUALIZATION_SUBTITLE } from '@dhis2/analytics';\nimport { sGetUiOptions, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport Subtitle from './Subtitle';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\nconst HIDE_SUBTITLE_AUTO = 'AUTO';\nconst HIDE_SUBTITLE_NONE = 'NONE';\nconst HIDE_SUBTITLE_CUSTOM = 'CUSTOM';\n\nclass HideSubtitle extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      value: HIDE_SUBTITLE_AUTO\n    };\n    this.state = props.value ? {\n      value: props.value\n    } : this.defaultState;\n  }\n\n  onGroupChange = ({\n    value\n  }) => {\n    this.setState({\n      value\n    });\n    this.props.onChange(value === HIDE_SUBTITLE_NONE, value === HIDE_SUBTITLE_AUTO ? undefined : this.props.subtitle || undefined);\n  };\n\n  render() {\n    const {\n      value\n    } = this.state;\n    const {\n      visualizationType\n    } = this.props;\n    return <div className={tabSectionOption.className}>\n                <Label>\n                    {visualizationType === VIS_TYPE_PIVOT_TABLE ? i18n.t('Table subtitle') : i18n.t('Chart subtitle')}\n                </Label>\n                <Field name=\"hideSubtitle-selector\" dense dataTest={'option-chart-subtitle-type-radios'}>\n                    {[{\n          id: HIDE_SUBTITLE_AUTO,\n          label: i18n.t('Auto generated')\n        }, {\n          id: HIDE_SUBTITLE_NONE,\n          label: i18n.t('None')\n        }, {\n          id: HIDE_SUBTITLE_CUSTOM,\n          label: i18n.t('Custom')\n        }].map(({\n          id,\n          label\n        }) => <Radio key={id} label={label} value={id} dense onChange={this.onGroupChange} checked={value === id} />)}\n                </Field>\n                {value === HIDE_SUBTITLE_CUSTOM ? <div className={tabSectionOptionToggleable.className}>\n                        <Subtitle inline dataTest={'option-chart-subtitle-text'} />\n                    </div> : null}\n                {value === HIDE_SUBTITLE_AUTO || value === HIDE_SUBTITLE_CUSTOM ? <div className={tabSectionOptionToggleable.className}>\n                        <TextStyle fontStyleKey={FONT_STYLE_VISUALIZATION_SUBTITLE} dataTest={'option-chart-subtitle-text-style'} />\n                    </div> : null}\n            </div>;\n  }\n\n}\n\nHideSubtitle.propTypes = {\n  subtitle: PropTypes.string,\n  value: PropTypes.string,\n  visualizationType: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst hideSubtitleSelector = createSelector([sGetUiOptions], uiOptions => uiOptions.hideSubtitle ? HIDE_SUBTITLE_NONE : uiOptions.subtitle === undefined ? HIDE_SUBTITLE_AUTO : HIDE_SUBTITLE_CUSTOM);\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  value: hideSubtitleSelector(state),\n  subtitle: sGetUiOptions(state).subtitle\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (hideSubtitle, subtitle) => dispatch(acSetUiOptions({\n    hideSubtitle,\n    subtitle\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HideSubtitle);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport HideTitle from '../../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../../components/VisualizationOptions/Options/HideSubtitle';\nexport default (() => ({\n  key: 'style-titles',\n  label: i18n.t('Titles'),\n  content: React.Children.toArray([<HideTitle />, <HideSubtitle />])\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Box, Input, InputField } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst NumberBaseType = ({\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  inline,\n  disabled,\n  dataTest\n}) => <div className={inline ? '' : tabSectionOption.className}>\n        <div>\n            {inline ? <Box width={width}>\n                    <Input type=\"number\" onChange={({\n        value\n      }) => onChange(value)} name={option.name} value={value?.toString() || ''} placeholder={placeholder} dense disabled={disabled} dataTest={`${dataTest}-input`} />\n                </Box> : <InputField type=\"number\" label={label} onChange={({\n      value\n    }) => onChange(value)} name={option.name} value={value} helpText={disabled ? '' : helpText} placeholder={placeholder} inputWidth={width} dense disabled={disabled} dataTest={`${dataTest}-input`} />}\n        </div>\n    </div>;\n\nNumberBaseType.propTypes = {\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  inline: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  value: PropTypes.number,\n  width: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option),\n  checked: sGetUiOption(state, ownProps.option) !== undefined\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value: value !== '' ? Number(value) : value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NumberBaseType);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport NumberBaseType from './NumberBaseType';\n\nconst RegressionLineValue = ({\n  dataTest,\n  axisId,\n  id\n}) => <NumberBaseType width=\"96px\" label={i18n.t('Value')} placeholder={i18n.t('Number')} option={{\n  id,\n  axisId\n}} inline dataTest={dataTest} />;\n\nRegressionLineValue.propTypes = {\n  axisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  id: PropTypes.string\n};\nexport default RegressionLineValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport TextBaseOption from './TextBaseOption';\n\nconst RegressionLineTitle = ({\n  dataTest,\n  axisId,\n  fontStyleKey,\n  id,\n  isVertical\n}) => <TextBaseOption type=\"text\" width=\"280px\" label={i18n.t('Title')} placeholder={i18n.t('Add a title')} option={{\n  id,\n  axisId\n}} inline fontStyleKey={fontStyleKey} dataTest={dataTest} isVertical={isVertical} />;\n\nRegressionLineTitle.propTypes = {\n  axisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  fontStyleKey: PropTypes.string,\n  id: PropTypes.string,\n  isVertical: PropTypes.bool\n};\nexport default RegressionLineTitle;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, Label } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport RegressionLineValue from './RegressionLineValue';\nimport RegressionLineTitle from './RegressionLineTitle';\nimport { tabSectionOption, tabSectionOptionToggleable, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\nexport const RegressionLine = ({\n  checked,\n  onToggle,\n  disabled,\n  label,\n  dataTest,\n  fontStyleKey,\n  valueId,\n  titleId,\n  axisId,\n  isVertical\n}) => <div className={tabSectionOption.className}>\n        <Checkbox checked={checked} label={label} name=\"regressionLine-toggle\" onChange={({\n    checked\n  }) => onToggle(checked)} dense disabled={disabled} dataTest={`${dataTest}-checkbox`} />\n        {checked && !disabled ? <div className={`${tabSectionOptionToggleable.className} ${tabSectionOptionComplexInline.className}`}>\n                <div>\n                    <Label>{i18n.t('Value')}</Label>\n                    <RegressionLineValue dataTest={`${dataTest}-value`} axisId={axisId} id={valueId} />\n                </div>\n                <div>\n                    <Label>{i18n.t('Title')}</Label>\n                    <RegressionLineTitle dataTest={`${dataTest}-label`} axisId={axisId} fontStyleKey={fontStyleKey} id={titleId} isVertical={isVertical} />\n                </div>\n            </div> : null}\n    </div>;\nRegressionLine.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n  axisId: PropTypes.string,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyleKey: PropTypes.string,\n  isVertical: PropTypes.bool,\n  label: PropTypes.string,\n  titleId: PropTypes.string,\n  valueId: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  checked: sGetUiOption(state, {\n    id: ownProps.enabledId,\n    axisId: ownProps.axisId\n  }) || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onToggle: checked => dispatch(acSetUiOption({\n    optionId: ownProps.enabledId,\n    axisId: ownProps.axisId,\n    value: checked\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegressionLine);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { OPTION_TARGET_LINE_ENABLED, OPTION_TARGET_LINE_TITLE, OPTION_TARGET_LINE_TITLE_FONT_STYLE, OPTION_TARGET_LINE_VALUE } from '../../../modules/options';\nimport RegressionLine from './RegressionLine';\nexport const TargetLine = ({\n  disabled,\n  axisId,\n  isVertical\n}) => <RegressionLine disabled={disabled} label={i18n.t('Target line')} dataTest=\"option-target-line\" fontStyleKey={OPTION_TARGET_LINE_TITLE_FONT_STYLE} titleId={OPTION_TARGET_LINE_TITLE} valueId={OPTION_TARGET_LINE_VALUE} enabledId={OPTION_TARGET_LINE_ENABLED} axisId={axisId} isVertical={isVertical} />;\nTargetLine.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool,\n  isVertical: PropTypes.bool\n};\nexport default TargetLine;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { OPTION_BASE_LINE_ENABLED, OPTION_BASE_LINE_TITLE, OPTION_BASE_LINE_TITLE_FONT_STYLE, OPTION_BASE_LINE_VALUE } from '../../../modules/options';\nimport RegressionLine from './RegressionLine';\nexport const BaseLine = ({\n  disabled,\n  axisId,\n  isVertical\n}) => <RegressionLine disabled={disabled} label={i18n.t('Base line')} dataTest=\"option-base-line\" fontStyleKey={OPTION_BASE_LINE_TITLE_FONT_STYLE} titleId={OPTION_BASE_LINE_TITLE} valueId={OPTION_BASE_LINE_VALUE} enabledId={OPTION_BASE_LINE_ENABLED} axisId={axisId} isVertical={isVertical} />;\nBaseLine.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool,\n  isVertical: PropTypes.bool\n};\nexport default BaseLine;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport NumberBaseType from './NumberBaseType';\nimport { OPTION_AXIS_MIN_VALUE } from '../../../modules/options';\n\nconst AxisMinValue = ({\n  disabled,\n  axisId\n}) => <NumberBaseType width=\"100px\" placeholder={i18n.t('Min')} disabled={disabled} option={{\n  id: OPTION_AXIS_MIN_VALUE,\n  axisId\n}} inline dataTest={`${axisId}-axis-range-min`} />;\n\nAxisMinValue.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisMinValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport NumberBaseType from './NumberBaseType';\nimport { OPTION_AXIS_MAX_VALUE } from '../../../modules/options';\n\nconst AxisMaxValue = ({\n  disabled,\n  axisId\n}) => <NumberBaseType width=\"100px\" placeholder={i18n.t('Max')} disabled={disabled} option={{\n  id: OPTION_AXIS_MAX_VALUE,\n  axisId\n}} inline dataTest={`${axisId}-axis-range-max`} />;\n\nAxisMaxValue.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisMaxValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { Label, Help } from '@dhis2/ui';\nimport AxisMinValue from './AxisMinValue';\nimport AxisMaxValue from './AxisMaxValue';\nimport styles from '../styles/AxisRange.module.css';\nimport { tabSectionOption, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\n\nconst AxisRange = ({\n  disabled,\n  axisId\n}) => <div className={tabSectionOption.className}>\n        <Label className={styles.label}>{i18n.t('Axis range')}</Label>\n        <div className={tabSectionOptionComplexInline.className}>\n            <AxisMinValue disabled={disabled} axisId={axisId} />\n            <div style={{\n      display: 'flex',\n      alignItems: 'center'\n    }}>\n                {'\\u00A0\\u2013\\u00A0'}\n            </div>\n            <AxisMaxValue disabled={disabled} axisId={axisId} />\n        </div>\n        {!disabled ? <Help>\n                {i18n.t('Values outside of the range will not be displayed')}\n            </Help> : null}\n    </div>;\n\nAxisRange.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisRange;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { Label } from '@dhis2/ui';\nimport { FONT_STYLE_AXIS_LABELS } from '@dhis2/analytics';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nimport TextStyle from './TextStyle';\n\nconst AxisLabels = ({\n  disabled,\n  axisId\n}) => <div className={tabSectionOption.className}>\n        <Label>{i18n.t('Labels')}</Label>\n        <TextStyle fontStyleKey={FONT_STYLE_AXIS_LABELS} disabled={disabled} axisId={axisId} />\n    </div>;\n\nAxisLabels.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisLabels;","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content,\n  helpText\n}) => ({\n  key: 'axes-vertical-axis',\n  label: i18n.t('Vertical (y) axis'),\n  content,\n  helpText\n}));","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content,\n  helpText\n}) => ({\n  key: 'data-lines',\n  label: i18n.t('Lines'),\n  content,\n  helpText\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport AxisLabels from '../../components/VisualizationOptions/Options/AxisLabels';\nimport getSeriesTab from './tabs/series';\nimport getAxesTab from './tabs/axes';\nimport getVerticalAxisTemplate from './sections/templates/verticalAxis';\nimport getDisplayTemplate from './sections/templates/display';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getLinesTemplate from './sections/templates/lines';\nimport getLegendTab from './tabs/legend';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nconst axisId = 'RANGE_0';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([<SkipRounding />])\n}), getLinesTemplate({\n  content: React.Children.toArray([<TargetLine axisId={axisId} />, <BaseLine axisId={axisId} />])\n}), getAdvancedSection()]), getLegendTab(), getAxesTab([getVerticalAxisTemplate({\n  content: React.Children.toArray([<AxisRange axisId={axisId} />, <AxisLabels axisId={axisId} />])\n})]), getSeriesTab(), getStyleTab([getTitlesSection()])]);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'regressionType';\nconst defaultValue = options[optionName].defaultValue;\n\nconst RegressionType = ({\n  disabled\n}) => <SelectBaseOption toggleable={true} label={i18n.t('Trend line')} disabled={disabled} option={{\n  name: optionName,\n  defaultValue: defaultValue,\n  items: [{\n    value: 'LINEAR',\n    label: i18n.t('Linear')\n  }, {\n    value: 'POLYNOMIAL',\n    label: i18n.t('Polynomial')\n  }, {\n    value: 'LOESS',\n    label: i18n.t('Loess')\n  }]\n}} dataTest={'option-trend-line'} />;\n\nRegressionType.propTypes = {\n  disabled: PropTypes.bool\n};\nexport default RegressionType;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport RegressionType from '../../../components/VisualizationOptions/Options/RegressionType';\nimport TargetLine from '../../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../../components/VisualizationOptions/Options/BaseLine';\nimport getLinesTemplate from './templates/lines';\nexport default ((hasDisabledSections, axisId) => ({ ...getLinesTemplate({\n    helpText: hasDisabledSections ? i18n.t('Lines are not supported yet when using multiple axes') : null,\n    content: React.Children.toArray([<RegressionType disabled={hasDisabledSections} />, <TargetLine disabled={hasDisabledSections} axisId={axisId} />, <BaseLine disabled={hasDisabledSections} axisId={axisId} />])\n  })\n}));","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport TextBaseOption from './TextBaseOption';\nimport { OPTION_AXIS_TITLE, OPTION_AXIS_TITLE_ENABLED } from '../../../modules/options';\n\nconst AxisTitle = ({\n  disabled,\n  axisId,\n  fontStyleKey\n}) => <TextBaseOption type=\"text\" width=\"280px\" label={i18n.t('Axis title')} disabled={disabled} placeholder={i18n.t('Add a title')} option={{\n  id: OPTION_AXIS_TITLE,\n  enabledId: OPTION_AXIS_TITLE_ENABLED,\n  axisId\n}} toggleable={true} fontStyleKey={fontStyleKey} dataTest={`${axisId}-axis-title`} />;\n\nAxisTitle.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool,\n  fontStyleKey: PropTypes.string\n};\nexport default AxisTitle;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { InputField } from '@dhis2/ui';\nimport { sGetUiOption } from '../../../reducers/ui';\nimport { acSetUiOption } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nexport const PositiveNumberBaseType = ({\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  disabled\n}) => <div className={tabSectionOption.className}>\n        <div>\n            <InputField type=\"number\" label={label} onChange={({\n      value\n    }) => {\n      const parsedValue = parseInt(value, 10);\n      parsedValue >= 0 ? onChange(Math.round(value)) : onChange(parsedValue ? 0 : null);\n    }} name={option.name} value={value || value === 0 ? value.toString() : ''} helpText={helpText} placeholder={placeholder} inputWidth={width} dense disabled={disabled} />\n        </div>\n    </div>;\nPositiveNumberBaseType.propTypes = {\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOption(state, ownProps.option)\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOption({\n    optionId: ownProps.option.id || ownProps.option.name,\n    axisId: ownProps.option.axisId,\n    value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PositiveNumberBaseType);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport PositiveNumberBaseType from './PositiveNumberBaseType';\nimport { OPTION_AXIS_STEPS } from '../../../modules/options';\nexport const AxisSteps = ({\n  disabled,\n  axisId\n}) => <PositiveNumberBaseType width=\"96px\" helpText={i18n.t('Number of axis tick steps, including the min and max. A value of 2 or lower will be ignored.')} label={i18n.t('Steps')} disabled={disabled} placeholder={i18n.t('Auto')} option={{\n  id: OPTION_AXIS_STEPS,\n  axisId\n}} />;\nAxisSteps.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisSteps;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport PositiveNumberBaseType from './PositiveNumberBaseType';\nimport { OPTION_AXIS_DECIMALS } from '../../../modules/options';\n\nconst AxisDecimals = ({\n  disabled,\n  axisId\n}) => <PositiveNumberBaseType width=\"96px\" label={i18n.t('Decimals')} disabled={disabled} placeholder={i18n.t('Auto')} option={{\n  id: OPTION_AXIS_DECIMALS,\n  axisId\n}} />;\n\nAxisDecimals.propTypes = {\n  axisId: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport default AxisDecimals;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { FONT_STYLE_VERTICAL_AXIS_TITLE } from '@dhis2/analytics';\nimport AxisTitle from '../../../components/VisualizationOptions/Options/AxisTitle';\nimport AxisRange from '../../../components/VisualizationOptions/Options/AxisRange';\nimport AxisSteps from '../../../components/VisualizationOptions/Options/AxisSteps';\nimport AxisDecimals from '../../../components/VisualizationOptions/Options/AxisDecimals';\nimport AxisLabels from '../../../components/VisualizationOptions/Options/AxisLabels';\nimport getVerticalAxisTemplate from './templates/verticalAxis';\nconst axisId = 'RANGE_0';\nexport default (hasDisabledSections => ({ ...getVerticalAxisTemplate({\n    helpText: hasDisabledSections ? i18n.t('Vertical axis options are not supported yet when using multiple axes') : null,\n    content: React.Children.toArray([<AxisTitle disabled={hasDisabledSections} axisId={axisId} fontStyleKey={FONT_STYLE_VERTICAL_AXIS_TITLE} />, <AxisRange disabled={hasDisabledSections} axisId={axisId} />, <AxisSteps disabled={hasDisabledSections} axisId={axisId} />, <AxisDecimals disabled={hasDisabledSections} axisId={axisId} />, <AxisLabels disabled={hasDisabledSections} axisId={axisId} />])\n  })\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { FONT_STYLE_HORIZONTAL_AXIS_TITLE } from '@dhis2/analytics';\nimport AxisTitle from '../../../components/VisualizationOptions/Options/AxisTitle';\nimport AxisLabels from '../../../components/VisualizationOptions/Options/AxisLabels';\nconst axisId = 'DOMAIN_0';\nexport default (() => ({\n  key: 'axes-horizontal-axis',\n  label: i18n.t('Horizontal (x) axis'),\n  content: React.Children.toArray([<AxisTitle axisId={axisId} fontStyleKey={FONT_STYLE_HORIZONTAL_AXIS_TITLE} />, <AxisLabels axisId={axisId} />])\n}));","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst CumulativeValues = () => <CheckboxBaseOption label={i18n.t('Cumulative values')} option={{\n  name: 'cumulativeValues'\n}} />;\n\nexport default CumulativeValues;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'hideEmptyRowItems';\nconst defaultValue = options[optionName].defaultValue;\n\nconst HideEmptyRowItems = () => <SelectBaseOption label={i18n.t('Hide empty categories')} toggleable={true} option={{\n  name: optionName,\n  defaultValue: defaultValue,\n  items: [{\n    value: 'BEFORE_FIRST',\n    label: i18n.t('Before first')\n  }, {\n    value: 'AFTER_LAST',\n    label: i18n.t('After last')\n  }, {\n    value: 'BEFORE_FIRST_AFTER_LAST',\n    label: i18n.t('Before first and after last')\n  }, {\n    value: 'ALL',\n    label: i18n.t('All')\n  }]\n}} />;\n\nexport default HideEmptyRowItems;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst PercentStackedValues = () => <CheckboxBaseOption label={i18n.t('Stacked values add up to 100%')} option={{\n  name: 'percentStackedValues'\n}} />;\n\nexport default PercentStackedValues;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport CumulativeValues from '../../../components/VisualizationOptions/Options/CumulativeValues';\nimport HideEmptyRowItems from '../../../components/VisualizationOptions/Options/HideEmptyRowItems';\nimport PercentStackedValues from '../../../components/VisualizationOptions/Options/PercentStackedValues';\nimport SkipRounding from '../../../components/VisualizationOptions/Options/SkipRounding';\nimport SortOrder from '../../../components/VisualizationOptions/Options/SortOrder';\nimport getDisplayTemplate from './templates/display';\nconst defaultContent = [<CumulativeValues />, <HideEmptyRowItems />, <SortOrder />, <SkipRounding />];\nconst stackedContent = [<PercentStackedValues />, ...defaultContent];\nexport default (isStacked => ({ ...getDisplayTemplate({\n    content: React.Children.toArray(isStacked ? stackedContent : defaultContent)\n  })\n}));","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { FONT_STYLE_LEGEND } from '@dhis2/analytics';\nimport CheckboxBaseOption from './CheckboxBaseOption';\nimport { OPTION_HIDE_LEGEND } from '../../../modules/options';\n\nconst HideLegend = () => <CheckboxBaseOption label={i18n.t('Show legend key')} option={{\n  id: OPTION_HIDE_LEGEND\n}} inverted={true} fontStyleKey={FONT_STYLE_LEGEND} />;\n\nexport default HideLegend;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst NoSpaceBetweenColumns = () => <CheckboxBaseOption label={i18n.t('No space between bars/columns')} option={{\n  name: 'noSpaceBetweenColumns'\n}} />;\n\nexport default NoSpaceBetweenColumns;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowData = () => <CheckboxBaseOption label={i18n.t('Value labels')} option={{\n  name: 'showData'\n}} />;\n\nexport default ShowData;","import i18n from '@dhis2/d2-i18n';\nexport default (({\n  content\n}) => ({\n  key: 'style-chart-style',\n  label: i18n.t('Chart style'),\n  content\n}));","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport HideLegend from '../../../components/VisualizationOptions/Options/HideLegend';\nimport NoSpaceBetweenColumns from '../../../components/VisualizationOptions/Options/NoSpaceBetweenColumns';\nimport ShowData from '../../../components/VisualizationOptions/Options/ShowData';\nimport getChartStyleTemplate from './templates/chartStyle';\nconst defaultContent = [<ShowData />, <HideLegend />];\nconst columnContent = [<ShowData />, <NoSpaceBetweenColumns />, <HideLegend />\n/* TODO new option <BackgroundLines /> */\n];\nexport default (isColumnBased => ({ ...getChartStyleTemplate({\n    content: React.Children.toArray([isColumnBased ? columnContent : defaultContent])\n  })\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { IconInfo16 } from '@dhis2/ui';\nimport { tabSectionOption, tabSectionOptionText, tabSectionOptionIcon } from './styles/VisualizationOptions.style.js';\nexport const InfoText = ({\n  text\n}) => <div className={tabSectionOption.className}>\n        <p className={tabSectionOptionText.className}>\n            <span className={tabSectionOptionIcon.className}>\n                <IconInfo16 />\n            </span>\n            {text}\n        </p>\n    </div>;\nInfoText.propTypes = {\n  text: PropTypes.string\n};\nexport default InfoText;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field, Radio, InputField, Help } from '@dhis2/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst OutlierDetectionMethod = ({\n  methods,\n  currentMethodId,\n  onMethodChange,\n  currentThreshold,\n  onThresholdChange\n}) => <>\n        <div className={tabSectionOption.className}>\n            <Field dense>\n                {methods.map(({\n        id,\n        label\n      }) => <Radio key={id} label={label} value={id} checked={currentMethodId === id} onChange={({\n        value\n      }) => {\n        onMethodChange(value);\n      }} dense />)}\n            </Field>\n            <Help>\n                {i18n.t('Each detection method identifies outliers in different ways and suits different data. Check the documentation for help to choose the right outlier detection method')}\n            </Help>\n        </div>\n        <InputField type=\"number\" label={i18n.t('Threshold factor')} min=\"0.5\" step=\"0.5\" onChange={({\n    value\n  }) => onThresholdChange(Number(value))} value={currentThreshold?.toString() || ''} helpText={i18n.t('A high value is more sensitive so fewer data items will be identified as outliers')} placeholder={i18n.t('Number')} inputWidth=\"96px\" dense />\n    </>;\n\nOutlierDetectionMethod.propTypes = {\n  methods: PropTypes.array.isRequired,\n  onMethodChange: PropTypes.func.isRequired,\n  onThresholdChange: PropTypes.func.isRequired,\n  currentMethodId: PropTypes.string,\n  currentThreshold: PropTypes.number\n};\nexport default OutlierDetectionMethod;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, Help, InputField } from '@dhis2/ui';\nimport { tabSectionOption, tabSectionToggleableSubsection } from '../styles/VisualizationOptions.style.js';\n\nconst ExtremeLines = ({\n  isEnabled,\n  onEnabledChange,\n  currentValue,\n  onValueChange\n}) => <>\n        <div className={tabSectionOption.className}>\n            <div className={tabSectionOption.className}>\n                <Checkbox checked={isEnabled} label={i18n.t('Extreme lines')} onChange={({\n        checked\n      }) => onEnabledChange(checked)} dense />\n                <Help>\n                    {i18n.t('Calculated as a percent, usually 1%, of the total values along an axis')}\n                </Help>\n            </div>\n            {isEnabled && <div className={tabSectionToggleableSubsection.className}>\n                    <div className={tabSectionOption.className}>\n                        <InputField type=\"number\" label={i18n.t('Extreme line % detection')} min=\"0.1\" step=\"0.1\" onChange={input => onValueChange(Number(input.value))} value={currentValue?.toString() || ''} placeholder={i18n.t('Number')} inputWidth=\"96px\" dense />\n                    </div>\n                </div>}\n        </div>\n    </>;\n\nExtremeLines.propTypes = {\n  isEnabled: PropTypes.bool.isRequired,\n  onEnabledChange: PropTypes.func.isRequired,\n  onValueChange: PropTypes.func.isRequired,\n  currentValue: PropTypes.number\n};\nexport default ExtremeLines;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, FieldSet, Help, Legend } from '@dhis2/ui';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionToggleableSubsection, tabSectionOption, tabSectionTitle } from '../styles/VisualizationOptions.style.js';\nimport OutlierDetectionMethod from './OutlierDetectionMethod';\nimport ExtremeLines from './ExtremeLines';\nimport styles from '../styles/Outliers.module.css';\nconst ENABLED_PROP = 'enabled';\nconst METHOD_PROP = 'outlierMethod';\nconst THRESHOLD_PROP = 'thresholdFactor';\nconst EL_ENABLED_PROP = 'enabled';\nconst EL_VALUE_PROP = 'value';\nconst OUTLIER_ANALYSIS_OPTION_NAME = 'outlierAnalysis';\nconst METHOD_IQR = 'IQR';\nconst METHOD_STANDARD_Z_SCORE = 'STANDARD_Z_SCORE';\nconst METHOD_MODIFIED_Z_SCORE = 'MODIFIED_Z_SCORE';\nconst methods = [{\n  id: METHOD_IQR,\n  label: i18n.t('Interquartile Range (IQR)'),\n  defaultThreshold: 1.5\n}, {\n  id: METHOD_STANDARD_Z_SCORE,\n  label: i18n.t('Z-score / Standard score'),\n  defaultThreshold: 3\n}, {\n  id: METHOD_MODIFIED_Z_SCORE,\n  label: i18n.t('Modified Z-score'),\n  defaultThreshold: 3\n}];\nconst DEFAULT_STATE = {\n  [ENABLED_PROP]: false,\n  [METHOD_PROP]: METHOD_IQR,\n  [THRESHOLD_PROP]: 1.5,\n  extremeLines: {\n    [EL_ENABLED_PROP]: false,\n    [EL_VALUE_PROP]: 1\n  }\n};\nconst dataTest = 'option-outliers';\n\nconst Outliers = ({\n  outlierAnalysis,\n  onChange\n}) => {\n  const storeProp = (prop, value) => onChange({ ...outlierAnalysis,\n    [prop]: value\n  });\n\n  const storeExtremeLinesProp = (prop, value) => onChange({ ...outlierAnalysis,\n    extremeLines: { ...outlierAnalysis.extremeLines,\n      [prop]: value\n    }\n  });\n\n  return <div className={tabSectionOption.className}>\n            <div className={tabSectionOption.className}>\n                <Checkbox checked={outlierAnalysis[ENABLED_PROP]} label={i18n.t('Outlier analysis')} onChange={({\n        checked\n      }) => storeProp(ENABLED_PROP, checked)} dense dataTest={`${dataTest}-enabled-checkbox`} />\n                <Help>\n                    {i18n.t('Outlier analysis detects and highlights data items that are markedly different from the rest of the data')}\n                </Help>\n            </div>\n            {outlierAnalysis[ENABLED_PROP] && <>\n                    <div className={tabSectionToggleableSubsection.className}>\n                        <div className={tabSectionOption.className}>\n                            <FieldSet>\n                                <Legend>\n                                    <span className={tabSectionTitle.className}>\n                                        {i18n.t('Outlier detection method')}\n                                    </span>\n                                </Legend>\n                                <div className={tabSectionOption.className}>\n                                    <OutlierDetectionMethod methods={methods} onMethodChange={value => onChange({ ...outlierAnalysis,\n                [METHOD_PROP]: value,\n                [THRESHOLD_PROP]: methods.find(item => item.id === value).defaultThreshold\n              })} onThresholdChange={value => storeProp(THRESHOLD_PROP, value)} currentMethodId={outlierAnalysis[METHOD_PROP]} currentThreshold={outlierAnalysis[THRESHOLD_PROP]} />\n                                </div>\n                            </FieldSet>\n                        </div>\n                    </div>\n                    <div className={styles.divider}></div>\n                    <div className={tabSectionToggleableSubsection.className}>\n                        <div className={tabSectionOption.className}>\n                            <FieldSet>\n                                <Legend>\n                                    <span className={tabSectionTitle.className}>\n                                        {i18n.t('Extreme lines')}\n                                    </span>\n                                </Legend>\n                                <div className={tabSectionOption.className}>\n                                    <ExtremeLines isEnabled={outlierAnalysis.extremeLines[EL_ENABLED_PROP]} onEnabledChange={value => storeExtremeLinesProp(EL_ENABLED_PROP, value)} currentValue={outlierAnalysis.extremeLines[EL_VALUE_PROP]} onValueChange={value => storeExtremeLinesProp(EL_VALUE_PROP, value)} />\n                                </div>\n                            </FieldSet>\n                        </div>\n                    </div>\n                </>}\n        </div>;\n};\n\nOutliers.propTypes = {\n  outlierAnalysis: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  outlierAnalysis: sGetUiOptions(state)[OUTLIER_ANALYSIS_OPTION_NAME] || DEFAULT_STATE\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [OUTLIER_ANALYSIS_OPTION_NAME]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Outliers);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { FONT_STYLE_HORIZONTAL_AXIS_TITLE, FONT_STYLE_VERTICAL_AXIS_TITLE } from '@dhis2/analytics';\nimport getSeriesTab from './tabs/series';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport getAxesTab from './tabs/axes';\nimport getOutliersTab from './tabs/outliers';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport AxisTitle from '../../components/VisualizationOptions/Options/AxisTitle';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport AxisSteps from '../../components/VisualizationOptions/Options/AxisSteps';\nimport AxisDecimals from '../../components/VisualizationOptions/Options/AxisDecimals';\nimport AxisLabels from '../../components/VisualizationOptions/Options/AxisLabels';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getDisplayTemplate from './sections/templates/display';\nimport getLinesTemplate from './sections/templates/lines';\nimport InfoText from '../../components/VisualizationOptions/InfoText';\nimport Outliers from '../../components/VisualizationOptions/Options/Outliers';\nconst verticalAxisId = 'RANGE_0';\nconst horisontalAxisId = 'RANGE_1';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([<SkipRounding />])\n}), getLinesTemplate({\n  // TODO: Add trend line?\n  content: React.Children.toArray([<InfoText text={i18n.t('Base and target lines are available on the Axes tab for scatter charts')} />])\n}), getAdvancedSection()]), getAxesTab([{\n  key: 'axes-vertical-axis',\n  label: i18n.t('Vertical axis'),\n  content: React.Children.toArray([<AxisTitle axisId={verticalAxisId} fontStyleKey={FONT_STYLE_VERTICAL_AXIS_TITLE} />, <AxisRange axisId={verticalAxisId} />, <AxisSteps axisId={verticalAxisId} />, <AxisDecimals axisId={verticalAxisId} />, <AxisLabels axisId={verticalAxisId} />, <TargetLine axisId={verticalAxisId} />, <BaseLine axisId={verticalAxisId} />])\n}, {\n  key: 'axes-horizontal-axis',\n  label: i18n.t('Horizontal axis'),\n  content: React.Children.toArray([<AxisTitle axisId={horisontalAxisId} fontStyleKey={FONT_STYLE_HORIZONTAL_AXIS_TITLE} />, <AxisRange axisId={horisontalAxisId} />, <AxisSteps axisId={horisontalAxisId} />, <AxisDecimals axisId={horisontalAxisId} />, <AxisLabels axisId={horisontalAxisId} />, <TargetLine axisId={horisontalAxisId} isVertical={true} />, <BaseLine axisId={horisontalAxisId} isVertical={true} />])\n}]), getSeriesTab(), getStyleTab([getTitlesSection()]), getOutliersTab([{\n  key: 'outlier-analysis',\n  content: React.Children.toArray([<Outliers />])\n}])]);","import { VIS_TYPE_PIVOT_TABLE, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_SCATTER, isStacked as isStackedType, isLegendSetType, isMultiType, isDualAxisType, isColumnBasedType } from '@dhis2/analytics';\nimport pivotTableConfig from './pivotTableConfig';\nimport pieConfig from './pieConfig';\nimport gaugeConfig from './gaugeConfig';\nimport singleValueConfig from './singleValueConfig';\nimport defaultConfig from './defaultConfig';\nimport scatterConfig from './scatterConfig';\nexport const getOptionsByType = (type, hasDisabledSections) => {\n  const isStacked = isStackedType(type);\n  const isColumnBased = isColumnBasedType(type);\n  const supportsLegends = isLegendSetType(type);\n  const supportsMultiAxes = isDualAxisType(type);\n  const supportsMultiType = isMultiType(type);\n  const defaultProps = {\n    hasDisabledSections,\n    isStacked,\n    isColumnBased,\n    supportsLegends,\n    supportsMultiAxes,\n    supportsMultiType\n  };\n\n  switch (type) {\n    case VIS_TYPE_GAUGE:\n      return gaugeConfig();\n\n    case VIS_TYPE_PIE:\n      return pieConfig();\n\n    case VIS_TYPE_SINGLE_VALUE:\n      return singleValueConfig();\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return pivotTableConfig();\n\n    case VIS_TYPE_SCATTER:\n      return scatterConfig();\n\n    default:\n      return defaultConfig(defaultProps);\n  }\n};","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport getColorSetSection from './sections/colorSet';\nimport getSeriesTab from './tabs/series';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport getDisplayTemplate from './sections/templates/display';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport getLimitValuesTab from './tabs/limitValues';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([<SkipRounding />])\n}), getAdvancedSection()]), getSeriesTab(), getStyleTab([getTitlesSection(), getColorSetSection()]), getLimitValuesTab()]);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator';\nimport getSeriesTab from './tabs/series';\nimport getDataTab from './tabs/data';\nimport getAdvancedSection from './sections/advanced';\nimport getDisplayTemplate from './sections/templates/display';\nimport getLegendTab from './tabs/legend';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([<SkipRounding />])\n}), getAdvancedSection()]), getLegendTab({\n  hideStyleOptions: true\n}), getSeriesTab(), getStyleTab([getTitlesSection(), {\n  key: 'style-section-2',\n  content: React.Children.toArray([<DigitGroupSeparator />])\n}])]);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport NoticeBox from '../../components/VisualizationOptions/NoticeBox';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport ShowDimensionLabels from '../../components/VisualizationOptions/Options/ShowDimensionLabels';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport ColTotals from '../../components/VisualizationOptions/Options/ColTotals';\nimport ColSubTotals from '../../components/VisualizationOptions/Options/ColSubTotals';\nimport RowTotals from '../../components/VisualizationOptions/Options/RowTotals';\nimport RowSubTotals from '../../components/VisualizationOptions/Options/RowSubTotals';\nimport HideEmptyColumns from '../../components/VisualizationOptions/Options/HideEmptyColumns';\nimport HideEmptyRows from '../../components/VisualizationOptions/Options/HideEmptyRows';\nimport NumberType from '../../components/VisualizationOptions/Options/NumberType';\nimport Title from '../../components/VisualizationOptions/Options/Title';\nimport DisplayDensity from '../../components/VisualizationOptions/Options/DisplayDensity';\nimport FontSize from '../../components/VisualizationOptions/Options/FontSize';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator';\nimport ParamReportingPeriod from '../../components/VisualizationOptions/Options/ParamReportingPeriod';\nimport ParamOrganisationUnit from '../../components/VisualizationOptions/Options/ParamOrganisationUnit';\nimport ParamParentOrganisationUnit from '../../components/VisualizationOptions/Options/ParamParentOrganisationUnit';\nimport Regression from '../../components/VisualizationOptions/Options/Regression';\nimport Cumulative from '../../components/VisualizationOptions/Options/Cumulative';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport TopLimit from '../../components/VisualizationOptions/Options/TopLimit';\nimport ApprovalLevel from '../../components/VisualizationOptions/Options/ApprovalLevel';\nimport ShowHierarchy from '../../components/VisualizationOptions/Options/ShowHierarchy';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nimport getSeriesTab from './tabs/series';\nimport getDataTab from './tabs/data';\nimport getAdvancedTemplate from './sections/templates/advanced';\nimport getDisplayTemplate from './sections/templates/display';\nimport getTotalsTemplate from './sections/templates/totals';\nimport getEmptyDataTemplate from './sections/templates/emptyData';\nimport getLegendTab from './tabs/legend';\nimport getStyleTab from './tabs/style';\nimport getLimitValuesTab from './tabs/limitValues';\nexport default (() => [getDataTab([getDisplayTemplate({\n  content: React.Children.toArray([<ShowDimensionLabels />, <SkipRounding />])\n}), getTotalsTemplate({\n  content: React.Children.toArray([<ColTotals />, <ColSubTotals />, <RowTotals />, <RowSubTotals />])\n}), getEmptyDataTemplate({\n  content: React.Children.toArray([<HideEmptyColumns />, <HideEmptyRows />])\n}), getAdvancedTemplate({\n  content: React.Children.toArray([<AggregationType />, <NumberType />, <CompletedOnly />, <ApprovalLevel />])\n})]), getLegendTab(), getSeriesTab(), getStyleTab([{\n  key: 'style-section-1',\n  content: React.Children.toArray([<Title label={i18n.t('Table title')} />, <DisplayDensity />, <FontSize />, <DigitGroupSeparator />])\n}, {\n  key: 'style-section-2',\n  label: i18n.t('Labels'),\n  content: React.Children.toArray([<ShowHierarchy />])\n}]), getLimitValuesTab(), {\n  key: 'parameters-tab',\n  label: i18n.t('Parameters'),\n  content: [{\n    key: 'parameters-section-1',\n    content: React.Children.toArray([<NoticeBox text={i18n.t('These options only apply to legacy tables like standard reports. Options set here will have no effect on tables made in Data Visualizer.')} title={i18n.t('Applies to standard reports only')} warning />, <ParamReportingPeriod />, <ParamOrganisationUnit />, <ParamParentOrganisationUnit />, <Regression />, <Cumulative />, <SortOrder />, <TopLimit />])\n  }]\n}]);","import i18n from '@dhis2/d2-i18n';\nexport default (content => ({\n  key: 'outliers-tab',\n  label: i18n.t('Outliers'),\n  content\n}));","import getLinesSection from './sections/lines';\nimport getVerticalAxisSection from './sections/verticalAxis';\nimport getHorizontalAxisSection from './sections/horizontalAxis';\nimport getColorSetSection from './sections/colorSet';\nimport getSeriesTab from './tabs/series';\nimport getAxesTab from './tabs/axes';\nimport getDataTab from './tabs/data';\nimport getDisplaySection from './sections/display';\nimport getAdvancedSection from './sections/advanced';\nimport getStyleTab from './tabs/style';\nimport getTitlesSection from './sections/titles';\nimport getChartStyleSection from './sections/chartStyle';\nimport getLegendTab from './tabs/legend';\nimport getLimitValuesTab from './tabs/limitValues';\nconst verticalAxisId = 'RANGE_0';\nexport default (({\n  hasDisabledSections,\n  supportsMultiAxes,\n  supportsMultiType,\n  isColumnBased,\n  isStacked,\n  supportsLegends\n} = {}) => [getDataTab([getDisplaySection(isStacked), getLinesSection(hasDisabledSections, verticalAxisId), getAdvancedSection()]), ...(supportsLegends ? [getLegendTab({\n  hideStyleOptions: true\n})] : []), getAxesTab([getVerticalAxisSection(hasDisabledSections), getHorizontalAxisSection()]), getSeriesTab({\n  showAxisOptions: supportsMultiAxes,\n  showTypeOptions: supportsMultiType\n}), getStyleTab([getChartStyleSection(isColumnBased), getTitlesSection(), getColorSetSection(hasDisabledSections)]), getLimitValuesTab()]);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FieldSet, Legend, TabBar, Tab, Help } from '@dhis2/ui';\nimport { tabSection, tabSectionTitle, tabSectionTitleMargin, tabSectionOption, tabSectionOptionItem, tabSectionOptionToggleable, tabSectionToggleableSubsection, tabSectionOptionComplexInline, tabSectionOptionText, tabBar, tabContent, tabSectionOptionIcon } from './styles/VisualizationOptions.style.js';\nimport { sGetUiType, sGetUiOptions, sGetDimensionItemsByAxis, sGetUiLayout } from '../../reducers/ui';\nimport { getOptionsByType } from '../../modules/options/config';\nimport { isDualAxisType, hasCustomAxes, hasRelativeItems, AXIS_ID_COLUMNS } from '@dhis2/analytics';\nexport class VisualizationOptions extends Component {\n  state = {\n    activeTabKey: undefined\n  };\n  selectTab = tabKey => {\n    this.setState({\n      activeTabKey: tabKey\n    });\n  };\n  generateTabContent = sections => sections.map(({\n    key,\n    label,\n    content,\n    helpText\n  }) => <div key={key} className={tabSection.className}>\n                <FieldSet>\n                    {label ? <Legend>\n                            <span className={tabSectionTitle.className}>\n                                {label}\n                            </span>\n                        </Legend> : null}\n                    {content}\n                    {helpText ? <Legend>\n                            <Help>{helpText}</Help>\n                        </Legend> : null}\n                </FieldSet>\n            </div>);\n  generateTabs = tabs => tabs.map(({\n    key,\n    label,\n    content\n  }) => ({\n    key,\n    label,\n    content: this.generateTabContent(content)\n  }));\n\n  render() {\n    const {\n      visualizationType,\n      columnDimensionItems,\n      series,\n      columns\n    } = this.props;\n    const filteredSeries = series.filter(seriesItem => columnDimensionItems.some(layoutItem => layoutItem === seriesItem.dimensionItem));\n    const optionsConfig = getOptionsByType(visualizationType, isDualAxisType(visualizationType) && hasCustomAxes(filteredSeries) && !hasRelativeItems(columns[0], columnDimensionItems));\n    const tabs = this.generateTabs(optionsConfig);\n    let activeTabIndex = tabs.findIndex(tab => tab.key === this.state.activeTabKey);\n\n    if (activeTabIndex < 0) {\n      activeTabIndex = 0;\n    }\n\n    return <>\n                <div className={tabBar.className}>\n                    <TabBar dataTest={'options-modal-tab-bar'}>\n                        {tabs.map(({\n            key,\n            label\n          }, index) => <Tab key={key} onClick={() => this.selectTab(key)} selected={index === activeTabIndex}>\n                                {label}\n                            </Tab>)}\n                    </TabBar>\n                    {tabBar.styles}\n                </div>\n                <div className={tabContent.className}>\n                    {tabs[activeTabIndex].content}\n                    {tabContent.styles}\n                    {tabSection.styles}\n                    {tabSectionTitle.styles}\n                    {tabSectionTitleMargin.styles}\n                    {tabSectionOption.styles}\n                    {tabSectionOptionItem.styles}\n                    {tabSectionOptionToggleable.styles}\n                    {tabSectionToggleableSubsection.styles}\n                    {tabSectionOptionComplexInline.styles}\n                    {tabSectionOptionText.styles}\n                    {tabSectionOptionIcon.styles}\n                </div>\n            </>;\n  }\n\n}\nVisualizationOptions.propTypes = {\n  visualizationType: PropTypes.string.isRequired,\n  columnDimensionItems: PropTypes.array,\n  columns: PropTypes.array,\n  series: PropTypes.array\n};\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  columnDimensionItems: sGetDimensionItemsByAxis(state, AXIS_ID_COLUMNS),\n  series: sGetUiOptions(state).series,\n  columns: sGetUiLayout(state).columns\n});\n\nexport default connect(mapStateToProps)(VisualizationOptions);","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { ButtonStrip, Modal, ModalTitle, ModalContent, ModalActions } from '@dhis2/ui';\nimport styles from './styles/VisualizationOptionsManager.module.css';\nimport UpdateButton from '../UpdateButton/UpdateButton';\nimport HideButton from '../HideButton/HideButton';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer';\nimport VisualizationOptions from './VisualizationOptions';\nimport MenuButton from '../MenuButton/MenuButton';\n\nclass VisualizationOptionsManager extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dialogIsOpen: false\n    };\n  }\n\n  onClose = () => {\n    this.toggleVisualizationOptionsDialog();\n  };\n  toggleVisualizationOptionsDialog = () => {\n    this.setState({\n      dialogIsOpen: !this.state.dialogIsOpen\n    });\n  };\n  getPrimaryOnClick = handler => () => {\n    handler();\n    this.onClose();\n  };\n\n  render() {\n    return <Fragment>\n                <MenuButton className={this.props.className} onClick={this.toggleVisualizationOptionsDialog} dataTest={'app-menubar-options-button'}>\n                    {i18n.t('Options')}\n                </MenuButton>\n                {this.state.dialogIsOpen && <Modal onClose={this.onClose} position=\"top\" large dataTest={'options-modal'}>\n                        <ModalTitle>{i18n.t('Options')}</ModalTitle>\n                        <ModalContent className={styles.modalContent}>\n                            <VisualizationOptions />\n                        </ModalContent>\n                        <ModalActions dataTest={'options-modal-actions'}>\n                            <ButtonStrip>\n                                <HideButton onClick={this.onClose} dataTest={'options-modal-action-cancel'} />\n                                <UpdateVisualizationContainer renderComponent={handler => <UpdateButton onClick={this.getPrimaryOnClick(handler)} dataTest={'options-modal-action-confirm'} />} />\n                            </ButtonStrip>\n                        </ModalActions>\n                    </Modal>}\n            </Fragment>;\n  }\n\n}\n\nVisualizationOptionsManager.propTypes = {\n  className: PropTypes.string\n};\nexport default VisualizationOptionsManager;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FileMenu } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport UpdateButton from '../UpdateButton/UpdateButton';\nimport DownloadMenu from '../DownloadMenu/DownloadMenu';\nimport InterpretationsButton from '../Interpretations/InterpretationsButton';\nimport VisualizationOptionsManager from '../VisualizationOptions/VisualizationOptionsManager';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer';\nimport * as fromActions from '../../actions';\nimport { sGetCurrent } from '../../reducers/current';\nimport history from '../../modules/history';\nimport { getErrorVariantByStatusCode } from '../../modules/error';\nimport styles from './styles/MenuBar.module.css';\n\nconst onOpen = id => {\n  const path = `/${id}`;\n\n  if (history.location.pathname === path) {\n    history.replace({\n      pathname: path,\n      state: {\n        isOpening: true\n      }\n    });\n  } else {\n    history.push(path);\n  }\n};\n\nconst onNew = () => {\n  if (history.location.pathname === '/') {\n    history.replace({\n      pathname: '/',\n      state: {\n        isResetting: true\n      }\n    });\n  } else {\n    history.push('/');\n  }\n};\n\nconst getOnRename = props => details => props.onRenameVisualization(details);\n\nconst getOnSave = props => details => props.onSaveVisualization(details, false);\n\nconst getOnSaveAs = props => details => props.onSaveVisualization(details, true);\n\nconst getOnDelete = props => () => props.onDeleteVisualization();\n\nconst getOnError = props => error => props.onError(error);\n\nexport const MenuBar = ({\n  dataTest,\n  ...props\n}, context) => <div className={styles.menuBar} data-test={dataTest}>\n        <UpdateVisualizationContainer renderComponent={handler => <UpdateButton className={styles.updateButton} small onClick={handler} dataTest={`${dataTest}-update-button`} />} />\n        <FileMenu d2={context.d2} fileType={props.apiObjectName} fileObject={props.current} onOpen={onOpen} onNew={onNew} onRename={getOnRename(props)} onSave={getOnSave(props)} onSaveAs={getOnSaveAs(props)} onDelete={getOnDelete(props)} onError={getOnError(props)} />\n        <VisualizationOptionsManager />\n        <DownloadMenu />\n        <div className={styles.grow} />\n        <InterpretationsButton />\n    </div>;\nMenuBar.propTypes = {\n  apiObjectName: PropTypes.string,\n  current: PropTypes.object,\n  dataTest: PropTypes.string\n};\nMenuBar.contextTypes = {\n  d2: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  current: sGetCurrent(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onRenameVisualization: details => dispatch(fromActions.tDoRenameVisualization(details)),\n  onSaveVisualization: (details = {}, copy) => dispatch(fromActions.tDoSaveVisualization(details, copy)),\n  onDeleteVisualization: () => dispatch(fromActions.tDoDeleteVisualization()),\n  onError: error => {\n    const message = error.errorCode === 'E4030' ? i18n.t(\"This visualization can't be deleted because it is used on one or more dashboards\") : error.message;\n    const variant = getErrorVariantByStatusCode(error.httpStatusCode);\n    dispatch(fromActions.fromSnackbar.acReceivedSnackbarMessage({\n      variant,\n      message\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuBar);","import React from 'react';\n\nconst InterpretationIcon = () => {\n  return <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g id=\"Exp\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n                <g id=\"2---Home-+-Selected-Intp.\" transform=\"translate(-522.000000, -169.000000)\">\n                    <rect fill=\"#F4F6F8\" x=\"0\" y=\"0\" width=\"1280\" height=\"850\" />\n                    <g id=\"title-area\" transform=\"translate(298.000000, 165.000000)\">\n                        <g id=\"name-badge\" transform=\"translate(220.000000, 0.000000)\">\n                            <rect id=\"Rectangle-4\" fill=\"#FFFFFF\" opacity=\"0.700613839\" x=\"0\" y=\"0\" width=\"260\" height=\"24\" rx=\"4\" />\n                            <g id=\"undo\" transform=\"translate(4.000000, 4.000000)\">\n                                <rect id=\"frame\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" />\n                                <polyline id=\"Path\" stroke=\"#494949\" strokeLinecap=\"round\" strokeLinejoin=\"round\" points=\"2.375 2.374 2.375 6.124 6.125 6.124\" />\n                                <path d=\"M8,13.624 C10.8610015,13.6256787 13.2674888,11.4795583 13.5919996,8.63701982 C13.9165103,5.79448132 12.0556517,3.16119082 9.2678875,2.51799333 C6.48012327,1.87479584 3.65366782,3.42662163 2.7,6.124\" id=\"Path\" stroke=\"#494949\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                                <path d=\"M9,7.29289322 L11.1819805,9.47487373 C11.3772427,9.67013588 11.3772427,9.98671837 11.1819805,10.1819805 C10.9867184,10.3772427 10.6701359,10.3772427 10.4748737,10.1819805 L8.01023174,7.71733852 L8,7.7144165 L8,5.5 C8,5.22385763 8.22385763,5 8.5,5 C8.77614237,5 9,5.22385763 9,5.5 L9,7.29289322 Z\" id=\"Combined-Shape\" fill=\"#494949\" />\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>;\n};\n\nexport default InterpretationIcon;","import { colors } from '@dhis2/ui';\nexport default {\n  titleBar: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  cell: {\n    display: 'flex',\n    alignItems: 'center',\n    background: colors.white,\n    padding: '6px',\n    borderRadius: '5px',\n    margin: '4px'\n  },\n  title: {\n    fontSize: '14px'\n  },\n  suffix: {\n    paddingLeft: '4px'\n  },\n  interpretation: {\n    fontSize: '12px',\n    color: colors.grey700\n  },\n  interpretationIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '14px',\n    width: '14px',\n    marginRight: '3px'\n  },\n  titleUnsaved: {\n    color: colors.grey500,\n    fontStyle: 'italic'\n  },\n  titleDirty: {\n    color: colors.grey700\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetVisualization } from '../../reducers/visualization';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetUiLocale } from '../../reducers/settings';\nimport formatDate from '../../modules/formatDate';\nimport InterpretationIcon from '../../assets/InterpretationIcon';\nimport styles from './styles/TitleBar.style';\nimport { STATE_UNSAVED, STATE_SAVED, STATE_DIRTY, getVisualizationState } from '../../modules/visualization';\nexport const getTitleUnsaved = () => i18n.t('Unsaved visualization');\nexport const getTitleDirty = () => i18n.t('Edited');\nconst defaultTitleStyle = { ...styles.cell,\n  ...styles.title\n};\nconst defaultInterpretationStyle = { ...styles.cell,\n  ...styles.interpretation\n};\n\nconst getTitleText = (titleState, visualization) => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return getTitleUnsaved();\n\n    case STATE_SAVED:\n    case STATE_DIRTY:\n      return visualization.name;\n\n    default:\n      return '';\n  }\n};\n\nconst getCustomTitleStyle = titleState => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return styles.titleUnsaved;\n\n    default:\n      return null;\n  }\n};\n\nconst getSuffix = titleState => {\n  switch (titleState) {\n    case STATE_DIRTY:\n      return <div style={{ ...styles.suffix,\n        ...styles.titleDirty\n      }} data-test=\"AO-title-dirty\">{`- ${getTitleDirty()}`}</div>;\n\n    default:\n      return '';\n  }\n};\n\nexport const TitleBar = ({\n  titleState,\n  titleText,\n  interpretationDate\n}) => {\n  const titleStyle = { ...defaultTitleStyle,\n    ...getCustomTitleStyle(titleState)\n  };\n  return titleText ? <div data-test=\"AO-title\" style={styles.titleBar}>\n            <div style={titleStyle}>\n                {titleText}\n                {getSuffix(titleState)}\n            </div>\n            {interpretationDate && <div style={defaultInterpretationStyle}>\n                    <div style={styles.interpretationIcon}>\n                        <InterpretationIcon />\n                    </div>\n                    <div>\n                        {i18n.t('Viewing interpretation from {{interpretationDate}}', {\n          interpretationDate\n        })}\n                    </div>\n                </div>}\n        </div> : null;\n};\nTitleBar.propTypes = {\n  interpretationDate: PropTypes.string,\n  titleState: PropTypes.string,\n  titleText: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visualization: sGetVisualization(state),\n  current: sGetCurrent(state),\n  interpretation: sGetUiInterpretation(state),\n  uiLocale: sGetUiLocale(state)\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => {\n  const {\n    visualization,\n    current,\n    interpretation,\n    uiLocale\n  } = stateProps;\n  const titleState = getVisualizationState(visualization, current);\n  return { ...dispatchProps,\n    ...ownProps,\n    titleState: titleState,\n    titleText: getTitleText(titleState, visualization),\n    interpretationDate: interpretation && interpretation.created ? formatDate(interpretation.created, uiLocale) : null\n  };\n};\n\nexport default connect(mapStateToProps, null, mergeProps)(TitleBar);","import { DIMENSION_ID_ORGUNIT, layoutGetAxisIdDimensionIdsObject } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout';\nexport const getPathForOrgUnit = (orgUnit, parentGraphMap) => {\n  if (parentGraphMap[orgUnit.id] === undefined) {\n    return undefined;\n  } // if this is root org unit then in parentGraphMap object\n  // it has empty string as value and id as key\n\n\n  if (parentGraphMap[orgUnit.id] === '') {\n    return '/' + orgUnit.id;\n  }\n\n  return '/' + parentGraphMap[orgUnit.id] + '/' + orgUnit.id;\n};\nexport const appendPathsToOrgUnits = (current, ui) => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(current);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n  const {\n    parentGraphMap\n  } = ui;\n\n  if (!ouAxis) {\n    return current;\n  }\n\n  return { ...current,\n    [ouAxis]: current[ouAxis].map(dimension => ({ ...dimension,\n      items: dimension.items.map(item => ({ ...item,\n        path: getPathForOrgUnit(item, parentGraphMap)\n      }))\n    }))\n  };\n};\nexport const removeUnnecessaryAttributesFromAnalyticalObject = current => ({ ...current,\n  id: undefined,\n  name: undefined,\n  displayName: undefined\n});\nexport const appendDimensionItemNamesToAnalyticalObject = (current, metadata) => {\n  const appendNames = dimension => ({ ...dimension,\n    items: dimension.items.map(item => ({ ...item,\n      name: metadata[item.id] ? metadata[item.id].name : undefined\n    }))\n  });\n\n  return { ...current,\n    columns: current.columns.map(appendNames),\n    filters: current.filters.map(appendNames),\n    rows: current.rows.map(appendNames)\n  };\n};\nexport const appendDimensionItemTypeToAnalyticalObject = (current, metadata) => {\n  const appendDimensionType = dimension => ({ ...dimension,\n    items: dimension.items.map(item => ({ ...item,\n      dimensionItemType: metadata[item.id] ? metadata[item.id].dimensionItemType : undefined\n    }))\n  });\n\n  return { ...current,\n    columns: current.columns.map(appendDimensionType),\n    filters: current.filters.map(appendDimensionType),\n    rows: current.rows.map(appendDimensionType)\n  };\n};\nexport const appendCompleteParentGraphMap = (current, {\n  parentGraphMap\n}) => ({ ...current,\n  parentGraphMap: { ...current.parentGraphMap,\n    ...parentGraphMap\n  }\n});\nexport const prepareCurrentAnalyticalObject = (current, metadata, ui) => {\n  let result;\n  result = removeUnnecessaryAttributesFromAnalyticalObject(current);\n  result = appendDimensionItemNamesToAnalyticalObject(result, metadata);\n  result = appendDimensionItemTypeToAnalyticalObject(result, metadata);\n  result = appendPathsToOrgUnits(result, ui);\n  result = appendCompleteParentGraphMap(result, ui);\n  return result;\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#147CD7\" points=\"12 12 18 12 18 36 12 36\" />\n            <polygon fill=\"#147CD7\" points=\"22 22 28 22 28 36 22 36\" />\n            <polygon fill=\"#147CD7\" points=\"32 7 38 7 38 36 32 36\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n        </g>\n    </svg>;\n\nColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#147CD7\" points=\"12 25 18 25 18 36 12 36\" />\n            <polygon fill=\"#FFC324\" points=\"12 15 18 15 18 25 12 25\" />\n            <polygon fill=\"#147CD7\" points=\"22 29 28 29 28 36 22 36\" />\n            <polygon fill=\"#FFC324\" points=\"22 17 28 17 28 29 22 29\" />\n            <polygon fill=\"#147CD7\" points=\"32 27 38 27 38 36 32 36\" />\n            <polygon fill=\"#FFC324\" points=\"32 9 38 9 38 27 32 27\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n        </g>\n    </svg>;\n\nStackedColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst BarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"matrix(0 -1 -1 0 48 48)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#147CD7\" points=\"12 22 18 22 18 36 12 36\" />\n            <polygon fill=\"#147CD7\" points=\"22 9 28 9 28 36 22 36\" />\n            <polygon fill=\"#147CD7\" points=\"32 19 38 19 38 36 32 36\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n        </g>\n    </svg>;\n\nBarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default BarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedBarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"matrix(0 -1 -1 0 48 48)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#147CD7\" points=\"12 19 18 19 18 36 12 36\" />\n            <polygon fill=\"#FFC324\" points=\"12 10 18 10 18 19 12 19\" />\n            <polygon fill=\"#147CD7\" points=\"22 25 28 25 28 36 22 36\" />\n            <polygon fill=\"#FFC324\" points=\"22 15 28 15 28 25 22 25\" />\n            <polygon fill=\"#147CD7\" points=\"32 21 38 21 38 36 32 36\" />\n            <polygon fill=\"#FFC324\" points=\"32 12 38 12 38 21 32 21\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n        </g>\n    </svg>;\n\nStackedBarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedBarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PieIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"rotate(90 24 24)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <circle cx=\"24\" cy=\"24\" r=\"16\" stroke=\"#4A5768\" strokeWidth=\"2\" />\n            <path fill=\"#FFC324\" d=\"M11,24 C11,31.1797017 16.8202983,37 24,37 C31.1797017,37 37,31.1797017 37,24 C37,16.8202983 31.1797017,11 24,11 L24,24 L11,24 Z\" transform=\"rotate(165 24 24)\" />\n            <path fill=\"#147CD7\" d=\"M11,24 C11,31.1797017 16.8202983,37 24,37 C31.1797017,37 37,31.1797017 37,24 C37,16.8202983 31.1797017,11 24,11 L24,24 L11,24 Z\" transform=\"rotate(-15 24 24)\" />\n        </g>\n    </svg>;\n\nPieIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default PieIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GaugeIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"rotate(90 24 24)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <path stroke=\"#4A5768\" strokeWidth=\"2\" d=\"M32,8 C23.163444,8 16,15.163444 16,24 C16,32.836556 23.163444,40 32,40 L32,40\" />\n            <path stroke=\"#147CD7\" strokeWidth=\"6\" d=\"M24.1695806,17.7796867 C22.8114502,19.4870869 22,21.6487813 22,24 C22,29.5228475 26.4771525,34 32,34\" />\n        </g>\n    </svg>;\n\nGaugeIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default GaugeIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst LineIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"matrix(0 -1 -1 0 48 48)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n            <polyline stroke=\"#147CD7\" strokeWidth=\"2\" points=\"30 36 23 30 29 24 17 18 28 10\" />\n        </g>\n    </svg>;\n\nLineIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default LineIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst AreaIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"matrix(0 -1 -1 0 48 48)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n            <polygon fill=\"#90CAF9\" points=\"28 36 34 29 27 24 31 17 20 10 12 10 12 36\" />\n            <polyline stroke=\"#147CD7\" strokeWidth=\"2\" points=\"28 36 34 29 27 24 31 17 20 10\" />\n        </g>\n    </svg>;\n\nAreaIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default AreaIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedAreaIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"matrix(0 -1 -1 0 48 48)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n            <polygon fill=\"#FFE7A7\" points=\"33 36 27 28 30 23 25 17 27 10 17 10 21 17 18 23 22 28 17 36\" />\n            <polygon fill=\"#90CAF9\" points=\"16 36 22 28 18 23 21 17 17 10 12 10 12 36\" />\n            <polyline stroke=\"#FFC324\" strokeWidth=\"2\" points=\"33 36 27 28 30 23 25 17 27 10\" />\n            <polyline stroke=\"#147CD7\" strokeWidth=\"2\" points=\"16 36 22 28 18 23 21 17 16.5 10\" />\n        </g>\n    </svg>;\n\nStackedAreaIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedAreaIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst RadarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"rotate(90 24 24)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <circle cx=\"24\" cy=\"24\" r=\"16\" stroke=\"#4A5768\" strokeWidth=\"2\" />\n            <circle cx=\"24\" cy=\"24\" r=\"9\" stroke=\"#4A5768\" strokeWidth=\"2\" />\n            <circle cx=\"24\" cy=\"33\" r=\"3\" fill=\"#147CD7\" />\n            <circle cx=\"10\" cy=\"16\" r=\"3\" fill=\"#147CD7\" />\n            <circle cx=\"37\" cy=\"15\" r=\"3\" fill=\"#147CD7\" />\n            <polygon stroke=\"#147CD7\" strokeWidth=\"2\" points=\"24 33 10 16 37 15\" />\n        </g>\n    </svg>;\n\nRadarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default RadarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst YearOverYearLineIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"matrix(0 -1 -1 0 48 48)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n            <polyline stroke=\"#FFC324\" strokeWidth=\"2\" points=\"24 36 29 30 19 24 28 16 23 10\" />\n            <polyline stroke=\"#147CD7\" strokeWidth=\"2\" points=\"30 36 23 30 29 24 17 18 28 10\" />\n        </g>\n    </svg>;\n\nYearOverYearLineIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default YearOverYearLineIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst YearOverYearColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <polygon fill=\"#FFC324\" points=\"15 20 18 20 18 36 15 36\" />\n            <polygon fill=\"#147CD7\" points=\"12 14 15 14 15 36 12 36\" />\n            <polygon fill=\"#147CD7\" points=\"22 22 25 22 25 36 22 36\" />\n            <polygon fill=\"#FFC324\" points=\"25 12 28 12 28 36 25 36\" />\n            <polygon fill=\"#147CD7\" points=\"32 14 35 14 35 36 32 36\" />\n            <polygon fill=\"#FFC324\" points=\"35 27 38 27 38 36 35 36\" />\n            <polygon fill=\"#4A5768\" points=\"6 6 8 6 8 42 6 42\" />\n            <polygon fill=\"#4A5768\" points=\"6 40 42 40 42 42 6 42\" />\n        </g>\n    </svg>;\n\nYearOverYearColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default YearOverYearColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SingleValueIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <rect width=\"34\" height=\"20\" x=\"7\" y=\"14\" stroke=\"#4A5768\" strokeWidth=\"2\" />\n            <text fill=\"#147CD7\" fontFamily=\"iAWriterDuoS-Bold, iA Writer Duo S\" fontSize=\"15\" fontWeight=\"bold\" letterSpacing=\".6\">\n                <tspan x=\"10\" y=\"29\">\n                    123\n                </tspan>\n            </text>\n        </g>\n    </svg>;\n\nSingleValueIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default SingleValueIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GlobeIcon = ({\n  style = {\n    width: 24,\n    height: 24,\n    paddingRight: '8px'\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"rotate(90 24 24)\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <path fill=\"#4A5768\" fillRule=\"nonzero\" d=\"M24,7 C14.6111593,7 7,14.6111593 7,24 C7,33.3888407 14.6111593,41 24,41 C33.3888407,41 41,33.3888407 41,24 C41,14.6111593 33.3888407,7 24,7 Z M24,9 C32.2842712,9 39,15.7157288 39,24 C39,32.2842712 32.2842712,39 24,39 C15.7157288,39 9,32.2842712 9,24 C9,15.7157288 15.7157288,9 24,9 Z\" />\n            <g fillRule=\"nonzero\" transform=\"translate(7 7)\">\n                <polygon fill=\"#4A5768\" points=\"9.676 2.441 11.574 1.809 12.437 4.398 11.273 6.142 14.347 8.448 8.244 13.679 5.837 14.16 7.515 16.956 6.114 19.758 2.241 17.822 .001 15.582 1.415 14.168 3.426 16.178 5.219 17.075 5.235 17.043 2.662 12.756 7.338 11.82 11.153 8.551 8.56 6.607 10.229 4.102\" />\n                <polygon fill=\"#4A5768\" points=\"23.454 13.474 22.387 16.141 23.874 18.125 26.929 18.125 27.917 21.088 27.916 26.856 28.263 29.626 26.279 29.874 25.924 27.041 25.917 26.917 25.916 21.413 25.487 20.125 22.875 20.125 20.113 16.442 21.879 12.026 24.007 10.962 26.371 11.75 28.496 11.75 30.999 12.584 32.697 14.283 34.186 17.261 32.397 18.156 31.053 15.468 29.918 14.332 28.173 13.75 26.046 13.75 24.16 13.121\" />\n                <polygon fill=\"#4A5768\" points=\"21.252 5.667 23.813 3.106 25.938 3.814 26.21 3.543 27.624 4.957 26.478 6.102 24.353 5.394 24.08 5.666 25.3 6.886 24.374 8.737 24.374 9.344 26.325 8.857 27.519 9.454 29.858 7.7 31.058 9.3 27.731 11.796 26.091 10.976 22.375 11.906 22.375 8.264 22.866 7.28\" />\n                <polygon fill=\"#147CD7\" points=\"6.951 19.192 9.73 17.339 13.261 18.222 14.706 19.667 16.832 20.376 18.708 22.252 18.708 25.736 17.228 28.697 15.837 33.566 13.913 33.017 15.33 28.059 15.397 27.886 16.708 25.262 16.708 23.08 15.75 22.123 13.626 21.416 12.238 20.028 10.103 19.493 8.632 20.475 8.227 21.688 11.546 25.007 12.295 28.755 13.678 32.212 11.822 32.955 10.405 29.413 10.353 29.238 9.703 25.993 5.939 22.228\" />\n                <path fill=\"#4A5768\" d=\"M17,0 C26.3888407,0 34,7.61115925 34,17 C34,26.3888407 26.3888407,34 17,34 C7.61115925,34 0,26.3888407 0,17 C0,7.61115925 7.61115925,0 17,0 Z M17,2 C8.71572875,2 2,8.71572875 2,17 C2,25.2842712 8.71572875,32 17,32 C25.2842712,32 32,25.2842712 32,17 C32,8.71572875 25.2842712,2 17,2 Z\" />\n            </g>\n        </g>\n    </svg>;\n\nGlobeIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default GlobeIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PivotTableIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <rect width=\"34\" height=\"26\" x=\"7\" y=\"11\" stroke=\"#4A5768\" strokeWidth=\"2\" />\n            <rect width=\"32\" height=\"2\" x=\"8\" y=\"18\" fill=\"#4A5768\" />\n            <rect width=\"2\" height=\"26\" x=\"19\" y=\"11\" fill=\"#4A5768\" />\n            <rect width=\"32\" height=\"2\" x=\"8\" y=\"24\" fill=\"#4A5768\" />\n            <rect width=\"32\" height=\"2\" x=\"8\" y=\"30\" fill=\"#4A5768\" />\n        </g>\n    </svg>;\n\nPivotTableIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default PivotTableIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ScatterIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg height=\"48\" viewBox=\"0 0 48 48\" width=\"48\" xmlns=\"http://www.w3.org/2000/svg\" style={style}>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <path d=\"m0 0h48v48h-48z\" />\n            <path d=\"m6 42v-36h2v34h34v2z\" fill=\"#4a5768\" />\n            <path d=\"m14 27c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm7-2c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm7-7c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm8 0c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm0-10c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2z\" fill=\"#147cd7\" />\n            <path d=\"m20 31c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm10-4c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm-9-8c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2zm11-6c1.1045695 0 2 .8954305 2 2s-.8954305 2-2 2-2-.8954305-2-2 .8954305-2 2-2z\" fill=\"#ffc324\" />\n        </g>\n    </svg>;\n\nScatterIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ScatterIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { VIS_TYPE_COLUMN, VIS_TYPE_STACKED_COLUMN, VIS_TYPE_BAR, VIS_TYPE_STACKED_BAR, VIS_TYPE_LINE, VIS_TYPE_AREA, VIS_TYPE_STACKED_AREA, VIS_TYPE_PIE, VIS_TYPE_RADAR, VIS_TYPE_GAUGE, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport ColumnIcon from '../../assets/ColumnIcon';\nimport StackedColumnIcon from '../../assets/StackedColumnIcon';\nimport BarIcon from '../../assets/BarIcon';\nimport StackedBarIcon from '../../assets/StackedBarIcon';\nimport PieIcon from '../../assets/PieIcon';\nimport GaugeIcon from '../../assets/GaugeIcon';\nimport LineIcon from '../../assets/LineIcon';\nimport AreaIcon from '../../assets/AreaIcon';\nimport StackedAreaIcon from '../../assets/StackedAreaIcon';\nimport RadarIcon from '../../assets/RadarIcon';\nimport YearOverYearLineIcon from '../../assets/YearOverYearLineIcon';\nimport YearOverYearColumnIcon from '../../assets/YearOverYearColumnIcon';\nimport SingleValueIcon from '../../assets/SingleValueIcon';\nimport GlobeIcon from '../../assets/GlobeIcon';\nimport PivotTableIcon from '../../assets/PivotTableIcon';\nimport ScatterIcon from '../../assets/ScatterIcon';\n\nconst ListItemIcon = ({\n  iconType,\n  style\n}) => {\n  switch (iconType) {\n    case VIS_TYPE_STACKED_COLUMN:\n      return <StackedColumnIcon style={style} />;\n\n    case VIS_TYPE_BAR:\n      return <BarIcon style={style} />;\n\n    case VIS_TYPE_STACKED_BAR:\n      return <StackedBarIcon style={style} />;\n\n    case VIS_TYPE_PIE:\n      return <PieIcon style={style} />;\n\n    case VIS_TYPE_GAUGE:\n      return <GaugeIcon style={style} />;\n\n    case VIS_TYPE_LINE:\n      return <LineIcon style={style} />;\n\n    case VIS_TYPE_AREA:\n      return <AreaIcon style={style} />;\n\n    case VIS_TYPE_STACKED_AREA:\n      return <StackedAreaIcon style={style} />;\n\n    case VIS_TYPE_RADAR:\n      return <RadarIcon style={style} />;\n\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n      return <YearOverYearLineIcon style={style} />;\n\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return <YearOverYearColumnIcon style={style} />;\n\n    case VIS_TYPE_SINGLE_VALUE:\n      return <SingleValueIcon style={style} />;\n\n    case 'MAP':\n      return <GlobeIcon style={style} />;\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return <PivotTableIcon style={style} />;\n\n    case VIS_TYPE_SCATTER:\n      return <ScatterIcon style={style} />;\n\n    case VIS_TYPE_COLUMN:\n    default:\n      return <ColumnIcon style={style} />;\n  }\n};\n\nListItemIcon.propTypes = {\n  iconType: PropTypes.string,\n  style: PropTypes.object\n};\nexport default ListItemIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from './ListItemIcon';\nimport styles from './styles/VisualizationTypeSelector.module.css';\n\nconst VisualizationTypeListItem = ({\n  iconType,\n  label,\n  description,\n  disabled,\n  isSelected,\n  onClick\n}) => {\n  const classNames = [styles.listItem];\n\n  if (isSelected) {\n    classNames.push(styles.listItemActive);\n  }\n\n  if (disabled) {\n    classNames.push(styles.listItemDisabled);\n  }\n\n  return <div className={classNames.join(' ')} onClick={onClick}>\n            <div className={styles.listItemIcon}>\n                {<ListItemIcon iconType={iconType} style={{\n        width: 48,\n        height: 48\n      }} />}\n            </div>\n            <div className={styles.listItemText}>\n                <p className={styles.listItemName}>{label}</p>\n                <p className={styles.listItemDescription}>{description}</p>\n            </div>\n        </div>;\n};\n\nVisualizationTypeListItem.propTypes = {\n  description: PropTypes.string,\n  disabled: PropTypes.bool,\n  iconType: PropTypes.string,\n  isSelected: PropTypes.bool,\n  label: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default VisualizationTypeListItem;","import React, { useState, createRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport { visTypeDisplayNames, visTypeDescriptions } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Divider, Popper } from '@dhis2/ui';\nimport { prepareCurrentAnalyticalObject } from '../../modules/currentAnalyticalObject';\nimport { getAdaptedUiByType } from '../../modules/ui';\nimport { sGetUi, sGetUiType } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetMetadata } from '../../reducers/metadata';\nimport { acSetUi, acClearSeriesType } from '../../actions/ui';\nimport { apiSaveAOInUserDataStore, CURRENT_AO_KEY } from '../../api/userDataStore';\nimport VisualizationTypeListItem from './VisualizationTypeListItem';\nimport ListItemIcon from './ListItemIcon';\nimport styles from './styles/VisualizationTypeSelector.module.css';\nexport const MAPS_APP_URL = 'dhis-web-maps';\nexport const VisualizationTypeSelector = ({\n  visualizationType,\n  ui,\n  setUi,\n  onItemClick,\n  current,\n  metadata\n}, context) => {\n  const baseUrl = context.baseUrl;\n  const [listIsOpen, setListIsOpen] = useState(false);\n\n  const toggleList = () => setListIsOpen(!listIsOpen);\n\n  const handleListItemClick = type => () => {\n    setUi(getAdaptedUiByType({ ...ui,\n      type\n    }));\n    onItemClick();\n    toggleList();\n  };\n\n  const handleOpenAsMapClick = async event => {\n    if (!current) {\n      event.stopPropagation();\n      return;\n    }\n\n    const currentAnalyticalObject = prepareCurrentAnalyticalObject(current, metadata, ui);\n    await apiSaveAOInUserDataStore(currentAnalyticalObject);\n    window.location.href = `${baseUrl}/${MAPS_APP_URL}?${CURRENT_AO_KEY}=true`;\n  };\n\n  const getVisTypes = () => Object.keys(visTypeDisplayNames);\n\n  const VisTypesList = <Card dataTest={'visualization-type-selector-card'}>\n            <div className={styles.listContainer}>\n                <div className={styles.listSection}>\n                    {getVisTypes().map(type => <VisualizationTypeListItem key={type} iconType={type} label={visTypeDisplayNames[type]} description={visTypeDescriptions[type]} isSelected={type === visualizationType} onClick={handleListItemClick(type)} />)}\n                </div>\n                <Divider />\n                <div className={styles.listSection}>\n                    <VisualizationTypeListItem key={'MAP'} iconType={'MAP'} label={i18n.t('Open as Map')} // TODO: Open as: Map when i18next nsSeparator fixed\n        description={i18n.t('Visually plot data on a world map. Data elements use separate map layers.')} onClick={handleOpenAsMapClick} disabled={!current} />\n                </div>\n            </div>\n        </Card>;\n  const buttonRef = createRef();\n  return <>\n            <div onClick={toggleList} ref={buttonRef} className={styles.button} data-test={'visualization-type-selector-button'}>\n                <ListItemIcon iconType={visualizationType} />\n                <span data-test=\"visualization-type-selector-currently-selected-text\">\n                    {visTypeDisplayNames[visualizationType]}\n                </span>\n                <ArrowDropDownIcon style={{\n        marginLeft: 'auto'\n      }} />\n            </div>\n            {listIsOpen && createPortal(<div onClick={toggleList} className={styles.backdrop}>\n                        <Popper reference={buttonRef} placement=\"bottom-start\">\n                            <div className={styles.cardContainer}>\n                                {VisTypesList}\n                            </div>\n                        </Popper>\n                    </div>, document.body)}\n        </>;\n};\nVisualizationTypeSelector.propTypes = {\n  current: PropTypes.object,\n  metadata: PropTypes.object,\n  setUi: PropTypes.func,\n  ui: PropTypes.object,\n  visualizationType: PropTypes.oneOf(Object.keys(visTypeDisplayNames)),\n  onItemClick: PropTypes.func\n};\nVisualizationTypeSelector.contextTypes = {\n  baseUrl: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  current: sGetCurrent(state),\n  metadata: sGetMetadata(state),\n  ui: sGetUi(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setUi: ui => dispatch(acSetUi(ui)),\n  onItemClick: () => dispatch(acClearSeriesType())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VisualizationTypeSelector);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType } from '@dhis2/analytics';\nimport { SplitButton, FlyoutMenu, MenuItem, Button } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiActiveModalDialog, sGetUiType } from '../../../../reducers/ui';\nimport { acAddUiLayoutDimensions } from '../../../../actions/ui';\nexport const AddToLayoutButton = ({\n  dialogId,\n  visType,\n  onAddDimension,\n  onClick,\n  dataTest\n}) => {\n  const availableAxes = getAvailableAxes(visType);\n  const AddToLayoutButton = availableAxes.length > 1 ? SplitButton : Button;\n\n  const clickHandler = axisId => {\n    onAddDimension({\n      [dialogId]: {\n        axisId\n      }\n    });\n    onClick();\n  };\n\n  const renderMenu = () => <FlyoutMenu maxWidth=\"380px\" dataTest={`${dataTest}-flyout-menu`}>\n            {getAvailableAxes(visType).slice(1).map(axis => <MenuItem key={axis} dataTest={`${dataTest}-flyout-menu-option-${axis}`} onClick={() => clickHandler(axis)} label={i18n.t(`Add to {{axisName}}`, {\n      axisName: getAxisNameByLayoutType(axis, getLayoutTypeByVisType(visType))\n    })} />)}\n        </FlyoutMenu>;\n\n  return <AddToLayoutButton component={availableAxes.length > 1 ? renderMenu() : null} onClick={() => clickHandler(availableAxes[0])} primary dataTest={dataTest}>\n            {i18n.t(`Add to {{axisName}}`, {\n      axisName: getAxisNameByLayoutType(availableAxes[0], getLayoutTypeByVisType(visType))\n    })}\n        </AddToLayoutButton>;\n};\nAddToLayoutButton.propTypes = {\n  dialogId: PropTypes.string.isRequired,\n  visType: PropTypes.string.isRequired,\n  onAddDimension: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  dataTest: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state),\n  dialogId: sGetUiActiveModalDialog(state)\n});\n\nexport default connect(mapStateToProps, {\n  onAddDimension: acAddUiLayoutDimensions\n})(AddToLayoutButton);","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport debounce from 'lodash-es/debounce';\nimport isEqual from 'lodash-es/isEqual';\nimport i18n from '@dhis2/d2-i18n';\nimport { DataDimension, DynamicDimension, PeriodDimension, OrgUnitDimension, ouIdHelper, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, getAxisMaxNumberOfItems, getDisplayNameByVisType, filterOutPredefinedDimensions, apiFetchRecommendedIds } from '@dhis2/analytics';\nimport { Modal, ModalContent, ModalActions, ButtonStrip, ModalTitle, TabBar, Tab } from '@dhis2/ui';\nimport HideButton from '../../HideButton/HideButton';\nimport AddToLayoutButton from './AddToLayoutButton/AddToLayoutButton';\nimport UpdateVisualizationContainer from '../../UpdateButton/UpdateVisualizationContainer';\nimport { acSetUiActiveModalDialog, acRemoveUiItems, acSetUiItems, acAddParentGraphMap, acSetUiItemAttributes } from '../../../actions/ui';\nimport { acAddMetadata } from '../../../actions/metadata';\nimport { acSetRecommendedIds } from '../../../actions/recommendedIds';\nimport { sGetUiItems, sGetUiItemsByDimension, sGetUiActiveModalDialog, sGetUiParentGraphMap, sGetUiType, sGetAxisIdByDimensionId, sGetDimensionIdsFromLayout, sGetUiItemsByAttribute } from '../../../reducers/ui';\nimport { sGetDimensions } from '../../../reducers/dimensions';\nimport { sGetMetadata } from '../../../reducers/metadata';\nimport { sGetSettingsDisplayNameProperty } from '../../../reducers/settings';\nimport { removeLastPathSegment, getOuPath } from '../../../modules/orgUnit';\nimport UpdateButton from '../../UpdateButton/UpdateButton';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../../../modules/ui';\nimport styles from './styles/DialogManager.module.css';\n\nconst isScatterAttribute = dialogId => [ITEM_ATTRIBUTE_VERTICAL, ITEM_ATTRIBUTE_HORIZONTAL].includes(dialogId);\n\nexport class DialogManager extends Component {\n  state = {\n    onMounted: false\n  };\n  componentDidUpdate = prevProps => {\n    const shouldFetchIds = !isEqual(prevProps.dxIds, this.props.dxIds) || !isEqual(prevProps.ouIds, this.props.ouIds);\n\n    if (shouldFetchIds) {\n      this.fetchRecommended();\n    }\n\n    if (this.props.dialogId === DIMENSION_ID_ORGUNIT && !this.state.ouMounted) {\n      this.setState({\n        ouMounted: true\n      });\n    }\n  };\n  fetchRecommended = debounce(async () => {\n    const ids = await apiFetchRecommendedIds(this.context.dataEngine, this.props.dxIds, this.props.ouIds);\n    this.props.setRecommendedIds(ids);\n  }, 1000);\n  selectUiItems = ({\n    dimensionId,\n    items,\n    itemAttribute\n  }) => {\n    if (itemAttribute) {\n      this.props.setUiItemAttributes({\n        dimensionId,\n        attribute: itemAttribute,\n        itemIds: items.map(item => item.id)\n      });\n    } else {\n      this.props.setUiItems({\n        dimensionId,\n        itemIds: items.map(item => item.id)\n      });\n    }\n\n    switch (dimensionId) {\n      case DIMENSION_ID_ORGUNIT:\n        {\n          const forMetadata = {};\n          const forParentGraphMap = {};\n          items.forEach(ou => {\n            const id = ouIdHelper.removePrefix(ou.id);\n            forMetadata[id] = {\n              id,\n              name: ou.name || ou.displayName,\n              displayName: ou.displayName\n            };\n\n            if (ou.path) {\n              const path = removeLastPathSegment(ou.path);\n              forParentGraphMap[ou.id] = path === `/${ou.id}` ? '' : path.replace(/^\\//, '');\n            }\n          });\n          this.props.addMetadata(forMetadata);\n          this.props.addParentGraphMap(forParentGraphMap);\n          break;\n        }\n\n      default:\n        {\n          this.props.addMetadata(items.reduce((obj, item) => {\n            obj[item.id] = {\n              id: item.id,\n              name: item.name || item.displayName,\n              displayName: item.displayName,\n              type: item.type\n            };\n            return obj;\n          }, {}));\n        }\n    }\n  };\n  closeDialog = () => this.props.changeDialog(null);\n  getSelectedItems = dialogId => {\n    const items = isScatterAttribute(dialogId) ? this.props.getItemsByAttribute(dialogId) : this.props.selectedItems[dialogId];\n    return (items || []).filter(id => this.props.metadata[id]).map(id => ({\n      id,\n      name: this.props.metadata[id].name,\n      type: this.props.metadata[id].type || this.props.metadata[id].dimensionItemType\n    }));\n  };\n  getOrgUnitsFromIds = (ids, metadata, parentGraphMap) => ids.filter(id => metadata[ouIdHelper.removePrefix(id)] !== undefined).map(id => {\n    const ouUid = ouIdHelper.removePrefix(id);\n    return {\n      id,\n      name: metadata[ouUid].displayName || metadata[ouUid].name,\n      path: getOuPath(ouUid, metadata, parentGraphMap)\n    };\n  }); // The OU content is persisted as mounted in order\n  // to cache the org unit tree data\n\n  renderPersistedContent = dimensionProps => {\n    const {\n      displayNameProperty,\n      ouIds,\n      metadata,\n      parentGraphMap,\n      dialogId\n    } = this.props;\n\n    if (this.state.ouMounted) {\n      const ouItems = this.getOrgUnitsFromIds(ouIds, metadata, parentGraphMap);\n      const display = DIMENSION_ID_ORGUNIT === dialogId ? 'block' : 'none';\n      return <div key={DIMENSION_ID_ORGUNIT} style={{\n        display\n      }}>\n                    <OrgUnitDimension displayNameProperty={displayNameProperty} ouItems={ouItems} {...dimensionProps} />\n                </div>;\n    }\n\n    return null;\n  };\n  renderDialogContent = () => {\n    const {\n      displayNameProperty,\n      dialogId,\n      type,\n      removeUiItems,\n      setUiItems\n    } = this.props;\n    const dimensionProps = {\n      d2: this.context.d2,\n      onSelect: this.selectUiItems,\n      onDeselect: removeUiItems,\n      onReorder: setUiItems\n    };\n\n    const dynamicContent = () => {\n      const selectedItems = this.getSelectedItems(dialogId);\n      let infoBoxMessage;\n      const axisId = this.props.getAxisIdByDimensionId(dialogId);\n      const visType = type;\n      const numberOfItems = selectedItems.length;\n      const axisMaxNumberOfItems = getAxisMaxNumberOfItems(visType, axisId);\n      const hasMaxNumberOfItemsRule = !!axisMaxNumberOfItems;\n\n      if (hasMaxNumberOfItemsRule && numberOfItems > axisMaxNumberOfItems) {\n        infoBoxMessage = axisMaxNumberOfItems === 1 ? i18n.t(`'{{visualizationType}}' is intended to show a single data item. Only the first item will be used and saved.`, {\n          visualizationType: getDisplayNameByVisType(visType)\n        }) : i18n.t(`'{{visualiationType}}' is intended to show maximum {{maxNumber}} number of items. Only the first {{maxNumber}} items will be used and saved.`, {\n          visualiationType: getDisplayNameByVisType(visType),\n          maxNumber: axisMaxNumberOfItems\n        });\n        selectedItems.forEach((item, index) => {\n          item.isActive = index < axisMaxNumberOfItems;\n        });\n      } else if (isScatterAttribute(dialogId) && numberOfItems > 1) {\n        infoBoxMessage = i18n.t(`'Scatter' is intended to show a single data item per axis. Only the first item will be used and saved.`);\n        selectedItems.forEach((item, index) => {\n          item.isActive = index < 1;\n        });\n      }\n\n      let content = null;\n\n      if (dialogId === DIMENSION_ID_DATA || isScatterAttribute(dialogId)) {\n        const onSelect = isScatterAttribute(dialogId) ? defaultProps => this.selectUiItems({ ...defaultProps,\n          itemAttribute: dialogId\n        }) : dimensionProps.onSelect;\n        const dimensionSelector = <DataDimension displayNameProp={displayNameProperty} selectedDimensions={selectedItems} infoBoxMessage={infoBoxMessage} onSelect={onSelect} />;\n        const dataTabs = isScatterAttribute(dialogId) ? <TabBar dataTest={'dialog-manager-modal-tabs'} className={styles.tabs}>\n                        {[{\n            key: ITEM_ATTRIBUTE_VERTICAL,\n            label: i18n.t('Vertical')\n          }, {\n            key: ITEM_ATTRIBUTE_HORIZONTAL,\n            label: i18n.t('Horizontal')\n          }].map(({\n            key,\n            label\n          }) => <Tab key={key} onClick={() => this.props.changeDialog(key)} selected={key === dialogId}>\n                                {label}\n                            </Tab>)}\n                    </TabBar> : null;\n        content = dataTabs ? <>\n                        {dataTabs}\n                        {dimensionSelector}\n                    </> : dimensionSelector;\n      } else if (dialogId === DIMENSION_ID_PERIOD) {\n        content = <PeriodDimension selectedPeriods={selectedItems} onSelect={dimensionProps.onSelect} // TODO: infoBoxMessage should ideally be implemented for all dimensions\n        />;\n      } else if (filterOutPredefinedDimensions(Object.keys(this.props.dimensions)).includes(dialogId)) {\n        content = <DynamicDimension selectedItems={selectedItems} dimensionId={dialogId} onSelect={dimensionProps.onSelect} dimensionTitle={this.props.dimensions[dialogId].name} displayNameProp={displayNameProperty} // TODO: infoBoxMessage should ideally be implemented for all dimensions\n        />;\n      }\n\n      return content;\n    };\n\n    return <Fragment>\n                {this.renderPersistedContent(dimensionProps)}\n                {dialogId && dynamicContent()}\n            </Fragment>;\n  };\n  getPrimaryOnClick = handler => () => {\n    handler();\n    this.closeDialog();\n  };\n\n  render() {\n    const {\n      dialogId,\n      dimensions\n    } = this.props;\n    const dimension = isScatterAttribute(dialogId) ? dimensions[DIMENSION_ID_DATA] : dimensions[dialogId];\n    return <Fragment>\n                {dimension && <Modal onClose={this.closeDialog} dataTest={`dialog-manager-${dimension.id}`} position=\"top\" large>\n                        <ModalTitle dataTest={'dialog-manager-modal-title'}>\n                            {dimension.name}\n                        </ModalTitle>\n                        <ModalContent dataTest={'dialog-manager-modal-content'}>\n                            {this.renderDialogContent()}\n                        </ModalContent>\n                        <ModalActions dataTest={'dialog-manager-modal-actions'}>\n                            <ButtonStrip>\n                                <HideButton onClick={this.closeDialog} dataTest={'dialog-manager-modal-action-cancel'} />\n                                <UpdateVisualizationContainer renderComponent={handler => this.props.dimensionIdsInLayout.includes(dialogId) || isScatterAttribute(dialogId) ? <UpdateButton onClick={this.getPrimaryOnClick(handler)} dataTest={'dialog-manager-modal-action-confirm'} /> : <AddToLayoutButton onClick={this.getPrimaryOnClick(handler)} dataTest={'dialog-manager-modal-action-confirm'} />} />\n                            </ButtonStrip>\n                        </ModalActions>\n                    </Modal>}\n            </Fragment>;\n  }\n\n}\nDialogManager.contextTypes = {\n  d2: PropTypes.object,\n  dataEngine: PropTypes.object\n};\nDialogManager.propTypes = {\n  changeDialog: PropTypes.func.isRequired,\n  dimensionIdsInLayout: PropTypes.array.isRequired,\n  ouIds: PropTypes.array.isRequired,\n  setRecommendedIds: PropTypes.func.isRequired,\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  dialogId: PropTypes.string,\n  dimensions: PropTypes.object,\n  displayNameProperty: PropTypes.string,\n  dxIds: PropTypes.array,\n  getAxisIdByDimensionId: PropTypes.func,\n  getItemsByAttribute: PropTypes.func,\n  metadata: PropTypes.object,\n  parentGraphMap: PropTypes.object,\n  removeUiItems: PropTypes.func,\n  selectedItems: PropTypes.object,\n  setUiItemAttributes: PropTypes.func,\n  setUiItems: PropTypes.func,\n  type: PropTypes.string\n};\nDialogManager.defaultProps = {\n  dialogId: null,\n  dxIds: []\n};\n\nconst mapStateToProps = state => ({\n  displayNameProperty: sGetSettingsDisplayNameProperty(state),\n  dialogId: sGetUiActiveModalDialog(state),\n  dimensions: sGetDimensions(state),\n  metadata: sGetMetadata(state),\n  parentGraphMap: sGetUiParentGraphMap(state),\n  dxIds: sGetUiItemsByDimension(state, DIMENSION_ID_DATA),\n  ouIds: sGetUiItemsByDimension(state, DIMENSION_ID_ORGUNIT),\n  selectedItems: sGetUiItems(state),\n  type: sGetUiType(state),\n  getAxisIdByDimensionId: dimensionId => sGetAxisIdByDimensionId(state, dimensionId),\n  dimensionIdsInLayout: sGetDimensionIdsFromLayout(state),\n  getItemsByAttribute: attribute => sGetUiItemsByAttribute(state, attribute)\n});\n\nexport default connect(mapStateToProps, {\n  changeDialog: acSetUiActiveModalDialog,\n  setRecommendedIds: acSetRecommendedIds,\n  setUiItems: acSetUiItems,\n  addMetadata: acAddMetadata,\n  removeUiItems: acRemoveUiItems,\n  addParentGraphMap: acAddParentGraphMap,\n  setUiItemAttributes: acSetUiItemAttributes\n})(DialogManager);","import { SET_RECOMMENDED_IDS } from '../reducers/recommendedIds';\nexport const acSetRecommendedIds = value => ({\n  type: SET_RECOMMENDED_IDS,\n  value\n});","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { DimensionItem } from '@dhis2/analytics';\nimport styles from './styles/DndDimensionItem.module.css';\nexport class DndDimensionItem extends Component {\n  render = () => {\n    const {\n      id,\n      index,\n      name,\n      isSelected,\n      isLocked,\n      isDeactivated,\n      isRecommended,\n      onClick,\n      onOptionsClick,\n      dataTest\n    } = this.props;\n    const itemCommonProps = {\n      id,\n      name,\n      isSelected,\n      isLocked,\n      isDeactivated,\n      isRecommended,\n      dataTest\n    };\n    return <Draggable draggableId={id} index={index} isDragDisabled={isSelected || isDeactivated || isLocked}>\n                {(provided, snapshot) => <>\n                        <DimensionItem innerRef={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps} className={snapshot.isDragging ? styles.dragging : styles.notDragging} onClick={onClick} onOptionsClick={onOptionsClick} {...itemCommonProps} />\n                        {snapshot.isDragging && <DimensionItem className={styles.dimensionItemClone} {...itemCommonProps} />}\n                    </>}\n            </Draggable>;\n  };\n}\nDndDimensionItem.propTypes = {\n  dataTest: PropTypes.string,\n  id: PropTypes.string,\n  index: PropTypes.number,\n  isDeactivated: PropTypes.bool,\n  isLocked: PropTypes.bool,\n  isRecommended: PropTypes.bool,\n  isSelected: PropTypes.bool,\n  name: PropTypes.string,\n  onClick: PropTypes.func,\n  onOptionsClick: PropTypes.func\n};\nexport default DndDimensionItem;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Droppable } from 'react-beautiful-dnd';\nimport { createSelector } from 'reselect';\nimport { getDisallowedDimensions, getAllLockedDimensionIds, getFixedDimensions, getDynamicDimensions, getPredefinedDimensions } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport DndDimensionItem from './DndDimensionItem';\nimport * as fromReducers from '../../reducers';\nimport { SOURCE_DIMENSIONS } from '../../modules/layout';\nimport styles from './styles/DndDimensionList.module.css';\nexport class DndDimensionList extends Component {\n  dndIndex = 0;\n  nameContainsFilterText = dimension => dimension.name.toLowerCase().includes(this.props.filterText.toLowerCase());\n  isSelected = id => this.props.selectedIds.includes(id);\n  isDisabledDimension = id => this.props.disallowedDimensions.includes(id);\n  isLockedDimension = id => this.props.lockedDimensions.includes(id);\n  isRecommendedDimension = id => this.props.recommendedIds.includes(id);\n  renderItem = ({\n    id,\n    name\n  }) => {\n    const itemProps = {\n      id,\n      name,\n      index: this.dndIndex++,\n      isSelected: this.isSelected(id),\n      isLocked: this.isLockedDimension(id),\n      isDeactivated: this.isDisabledDimension(id),\n      isRecommended: this.isRecommendedDimension(id),\n      onClick: this.props.onDimensionClick,\n      onOptionsClick: this.props.onDimensionOptionsClick,\n      dataTest: `${this.props.dataTest}-dimension-item`\n    };\n    return <DndDimensionItem key={`${SOURCE_DIMENSIONS}-${id}`} {...itemProps} />;\n  };\n  getDimensionItemsByFilter = filter => this.props.dimensions.filter(filter).filter(this.nameContainsFilterText).map(this.renderItem);\n\n  render() {\n    this.dndIndex = 0;\n    const fixedDimensions = this.getDimensionItemsByFilter(dimension => Object.values(getFixedDimensions()).some(fixedDim => fixedDim.id === dimension.id));\n    const dynamicDimensions = this.getDimensionItemsByFilter(dimension => Object.values(getDynamicDimensions()).some(dynDim => dynDim.id === dimension.id));\n    const nonPredefinedDimensions = this.getDimensionItemsByFilter(dimension => !Object.values(getPredefinedDimensions()).some(predefDim => predefDim.id === dimension.id));\n    return <Droppable droppableId={SOURCE_DIMENSIONS} isDropDisabled={true}>\n                {provided => <div className={styles.container} ref={provided.innerRef} {...provided.droppableProps} data-test={this.props.dataTest}>\n                        <div className={styles.wrapper}>\n                            <div className={styles.section}>\n                                <h3 className={styles.header}>\n                                    {i18n.t('Main dimensions')}\n                                </h3>\n                                <ul className={styles.list} data-test={`${this.props.dataTest}-fixed-dimensions`}>\n                                    {fixedDimensions}\n                                </ul>\n                            </div>\n                            <div className={styles.section}>\n                                <h3 className={styles.header}>\n                                    {i18n.t('Other dimensions')}\n                                </h3>\n                                <ul className={styles.list} data-test={`${this.props.dataTest}-dynamic-dimensions`}>\n                                    {dynamicDimensions}\n                                </ul>\n                            </div>\n                            <div className={styles.section}>\n                                <h3 className={styles.header}>\n                                    {i18n.t('Your dimensions')}\n                                </h3>\n                                <ul className={styles.list} data-test={`${this.props.dataTest}-non-predefined-dimensions`}>\n                                    {nonPredefinedDimensions}\n                                </ul>\n                            </div>\n                        </div>\n                        {provided.placeholder}\n                    </div>}\n            </Droppable>;\n  }\n\n}\nDndDimensionList.propTypes = {\n  dataTest: PropTypes.string,\n  dimensions: PropTypes.array,\n  disallowedDimensions: PropTypes.array,\n  filterText: PropTypes.string,\n  lockedDimensions: PropTypes.array,\n  recommendedIds: PropTypes.array,\n  selectedIds: PropTypes.array,\n  onDimensionClick: PropTypes.func,\n  onDimensionOptionsClick: PropTypes.func\n};\nconst getDisallowedDimensionsMemo = createSelector([fromReducers.fromUi.sGetUiType], type => getDisallowedDimensions(type));\nconst getisLockedDimensionsMemo = createSelector([fromReducers.fromUi.sGetUiType], type => getAllLockedDimensionIds(type));\n\nconst mapStateToProps = state => ({\n  dimensions: Object.values(fromReducers.fromDimensions.sGetDimensions(state)),\n  selectedIds: fromReducers.fromUi.sGetDimensionIdsFromLayout(state),\n  recommendedIds: fromReducers.fromRecommendedIds.sGetRecommendedIds(state),\n  disallowedDimensions: getDisallowedDimensionsMemo(state),\n  lockedDimensions: getisLockedDimensionsMemo(state)\n});\n\nexport default connect(mapStateToProps)(DndDimensionList);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { DimensionFilter } from '@dhis2/analytics';\nimport DndDimensionList from './DndDimensionList';\nimport styles from './styles/DndDimensionsPanel.module.css';\nexport class DndDimensionsPanel extends Component {\n  state = {\n    filterText: ''\n  };\n  onClearFilter = () => {\n    this.setState({\n      filterText: ''\n    });\n  };\n  onFilterTextChange = filterText => {\n    this.setState({\n      filterText\n    });\n  };\n\n  render() {\n    return <div className={styles.container} data-test=\"dimensions-panel\">\n                <DimensionFilter placeholder={i18n.t('Filter dimensions')} text={this.state.filterText} onChange={this.onFilterTextChange} onClear={this.onClearFilter} disableUnderline={true} type=\"search\" dataTest=\"dimensions-panel-filter\" />\n                <DndDimensionList filterText={this.state.filterText} onDimensionOptionsClick={this.props.onDimensionOptionsClick} onDimensionClick={this.props.onDimensionClick} dataTest=\"dimensions-panel-list\" />\n            </div>;\n  }\n\n}\nDndDimensionsPanel.propTypes = {\n  onDimensionClick: PropTypes.func,\n  onDimensionOptionsClick: PropTypes.func\n};\nexport default DndDimensionsPanel;","import { colors } from '@dhis2/ui';\nexport const styles = {\n  divContainer: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: colors.grey050\n  }\n};","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DimensionMenu, DIMENSION_ID_ASSIGNED_CATEGORIES, DIMENSION_ID_DATA, VIS_TYPE_SCATTER } from '@dhis2/analytics';\nimport { Layer, Popper } from '@dhis2/ui';\nimport DialogManager from './Dialogs/DialogManager';\nimport DndDimensionsPanel from './DndDimensionsPanel';\nimport * as fromReducers from '../../reducers';\nimport { styles } from './styles/DimensionsPanel.style';\nimport { acSetUiActiveModalDialog, acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui';\nimport { ITEM_ATTRIBUTE_VERTICAL } from '../../modules/ui';\nexport const Dimensions = ({\n  assignedCategoriesItemHandler,\n  axisItemHandler,\n  getCurrentAxisId,\n  itemsByDimension,\n  layoutHasAssignedCategories,\n  removeItemHandler,\n  ui,\n  onDimensionClick\n}) => {\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [dimensionId, setDimensionId] = useState(null);\n  const [ref, setRef] = useState();\n\n  const toggleMenu = () => {\n    if (menuIsOpen) {\n      setDimensionId(null);\n      setRef(null);\n    }\n\n    setMenuIsOpen(!menuIsOpen);\n  };\n\n  const openOptionsMenuForDimension = (event, id, ref) => {\n    event.stopPropagation();\n    setRef(ref.current);\n    setDimensionId(id);\n    toggleMenu();\n  };\n\n  const openDimensionModal = id => onDimensionClick(ui.type === VIS_TYPE_SCATTER && id === DIMENSION_ID_DATA ? ITEM_ATTRIBUTE_VERTICAL : id);\n\n  const getNumberOfDimensionItems = () => (itemsByDimension[dimensionId] || []).length;\n\n  return <div style={styles.divContainer}>\n            <DndDimensionsPanel onDimensionClick={openDimensionModal} onDimensionOptionsClick={openOptionsMenuForDimension} />\n            {menuIsOpen && dimensionId && ref && <Layer position=\"fixed\" level={2000} onClick={toggleMenu}>\n                    <Popper reference={ref} placement=\"bottom-start\">\n                        <DimensionMenu dimensionId={dimensionId} currentAxisId={getCurrentAxisId(dimensionId)} visType={ui.type} numberOfDimensionItems={getNumberOfDimensionItems()} isAssignedCategoriesInLayout={layoutHasAssignedCategories} assignedCategoriesItemHandler={destination => assignedCategoriesItemHandler(layoutHasAssignedCategories, destination)} axisItemHandler={axisItemHandler} removeItemHandler={removeItemHandler} onClose={toggleMenu} dataTest={'dimensions-panel-dimension-menu'} />\n                    </Popper>\n                </Layer>}\n            <DialogManager />\n        </div>;\n};\nDimensions.propTypes = {\n  assignedCategoriesItemHandler: PropTypes.func,\n  axisItemHandler: PropTypes.func,\n  getCurrentAxisId: PropTypes.func,\n  itemsByDimension: PropTypes.object,\n  layoutHasAssignedCategories: PropTypes.bool,\n  removeItemHandler: PropTypes.func,\n  ui: PropTypes.object,\n  onDimensionClick: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  ui: fromReducers.fromUi.sGetUi(state),\n  dimensions: fromReducers.fromDimensions.sGetDimensions(state),\n  layout: fromReducers.fromUi.sGetUiLayout(state),\n  itemsByDimension: fromReducers.fromUi.sGetUiItems(state),\n  layoutHasAssignedCategories: fromReducers.fromUi.sLayoutHasAssignedCategories(state),\n  getCurrentAxisId: dimensionId => fromReducers.fromUi.sGetAxisIdByDimensionId(state, dimensionId)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  axisItemHandler: ({\n    dimensionId,\n    axisId,\n    numberOfDimensionItems,\n    requireItems,\n    isDimensionInLayout\n  }) => {\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }));\n\n    if (numberOfDimensionItems === 0 && requireItems && !isDimensionInLayout) {\n      dispatch(acSetUiActiveModalDialog(dimensionId));\n    }\n  },\n  removeItemHandler: dimensionId => {\n    dispatch(acRemoveUiLayoutDimensions(dimensionId));\n  },\n  assignedCategoriesItemHandler: (layoutHasAssignedCategories, axisId) => {\n    dispatch(layoutHasAssignedCategories ? acRemoveUiLayoutDimensions(DIMENSION_ID_ASSIGNED_CATEGORIES) : acAddUiLayoutDimensions({\n      [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        axisId\n      }\n    }));\n  },\n  onDimensionClick: id => dispatch(acSetUiActiveModalDialog(id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dimensions);","export default {\n  wrapper: {\n    position: 'relative',\n    width: '380px'\n  },\n  container: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%'\n  }\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport InterpretationsComponent from '@dhis2/d2-ui-interpretations';\nimport { sGetUiInterpretation } from '../../reducers/ui';\nimport { acSetUiInterpretation, acClearUiInterpretation } from '../../actions/ui';\nimport history from '../../modules/history';\nimport styles from './styles/Interpretations.style';\nexport class Interpretations extends Component {\n  onInterpretationChange = interpretation => {\n    if (interpretation) {\n      const interpretationUrl = `/${this.props.id}/interpretation/${interpretation.id}`; // this covers the case when the URL contains already an interpretation id,\n      // the Interpretations component loads it and fires this callback passing the interpretation\n      // object, the URL is not changing in this case.\n      // the other scenario is when the URL changes because of a click inside the Interpretations component\n\n      if (history.location.pathname !== interpretationUrl) {\n        history.push(interpretationUrl);\n        this.props.acSetUiInterpretation({\n          id: interpretation.id,\n          created: interpretation.created\n        });\n      }\n    } else {\n      history.push(`/${this.props.id}`);\n    }\n  };\n\n  render() {\n    const {\n      type,\n      id,\n      interpretationId\n    } = this.props;\n    return id ? <div style={styles.wrapper}>\n                <div style={styles.container}>\n                    <InterpretationsComponent d2={this.context.d2} type={type} id={id} currentInterpretationId={interpretationId} onCurrentInterpretationChange={this.onInterpretationChange} />\n                </div>\n            </div> : null;\n  }\n\n}\nInterpretations.defaultProps = {\n  type: 'chart'\n};\nInterpretations.propTypes = {\n  acSetUiInterpretation: PropTypes.func,\n  id: PropTypes.string,\n  interpretationId: PropTypes.string,\n  type: PropTypes.string\n};\nInterpretations.contextTypes = {\n  d2: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  interpretationId: sGetUiInterpretation(state).id || null\n});\n\nexport default connect(mapStateToProps, {\n  acSetUiInterpretation,\n  acClearUiInterpretation\n})(Interpretations);","export default {\n  chartCanvas: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-start',\n    height: '100%'\n  },\n  loadingCover: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    left: 0,\n    top: 0,\n    zIndex: 100,\n    background: '#ffffffab'\n  }\n};","const legendSetsQuery = {\n    resource: 'legendSets',\n    params: ({ ids }) => ({\n        fields:\n            'id,displayName~rename(name),legends[id,displayName~rename(name),startValue,endValue,color]',\n        filter: `id:in:[${ids.join(',')}]`,\n    }),\n}\n\nexport const apiFetchLegendSets = async (dataEngine, ids) => {\n    const legendSetsData = await dataEngine.query(\n        { legendSets: legendSetsQuery },\n        {\n            variables: { ids },\n        }\n    )\n\n    return legendSetsData.legendSets.legendSets\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst ArrowUpwardIcon = ({ style = { width: 18, height: 18 } }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style={style}>\n        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n        <path\n            d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"\n            fill=\"black\"\n        />\n    </svg>\n)\n\nArrowUpwardIcon.propTypes = {\n    style: PropTypes.object,\n}\n\nexport default ArrowUpwardIcon\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst ArrowDownwardIcon = ({ style = { width: 18, height: 18 } }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style={style}>\n        <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n        <path\n            d=\"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\"\n            fill=\"black\"\n        />\n    </svg>\n)\n\nArrowDownwardIcon.propTypes = {\n    style: PropTypes.object,\n}\n\nexport default ArrowDownwardIcon\n","import React, { useEffect, useState, useCallback } from 'react'\nimport PropTypes from 'prop-types'\n\nimport i18n from '@dhis2/d2-i18n'\nimport { useDataEngine } from '@dhis2/app-runtime'\nimport { Divider, FlyoutMenu, MenuItem } from '@dhis2/ui'\n\nimport ArrowUpwardIcon from './assets/ArrowUpwardIcon'\nimport ArrowDownwardIcon from './assets/ArrowDownwardIcon'\n\nimport { apiFetchOrganisationUnit } from '@dhis2/analytics'\n\nexport const ContextualMenu = ({ config, ouLevels, onClick }) => {\n    const engine = useDataEngine()\n    const [ouData, setOuData] = useState(undefined)\n    const [subLevelData, setSubLevelData] = useState(undefined)\n\n    const lookupLevel = levelId => ouLevels.find(item => item.level === levelId)\n\n    const doFetchOuData = useCallback(\n        async ouId => {\n            const orgUnit = await apiFetchOrganisationUnit(engine, ouId)\n\n            return orgUnit\n        },\n        [engine]\n    )\n\n    useEffect(() => {\n        setOuData(null)\n\n        const doFetch = async () => {\n            const orgUnit = await doFetchOuData(config.ouId)\n\n            setOuData(orgUnit)\n        }\n\n        if (config.ouId) {\n            doFetch()\n        }\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [config])\n\n    useEffect(() => {\n        setSubLevelData(null)\n\n        if (ouData?.children.length) {\n            const levelData = lookupLevel(ouData.children[0].level)\n\n            if (levelData) {\n                setSubLevelData(levelData)\n            }\n        }\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [ouData])\n\n    const menuItemStyle = {\n        display: 'inline-block',\n        minWidth: 200,\n    }\n\n    return (\n        <FlyoutMenu>\n            {ouData && (\n                <MenuItem dense label={i18n.t('Change org unit')}>\n                    {ouData?.parent && (\n                        <>\n                            <MenuItem\n                                dense\n                                icon={<ArrowUpwardIcon />}\n                                label={\n                                    <span style={menuItemStyle}>\n                                        {ouData.parent.name}\n                                    </span>\n                                }\n                                onClick={() =>\n                                    onClick({\n                                        ou: { id: ouData.parent.id },\n                                    })\n                                }\n                            />\n                            {subLevelData && <Divider />}\n                        </>\n                    )}\n                    {subLevelData && (\n                        <MenuItem\n                            dense\n                            icon={<ArrowDownwardIcon />}\n                            label={\n                                <span style={menuItemStyle}>\n                                    {i18n.t('{{level}} level in {{orgunit}}', {\n                                        level: subLevelData.name,\n                                        orgunit: ouData.name,\n                                    })}\n                                </span>\n                            }\n                            onClick={() =>\n                                onClick({\n                                    ou: {\n                                        id: ouData.id,\n                                        path: ouData.path,\n                                        level: subLevelData.id,\n                                    },\n                                })\n                            }\n                        />\n                    )}\n                </MenuItem>\n            )}\n        </FlyoutMenu>\n    )\n}\n\nContextualMenu.propTypes = {\n    config: PropTypes.object,\n    ouLevels: PropTypes.array,\n    onClick: PropTypes.func,\n}\n\nexport default ContextualMenu\n","import React, { useRef, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { isSingleValue, createVisualization } from '@dhis2/analytics'\n\nconst ChartPlugin = ({\n    visualization,\n    responses,\n    extraOptions,\n    legendSets,\n    id: renderCounter,\n    style,\n    onChartGenerated,\n    animation: defaultAnimation,\n}) => {\n    const canvasRef = useRef(undefined)\n\n    const renderVisualization = useCallback(\n        animation => {\n            const visualizationConfig = createVisualization(\n                responses,\n                visualization,\n                canvasRef.current,\n                {\n                    ...extraOptions,\n                    animation,\n                    legendSets,\n                },\n                undefined,\n                undefined,\n                isSingleValue(visualization.type) ? 'dhis' : 'highcharts' // output format\n            )\n\n            if (isSingleValue(visualization.type)) {\n                onChartGenerated(visualizationConfig.visualization)\n            } else {\n                onChartGenerated(\n                    visualizationConfig.visualization.getSVGForExport({\n                        sourceHeight: 768,\n                        sourceWidth: 1024,\n                    })\n                )\n            }\n        },\n        [\n            canvasRef,\n            visualization,\n            onChartGenerated,\n            responses,\n            extraOptions,\n            legendSets,\n        ]\n    )\n\n    useEffect(() => {\n        renderVisualization(defaultAnimation)\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [visualization, responses, extraOptions])\n\n    useEffect(() => {\n        renderCounter !== null && renderVisualization(0)\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [renderCounter, style])\n\n    return <div ref={canvasRef} style={style} />\n}\n\nChartPlugin.defaultProps = {\n    visualization: {},\n    filters: {},\n    style: {},\n    animation: 200,\n    onChartGenerated: Function.prototype,\n}\n\nChartPlugin.propTypes = {\n    extraOptions: PropTypes.object.isRequired,\n    legendSets: PropTypes.arrayOf(PropTypes.object).isRequired,\n    responses: PropTypes.arrayOf(PropTypes.object).isRequired,\n    visualization: PropTypes.object.isRequired,\n    animation: PropTypes.number,\n    id: PropTypes.number,\n    style: PropTypes.object,\n    onChartGenerated: PropTypes.func,\n}\n\nexport default ChartPlugin\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { PivotTable } from '@dhis2/analytics'\n\nconst PivotPlugin = ({\n    responses,\n    legendSets,\n    visualization,\n    style,\n    id: renderCounter,\n    onToggleContextualMenu,\n}) => {\n    return (\n        <div style={style}>\n            <PivotTable\n                visualization={visualization}\n                data={responses[0].response}\n                legendSets={legendSets}\n                renderCounter={renderCounter}\n                onToggleContextualMenu={onToggleContextualMenu}\n            />\n        </div>\n    )\n}\n\nPivotPlugin.defaultProps = {\n    style: {},\n}\n\nPivotPlugin.propTypes = {\n    legendSets: PropTypes.arrayOf(PropTypes.object).isRequired,\n    responses: PropTypes.arrayOf(PropTypes.object).isRequired,\n    visualization: PropTypes.object.isRequired,\n    id: PropTypes.number,\n    style: PropTypes.object,\n    onToggleContextualMenu: PropTypes.func,\n}\n\nexport default PivotPlugin\n","import { getRelativePeriodsOptionsById, WEEKS, DAYS } from '@dhis2/analytics'\n\nexport const computeYoYMatrix = (responses, relativePeriodTypeUsed) => {\n    const periodGroups = responses.reduce((list, res) => {\n        list.push(res.metaData.dimensions.pe)\n\n        return list\n    }, [])\n\n    if (relativePeriodTypeUsed === DAYS) {\n        periodGroups.sort((a, b) => a[0].substr(-2) - b[0].substr(-2))\n\n        const periodKeyAxisIndexMatrix = periodGroups\n            .shift()\n            .map(periodId => [periodId])\n\n        periodGroups.forEach(periodGroup => {\n            periodGroup.forEach(periodId => {\n                const matchGroups = periodId.match(/(\\d{4})(\\d{2})(\\d{2})/)\n\n                const month = matchGroups[2]\n                const day = matchGroups[3]\n\n                // find same month/day in 1st \"serie\"\n                const xAxisIndexForPeriod = periodKeyAxisIndexMatrix.findIndex(\n                    periodKeys => periodKeys[0].substr(4) === `${month}${day}`\n                )\n\n                if (xAxisIndexForPeriod !== -1) {\n                    periodKeyAxisIndexMatrix[xAxisIndexForPeriod].push(periodId)\n                } else if (month === '02' && day === '29') {\n                    // February 29 special case\n                    // find index for february 28\n                    const indexForFeb28 = periodKeyAxisIndexMatrix.findIndex(\n                        periodKeys =>\n                            periodKeys.findIndex(periodKey =>\n                                /0228$/.test(periodKey)\n                            ) !== -1\n                    )\n\n                    if (indexForFeb28 !== -1) {\n                        periodKeyAxisIndexMatrix.splice(indexForFeb28 + 1, 0, [\n                            periodId,\n                        ])\n                    } else {\n                        periodKeyAxisIndexMatrix.push([periodId])\n                    }\n                } else {\n                    periodKeyAxisIndexMatrix.push([periodId])\n                }\n            })\n        })\n\n        return periodKeyAxisIndexMatrix\n    } else if (relativePeriodTypeUsed === WEEKS) {\n        periodGroups.sort((a, b) => b[0].split('W')[1] - a[0].split('W')[1])\n\n        const periodKeyAxisIndexMatrix = periodGroups\n            .shift()\n            .map(periodId => [periodId])\n\n        periodGroups.forEach(periodGroup => {\n            periodGroup.forEach(periodId => {\n                const [year, week] = periodId.split('W')\n\n                // find week number in 1st \"serie\"\n                const xAxisIndexForPeriod = periodKeyAxisIndexMatrix.findIndex(\n                    periodKeys => periodKeys[0].split('W')[1] === week\n                )\n\n                if (xAxisIndexForPeriod !== -1) {\n                    periodKeyAxisIndexMatrix[xAxisIndexForPeriod].push(periodId)\n                } else if (week === '1') {\n                    const indexForW2 = periodKeyAxisIndexMatrix.findIndex(\n                        periodKeys =>\n                            periodKeys.findIndex(periodKey =>\n                                /W2$/.test(periodKey)\n                            ) !== -1\n                    )\n\n                    if (indexForW2 !== -1) {\n                        periodKeyAxisIndexMatrix[indexForW2].push(periodId)\n                    } else {\n                        periodKeyAxisIndexMatrix.push([periodId])\n                    }\n                } else {\n                    // find the right spot considering also the year\n                    const indexForPrevWeekInYear = periodKeyAxisIndexMatrix.findIndex(\n                        periodKeys =>\n                            periodKeys.findIndex(\n                                periodKey => periodKey === `${year}W${week - 1}`\n                            ) !== -1\n                    )\n\n                    periodKeyAxisIndexMatrix.splice(\n                        indexForPrevWeekInYear + 1,\n                        0,\n                        [periodId]\n                    )\n                }\n            })\n        })\n\n        return periodKeyAxisIndexMatrix\n    } else {\n        const periodKeyAxisIndexMatrix = periodGroups.reduce(\n            (list, periodGroup) => {\n                periodGroup.forEach((periodId, index) => {\n                    list[index].push(periodId)\n                })\n\n                return list\n            },\n            Array.from({ length: periodGroups[0].length }, () => [])\n        )\n\n        return periodKeyAxisIndexMatrix\n    }\n}\n\nexport const computeGenericPeriodNamesFromMatrix = (\n    periodKeyAxisIndexMatrix,\n    relativePeriodTypeUsed\n) => {\n    switch (relativePeriodTypeUsed) {\n        case WEEKS:\n            return (\n                periodKeyAxisIndexMatrix\n                    // remove year, return \"Wnn\"\n                    .map(periodKeys => periodKeys[0].substr(4))\n                    .flat()\n            )\n        case DAYS:\n            return periodKeyAxisIndexMatrix\n                .map(periodKeys =>\n                    // remove year, return \"dd-mm\"\n                    periodKeys[0].substr(4).replace(/(\\d{2})(\\d{2})/, '$2-$1')\n                )\n                .flat()\n    }\n}\n\nexport const computeGenericPeriodNames = responses => {\n    const xAxisRes = responses.reduce((out, res) => {\n        if (out.metaData) {\n            if (\n                res.metaData.dimensions.pe.length >\n                out.metaData.dimensions.pe.length\n            ) {\n                out = res\n            }\n        } else {\n            out = res\n        }\n\n        return out\n    }, {})\n\n    const metadata = xAxisRes.metaData\n\n    return metadata.dimensions.pe.reduce((genericPeriodNames, periodId) => {\n        const name = metadata.items[periodId].name\n\n        // until the day the backend will support this in the API:\n        // trim off the trailing year in the period name\n        // english names should all have the year at the end of the string\n        genericPeriodNames.push(name.replace(/\\s+\\d{4}$/, ''))\n\n        return genericPeriodNames\n    }, [])\n}\n\nexport const getRelativePeriodTypeUsed = periodItems => {\n    if (\n        getRelativePeriodsOptionsById(WEEKS)\n            .getPeriods()\n            .find(period => period.id === periodItems[0].id)\n    ) {\n        return WEEKS\n    } else if (\n        getRelativePeriodsOptionsById(DAYS)\n            .getPeriods()\n            .find(period => period.id === periodItems[0].id)\n    ) {\n        return DAYS\n    }\n}\n","import {\n    Analytics,\n    VIS_TYPE_PIVOT_TABLE,\n    layoutGetDimensionItems,\n    DIMENSION_ID_PERIOD,\n    DAYS,\n    WEEKS,\n} from '@dhis2/analytics'\n\nimport { getRelativePeriodTypeUsed } from '../modules/analytics'\n\nconst periodId = DIMENSION_ID_PERIOD\n\nexport const apiFetchAnalytics = async (dataEngine, visualization, options) => {\n    const analyticsEngine = Analytics.getAnalytics(dataEngine)\n\n    const req = new analyticsEngine.request()\n        .fromVisualization(visualization)\n        .withParameters(options)\n        .withIncludeNumDen(visualization.type === VIS_TYPE_PIVOT_TABLE)\n\n    const rawResponse = await analyticsEngine.aggregate.get(req)\n\n    return [new analyticsEngine.response(rawResponse)]\n}\n\nexport const apiFetchAnalyticsForYearOverYear = async (\n    dataEngine,\n    visualization,\n    options\n) => {\n    const analyticsEngine = Analytics.getAnalytics(dataEngine)\n\n    let yearlySeriesReq = new analyticsEngine.request()\n        .addPeriodDimension(visualization.yearlySeries)\n        .withSkipData(true)\n        .withSkipMeta(false)\n        .withIncludeMetadataDetails(true)\n\n    if (options.relativePeriodDate) {\n        yearlySeriesReq = yearlySeriesReq.withRelativePeriodDate(\n            options.relativePeriodDate\n        )\n    }\n\n    const yearlySeriesRes = await analyticsEngine.aggregate.fetch(\n        yearlySeriesReq\n    )\n\n    const periodDates = []\n    const yearlySeriesLabels = []\n\n    const now = new Date()\n    const currentDay = ('' + now.getDate()).padStart(2, 0)\n    const currentMonth = ('' + (now.getMonth() + 1)).padStart(2, 0)\n\n    const periodItems = layoutGetDimensionItems(visualization, periodId)\n\n    // relative week period in use\n    if (getRelativePeriodTypeUsed(periodItems) === WEEKS) {\n        const relativeWeeksData = await prepareRequestsForRelativeWeeks({\n            analyticsEngine,\n            visualization,\n            options,\n            yearlySeriesRes,\n            currentMonth,\n            currentDay,\n        })\n\n        periodDates.push(...relativeWeeksData.periodDates)\n        yearlySeriesLabels.push(...relativeWeeksData.yearlySeriesLabels)\n    } else if (getRelativePeriodTypeUsed(periodItems) === DAYS) {\n        const relativeDaysData = prepareRequestsForRelativeDays({\n            yearlySeriesRes,\n            currentMonth,\n            currentDay,\n        })\n\n        periodDates.push(...relativeDaysData.periodDates)\n        yearlySeriesLabels.push(...relativeDaysData.yearlySeriesLabels)\n    } else {\n        yearlySeriesRes.metaData.dimensions[periodId]\n            .sort()\n            .reverse()\n            .forEach(year => {\n                yearlySeriesLabels.push(\n                    yearlySeriesRes.metaData.items[year].name\n                )\n\n                periodDates.push(`${year}-${currentMonth}-${currentDay}`)\n            })\n    }\n\n    // request analytics data/metaData for each year in the serie with its own specific relativePeriodDate\n    const requests = periodDates.reduce((list, periodDate) => {\n        const req = new analyticsEngine.request()\n            .fromVisualization(visualization)\n            .withParameters(options)\n            .withRelativePeriodDate(periodDate)\n\n        list.push(analyticsEngine.aggregate.get(req))\n\n        return list\n    }, [])\n\n    return Promise.all(requests).then(responses => ({\n        responses: responses.map(res => new analyticsEngine.response(res)),\n        yearlySeriesLabels,\n    }))\n}\n\nconst prepareRequestsForRelativeDays = ({\n    yearlySeriesRes,\n    currentMonth,\n    currentDay,\n}) => {\n    const yearlySeriesLabels = []\n    const periodDates = []\n\n    const yearlySeriesIds = yearlySeriesRes.metaData.dimensions[periodId]\n        .slice()\n        .sort()\n        .reverse()\n\n    const isFeb29 = currentMonth === '02' && currentDay === '29'\n\n    yearlySeriesIds.forEach(year => {\n        yearlySeriesLabels.push(yearlySeriesRes.metaData.items[year].name)\n\n        const isLeapYear = new Date(year, 1, 29).getDate() === 29\n\n        // 1. check if current date is feb 29\n        // 2. check if current year is NOT a leap year\n        if (isFeb29 && !isLeapYear) {\n            // 3. use feb 28 for that year as relativePeriodDate\n            periodDates.push(`${year}-02-28`)\n        } else {\n            periodDates.push(`${year}-${currentMonth}-${currentDay}`)\n        }\n    })\n\n    return { yearlySeriesLabels, periodDates }\n}\n\n// special handling for when a relative weeks period is selected as category\n// this takes care of data alignment issues between different years when one of the years have 53 weeks\n// and more in general when the returned weeks for different years are not exactly the same range\n// and data points must be \"shifted\" in the right position\n// See https://jira.dhis2.org/browse/DHIS2-9729\nconst prepareRequestsForRelativeWeeks = async ({\n    analyticsEngine,\n    visualization,\n    options,\n    yearlySeriesRes,\n    currentMonth,\n    currentDay,\n}) => {\n    const yearlySeriesLabels = []\n    const periodDates = []\n\n    const yearlySeriesIds = yearlySeriesRes.metaData.dimensions[periodId]\n        .slice()\n        .sort()\n        .reverse()\n\n    // 1. request metadata of last year of the serie (with relativePeriodDate === today)\n    // 2. extract the last week number of the LAST_x_WEEKS period\n    // 3. request metadata for the same week number for each one of the other years of the serie\n    // 3. compute relativePeriodDate for each other year of the serie:\n    //    this is done by adding 1 day to the endDate of the week period obtained above\n    // 4. request analytics data/metaData for each year in the serie with its own specific relativePeriodDate\n    const referencePeriodYear = yearlySeriesIds.shift()\n\n    yearlySeriesLabels.push(\n        yearlySeriesRes.metaData.items[referencePeriodYear].name\n    )\n\n    periodDates.push(`${referencePeriodYear}-${currentMonth}-${currentDay}`)\n\n    // 1. request metadata of last year of the serie (with relativePeriodDate === today)\n    const referencePeriodReq = new analyticsEngine.request()\n        .fromVisualization(visualization)\n        .withParameters(options)\n        .withRelativePeriodDate(\n            `${referencePeriodYear}-${currentMonth}-${currentDay}`\n        )\n        .withSkipData(true)\n        .withSkipMeta(false)\n\n    const referencePeriodRes = await analyticsEngine.aggregate.fetch(\n        referencePeriodReq\n    )\n\n    // 2. extract the last week number of the LAST_x_WEEKS period\n    //    special handling for the week 53 case as not all years have 53 weeks\n    const referenceWeekPeriod = referencePeriodRes.metaData.dimensions[\n        periodId\n    ].pop()\n    const [referenceWeekYear, referenceWeekNumber] = referenceWeekPeriod.split(\n        'W'\n    )\n    const referenceWeekYearDelta = referencePeriodYear - referenceWeekYear\n\n    const weekPeriods = yearlySeriesIds.reduce((periods, year) => {\n        yearlySeriesLabels.push(yearlySeriesRes.metaData.items[year].name)\n\n        periods.push(`${year - referenceWeekYearDelta}W${referenceWeekNumber}`)\n\n        // edge case for week 53, not all years have it, so request also week 52\n        if (referenceWeekNumber === '53') {\n            periods.push(`${year - referenceWeekYearDelta}W52`)\n        }\n\n        return periods\n    }, [])\n\n    if (weekPeriods.length) {\n        // 3. request metadata for the same week number for each one of the other years of the serie\n        const weekPeriodsReq = new analyticsEngine.request()\n            .addPeriodDimension(weekPeriods)\n            .withSkipData(true)\n            .withSkipMeta(false)\n            .withIncludeMetadataDetails(true)\n\n        const weekPeriodsRes = await analyticsEngine.aggregate.fetch(\n            weekPeriodsReq\n        )\n\n        // 3. compute relativePeriodDate for each other year of the serie:\n        //    this is done by adding 1 day to the endDate of the week period obtained above\n        const seenYears = []\n\n        weekPeriodsRes.metaData.dimensions[periodId]\n            .sort()\n            .reverse()\n            .forEach(period => {\n                const year = period.substr(0, 4)\n\n                // make sure we only take W53 or W52 whichever is available\n                if (!seenYears.includes(year)) {\n                    const periodDate = new Date(\n                        weekPeriodsRes.metaData.items[period].endDate\n                    )\n                    periodDate.setDate(periodDate.getDate() + 1)\n\n                    periodDates.push(\n                        `${periodDate.getFullYear()}-${(\n                            '' +\n                            (periodDate.getMonth() + 1)\n                        ).padStart(2, 0)}-${(\n                            '' + periodDate.getDate()\n                        ).padStart(2, 0)}`\n                    )\n\n                    seenYears.unshift(year)\n                }\n            })\n    }\n\n    return { yearlySeriesLabels, periodDates }\n}\n","import pick from 'lodash-es/pick'\n\nimport { COLOR_SET_DEFAULT } from '@dhis2/analytics'\n\nexport const options = {\n    axes: { requestable: false, savable: true, defaultValue: [] },\n    colorSet: {\n        defaultValue: COLOR_SET_DEFAULT,\n        requestable: false,\n        savable: true,\n    },\n    cumulativeValues: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyRowItems: {\n        defaultValue: 'NONE',\n        requestable: false,\n        savable: true,\n    },\n    legend: { defaultValue: {}, requestable: false, savable: true },\n    noSpaceBetweenColumns: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    percentStackedValues: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    regressionType: { defaultValue: 'NONE', requestable: false, savable: true },\n    showData: { defaultValue: true, requestable: false, savable: true },\n    aggregationType: {\n        defaultValue: 'DEFAULT',\n        requestable: true,\n        savable: true,\n    },\n    completedOnly: { defaultValue: false, requestable: true, savable: true },\n    hideSubtitle: { defaultValue: false, requestable: false, savable: true },\n    hideTitle: { defaultValue: false, requestable: false, savable: true },\n    sortOrder: { defaultValue: '0', requestable: false, savable: true },\n    subtitle: { defaultValue: undefined, requestable: false, savable: true },\n    title: { defaultValue: undefined, requestable: false, savable: true },\n    series: { defaultValue: [], requestable: false, savable: true },\n    fontStyle: {\n        defaultValue: {},\n        requestable: false,\n        savable: true,\n    },\n\n    // only for PT\n    colTotals: { defaultValue: false, requestable: false, savable: true },\n    colSubTotals: { defaultValue: false, requestable: false, savable: true },\n    rowTotals: { defaultValue: false, requestable: false, savable: true },\n    rowSubTotals: { defaultValue: false, requestable: false, savable: true },\n    showDimensionLabels: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyColumns: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyRows: { defaultValue: false, requestable: false, savable: true },\n    skipRounding: { defaultValue: false, requestable: true, savable: true },\n    numberType: { defaultValue: 'VALUE', requestable: false, savable: true },\n    showHierarchy: { defaultValue: false, requestable: true, savable: true },\n    legendSet: { defaultValue: undefined, requestable: false, savable: true },\n    legendDisplayStrategy: {\n        defaultValue: 'FIXED',\n        requestable: false,\n        savable: true,\n    },\n    legendDisplayStyle: {\n        defaultValue: 'FILL',\n        requestable: false,\n        savable: true,\n    },\n    displayDensity: {\n        defaultValue: 'NORMAL',\n        requestable: false,\n        savable: true,\n    },\n    fontSize: { defaultValue: 'NORMAL', requestable: false, savable: true },\n    digitGroupSeparator: {\n        defaultValue: 'SPACE',\n        requestable: false,\n        savable: true,\n    },\n    approvalLevel: {\n        defaultValue: undefined,\n        requestable: true,\n        savable: false,\n    },\n\n    // these are stored in the AO under reportingParams\n    reportingPeriod: { defaultValue: false, requestable: false, savable: true },\n    organisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    parentOrganisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    // not exposed in UI\n    grandParentOrganisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    regression: { defaultValue: false, requestable: false, savable: true },\n    cumulative: { defaultValue: false, requestable: false, savable: true },\n    measureCriteria: {\n        defaultValue: undefined,\n        requestable: true,\n        savable: true,\n    },\n    topLimit: { defaultValue: '0', requestable: false, savable: true },\n}\n\nexport default options\n\nexport const getOptionsForUi = () => {\n    return Object.entries({ ...options }).reduce((map, [option, props]) => {\n        map[option] = props.defaultValue\n\n        return map\n    }, {})\n}\n\nexport const getOptionsForRequest = () => {\n    return Object.entries(options).filter(\n        entry => entry[1].requestable // entry = [option, props]\n    )\n}\n\nexport const getOptionsFromVisualization = visualization => {\n    const optionsFromVisualization = {\n        ...getOptionsForUi(),\n        ...pick(visualization, Object.keys(options)),\n    }\n\n    // nested options under reportingParams\n    if (visualization.reportingParams) {\n        optionsFromVisualization.organisationUnit =\n            visualization.reportingParams.organisationUnit\n        optionsFromVisualization.reportingPeriod =\n            visualization.reportingParams.reportingPeriod\n        optionsFromVisualization.parentOrganisationUnit =\n            visualization.reportingParams.parentOrganisationUnit\n        optionsFromVisualization.grandParentOrganisationUnit =\n            visualization.reportingParams.grandParentOrganisationUnit\n    }\n\n    // cast option values from Number for some options\n    ;['sortOrder', 'topLimit'].forEach(option => {\n        if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n            optionsFromVisualization[option] = String(visualization[option])\n        }\n    })\n\n    return optionsFromVisualization\n}\n","import { getOptionsForRequest } from './options'\n\nexport const getRequestOptions = (visualization, filters, userSettings) => {\n    const options = getOptionsForRequest().reduce((map, [option, props]) => {\n        // only add parameter if value !== default\n        if (\n            visualization[option] !== undefined &&\n            visualization[option] !== props.defaultValue\n        ) {\n            map[option] = visualization[option]\n        }\n\n        return map\n    }, {})\n\n    // interpretation filter\n    if (filters.relativePeriodDate) {\n        options.relativePeriodDate = filters.relativePeriodDate\n    }\n\n    if (userSettings?.displayProperty) {\n        switch (userSettings.displayProperty) {\n            case 'displayShortName':\n                options.displayProperty = 'SHORTNAME'\n                break\n            case 'displayName':\n                options.displayProperty = 'NAME'\n                break\n        }\n    }\n\n    // global filters\n    // userOrgUnit\n    if (filters.userOrgUnit && filters.userOrgUnit.length) {\n        const ouIds = filters.userOrgUnit.map(\n            ouPath => ouPath.split('/').slice(-1)[0]\n        )\n\n        options.userOrgUnit = ouIds.join(';')\n    }\n\n    return options\n}\n","import {\n    isYearOverYear,\n    DIMENSION_ID_PERIOD,\n    layoutGetDimensionItems,\n} from '@dhis2/analytics'\nimport {\n    apiFetchAnalyticsForYearOverYear,\n    apiFetchAnalytics,\n} from '../api/analytics'\nimport {\n    computeGenericPeriodNames,\n    computeYoYMatrix,\n    computeGenericPeriodNamesFromMatrix,\n    getRelativePeriodTypeUsed,\n} from './analytics'\nimport { getRequestOptions } from './getRequestOptions'\n\nexport const fetchData = async ({\n    dataEngine,\n    visualization,\n    filters,\n    forDashboard,\n    userSettings,\n}) => {\n    const options = getRequestOptions(visualization, filters, userSettings)\n\n    const extraOptions = {\n        dashboard: forDashboard,\n    }\n\n    if (isYearOverYear(visualization.type)) {\n        const {\n            responses,\n            yearlySeriesLabels,\n        } = await apiFetchAnalyticsForYearOverYear(\n            dataEngine,\n            visualization,\n            options\n        )\n\n        const peItems = layoutGetDimensionItems(\n            visualization,\n            DIMENSION_ID_PERIOD\n        )\n\n        const relativePeriodTypeUsed = getRelativePeriodTypeUsed(peItems)\n\n        const periodKeyAxisIndexMatrix = computeYoYMatrix(\n            responses,\n            relativePeriodTypeUsed\n        )\n        const periodKeyAxisIndexMap = periodKeyAxisIndexMatrix.reduce(\n            (map, periodKeys, index) => {\n                periodKeys.forEach(periodKey => (map[periodKey] = index))\n\n                return map\n            },\n            {}\n        )\n\n        const xAxisLabels = relativePeriodTypeUsed\n            ? computeGenericPeriodNamesFromMatrix(\n                  periodKeyAxisIndexMatrix,\n                  relativePeriodTypeUsed\n              )\n            : computeGenericPeriodNames(responses)\n\n        return {\n            responses,\n            extraOptions: {\n                ...extraOptions,\n                yearlySeries: yearlySeriesLabels,\n                xAxisLabels,\n                periodKeyAxisIndexMap,\n            },\n        }\n    }\n\n    return {\n        responses: await apiFetchAnalytics(dataEngine, visualization, options),\n        extraOptions,\n    }\n}\n","export default {\n    backdrop: {\n        position: 'fixed',\n        height: '100%',\n        width: '100%',\n        top: 0,\n        left: 0,\n        backgroundColor: 'transparent',\n    },\n}\n","import React, { useEffect, useState, useCallback } from 'react'\nimport { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\n\nimport { useDataEngine } from '@dhis2/app-runtime'\nimport { Popper } from '@dhis2/ui'\nimport {\n    VIS_TYPE_PIVOT_TABLE,\n    apiFetchOrganisationUnitLevels,\n} from '@dhis2/analytics'\n\nimport { apiFetchLegendSets } from './api/legendSets'\nimport ContextualMenu from './ContextualMenu'\nimport ChartPlugin from './ChartPlugin'\nimport PivotPlugin from './PivotPlugin'\nimport { fetchData } from './modules/fetchData'\n\nimport styles from './styles/VisualizationPlugin.style.js'\n\nconst LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM'\nconst LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED'\n\nexport const VisualizationPlugin = ({\n    visualization,\n    filters,\n    forDashboard,\n    userSettings,\n    onError,\n    onLoadingComplete,\n    onResponsesReceived,\n    onDrill,\n    ...props\n}) => {\n    const engine = useDataEngine()\n    const [ouLevels, setOuLevels] = useState(undefined)\n    const [fetchResult, setFetchResult] = useState(null)\n    const [contextualMenuRef, setContextualMenuRef] = useState(undefined)\n    const [contextualMenuConfig, setContextualMenuConfig] = useState({})\n\n    const onToggleContextualMenu = (ref, data) => {\n        setContextualMenuRef(ref)\n        setContextualMenuConfig(data)\n    }\n\n    const closeContextualMenu = () => setContextualMenuRef(undefined)\n\n    const onContextualMenuItemClick = args => {\n        closeContextualMenu()\n\n        onDrill(args)\n    }\n\n    const doFetchData = useCallback(async () => {\n        const result = await fetchData({\n            dataEngine: engine,\n            visualization,\n            filters,\n            forDashboard,\n            userSettings,\n        })\n\n        if (result.responses.length) {\n            onResponsesReceived(result.responses)\n        }\n\n        return result\n    }, [\n        engine,\n        filters,\n        forDashboard,\n        userSettings,\n        onResponsesReceived,\n        visualization,\n    ])\n\n    const doFetchLegendSets = useCallback(\n        async legendSetIds => {\n            if (!legendSetIds.length) {\n                return []\n            }\n\n            const legendSets = await apiFetchLegendSets(engine, legendSetIds)\n\n            return legendSets\n        },\n        [engine]\n    )\n\n    useEffect(() => {\n        const doFetchOuLevels = async () => {\n            const ouLevels = await apiFetchOrganisationUnitLevels(engine)\n\n            setOuLevels(ouLevels)\n        }\n\n        doFetchOuLevels()\n    }, [engine])\n\n    useEffect(() => {\n        setFetchResult(null)\n\n        const doFetchAll = async () => {\n            const { responses, extraOptions } = await doFetchData(\n                visualization,\n                filters,\n                forDashboard\n            )\n\n            const legendSetIds = []\n\n            switch (visualization.legendDisplayStrategy) {\n                case LEGEND_DISPLAY_STRATEGY_FIXED:\n                    if (visualization.legendSet && visualization.legendSet.id) {\n                        legendSetIds.push(visualization.legendSet.id)\n                    }\n                    break\n                case LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM: {\n                    // parse responses to extract legendSet ids from metaData\n                    // multiple responses are only for YOY which does not support legends\n                    // safe to use only the 1st\n                    // dx dimensions might not be present, the empty array covers that case\n                    const dxIds = responses[0].metaData.dimensions.dx || []\n\n                    dxIds.forEach(dxId => {\n                        const legendSetId =\n                            responses[0].metaData.items[dxId].legendSet\n\n                        if (legendSetId) {\n                            legendSetIds.push(legendSetId)\n                        }\n                    })\n\n                    break\n                }\n            }\n\n            const legendSets = await doFetchLegendSets(legendSetIds)\n\n            setFetchResult({\n                visualization,\n                legendSets,\n                responses,\n                extraOptions,\n            })\n            onLoadingComplete()\n        }\n\n        doFetchAll().catch(error => {\n            onError(error)\n        })\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [visualization, filters, forDashboard])\n\n    if (!fetchResult) {\n        return null\n    }\n\n    const contextualMenuRect =\n        contextualMenuRef &&\n        contextualMenuRef.current &&\n        contextualMenuRef.current.getBoundingClientRect()\n\n    const virtualContextualMenuElement = contextualMenuRect\n        ? { getBoundingClientRect: () => contextualMenuRect }\n        : null\n\n    return (\n        <>\n            {!fetchResult.visualization.type ||\n            fetchResult.visualization.type === VIS_TYPE_PIVOT_TABLE ? (\n                <PivotPlugin\n                    visualization={fetchResult.visualization}\n                    responses={fetchResult.responses}\n                    legendSets={fetchResult.legendSets}\n                    onToggleContextualMenu={\n                        onDrill ? onToggleContextualMenu : undefined\n                    }\n                    {...props}\n                />\n            ) : (\n                <ChartPlugin\n                    visualization={fetchResult.visualization}\n                    responses={fetchResult.responses}\n                    extraOptions={fetchResult.extraOptions}\n                    legendSets={fetchResult.legendSets}\n                    {...props}\n                />\n            )}\n            {contextualMenuRect &&\n                createPortal(\n                    <div onClick={closeContextualMenu} style={styles.backdrop}>\n                        <Popper\n                            reference={virtualContextualMenuElement}\n                            placement=\"right\"\n                        >\n                            <ContextualMenu\n                                config={contextualMenuConfig}\n                                ouLevels={ouLevels}\n                                onClick={onContextualMenuItemClick}\n                            />\n                        </Popper>\n                    </div>,\n                    document.body\n                )}\n        </>\n    )\n}\n\nVisualizationPlugin.defaultProps = {\n    filters: {},\n    forDashboard: false,\n    onError: Function.prototype,\n    onLoadingComplete: Function.prototype,\n    onResponsesReceived: Function.prototype,\n    visualization: {},\n    userSettings: {},\n}\nVisualizationPlugin.propTypes = {\n    visualization: PropTypes.object.isRequired,\n    filters: PropTypes.object,\n    forDashboard: PropTypes.bool,\n    userSettings: PropTypes.object,\n    onDrill: PropTypes.func,\n    onError: PropTypes.func,\n    onLoadingComplete: PropTypes.func,\n    onResponsesReceived: PropTypes.func,\n}\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { visTypeIcons } from '@dhis2/analytics';\nimport styles from './styles/StartScreen.module.css';\nimport { sGetLoadError } from '../../reducers/loader';\nimport { apiFetchMostViewedVisualizations } from '../../api/mostViewedVisualizations';\nimport history from '../../modules/history';\nimport { VisualizationError, genericErrorTitle } from '../../modules/error';\nimport { GenericError } from '../../assets/ErrorIcons';\nimport { apiFetchVisualizations } from '../../api/visualization';\n\nconst StartScreen = ({\n  error\n}) => {\n  const [mostViewedVisualizations, setMostViewedVisualizations] = useState([]);\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function populateMostViewedVisualizations(engine) {\n      const mostViewedVisualizationsResult = await apiFetchMostViewedVisualizations(engine, 6);\n      const visualizations = mostViewedVisualizationsResult.visualization;\n\n      if (visualizations && visualizations.length) {\n        const visualizationsResult = await apiFetchVisualizations(engine, visualizations.map(vis => vis.id));\n        const visualizationsWithType = visualizationsResult.visualization.visualizations;\n        const result = visualizations.map(vis => ({ ...visualizationsWithType.find(visWithType => visWithType.id === vis.id && visWithType),\n          ...vis\n        }));\n        setMostViewedVisualizations(result);\n      }\n    }\n\n    populateMostViewedVisualizations(engine);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const getContent = () => error ? getErrorContent() : <div data-test=\"start-screen\">\n                <div className={styles.section}>\n                    <h3 className={styles.title} data-test=\"start-screen-primary-section-title\">\n                        {i18n.t('Getting started')}\n                    </h3>\n                    <ul className={styles.guide}>\n                        <li className={styles.guideItem}>\n                            {i18n.t('All dimensions that you can use to build visualizations are shown in the left sidebar')}\n                        </li>\n                        <li className={styles.guideItem}>\n                            {i18n.t('Add dimensions to the layout above')}\n                        </li>\n                        <li className={styles.guideItem}>\n                            {i18n.t('Click a dimension to add or remove items')}\n                        </li>\n                    </ul>\n                </div>\n                {mostViewedVisualizations.length > 0 && <div className={styles.section}>\n                        <h3 className={styles.title} data-test=\"start-screen-secondary-section-title\">\n                            {i18n.t('Your most viewed charts and tables')}\n                        </h3>\n                        {mostViewedVisualizations.map((visualization, index) => <p key={index} className={styles.visualization} onClick={() => history.push(`/${visualization.id}`)} data-test=\"start-screen-most-viewed-list-item\">\n                                    <span className={styles.visIcon}>\n                                        {visTypeIcons[visualization.type]}\n                                    </span>\n                                    <span>{visualization.name}</span>\n                                </p>)}\n                    </div>}\n            </div>;\n\n  const getErrorContent = () => <div className={styles.errorContainer} data-test=\"start-screen-error-container\">\n            {error instanceof VisualizationError ? <>\n                    <div className={styles.errorIcon}>{error.icon()}</div>\n                    <p className={styles.errorTitle}>{error.title}</p>\n                    <p className={styles.errorDescription}>\n                        {error.description}\n                    </p>\n                </> : <>\n                    <div className={styles.errorIcon}>{GenericError()}</div>\n                    <p className={styles.errorTitle}>{genericErrorTitle}</p>\n                    <p className={styles.errorDescription}>\n                        {error.message || error}\n                    </p>\n                </>}\n        </div>;\n\n  return <div className={styles.outer}>\n            <div className={styles.inner}>{getContent()}</div>\n        </div>;\n};\n\nStartScreen.propTypes = {\n  error: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  error: sGetLoadError(state)\n});\n\nexport default connect(mapStateToProps)(StartScreen);","// TODO move into component StartScreen?\n// most likely is not needed anywhere else\nexport const apiFetchMostViewedVisualizations = (dataEngine, pageSize) => {\n  const visualizationQuery = {\n    resource: 'dataStatistics/favorites',\n    params: {\n      eventType: 'VISUALIZATION_VIEW',\n      pageSize: pageSize || 10\n    }\n  };\n  return dataEngine.query({\n    visualization: visualizationQuery\n  });\n};","import React from 'react';\nimport styles from './styles/LoadingMask.module.css';\nimport { CircularLoader } from '@dhis2/ui';\n\nfunction LoadingMask() {\n  return <div className={styles.outer}>\n            <CircularLoader className={styles.progress} />\n        </div>;\n}\n\nexport default LoadingMask;","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport debounce from 'lodash-es/debounce';\nimport styles from './styles/Visualization.style';\nimport VisualizationPlugin from '@dhis2/data-visualizer-plugin';\nimport { sGetVisualization } from '../../reducers/visualization';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetUiRightSidebarOpen, sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetLoadError, sGetIsPluginLoading } from '../../reducers/loader';\nimport { acAddMetadata } from '../../actions/metadata';\nimport { acSetChart } from '../../actions/chart';\nimport { acSetLoadError, acSetPluginLoading } from '../../actions/loader';\nimport { acSetUiItems, acAddParentGraphMap } from '../../actions/ui';\nimport { tSetCurrentFromUi } from '../../actions/current';\nimport { removeLastPathSegment } from '../../modules/orgUnit';\nimport StartScreen from './StartScreen';\nimport { AssignedCategoriesDataElementsError, GenericServerError, EmptyResponseError, AssignedCategoriesAsFilterError, MultipleIndicatorAsFilterError, NoDataOrDataElementGroupSetError, CombinationDEGSRRError } from '../../modules/error';\nimport LoadingMask from '../../widgets/LoadingMask';\nimport { sGetSettingsDisplayNameProperty } from '../../reducers/settings';\nexport class Visualization extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      renderId: null\n    };\n  }\n\n  onError = response => {\n    let error;\n\n    if (response) {\n      switch (response.details?.errorCode) {\n        case 'E7114':\n          error = new AssignedCategoriesDataElementsError();\n          break;\n\n        case 'E7110':\n          error = new AssignedCategoriesAsFilterError();\n          break;\n\n        case 'E7108':\n          error = new MultipleIndicatorAsFilterError();\n          break;\n\n        case 'E7102':\n          error = new NoDataOrDataElementGroupSetError(this.props.visualization.type);\n          break;\n\n        case 'E7112':\n          error = new CombinationDEGSRRError();\n          break;\n\n        default:\n          error = response;\n      }\n    } else {\n      error = new GenericServerError();\n    }\n\n    this.props.setLoadError(error);\n  };\n  onChartGenerated = svg => this.props.setChart(svg);\n  onResponsesReceived = responses => {\n    const forMetadata = {};\n    responses.forEach(response => {\n      Object.entries(response.metaData.items).forEach(([id, item]) => {\n        forMetadata[id] = {\n          id,\n          name: item.name || item.displayName,\n          displayName: item.displayName,\n          dimensionItemType: item.dimensionItemType\n        };\n      });\n    });\n    this.props.addMetadata(forMetadata);\n\n    if (!responses.some(response => response.rows && response.rows.length)) {\n      throw new EmptyResponseError();\n    }\n  };\n  onDrill = drillData => {\n    if (drillData?.ou) {\n      const ou = drillData.ou;\n      const itemIds = [ou.id];\n\n      if (ou.level) {\n        itemIds.push(`LEVEL-${ou.level}`);\n      }\n\n      if (ou.path) {\n        const path = removeLastPathSegment(ou.path);\n        this.props.addParentGraphMap({\n          [ou.id]: path === `/{${ou.id}` ? '' : path.replace(/^\\//, '')\n        });\n      }\n\n      this.props.setUiItems({\n        dimensionId: 'ou',\n        itemIds\n      });\n    } // TODO drillData?.pe\n    // simulate an update for refreshing the visualization\n\n\n    this.props.setCurrent();\n  };\n  getNewRenderId = () => this.setState({\n    renderId: typeof this.state.renderId === 'number' ? this.state.renderId + 1 : 1\n  });\n  addResizeHandler = () => {\n    window.addEventListener('resize', debounce(() => {\n      this.getNewRenderId();\n    }, 300));\n  };\n\n  componentDidMount() {\n    this.addResizeHandler();\n  }\n\n  componentDidUpdate(prevProps) {\n    // open sidebar\n    if (this.props.rightSidebarOpen !== prevProps.rightSidebarOpen) {\n      this.getNewRenderId();\n    }\n  }\n\n  render() {\n    const {\n      visualization,\n      visFilters,\n      error\n    } = this.props;\n    const {\n      renderId\n    } = this.state;\n    return !visualization || error ? <StartScreen /> : <Fragment>\n                {this.props.isLoading ? <div style={styles.loadingCover}>\n                        <LoadingMask />\n                    </div> : null}\n                <VisualizationPlugin id={renderId} visualization={visualization} filters={visFilters} onChartGenerated={this.onChartGenerated} onLoadingComplete={this.props.onLoadingComplete} onResponsesReceived={this.onResponsesReceived} onError={this.onError} onDrill={this.onDrill} style={styles.chartCanvas} userSettings={{\n        displayProperty: this.props.displayProperty\n      }} />\n            </Fragment>;\n  }\n\n}\nVisualization.propTypes = {\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  displayProperty: PropTypes.string,\n  error: PropTypes.object,\n  isLoading: PropTypes.bool,\n  rightSidebarOpen: PropTypes.bool,\n  setChart: PropTypes.func,\n  setCurrent: PropTypes.func,\n  setLoadError: PropTypes.func,\n  setUiItems: PropTypes.func,\n  visFilters: PropTypes.object,\n  visualization: PropTypes.object,\n  onLoadingComplete: PropTypes.func\n};\nexport const visualizationSelector = createSelector([sGetCurrent, sGetVisualization, sGetUiInterpretation], (current, visualization, interpretation) => interpretation.id ? visualization : current);\nexport const visFiltersSelector = createSelector([sGetUiInterpretation], interpretation => interpretation.created ? {\n  relativePeriodDate: interpretation.created\n} : {});\n\nconst mapStateToProps = state => ({\n  visualization: visualizationSelector(state),\n  visFilters: visFiltersSelector(state),\n  rightSidebarOpen: sGetUiRightSidebarOpen(state),\n  error: sGetLoadError(state),\n  isLoading: sGetIsPluginLoading(state),\n  displayProperty: sGetSettingsDisplayNameProperty(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoadingComplete: () => dispatch(acSetPluginLoading(false)),\n  addMetadata: metadata => dispatch(acAddMetadata(metadata)),\n  addParentGraphMap: parentGraphMap => dispatch(acAddParentGraphMap(parentGraphMap)),\n  setChart: chart => dispatch(acSetChart(chart)),\n  setLoadError: error => dispatch(acSetLoadError(error)),\n  setUiItems: data => dispatch(acSetUiItems(data)),\n  setCurrent: () => dispatch(tSetCurrentFromUi())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Visualization);","import { SET_CHART } from '../reducers/chart';\nexport const acSetChart = value => ({\n  type: SET_CHART,\n  value\n});","import { colors } from '@dhis2/ui';\nexport const styles = {\n  tooltip: {\n    fontFamily: 'roboto',\n    padding: '7px 9px',\n    color: colors.white,\n    fontSize: '12px',\n    backgroundColor: colors.grey900,\n    boxShadow: 'none',\n    borderRadius: '3px',\n    position: 'relative',\n    top: '5px',\n    maxWidth: '300px'\n  },\n  list: {\n    listStyleType: 'none',\n    margin: '0px',\n    marginBottom: '-3px',\n    padding: '0px'\n  },\n  item: {\n    marginBottom: '3px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  icon: {\n    fontSize: '13px',\n    marginRight: '6px'\n  },\n  iconWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '5px'\n  },\n  warningLabel: {\n    whiteSpace: 'normal'\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport LockIcon from '@material-ui/icons/Lock';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport i18n from '@dhis2/d2-i18n';\nimport { ouIdHelper } from '@dhis2/analytics';\nimport { sGetMetadata } from '../../reducers/metadata';\nimport { styles } from './styles/Tooltip.style';\nconst labels = {\n  noneSelected: i18n.t('None selected'),\n  onlyOneInUse: name => i18n.t(\"Only '{{- name}}' in use\", {\n    name\n  }),\n  onlyLimitedNumberInUse: number => i18n.t(\"Only '{{number}}' in use\", {\n    number\n  })\n};\nexport const TooltipContent = ({\n  dimensionId,\n  itemIds,\n  metadata,\n  displayLimitedAmount,\n  lockedLabel\n}) => {\n  const getWarningLabel = () => {\n    const warningLabel = itemIds.length === 1 ? labels.onlyOneInUse(metadata[itemIds[0]] ? metadata[itemIds[0]].name : itemIds[0]) : labels.onlyLimitedNumberInUse(itemIds.length);\n    return displayLimitedAmount ? warningLabel : null;\n  };\n\n  const getNameList = (idList, label, metadata) => idList.reduce((levelString, levelId, index) => `${levelString}${index > 0 ? `, ` : ``}${metadata[levelId] ? metadata[levelId].name : levelId}`, `${label}: `);\n\n  const getItemDisplayNames = () => {\n    const levelIds = [];\n    const groupIds = [];\n    const itemDisplayNames = [];\n\n    if (!displayLimitedAmount) {\n      itemIds.forEach(id => {\n        if (ouIdHelper.hasLevelPrefix(id)) {\n          levelIds.push(ouIdHelper.removePrefix(id));\n        } else if (ouIdHelper.hasGroupPrefix(id)) {\n          groupIds.push(ouIdHelper.removePrefix(id));\n        } else {\n          itemDisplayNames.push(metadata[id] ? metadata[id].name : id);\n        }\n      });\n      levelIds.length && itemDisplayNames.push(getNameList(levelIds, i18n.t('Levels'), metadata));\n      groupIds.length && itemDisplayNames.push(getNameList(groupIds, i18n.t('Groups'), metadata));\n    }\n\n    return itemDisplayNames;\n  };\n\n  const renderWarningLabel = warningLabel => <li style={styles.item}>\n            <div style={styles.iconWrapper}>\n                <WarningIcon style={styles.icon} />\n                <span style={styles.warningLabel}>{warningLabel}</span>\n            </div>\n        </li>;\n\n  const renderItems = itemDisplayNames => {\n    const renderLimit = 5;\n    const itemsToRender = itemDisplayNames.slice(0, renderLimit).map(name => <li key={`${dimensionId}-${name}`} style={styles.item}>\n                    {name}\n                </li>);\n\n    if (itemDisplayNames.length > renderLimit) {\n      itemsToRender.push(<li key={`${dimensionId}-render-limit`} style={styles.item}>\n                    {itemDisplayNames.length - renderLimit === 1 ? i18n.t('And 1 other...') : i18n.t('And {{numberOfItems}} others...', {\n          numberOfItems: itemDisplayNames.length - renderLimit\n        })}\n                </li>);\n    }\n\n    return itemsToRender;\n  };\n\n  const renderLockedLabel = () => <li style={styles.item}>\n            <div style={styles.iconWrapper}>\n                <LockIcon style={styles.icon} />\n                <span>{lockedLabel}</span>\n            </div>\n        </li>;\n\n  const renderNoItemsLabel = () => <li key={`${dimensionId}-${labels.noneSelected}`} style={styles.item}>\n            {labels.noneSelected}\n        </li>;\n\n  const itemDisplayNames = getItemDisplayNames();\n  const warningLabel = getWarningLabel();\n  const hasNoItemsLabel = !itemDisplayNames.length && !warningLabel;\n  return <ul style={styles.list}>\n            {warningLabel && renderWarningLabel(warningLabel)}\n            {lockedLabel && renderLockedLabel()}\n            {itemDisplayNames && renderItems(itemDisplayNames)}\n            {hasNoItemsLabel && renderNoItemsLabel()}\n        </ul>;\n};\nTooltipContent.propTypes = {\n  dimensionId: PropTypes.string.isRequired,\n  metadata: PropTypes.object.isRequired,\n  displayLimitedAmount: PropTypes.bool,\n  itemIds: PropTypes.array,\n  lockedLabel: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  metadata: sGetMetadata(state)\n});\n\nexport default connect(mapStateToProps)(TooltipContent);","const DATA_TYPE_TEXT = 'text';\nexport const setDataTransfer = (e, source) => {\n  e.dataTransfer.setData(DATA_TYPE_TEXT, JSON.stringify({\n    dimensionId: e.target.dataset.dimensionid,\n    source\n  }));\n};\nexport const decodeDataTransfer = e => JSON.parse(e.dataTransfer.getData(DATA_TYPE_TEXT));","import React from 'react';\n\nconst DynamicDimensionIcon = () => {\n  return <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g id=\"Exp\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n                <g id=\"Artboard\" transform=\"translate(-80.000000, -9.000000)\">\n                    <g id=\"icon_dimension_new\" transform=\"translate(80.000000, 9.000000)\">\n                        <rect id=\"frame\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" />\n                        <g id=\"module\" transform=\"translate(4.000000, 4.000000)\" stroke=\"#000000\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                            <path d=\"M0.33209728,1.1742111 L3.16308174,0.0641666694 C3.37911767,-0.0213888898 3.61963794,-0.0213888898 3.83567387,0.0641666694 L6.66665833,1.1742111 C6.87300668,1.26220739 7.00497003,1.467 6.99984343,1.69127776 L6.99984343,5.30887771 C7.00517859,5.53285411 6.87376309,5.73756106 6.66790272,5.82594437 L3.83691826,6.93629991 C3.62076407,7.02123336 3.38048032,7.02123336 3.16432613,6.93629991 L0.333341668,5.82594437 C0.126993317,5.73794808 -0.00497002591,5.53315547 0.000156574133,5.30887771 L0.000156574133,1.69127776 C-0.00517858533,1.46730136 0.126236906,1.26259441 0.33209728,1.1742111 Z\" id=\"Shape\" />\n                            <path d=\"M3.5,2.72795833 L0.322,1.48195833\" id=\"Shape\" />\n                            <path d=\"M3.5,2.72795833 L6.678,1.48195833\" id=\"Shape\" />\n                            <path d=\"M3.5,6.78125 L3.5,2.72795833\" id=\"Shape\" />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>;\n};\n\nexport default DynamicDimensionIcon;","import { colors, theme } from '@dhis2/ui'; // Layout\n\nexport const LAYOUT_HEIGHT = '78px'; // Axis\n\nexport const AXIS_PADDING = '4px 4px 2px 6px';\nexport const AXIS_LABEL_PADDING = '2px 0px 0px 4px';\nexport const AXIS_BORDER_COLOR = colors.grey300;\nexport const AXIS_BORDER_STYLE = 'solid';\nexport const AXIS_BORDER_WIDTH = '0px 0px 1px 1px';\nexport const AXIS_BACKGROUND_COLOR = colors.white; // Chip\n\nexport const CHIP_COLOR = colors.grey900;\nexport const CHIP_FONT_WEIGHT = 400;\nexport const CHIP_FONT_SIZE = '14px';\nexport const CHIP_BACKGROUND_COLOR = theme.secondary200;\nexport const CHIP_HEIGHT = '14px';\nexport const CHIP_MARGIN = '4px';\nexport const CHIP_PADDING = '1px 6px';\nexport const CHIP_BORDER_RADIUS = '2px';","import { colors } from '@dhis2/ui';\nimport * as layoutStyle from './style';\nconst baseChip = {\n  padding: layoutStyle.CHIP_PADDING,\n  fontSize: layoutStyle.CHIP_FONT_SIZE,\n  fontWeight: layoutStyle.CHIP_FONT_WEIGHT,\n  color: layoutStyle.CHIP_COLOR,\n  cursor: 'pointer',\n  minHeight: 24,\n  userSelect: 'none'\n};\nexport const styles = {\n  chipWrapper: {\n    display: 'flex',\n    margin: layoutStyle.CHIP_MARGIN,\n    backgroundColor: layoutStyle.CHIP_BACKGROUND_COLOR,\n    borderRadius: layoutStyle.CHIP_BORDER_RADIUS,\n    alignItems: 'center',\n    maxWidth: '400px'\n  },\n  chip: { ...baseChip,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  chipEmpty: {\n    backgroundColor: colors.grey300\n  },\n  fixedDimensionIcon: {\n    paddingRight: '6px'\n  },\n  iconWrapper: {\n    paddingRight: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  warningIcon: {\n    fontSize: layoutStyle.CHIP_FONT_SIZE\n  },\n  warningIconWrapper: {\n    paddingLeft: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  lockIcon: {\n    fontSize: layoutStyle.CHIP_FONT_SIZE\n  },\n  lockIconWrapper: {\n    paddingLeft: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  label: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  }\n};\nstyles.chipLeft = { ...baseChip,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: 'flex',\n  borderTopRightRadius: '0px',\n  borderBottomRightRadius: '0px',\n  alignItems: 'center'\n};\nstyles.chipRight = { ...baseChip,\n  paddingLeft: '0px',\n  borderTopLeftRadius: '0px',\n  borderBottomLeftRadius: '0px'\n};","// TODO: Refactor chip to contain less logic\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { Tooltip } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPredefinedDimensionProp, getAxisMaxNumberOfItems, hasAxisTooManyItems, getDisplayNameByVisType, getAxisNameByLayoutType, getLayoutTypeByVisType, DIMENSION_ID_ASSIGNED_CATEGORIES, DIMENSION_PROP_NO_ITEMS, VIS_TYPE_SCATTER, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport TooltipContent from './TooltipContent';\nimport { setDataTransfer } from '../../modules/dnd';\nimport { sGetDimensions } from '../../reducers/dimensions';\nimport { sGetUiType } from '../../reducers/ui';\nimport DynamicDimensionIcon from '../../assets/DynamicDimensionIcon';\nimport { styles } from './styles/Chip.style';\nimport { sGetMetadata } from '../../reducers/metadata';\n\nconst Chip = ({\n  type,\n  dimensionId,\n  dimensionName,\n  axisId,\n  items,\n  onClick,\n  isLocked,\n  axisName,\n  metadata,\n  contextMenu\n}) => {\n  const id = Math.random().toString(36);\n  const dataTest = `layout-chip-${dimensionId}`;\n  const LockIconWrapper = <div style={styles.lockIconWrapper} data-test={`${dataTest}-lock-icon`}>\n            <LockIcon style={styles.lockIcon} />\n        </div>;\n  const WarningIconWrapper = <div style={styles.warningIconWrapper} data-test={`${dataTest}-warning-icon`}>\n            <WarningIcon style={styles.warningIcon} />\n        </div>;\n  const isSplitAxis = type === VIS_TYPE_SCATTER && dimensionId === DIMENSION_ID_DATA;\n\n  const getMaxNumberOfItems = () => getAxisMaxNumberOfItems(type, axisId);\n\n  const handleClick = () => {\n    if (!getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS)) {\n      onClick();\n    }\n  };\n\n  const getDragStartHandler = () => event => {\n    setDataTransfer(event, axisId);\n  };\n\n  const getWrapperStyles = () => ({ ...styles.chipWrapper,\n    ...(!getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS) && !items.length ? styles.chipEmpty : {})\n  });\n\n  const renderChipLabelSuffix = () => {\n    const numberOfItems = items.length;\n    const getItemsLabel = !!getMaxNumberOfItems() && numberOfItems > getMaxNumberOfItems() ? i18n.t(`{{total}} of {{axisMaxNumberOfItems}} selected`, {\n      total: numberOfItems,\n      axisMaxNumberOfItems: getMaxNumberOfItems()\n    }) : isSplitAxis ? i18n.t(metadata[items[0]]?.name || '') : i18n.t('{{total}} selected', {\n      total: numberOfItems\n    });\n    return `${items.length > 0 ? `: ${getItemsLabel}` : ''}`;\n  };\n\n  const renderChipIcon = () => {\n    const Icon = getPredefinedDimensionProp(dimensionId, 'icon');\n    return Icon ? <Icon style={styles.fixedDimensionIcon} /> : <DynamicDimensionIcon style={styles.dynamicDimensionIcon} />;\n  };\n\n  const renderTooltipContent = () => {\n    const activeItemIds = getMaxNumberOfItems() ? items.slice(0, getMaxNumberOfItems()) : items;\n    const lockedLabel = isLocked ? i18n.t(`{{dimensionName}} is locked to {{axisName}} for {{visTypeName}}`, {\n      dimensionName: dimensionName,\n      axisName: axisName || getAxisNameByLayoutType(axisId, getLayoutTypeByVisType(type)),\n      visTypeName: getDisplayNameByVisType(type)\n    }) : null;\n    return <TooltipContent dimensionId={dimensionId} itemIds={activeItemIds} lockedLabel={lockedLabel} displayLimitedAmount={items.length > activeItemIds.length} />;\n  };\n\n  const renderChipContent = () => <>\n            <div style={styles.iconWrapper}>{renderChipIcon()}</div>\n            <span style={!isSplitAxis ? styles.label : {}}>\n                {dimensionName}\n            </span>\n            <span style={isSplitAxis ? styles.label : {}}>\n                {renderChipLabelSuffix()}\n            </span>\n            {hasAxisTooManyItems(type, axisId, items.length) && WarningIconWrapper}\n            {isLocked && LockIconWrapper}\n        </>;\n\n  return <div style={getWrapperStyles()} data-dimensionid={dimensionId} draggable={!isLocked} onDragStart={getDragStartHandler()}>\n            {dimensionId !== DIMENSION_ID_ASSIGNED_CATEGORIES ? <Tooltip content={renderTooltipContent()} placement=\"bottom\">\n                    {({\n        ref,\n        onMouseOver,\n        onMouseOut\n      }) => <div data-test={dataTest} id={id} style={styles.chipLeft} onClick={handleClick} ref={ref} onMouseOver={onMouseOver} onMouseOut={onMouseOut}>\n                            {renderChipContent()}\n                        </div>}\n                </Tooltip> : <div id={id} style={styles.chipLeft} data-test={dataTest} onClick={handleClick}>\n                    {renderChipContent()}\n                </div>}\n            {contextMenu && <div style={styles.chipRight}> {contextMenu}</div>}\n        </div>;\n};\n\nChip.propTypes = {\n  axisId: PropTypes.string.isRequired,\n  dimensionId: PropTypes.string.isRequired,\n  dimensionName: PropTypes.string.isRequired,\n  isLocked: PropTypes.bool.isRequired,\n  metadata: PropTypes.object.isRequired,\n  type: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  axisName: PropTypes.string,\n  contextMenu: PropTypes.object,\n  items: PropTypes.array\n};\nChip.defaultProps = {\n  items: []\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  dimensionName: (sGetDimensions(state)[ownProps.dimensionId] || {}).name,\n  type: sGetUiType(state),\n  metadata: sGetMetadata(state)\n});\n\nexport default connect(mapStateToProps)(Chip);","import { colors } from '@dhis2/ui';\nimport * as layoutStyle from '../../styles/style';\nexport default {\n  axisContainer: {\n    display: 'flex',\n    backgroundColor: layoutStyle.AXIS_BACKGROUND_COLOR,\n    borderColor: layoutStyle.AXIS_BORDER_COLOR,\n    borderStyle: layoutStyle.AXIS_BORDER_STYLE,\n    borderWidth: layoutStyle.AXIS_BORDER_WIDTH,\n    padding: layoutStyle.AXIS_PADDING\n  },\n  axisContainerLeft: {\n    borderLeftWidth: 0\n  },\n  label: {\n    minWidth: 55,\n    maxWidth: 55,\n    padding: '2px 0px 0px 0px',\n    fontSize: 11,\n    color: colors.grey700,\n    userSelect: 'none',\n    letterSpacing: '0.2px'\n  }\n}; // TODO: Refactor this file and all other affected files (DefaultLayout + everything in ../../styles/) to css modules","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MoreHorizontalIcon = ({\n  style\n}) => {\n  return <svg style={{ ...style\n  }} xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"24\" viewBox=\"0 0 24 24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n        </svg>;\n};\n\nMoreHorizontalIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default MoreHorizontalIcon;","import { colors } from '@dhis2/ui';\nexport const styles = {\n  icon: {\n    width: 22,\n    height: 22,\n    background: 'none',\n    color: colors.black,\n    padding: 0\n  }\n};","import PropTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './styles/IconButton.module.css';\n\nconst IconButton = ({\n  children,\n  dataTest,\n  disabled,\n  name,\n  onBlur,\n  onClick,\n  onFocus,\n  style,\n  ariaOwns,\n  ariaHaspopup\n}) => <button className={styles.iconButton} data-test={dataTest} disabled={disabled} name={name} onBlur={onBlur} onClick={onClick} onFocus={onFocus} style={style} aria-owns={ariaOwns} aria-haspopup={ariaHaspopup}>\n        {children}\n    </button>;\n\nIconButton.propTypes = {\n  ariaHaspopup: PropTypes.bool,\n  ariaOwns: PropTypes.string,\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  style: PropTypes.object,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default IconButton;","import React, { useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DimensionMenu, DIMENSION_ID_ASSIGNED_CATEGORIES } from '@dhis2/analytics';\nimport { Layer, Popper } from '@dhis2/ui';\nimport * as fromReducers from '../../reducers';\nimport MoreHorizontalIcon from '../../assets/MoreHorizontalIcon';\nimport { styles } from './styles/Menu.style';\nimport { acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui';\nimport IconButton from '../IconButton/IconButton';\n\nconst ChipMenu = ({\n  assignedCategoriesItemHandler,\n  axisItemHandler,\n  currentAxisId,\n  dimensionId,\n  id,\n  layoutHasAssignedCategories,\n  numberOfDimensionItems,\n  removeItemHandler,\n  visType\n}) => {\n  const buttonRef = useRef();\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n\n  const toggleMenu = () => setMenuIsOpen(!menuIsOpen);\n\n  const getMenuId = () => `menu-for-${id}`;\n\n  return <>\n            <div ref={buttonRef}>\n                <IconButton ariaOwns={menuIsOpen ? getMenuId() : null} ariaHaspopup={true} onClick={toggleMenu} style={styles.icon} dataTest={`layout-chip-menu-button-${dimensionId}`}>\n                    <MoreHorizontalIcon style={styles.icon} />\n                </IconButton>\n            </div>\n            {\n      /* TODO: Fix bug with the first menu item getting selected when the menu is opened */\n    }\n            {menuIsOpen && <Layer position=\"fixed\" level={2000} onClick={toggleMenu}>\n                    <Popper reference={buttonRef} placement=\"bottom-start\">\n                        <DimensionMenu dimensionId={dimensionId} currentAxisId={currentAxisId} visType={visType} numberOfDimensionItems={numberOfDimensionItems} isAssignedCategoriesInLayout={layoutHasAssignedCategories} assignedCategoriesItemHandler={destination => assignedCategoriesItemHandler(layoutHasAssignedCategories, destination)} axisItemHandler={axisItemHandler} removeItemHandler={removeItemHandler} onClose={toggleMenu} dataTest={'layout-chip-menu-dimension-menu'} />\n                    </Popper>\n                </Layer>}\n        </>;\n};\n\nChipMenu.propTypes = {\n  assignedCategoriesItemHandler: PropTypes.func,\n  axisItemHandler: PropTypes.func,\n  currentAxisId: PropTypes.string,\n  dimensionId: PropTypes.string,\n  id: PropTypes.string,\n  layoutHasAssignedCategories: PropTypes.bool,\n  numberOfDimensionItems: PropTypes.number,\n  removeItemHandler: PropTypes.func,\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => {\n  return {\n    layoutHasAssignedCategories: fromReducers.fromUi.sLayoutHasAssignedCategories(state)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  axisItemHandler: ({\n    dimensionId,\n    axisId\n  }) => {\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }));\n  },\n  removeItemHandler: dimensionId => {\n    dispatch(acRemoveUiLayoutDimensions(dimensionId));\n  },\n  assignedCategoriesItemHandler: (layoutHasAssignedCategories, axisId) => {\n    dispatch(layoutHasAssignedCategories ? acRemoveUiLayoutDimensions(DIMENSION_ID_ASSIGNED_CATEGORIES) : acAddUiLayoutDimensions({\n      [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        axisId\n      }\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChipMenu);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport { getAxisNameByLayoutType, getLayoutTypeByVisType, isDimensionLocked } from '@dhis2/analytics';\nimport Chip from '../Chip';\nimport { sGetUi, sGetUiItemsByDimension, sGetUiLayout, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiActiveModalDialog } from '../../../actions/ui';\nimport styles from './styles/DefaultAxis.style';\nimport stylesModule from './styles/DefaultAxis.module.css';\nimport ChipMenu from '../ChipMenu';\n\nclass Axis extends React.Component {\n  onDragOver = e => {\n    e.preventDefault();\n  };\n\n  render() {\n    const {\n      axisId,\n      axis,\n      style,\n      type,\n      getOpenHandler,\n      getItemsByDimension\n    } = this.props;\n    return <div id={axisId} data-test={`${axisId}-axis`} style={{ ...styles.axisContainer,\n      ...style\n    }} onDragOver={this.onDragOver}>\n                <div style={styles.label}>\n                    {this.props.label || getAxisNameByLayoutType(axisId, getLayoutTypeByVisType(type))}\n                </div>\n                <Droppable droppableId={axisId} direction=\"horizontal\">\n                    {provided => <div className={stylesModule.content} ref={provided.innerRef} {...provided.droppableProps}>\n                            {axis.map((dimensionId, index) => {\n            const key = `${axisId}-${dimensionId}`;\n            const isLocked = isDimensionLocked(type, dimensionId);\n            const items = getItemsByDimension(dimensionId);\n            return <Draggable key={key} draggableId={key} index={index} isDragDisabled={isLocked}>\n                                        {provided => <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n                                                <Chip onClick={getOpenHandler(dimensionId)} axisId={axisId} dimensionId={dimensionId} isLocked={isLocked} items={items} contextMenu={!isLocked ? <ChipMenu dimensionId={dimensionId} currentAxisId={axisId} visType={type} numberOfDimensionItems={items.length} /> : null} />\n                                            </div>}\n                                    </Draggable>;\n          })}\n                            {provided.placeholder}\n                        </div>}\n                </Droppable>\n            </div>;\n  }\n\n}\n\nAxis.propTypes = {\n  axis: PropTypes.array,\n  axisId: PropTypes.string,\n  classes: PropTypes.object,\n  getItemsByDimension: PropTypes.func,\n  getMoveHandler: PropTypes.func,\n  getOpenHandler: PropTypes.func,\n  getRemoveHandler: PropTypes.func,\n  label: PropTypes.string,\n  layout: PropTypes.object,\n  style: PropTypes.object,\n  type: PropTypes.string,\n  ui: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  ui: sGetUi(state),\n  type: sGetUiType(state),\n  layout: sGetUiLayout(state),\n  getItemsByDimension: dimensionId => sGetUiItemsByDimension(state, dimensionId) || []\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOpenHandler: dimensionId => () => dispatch(acSetUiActiveModalDialog(dimensionId))\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => ({ ...stateProps,\n  ...dispatchProps,\n  ...ownProps,\n  axis: stateProps.ui.layout[ownProps.axisId]\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(Axis);","import { LAYOUT_HEIGHT } from '../../styles/style'; // Axis\n\nexport const FILTER_AXIS_WIDTH = '50%';\nexport const DIMENSION_AXIS_CONTENT_HEIGHT = '36px'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  ct: {\n    display: 'flex',\n    minHeight: LAYOUT_HEIGHT\n  },\n  axisGroup: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  },\n  columns: {\n    flexBasis: '50%'\n  },\n  rows: {\n    flexBasis: '50%'\n  },\n  filters: {\n    flexBasis: '100%'\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from './DefaultAxis';\nimport styles from './styles/DefaultLayout.style';\nimport defaultAxisStyles from './styles/DefaultAxis.style';\n\nconst Layout = () => <div id=\"layout-ct\" style={styles.ct}>\n        <div id=\"axis-group-1\" style={{ ...styles.axisGroup,\n    ...styles.axisGroupLeft\n  }}>\n            <DefaultAxis axisId={AXIS_ID_COLUMNS} style={{ ...styles.columns,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n            <DefaultAxis axisId={AXIS_ID_ROWS} style={{ ...styles.rows,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...styles.axisGroup,\n    ...styles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={styles.filters} />\n        </div>\n    </div>;\n\nLayout.displayName = 'Layout';\nexport default Layout;","export default {\n  content: {\n    flex: '1 1 0%'\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getAxisNameByLayoutType, LAYOUT_TYPE_YEAR_OVER_YEAR } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport { sGetUiYearOverYearSeries, sGetUiYearOverYearCategory } from '../../../reducers/ui';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport YearOverYearAxisStyles from './styles/YearOverYearAxis.style';\n\nconst YearOverYearAxis = props => <div id={props.axisId} data-test={`${props.axisId}-axis`} style={{ ...defaultAxisStyles.axisContainer,\n  ...props.style\n}}>\n        <div className=\"label\" style={defaultAxisStyles.label}>\n            {getAxisNameByLayoutType(props.axisId, LAYOUT_TYPE_YEAR_OVER_YEAR)}\n        </div>\n        <div className=\"content\" style={{ ...defaultAxisStyles.content,\n    ...YearOverYearAxisStyles.content\n  }}>\n            {props.children}\n        </div>\n    </div>;\n\nYearOverYearAxis.propTypes = {\n  axisId: PropTypes.string,\n  children: PropTypes.node,\n  style: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  yearOverYearSeries: sGetUiYearOverYearSeries(state),\n  yearOverYearCategory: sGetUiYearOverYearCategory(state)\n});\n\nexport default connect(mapStateToProps)(YearOverYearAxis);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { MultiSelect, MultiSelectOption, SingleSelect, SingleSelectOption } from '@dhis2/ui';\n\nconst SinglePeriodSelector = ({\n  options,\n  selected,\n  onChange,\n  dataTest\n}) => <SingleSelect onChange={onChange} selected={selected} placeholder={i18n.t('Select a period')} dense dataTest={dataTest}>\n        {options.map(option => <SingleSelectOption key={option.id} value={option.id} label={option.getName()} dataTest={`${dataTest}-option-${option.id}`} />)}\n    </SingleSelect>;\n\nSinglePeriodSelector.propTypes = {\n  dataTest: PropTypes.string,\n  options: PropTypes.array,\n  selected: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst MultiPeriodSelector = ({\n  options,\n  selected,\n  onChange,\n  dataTest\n}) => <MultiSelect onChange={onChange} selected={selected} placeholder={i18n.t('Select years')} dense dataTest={dataTest}>\n        {options.map(option => <MultiSelectOption key={option.id} value={option.id} label={option.getName()} />)}\n    </MultiSelect>;\n\nMultiPeriodSelector.propTypes = {\n  dataTest: PropTypes.string,\n  options: PropTypes.array,\n  selected: PropTypes.array,\n  onChange: PropTypes.func\n};\n\nconst YearOverYearSelect = ({\n  multiple,\n  value,\n  ...props\n}) => multiple === 'true' ? <MultiPeriodSelector selected={value} {...props} /> : <SinglePeriodSelector selected={value} {...props} />;\n\nYearOverYearSelect.propTypes = {\n  dataTest: PropTypes.string,\n  multiple: PropTypes.string,\n  options: PropTypes.array,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  onChange: PropTypes.func\n};\nexport default YearOverYearSelect;","import { FILTER_AXIS_WIDTH } from '../../DefaultLayout/styles/DefaultLayout.style'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import i18n from '@dhis2/d2-i18n'; // Fixed years generator\n\nconst getFixedYears = len => {\n  let year = new Date().getFullYear();\n  return new Array(len).fill(null).map(() => {\n    const yearString = String(year--);\n    return {\n      id: yearString,\n      getName: () => yearString\n    };\n  });\n}; // Options for the year on year series dropdown\n\n\nexport const seriesOptions = [{\n  id: 'THIS_YEAR',\n  getName: () => i18n.t('This year')\n}, {\n  id: 'LAST_YEAR',\n  getName: () => i18n.t('Last year')\n}, {\n  id: 'LAST_5_YEARS',\n  getName: () => i18n.t('Last 5 years')\n}, ...getFixedYears(10)]; // Options for the year on year category dropdown\n\nexport const categoryOptions = [{\n  id: 'LAST_3_DAYS',\n  getName: () => i18n.t('Last 3 days')\n}, {\n  id: 'LAST_7_DAYS',\n  getName: () => i18n.t('Last 7 days')\n}, {\n  id: 'LAST_14_DAYS',\n  getName: () => i18n.t('Last 14 days')\n}, {\n  id: 'LAST_4_WEEKS',\n  getName: () => i18n.t('Last 4 weeks')\n}, {\n  id: 'LAST_12_WEEKS',\n  getName: () => i18n.t('Last 12 weeks')\n}, {\n  id: 'LAST_52_WEEKS',\n  getName: () => i18n.t('Last 52 weeks')\n}, {\n  id: 'WEEKS_THIS_YEAR',\n  getName: () => i18n.t('Weeks per year')\n}, {\n  id: 'LAST_3_MONTHS',\n  getName: () => i18n.t('Last 3 months')\n}, {\n  id: 'LAST_6_MONTHS',\n  getName: () => i18n.t('Last 6 months')\n}, {\n  id: 'LAST_12_MONTHS',\n  getName: () => i18n.t('Last 12 months')\n}, {\n  id: 'MONTHS_THIS_YEAR',\n  getName: () => i18n.t('Months per year')\n}, {\n  id: 'LAST_6_BIMONTHS',\n  getName: () => i18n.t('Last 6 bimonths')\n}, {\n  id: 'BIMONTHS_THIS_YEAR',\n  getName: () => i18n.t('Bimonths per year')\n}, {\n  id: 'LAST_4_QUARTERS',\n  getName: () => i18n.t('Last 4 quarters')\n}, {\n  id: 'QUARTERS_THIS_YEAR',\n  getName: () => i18n.t('Quarters per year')\n}, {\n  id: 'LAST_2_SIXMONTHS',\n  getName: () => i18n.t('Last 2 six-months')\n}];","import React from 'react';\nimport { connect } from 'react-redux';\nimport { AXIS_ID_FILTERS, AXIS_ID_COLUMNS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport YearOverYearAxis from './YearOverYearAxis';\nimport YearOverYearSelect from './YearOverYearSelect';\nimport YearOverYearLayoutStyles from './styles/YearOverYearLayout.style';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport { sGetUiYearOverYearSeries, sGetUiYearOverYearCategory } from '../../../reducers/ui';\nimport { acSetUiYearOverYearSeries, acSetUiYearOverYearCategory } from '../../../actions/ui';\nimport { seriesOptions, categoryOptions } from '../../../modules/yearOverYear';\n\nconst Layout = props => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...YearOverYearLayoutStyles.axisGroupLeft\n  }}>\n            <YearOverYearAxis axisId={AXIS_ID_COLUMNS} style={{ ...defaultLayoutStyles.columns,\n      ...defaultAxisStyles.axisContainerLeft\n    }}>\n                <YearOverYearSelect multiple=\"true\" value={props.yearOverYearSeries} onChange={props.onSeriesChange} options={seriesOptions} dataTest={`yoy-layout-${AXIS_ID_COLUMNS}-select`} />\n            </YearOverYearAxis>\n            <YearOverYearAxis axisId={AXIS_ID_ROWS} style={{ ...defaultLayoutStyles.rows,\n      ...defaultAxisStyles.axisContainerLeft\n    }}>\n                <YearOverYearSelect value={props.yearOverYearCategory[0]} onChange={props.onCategoryChange} options={categoryOptions} dataTest={`yoy-layout-${AXIS_ID_ROWS}-select`} />\n            </YearOverYearAxis>\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...YearOverYearLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nLayout.displayName = 'Layout';\nLayout.propTypes = {\n  yearOverYearCategory: PropTypes.array,\n  yearOverYearSeries: PropTypes.array,\n  onCategoryChange: PropTypes.func,\n  onSeriesChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  yearOverYearSeries: sGetUiYearOverYearSeries(state),\n  yearOverYearCategory: sGetUiYearOverYearCategory(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onSeriesChange: ({\n    selected\n  }) => {\n    dispatch(acSetUiYearOverYearSeries(selected));\n  },\n  onCategoryChange: ({\n    selected\n  }) => {\n    dispatch(acSetUiYearOverYearCategory(selected));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);","// Axis\nexport const FILTER_AXIS_WIDTH = '70%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport pieLayoutStyles from './styles/PieLayout.style';\n\nconst Layout = () => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...pieLayoutStyles.axisGroupLeft\n  }}>\n            <DefaultAxis axisId={AXIS_ID_COLUMNS} style={{ ...defaultLayoutStyles.filters,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...pieLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nexport default Layout;","// Axis\nexport const FILTER_AXIS_WIDTH = '50%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport pivotTableLayoutStyles from './styles/PivotTableLayout.style';\n\nconst Layout = () => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...pivotTableLayoutStyles.axisGroupLeft\n  }}>\n            <DefaultAxis axisId={AXIS_ID_COLUMNS} style={{ ...defaultLayoutStyles.columns,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n            <DefaultAxis axisId={AXIS_ID_ROWS} style={{ ...defaultLayoutStyles.rows,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...pivotTableLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nLayout.displayName = 'Layout';\nexport default Layout;","import { colors } from '@dhis2/ui';\nimport * as layoutStyle from '../../styles/style';\nexport default {\n  axisContainer: {\n    display: 'flex',\n    backgroundColor: layoutStyle.AXIS_BACKGROUND_COLOR,\n    borderColor: layoutStyle.AXIS_BORDER_COLOR,\n    borderStyle: layoutStyle.AXIS_BORDER_STYLE,\n    borderWidth: layoutStyle.AXIS_BORDER_WIDTH,\n    padding: layoutStyle.AXIS_PADDING\n  },\n  axisContainerLeft: {\n    borderLeftWidth: 0\n  },\n  label: {\n    minWidth: 55,\n    maxWidth: 55,\n    padding: '2px 0px 0px 0px',\n    fontSize: 11,\n    color: colors.grey700,\n    userSelect: 'none',\n    letterSpacing: '0.2px',\n    display: 'flex',\n    flexDirection: 'column'\n  }\n}; // TODO: Refactor this file and all other affected files (DefaultLayout + everything in ../../styles/) to css modules","import React from 'react';\n\nconst VerticalIcon = () => <svg height=\"12\" viewBox=\"0 0 12 12\" width=\"12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <path d=\"m0 11h12v1h-12z\" fill=\"#d5dde5\" />\n            <path d=\"m0 0h1v12h-1z\" fill=\"#404b5a\" />\n        </g>\n    </svg>;\n\nexport default VerticalIcon;","import React from 'react';\n\nconst HorizontalIcon = () => <svg height=\"12\" viewBox=\"0 0 12 12\" width=\"12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <path d=\"m0 0h1v12h-1z\" fill=\"#d5dde5\" />\n            <path d=\"m0 11h12v1h-12z\" fill=\"#404b5a\" />\n        </g>\n    </svg>;\n\nexport default HorizontalIcon;","import React, { useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Popper, Layer, FlyoutMenu, Tooltip, MenuItem, MenuDivider } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { AXIS_ID_COLUMNS, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport Chip from '../Chip';\nimport { sGetUi, sGetUiLayout } from '../../../reducers/ui';\nimport { acSetUiActiveModalDialog } from '../../../actions/ui';\nimport styles from './styles/ScatterAxis.style';\nimport IconButton from '../../IconButton/IconButton';\nimport MoreHorizontalIcon from '../../../assets/MoreHorizontalIcon';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../../../modules/ui';\nimport { acSetUiItemAttributes, acRemoveUiItemAttributes } from '../../../actions/ui';\nimport { sGetUiItemsByAttribute } from '../../../reducers/ui';\nimport VerticalIcon from '../../../assets/VerticalIcon';\nimport HorizontalIcon from '../../../assets/HorizontalIcon';\n\nconst Axis = ({\n  label,\n  style,\n  getOpenHandler,\n  items,\n  itemAttribute,\n  getItemsByAttribute,\n  setItemAttributes,\n  removeItemAttributes\n}) => {\n  const buttonRef = useRef();\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n\n  const toggleMenu = () => setDialogIsOpen(!dialogIsOpen);\n\n  const destination = itemAttribute === ITEM_ATTRIBUTE_VERTICAL ? ITEM_ATTRIBUTE_HORIZONTAL : ITEM_ATTRIBUTE_VERTICAL;\n\n  const onSwap = () => {\n    toggleMenu();\n    const verticalItems = getItemsByAttribute(ITEM_ATTRIBUTE_VERTICAL);\n    const horizontalItems = getItemsByAttribute(ITEM_ATTRIBUTE_HORIZONTAL);\n    removeItemAttributes(DIMENSION_ID_DATA, verticalItems, ITEM_ATTRIBUTE_VERTICAL);\n    removeItemAttributes(DIMENSION_ID_DATA, horizontalItems, ITEM_ATTRIBUTE_HORIZONTAL);\n    setItemAttributes(DIMENSION_ID_DATA, verticalItems, ITEM_ATTRIBUTE_HORIZONTAL);\n    setItemAttributes(DIMENSION_ID_DATA, horizontalItems, ITEM_ATTRIBUTE_VERTICAL);\n  };\n\n  const renderChipMenu = () => <>\n            <div ref={buttonRef}>\n                <IconButton ariaOwns={dialogIsOpen ? `menu-for-${itemAttribute}` : null} ariaHaspopup={true} onClick={toggleMenu} style={styles.icon} dataTest={`layout-chip-menu-button-${itemAttribute}`}>\n                    <MoreHorizontalIcon style={styles.icon} />\n                </IconButton>\n            </div>\n            {dialogIsOpen && <Layer position=\"fixed\" level={2000} onClick={toggleMenu}>\n                    <Popper reference={buttonRef} placement=\"bottom-start\">\n                        <FlyoutMenu dense dataTest={'layout-chip-menu-dimension-menu'}>\n                            <Tooltip key={`assigned-categories-item-${DIMENSION_ID_DATA}`} content={i18n.t('Not available for Scatter')} aria-label=\"disabled\">\n                                <MenuItem disabled dense label={i18n.t('Add Assigned Categories')} dataTest={`layout-chip-menu-dimension-menu-item-co-menu`} />\n                            </Tooltip>\n                            <MenuDivider dense key={'assigned-categories-divider'} />\n                            <MenuItem key={`${itemAttribute}-to-${destination}`} onClick={onSwap} label={i18n.t(`Swap with {{axisName}} axis`, {\n            axisName: destination === ITEM_ATTRIBUTE_VERTICAL ? i18n.t('vertical') : i18n.t('horizontal')\n          })} dataTest={`layout-chip-menu-dimension-menu-item-action-${itemAttribute}-to-${destination}`} />\n                        </FlyoutMenu>\n                    </Popper>\n                </Layer>}\n        </>;\n\n  const renderIcon = () => itemAttribute === ITEM_ATTRIBUTE_VERTICAL ? <VerticalIcon /> : <HorizontalIcon />;\n\n  return <div id={label} data-test={`${label}-axis`} style={{ ...styles.axisContainer,\n    ...style\n  }}>\n            <div style={styles.label}>\n                {label}\n                {renderIcon()}\n            </div>\n            <Chip axisId={AXIS_ID_COLUMNS} axisName={label} onClick={getOpenHandler(itemAttribute)} dimensionId={DIMENSION_ID_DATA} items={items} isLocked={true} contextMenu={renderChipMenu()} />\n        </div>;\n};\n\nAxis.propTypes = {\n  getItemsByAttribute: PropTypes.func,\n  getOpenHandler: PropTypes.func,\n  itemAttribute: PropTypes.string,\n  items: PropTypes.array,\n  label: PropTypes.string,\n  removeItemAttributes: PropTypes.func,\n  setItemAttributes: PropTypes.func,\n  style: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  ui: sGetUi(state),\n  layout: sGetUiLayout(state),\n  getItemsByAttribute: attribute => sGetUiItemsByAttribute(state, attribute)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOpenHandler: dialogId => () => dispatch(acSetUiActiveModalDialog(dialogId)),\n  setItemAttributes: (dimensionId, itemIds, attribute) => dispatch(acSetUiItemAttributes({\n    dimensionId,\n    itemIds,\n    attribute\n  })),\n  removeItemAttributes: (dimensionId, itemIdsToRemove, attribute) => dispatch(acRemoveUiItemAttributes({\n    dimensionId,\n    itemIdsToRemove,\n    attribute\n  }))\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => ({ ...stateProps,\n  ...dispatchProps,\n  ...ownProps\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(Axis);","// Axis\nexport const FILTER_AXIS_WIDTH = '70%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { AXIS_ID_FILTERS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiItemsByAttribute } from '../../../reducers/ui';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport ScatterAxis from './ScatterAxis';\nimport scatterLayoutStyles from './styles/ScatterLayout.style';\nimport { ITEM_ATTRIBUTE_HORIZONTAL, ITEM_ATTRIBUTE_VERTICAL } from '../../../modules/ui';\n\nconst Layout = ({\n  getItemsByAttribute\n}) => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...scatterLayoutStyles.axisGroupLeft\n  }}>\n            <ScatterAxis style={{ ...defaultLayoutStyles.filters,\n      ...defaultAxisStyles.axisContainerLeft\n    }} itemAttribute={ITEM_ATTRIBUTE_VERTICAL} items={getItemsByAttribute(ITEM_ATTRIBUTE_VERTICAL)} label={i18n.t('Vertical')} />\n            <ScatterAxis style={defaultLayoutStyles.filters} itemAttribute={ITEM_ATTRIBUTE_HORIZONTAL} items={getItemsByAttribute(ITEM_ATTRIBUTE_HORIZONTAL)} label={i18n.t('Horizontal')} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...scatterLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_ROWS} style={{ ...defaultLayoutStyles.filters\n    }} />\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nLayout.propTypes = {\n  getItemsByAttribute: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  getItemsByAttribute: attribute => sGetUiItemsByAttribute(state, attribute)\n});\n\nexport default connect(mapStateToProps)(Layout);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { LAYOUT_TYPE_DEFAULT, LAYOUT_TYPE_PIE, LAYOUT_TYPE_YEAR_OVER_YEAR, LAYOUT_TYPE_PIVOT_TABLE, getLayoutTypeByVisType, LAYOUT_TYPE_SCATTER } from '@dhis2/analytics';\nimport DefaultLayout from './DefaultLayout/DefaultLayout';\nimport YearOverYearLayout from './YearOverYearLayout/YearOverYearLayout';\nimport PieLayout from './PieLayout/PieLayout';\nimport { sGetUiType } from '../../reducers/ui';\nimport PivotTableLayout from './PivotTableLayout/PivotTableLayout';\nimport ScatterLayout from './ScatterLayout/ScatterLayout';\nconst componentMap = {\n  [LAYOUT_TYPE_DEFAULT]: DefaultLayout,\n  [LAYOUT_TYPE_PIE]: PieLayout,\n  [LAYOUT_TYPE_YEAR_OVER_YEAR]: YearOverYearLayout,\n  [LAYOUT_TYPE_PIVOT_TABLE]: PivotTableLayout,\n  [LAYOUT_TYPE_SCATTER]: ScatterLayout\n};\n\nconst Layout = ({\n  visType\n}) => {\n  const layoutType = getLayoutTypeByVisType(visType);\n  const LayoutComponent = componentMap[layoutType];\n  return <LayoutComponent visType={visType} />;\n};\n\nLayout.propTypes = {\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps, null)(Layout);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { CssVariables, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button } from '@dhis2/ui';\nimport DndContext from './DndContext';\nimport Snackbar from '../components/Snackbar/Snackbar';\nimport MenuBar from './MenuBar/MenuBar';\nimport TitleBar from './TitleBar/TitleBar';\nimport VisualizationTypeSelector from './VisualizationTypeSelector/VisualizationTypeSelector';\nimport DimensionsPanel from './DimensionsPanel/DimensionsPanel';\nimport Interpretations from './Interpretations/Interpretations';\nimport Visualization from './Visualization/Visualization';\nimport Layout from './Layout/Layout';\nimport * as fromReducers from '../reducers';\nimport * as fromActions from '../actions';\nimport history from '../modules/history';\nimport defaultMetadata from '../modules/metadata';\nimport { apiFetchAOFromUserDataStore, CURRENT_AO_KEY } from '../api/userDataStore';\nimport './App.css';\nimport './scrollbar.css';\nimport { getParentGraphMapFromVisualization } from '../modules/ui';\nimport { APPROVAL_LEVEL_OPTION_AUTH } from './VisualizationOptions/Options/ApprovalLevel';\nimport { sGetVisualization } from '../reducers/visualization';\nimport { STATE_DIRTY, getVisualizationState } from '../modules/visualization';\nexport class App extends Component {\n  unlisten = null;\n  apiObjectName = 'visualization';\n  state = {\n    previousLocation: null,\n    initialLoadIsComplete: false,\n    locationToConfirm: false\n  };\n  /**\n   * The following cases require a fetch/refetch of the AO\n   * - enter a new url (causing a page load)\n   * - file->open (same or different AO)\n   * - file->saveAs\n   */\n\n  refetch = location => {\n    if (!this.state.previousLocation) {\n      return true;\n    }\n\n    const id = location.pathname.slice(1).split('/')[0];\n    const prevId = this.state.previousLocation.slice(1).split('/')[0];\n\n    if (id !== prevId || this.state.previousLocation === location.pathname) {\n      return true;\n    }\n\n    return false;\n  };\n  parseLocation = location => {\n    const pathParts = location.pathname.slice(1).split('/');\n    const id = pathParts[0];\n    const interpretationId = pathParts[2];\n    return {\n      id,\n      interpretationId\n    };\n  };\n  loadVisualization = async location => {\n    const {\n      store\n    } = this.context;\n\n    if (location.pathname.length > 1) {\n      // /currentAnalyticalObject\n      // /${id}/\n      // /${id}/interpretation/${interpretationId}\n      const {\n        id,\n        interpretationId\n      } = this.parseLocation(location);\n      const urlContainsCurrentAOKey = id === CURRENT_AO_KEY;\n\n      if (urlContainsCurrentAOKey) {\n        const AO = await apiFetchAOFromUserDataStore();\n        this.props.addParentGraphMap(getParentGraphMapFromVisualization(AO)); // clear visualization and current\n        // to avoid leave them \"dirty\" when navigating to\n        // /currentAnalyticalObject from a previous saved AO\n\n        this.props.clearVisualization();\n        this.props.clearCurrent();\n        this.props.setUiFromVisualization(AO);\n        this.props.setCurrentFromUi(this.props.ui);\n      }\n\n      if (!urlContainsCurrentAOKey && this.refetch(location)) {\n        await store.dispatch(fromActions.tDoLoadVisualization({\n          id,\n          interpretationId,\n          ouLevels: this.props.ouLevels\n        }));\n      }\n\n      if (!interpretationId) {\n        store.dispatch(fromActions.fromUi.acClearUiInterpretation());\n      }\n    } else {\n      fromActions.clearVisualization(store.dispatch, store.getState);\n      fromActions.fromUi.acClearUiInterpretation(store.dispatch);\n    }\n\n    this.setState({\n      initialLoadIsComplete: true\n    });\n    this.setState({\n      previousLocation: location.pathname\n    });\n  };\n  componentDidMount = async () => {\n    const {\n      store\n    } = this.context;\n    const {\n      d2,\n      userSettings\n    } = this.props;\n    await store.dispatch(fromActions.fromSettings.tAddSettings(userSettings));\n    store.dispatch(fromActions.fromUser.acReceivedUser(d2.currentUser));\n    store.dispatch(fromActions.fromUser.tLoadUserAuthority(APPROVAL_LEVEL_OPTION_AUTH));\n    store.dispatch(fromActions.fromDimensions.tSetDimensions());\n    const rootOrgUnit = this.props.settings.rootOrganisationUnit;\n\n    if (rootOrgUnit && rootOrgUnit.id) {\n      store.dispatch(fromActions.fromMetadata.acAddMetadata({ ...defaultMetadata(),\n        [rootOrgUnit.id]: { ...rootOrgUnit,\n          path: `/${rootOrgUnit.id}`\n        }\n      }));\n    }\n\n    this.loadVisualization(this.props.location);\n    this.unlisten = history.listen(location => {\n      const isSaving = location.state?.isSaving;\n      const isOpening = location.state?.isOpening;\n      const isResetting = location.state?.isResetting;\n      const {\n        interpretationId\n      } = this.parseLocation(location);\n\n      if ( // currently editing\n      getVisualizationState(this.props.visualization, this.props.current) === STATE_DIRTY && // wanting to navigate elsewhere\n      this.state.previousLocation !== location.pathname && // currently *not* viewing an interpretation\n      !(this.props.interpretation.id || interpretationId) && // not saving\n      !isSaving) {\n        this.setState({\n          locationToConfirm: location\n        });\n      } else {\n        if (isSaving || isOpening || isResetting || this.state.previousLocation !== location.pathname) {\n          this.loadVisualization(location);\n        }\n\n        this.setState({\n          locationToConfirm: null\n        });\n      }\n    });\n    document.body.addEventListener('keyup', e => e.key === 'Enter' && e.ctrlKey === true && this.props.setCurrentFromUi(this.props.ui));\n    window.addEventListener('beforeunload', event => {\n      if (getVisualizationState(this.props.visualization, this.props.current) === STATE_DIRTY) {\n        event.preventDefault();\n        event.returnValue = i18n.t('You have unsaved changes.');\n      }\n    });\n  };\n\n  componentWillUnmount() {\n    if (this.unlisten) {\n      this.unlisten();\n    }\n  }\n\n  getChildContext() {\n    return {\n      baseUrl: this.props.baseUrl,\n      i18n,\n      d2: this.props.d2,\n      dataEngine: this.props.dataEngine\n    };\n  }\n\n  render() {\n    return <>\n                <div className=\"data-visualizer-app flex-ct flex-dir-col\">\n                    <div className=\"section-toolbar flex-ct\">\n                        <div className=\"toolbar-type\">\n                            <VisualizationTypeSelector />\n                        </div>\n                        <div className=\"toolbar-menubar flex-grow-1\">\n                            <MenuBar apiObjectName={this.apiObjectName} dataTest={'app-menubar'} />\n                        </div>\n                    </div>\n                    <div className=\"section-main flex-grow-1 flex-ct\">\n                        <DndContext>\n                            <div className=\"main-left\">\n                                <DimensionsPanel />\n                            </div>\n                            <div className=\"main-center flex-grow-1 flex-basis-0 flex-ct flex-dir-col\">\n                                <div className=\"main-center-layout\">\n                                    <Layout />\n                                </div>\n                                <div className=\"main-center-titlebar\">\n                                    <TitleBar />\n                                </div>\n                                <div className=\"main-center-canvas flex-grow-1\">\n                                    {this.state.initialLoadIsComplete && <Visualization />}\n                                </div>\n                            </div>\n                        </DndContext>\n                        {this.props.ui.rightSidebarOpen && this.props.current && <div className=\"main-right\">\n                                <Interpretations type={this.apiObjectName} id={this.props.current.id} />\n                            </div>}\n                    </div>\n                </div>\n                {this.state.locationToConfirm && <Modal small dataTest={'confirm-leave-modal'}>\n                        <ModalTitle>\n                            {i18n.t('Discard unsaved changes?')}\n                        </ModalTitle>\n                        <ModalContent>\n                            {i18n.t('Are you sure you want to leave this visualization? Any unsaved changes will be lost.')}\n                        </ModalContent>\n                        <ModalActions>\n                            <ButtonStrip end>\n                                <Button secondary onClick={() => {\n              this.setState({\n                locationToConfirm: null\n              });\n              history.goBack();\n            }} dataTest={'confirm-leave-modal-option-cancel'}>\n                                    {i18n.t('No, cancel')}\n                                </Button>\n\n                                <Button onClick={() => {\n              this.loadVisualization(this.state.locationToConfirm);\n              this.setState({\n                locationToConfirm: null\n              });\n            }} primary dataTest={'confirm-leave-modal-option-confirm'}>\n                                    {i18n.t('Yes, leave')}\n                                </Button>\n                            </ButtonStrip>\n                        </ModalActions>\n                    </Modal>}\n                <Snackbar />\n                <CssVariables colors spacers />\n            </>;\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  settings: fromReducers.fromSettings.sGetSettings(state),\n  current: fromReducers.fromCurrent.sGetCurrent(state),\n  interpretation: fromReducers.fromUi.sGetUiInterpretation(state),\n  ui: fromReducers.fromUi.sGetUi(state),\n  visualization: sGetVisualization(state),\n  snackbar: fromReducers.fromSnackbar.sGetSnackbar(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentFromUi: ui => dispatch(fromActions.fromCurrent.acSetCurrentFromUi(ui)),\n  clearVisualization: () => dispatch(fromActions.fromVisualization.acClear()),\n  clearCurrent: () => dispatch(fromActions.fromCurrent.acClear()),\n  setUiFromVisualization: visualization => dispatch(fromActions.fromUi.acSetUiFromVisualization(visualization)),\n  addParentGraphMap: parentGraphMap => dispatch(fromActions.fromUi.acAddParentGraphMap(parentGraphMap)),\n  clearSnackbar: () => dispatch(fromActions.fromSnackbar.acClearSnackbar())\n});\n\nApp.contextTypes = {\n  store: PropTypes.object\n};\nApp.childContextTypes = {\n  d2: PropTypes.object,\n  dataEngine: PropTypes.object,\n  baseUrl: PropTypes.string,\n  i18n: PropTypes.object\n};\nApp.propTypes = {\n  addParentGraphMap: PropTypes.func,\n  baseUrl: PropTypes.string,\n  clearCurrent: PropTypes.func,\n  clearVisualization: PropTypes.func,\n  current: PropTypes.object,\n  d2: PropTypes.object,\n  dataEngine: PropTypes.object,\n  interpretation: PropTypes.object,\n  location: PropTypes.object,\n  ouLevels: PropTypes.array,\n  setCurrentFromUi: PropTypes.func,\n  setUiFromVisualization: PropTypes.func,\n  settings: PropTypes.object,\n  ui: PropTypes.object,\n  userSettings: PropTypes.object,\n  visualization: PropTypes.object\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import i18n from '@dhis2/d2-i18n';\n\nconst getRelativePeriods = () => ({\n  TODAY: i18n.t('Today'),\n  YESTERDAY: i18n.t('Yesterday'),\n  LAST_3_DAYS: i18n.t('Last 3 days'),\n  LAST_7_DAYS: i18n.t('Last 7 days'),\n  LAST_14_DAYS: i18n.t('Last 14 days'),\n  THIS_WEEK: i18n.t('This week'),\n  LAST_WEEK: i18n.t('Last week'),\n  LAST_4_WEEKS: i18n.t('Last 4 weeks'),\n  LAST_12_WEEKS: i18n.t('Last 12 weeks'),\n  LAST_52_WEEKS: i18n.t('Last 52 weeks'),\n  WEEKS_THIS_YEAR: i18n.t('Weeks this year'),\n  THIS_MONTH: i18n.t('This month'),\n  LAST_MONTH: i18n.t('Last month'),\n  LAST_3_MONTHS: i18n.t('Last 3 months'),\n  LAST_6_MONTHS: i18n.t('Last 6 months'),\n  LAST_12_MONTHS: i18n.t('Last 12 months'),\n  MONTHS_THIS_YEAR: i18n.t('Months this year'),\n  THIS_BIMONTH: i18n.t('This bimonth'),\n  LAST_BIMONTH: i18n.t('Last bimonth'),\n  LAST_6_BIMONTHS: i18n.t('Last 6 bimonths'),\n  BIMONTHS_THIS_YEAR: i18n.t('Bimonths this year'),\n  THIS_QUARTER: i18n.t('This quarter'),\n  LAST_QUARTER: i18n.t('Last quarter'),\n  LAST_4_QUARTERS: i18n.t('Last 4 quarters'),\n  QUARTERS_THIS_YEAR: i18n.t('Quarters this year'),\n  THIS_SIX_MONTH: i18n.t('This six-month'),\n  LAST_SIX_MONTH: i18n.t('Last six-month'),\n  LAST_2_SIXMONTHS: i18n.t('Last 2 six-months'),\n  THIS_FINANCIAL_YEAR: i18n.t('This financial year'),\n  LAST_FINANCIAL_YEAR: i18n.t('Last financial year'),\n  LAST_5_FINANCIAL_YEARS: i18n.t('Last 5 financial years'),\n  THIS_YEAR: i18n.t('This year'),\n  LAST_YEAR: i18n.t('Last year'),\n  LAST_5_YEARS: i18n.t('Last 5 years')\n});\n\nconst getOrganisationUnits = () => ({\n  USER_ORGUNIT: i18n.t('User org unit'),\n  USER_ORGUNIT_CHILDREN: i18n.t('User org unit children'),\n  USER_ORGUNIT_GRANDCHILDREN: i18n.t('User org unit grand children')\n});\n\nexport default function () {\n  return Object.entries({ ...getRelativePeriods(),\n    ...getOrganisationUnits()\n  }).reduce((obj, [key, value]) => ({ ...obj,\n    [key]: {\n      name: value\n    }\n  }), {});\n}","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import React, { useState, useEffect, useCallback } from 'react';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { D2Shim } from './D2Shim';\nimport configureStore from './configureStore';\nimport metadataMiddleware from './middleware/metadata';\nimport App from './components/App';\nimport { apiFetchOrganisationUnitLevels } from '@dhis2/analytics';\nimport './locales';\n\nconst AppWrapper = () => {\n  const engine = useDataEngine();\n  const store = configureStore([thunk.withExtraArgument(engine), metadataMiddleware]);\n\n  if (window.Cypress) {\n    window.store = store;\n  }\n\n  const [ouLevels, setOuLevels] = useState(null);\n  const doFetchOuLevelsData = useCallback(async () => {\n    const ouLevels = await apiFetchOrganisationUnitLevels(engine);\n    return ouLevels;\n  }, [engine]);\n  useEffect(() => {\n    const doFetch = async () => {\n      const ouLevelsData = await doFetchOuLevelsData();\n      setOuLevels(ouLevelsData);\n    };\n\n    doFetch();\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n  const schemas = ['visualization', 'organisationUnit', 'userGroup'];\n  return <Provider store={store}>\n            <D2Shim schemas={schemas}>\n                {params => <App {...params} dataEngine={engine} ouLevels={ouLevels} />}\n            </D2Shim>\n        </Provider>;\n};\n\nexport default AppWrapper;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"VisualizationTypeSelector_backdrop__84wtM\",\"button\":\"VisualizationTypeSelector_button__1d_Dv\",\"cardContainer\":\"VisualizationTypeSelector_cardContainer__2ZbJX\",\"listContainer\":\"VisualizationTypeSelector_listContainer__2ofGu\",\"listSection\":\"VisualizationTypeSelector_listSection__3wu8W\",\"listItem\":\"VisualizationTypeSelector_listItem__3Faru\",\"listItemActive\":\"VisualizationTypeSelector_listItemActive__1jCF3\",\"listItemDisabled\":\"VisualizationTypeSelector_listItemDisabled__2vjjv\",\"listItemSvg\":\"VisualizationTypeSelector_listItemSvg__30TD2\",\"listItemIcon\":\"VisualizationTypeSelector_listItemIcon__2vUNZ\",\"listItemName\":\"VisualizationTypeSelector_listItemName__1dM76\",\"listItemDescription\":\"VisualizationTypeSelector_listItemDescription__1-Joc\"};"],"sourceRoot":""}