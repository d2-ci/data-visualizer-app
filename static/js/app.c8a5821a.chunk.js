(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[115],{2147:function(e,t,n){"use strict";(function(e){t.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return"undefined"!==typeof e.Intl&&Intl.DateTimeFormat?new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"}).format(new Date(t)):t.substr(0,19).replace("T"," ")}}).call(this,n(250))},2149:function(e,t,n){e.exports={dimensionItemClone:"DndDimensionItem_dimensionItemClone__3KqdP",dragging:"DndDimensionItem_dragging__1uXIT"}},2150:function(e,t,n){e.exports={container:"DndDimensionList_container__DCFRx",wrapper:"DndDimensionList_wrapper__1gYqU",list:"DndDimensionList_list__1sErz",header:"DndDimensionList_header__Ugsfp",section:"DndDimensionList_section__1KL69"}},2151:function(e,t,n){e.exports={container:"DndDimensionsPanel_container__1gaeS"}},2390:function(e,t,n){},2391:function(e,t,n){},2409:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SET_VISUALIZATION",(function(){return G})),n.d(a,"CLEAR_VISUALIZATION",(function(){return F})),n.d(a,"DEFAULT_VISUALIZATION",(function(){return Y})),n.d(a,"default",(function(){return B})),n.d(a,"sGetVisualization",(function(){return H})),n.d(a,"sGetInterpretations",(function(){return q}));var r={};n.r(r),n.d(r,"SET_UI",(function(){return Se})),n.d(r,"SET_UI_FROM_VISUALIZATION",(function(){return _e})),n.d(r,"SET_UI_TYPE",(function(){return Ae})),n.d(r,"SET_UI_OPTIONS",(function(){return je})),n.d(r,"SET_UI_LAYOUT",(function(){return De})),n.d(r,"ADD_UI_LAYOUT_DIMENSIONS",(function(){return Te})),n.d(r,"REMOVE_UI_LAYOUT_DIMENSIONS",(function(){return Ce})),n.d(r,"SET_UI_ITEMS",(function(){return we})),n.d(r,"ADD_UI_ITEMS",(function(){return Ne})),n.d(r,"REMOVE_UI_ITEMS",(function(){return Le})),n.d(r,"SET_UI_PARENT_GRAPH_MAP",(function(){return Re})),n.d(r,"ADD_UI_PARENT_GRAPH_MAP",(function(){return ke})),n.d(r,"SET_UI_ACTIVE_MODAL_DIALOG",(function(){return Me})),n.d(r,"SET_UI_YEAR_ON_YEAR_SERIES",(function(){return Ve})),n.d(r,"SET_UI_YEAR_ON_YEAR_CATEGORY",(function(){return Ue})),n.d(r,"CLEAR_UI",(function(){return Pe})),n.d(r,"TOGGLE_UI_RIGHT_SIDEBAR_OPEN",(function(){return ze})),n.d(r,"SET_UI_RIGHT_SIDEBAR_OPEN",(function(){return Ge})),n.d(r,"SET_UI_INTERPRETATION",(function(){return Fe})),n.d(r,"CLEAR_UI_INTERPRETATION",(function(){return Ye})),n.d(r,"SET_AXES",(function(){return Be})),n.d(r,"DEFAULT_UI",(function(){return He})),n.d(r,"default",(function(){return qe})),n.d(r,"sGetUi",(function(){return We})),n.d(r,"sGetUiType",(function(){return Xe})),n.d(r,"sGetUiOptions",(function(){return Ke})),n.d(r,"sGetUiLayout",(function(){return Ze})),n.d(r,"sGetUiItems",(function(){return Qe})),n.d(r,"sGetUiYearOverYearSeries",(function(){return Je})),n.d(r,"sGetUiYearOverYearCategory",(function(){return $e})),n.d(r,"sGetUiParentGraphMap",(function(){return et})),n.d(r,"sGetUiActiveModalDialog",(function(){return tt})),n.d(r,"sGetUiRightSidebarOpen",(function(){return nt})),n.d(r,"sGetUiInterpretation",(function(){return at})),n.d(r,"sGetAxes",(function(){return rt})),n.d(r,"getAxisIdByDimensionId",(function(){return it})),n.d(r,"sGetUiItemsByDimension",(function(){return lt})),n.d(r,"sGetDimensionIdsFromLayout",(function(){return ot})),n.d(r,"sLayoutHasDimension",(function(){return ct})),n.d(r,"sLayoutHasAssignedCategories",(function(){return st})),n.d(r,"sGetAxisSetup",(function(){return ut}));var i={};n.r(i),n.d(i,"SET_CURRENT",(function(){return Ot})),n.d(i,"SET_CURRENT_FROM_UI",(function(){return It})),n.d(i,"CLEAR_CURRENT",(function(){return xt})),n.d(i,"DEFAULT_CURRENT",(function(){return St})),n.d(i,"default",(function(){return At})),n.d(i,"sGetCurrent",(function(){return jt})),n.d(i,"sGetCurrentFromUi",(function(){return Dt}));var l={};n.r(l),n.d(l,"SET_DIMENSIONS",(function(){return Tt})),n.d(l,"SET_SELECTED_DIMENSION",(function(){return Ct})),n.d(l,"default",(function(){return Nt})),n.d(l,"sGetDimensions",(function(){return Lt}));var o={};n.r(o),n.d(o,"SET_RECOMMENDED_IDS",(function(){return Rt})),n.d(o,"DEFAULT_RECOMMENDED_IDS",(function(){return kt})),n.d(o,"default",(function(){return Mt})),n.d(o,"sGetRecommendedIds",(function(){return Vt}));var c={};n.r(c),n.d(c,"SET_SETTINGS",(function(){return zt})),n.d(c,"ADD_SETTINGS",(function(){return Gt})),n.d(c,"DEFAULT_SETTINGS",(function(){return Ft})),n.d(c,"default",(function(){return Yt})),n.d(c,"sGetSettings",(function(){return Bt})),n.d(c,"sGetSettingsDisplayNameProperty",(function(){return Ht})),n.d(c,"sGetRootOrgUnit",(function(){return qt})),n.d(c,"sGetRelativePeriod",(function(){return Wt})),n.d(c,"sGetUiLocale",(function(){return Xt}));var s={};n.r(s),n.d(s,"acSetVisualization",(function(){return vn})),n.d(s,"acClear",(function(){return yn}));var u={};n.r(u),n.d(u,"acSetCurrent",(function(){return On})),n.d(u,"acClear",(function(){return In})),n.d(u,"acSetCurrentFromUi",(function(){return xn})),n.d(u,"tSetCurrentFromUi",(function(){return Sn}));var d={};n.r(d),n.d(d,"acSetDimensions",(function(){return jn})),n.d(d,"tSetDimensions",(function(){return Dn}));var m={};n.r(m),n.d(m,"acSetUi",(function(){return Tn})),n.d(m,"acClear",(function(){return Cn})),n.d(m,"acSetUiFromVisualization",(function(){return wn})),n.d(m,"acSetUiType",(function(){return Nn})),n.d(m,"acSetUiOptions",(function(){return Ln})),n.d(m,"acSetUiLayout",(function(){return Rn})),n.d(m,"acAddUiLayoutDimensions",(function(){return kn})),n.d(m,"acRemoveUiLayoutDimensions",(function(){return Mn})),n.d(m,"acSetUiItems",(function(){return Vn})),n.d(m,"acAddUiItems",(function(){return Un})),n.d(m,"acRemoveUiItems",(function(){return Pn})),n.d(m,"acSetUiYearOverYearSeries",(function(){return zn})),n.d(m,"acSetUiYearOverYearCategory",(function(){return Gn})),n.d(m,"acAddParentGraphMap",(function(){return Fn})),n.d(m,"acSetParentGraphMap",(function(){return Yn})),n.d(m,"acSetUiActiveModalDialog",(function(){return Bn})),n.d(m,"acToggleUiRightSidebarOpen",(function(){return Hn})),n.d(m,"acSetUiRightSidebarOpen",(function(){return qn})),n.d(m,"acSetUiInterpretation",(function(){return Wn})),n.d(m,"acClearUiInterpretation",(function(){return Xn})),n.d(m,"acSetAxes",(function(){return Kn}));var p={};n.r(p),n.d(p,"acAddMetadata",(function(){return Zn}));var f={};n.r(f),n.d(f,"acSetSettings",(function(){return Jn})),n.d(f,"acAddSettings",(function(){return $n})),n.d(f,"tAddSettings",(function(){return ea}));var h={};n.r(h),n.d(h,"acReceivedUser",(function(){return ta}));var E={};n.r(E),n.d(E,"acReceivedSnackbarMessage",(function(){return aa})),n.d(E,"acCloseSnackbar",(function(){return ra}));var b=n(0),g=n.n(b),v=n(233),y=n(638),O=n(232),I=n(18),x=n(19),S=n(420),_=n(239),A=n(16),j=n.n(A),D=n(323),T=["keyDateFormat","keyAnalysisRelativePeriod","keyAnalysisDigitGroupSeparator"],C=function(e){return{displayNameProperty:"name"===e.keyAnalysisDisplayProperty?"displayName":"displayShortName",uiLocale:e.keyUiLocale}},w=function(e){return console.log("Error: ",e)},N=function(){var e="".concat("/organisationUnits","?paging=false&userDataViewFallback=true&fields=").concat(["id","displayName","name"].join(","));return Object(D.getInstance)().then((function(t){return t.Api.getApi().get(e)})).then((function(e){return e.organisationUnits[0]})).catch(w)},L=function(){var e="".concat("/organisationUnitLevels","?paging=false&fields=").concat(["id","name","displayName","level"].join(","));return Object(D.getInstance)().then((function(t){return t.Api.getApi().get(e)})).then((function(e){return e.organisationUnitLevels})).catch(w)},R=n(2399),k=Object(R.a)(),M=n(44),V=n(200),U=function(e){var t=e.children,n=Object(S.a)(e,["children"]),a=Object(I.b)(),r=Object(b.useState)(null),i=Object(x.a)(r,2),l=i[0],o=i[1];return Object(b.useEffect)((function(){(function(e,t){var n,a,r,i,l;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.baseUrl,a=e.apiVersion,o.next=3,j.a.awrap(Object(D.init)(Object(_.a)({},t,{baseUrl:"".concat(n,"/api/").concat(a)})));case 3:return r=o.sent,o.t0=C,o.next=7,j.a.awrap(Object(D.getUserSettings)());case 7:return o.t1=o.sent,i=(0,o.t0)(o.t1),o.next=11,j.a.awrap(j.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:D.config.i18n.sources.add("./i18n_old/i18n_module_en.properties");case 1:case"end":return e.stop()}})));case 11:return o.next=13,j.a.awrap(L());case 13:return l=o.sent,o.abrupt("return",{location:k.location,baseUrl:n,d2:r,userSettings:i,ouLevels:l});case 15:case"end":return o.stop()}}))})(a,n).then(o)}),[]),l?t(l):g.a.createElement(M.a,null,g.a.createElement(V.a,null))},P=n(371),z=n(344),G=(n(651),"SET_VISUALIZATION"),F="CLEAR_VISUALIZATION",Y=null,B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return t.value;case F:return Y;default:return e}},H=function(e){return e.visualization},q=function(e){return e.visualization?e.visualization.interpretations:[]},W=n(13),X=n(234),K=n(635),Z={baseLineLabel:{defaultValue:void 0,requestable:!1},baseLineValue:{defaultValue:void 0,requestable:!1},cumulativeValues:{defaultValue:!1,requestable:!1},domainAxisLabel:{defaultValue:void 0,requestable:!1},hideEmptyRowItems:{defaultValue:"NONE",requestable:!1},hideLegend:{defaultValue:!1,requestable:!1},noSpaceBetweenColumns:{defaultValue:!1,requestable:!1},percentStackedValues:{defaultValue:!1,requestable:!1},rangeAxisDecimals:{defaultValue:void 0,requestable:!1},rangeAxisLabel:{defaultValue:void 0,requestable:!1},rangeAxisMaxValue:{defaultValue:void 0,requestable:!1},rangeAxisMinValue:{defaultValue:void 0,requestable:!1},rangeAxisSteps:{defaultValue:void 0,requestable:!1},regressionType:{defaultValue:"NONE",requestable:!1},showData:{defaultValue:!0,requestable:!1},targetLineLabel:{defaultValue:void 0,requestable:!1},targetLineValue:{defaultValue:void 0,requestable:!1},aggregationType:{defaultValue:"DEFAULT",requestable:!0},completedOnly:{defaultValue:!1,requestable:!0},hideSubtitle:{defaultValue:!1,requestable:!1},hideTitle:{defaultValue:!1,requestable:!1},sortOrder:{defaultValue:"0",requestable:!1},subtitle:{defaultValue:void 0,requestable:!1},title:{defaultValue:void 0,requestable:!1},colTotals:{defaultValue:!1,requestable:!1},colSubTotals:{defaultValue:!1,requestable:!1},rowTotals:{defaultValue:!1,requestable:!1},rowSubTotals:{defaultValue:!1,requestable:!1},showDimensionLabels:{defaultValue:!1,requestable:!1},hideEmptyColumns:{defaultValue:!1,requestable:!0},hideEmptyRows:{defaultValue:!1,requestable:!0},skipRounding:{defaultValue:!1,requestable:!0},numberType:{defaultValue:"VALUE",requestable:!1},showHierarchy:{defaultValue:!1,requestable:!0},legendSet:{defaultValue:void 0,requestable:!1},legendDisplayStrategy:{defaultValue:void 0,requestable:!1},legendDisplayStyle:{defaultValue:"FILL",requestable:!1},displayDensity:{defaultValue:"NORMAL",requestable:!1},fontSize:{defaultValue:"NORMAL",requestable:!1},digitGroupSeparator:{defaultValue:"SPACE",requestable:!1},reportingPeriod:{defaultValue:!1,requestable:!1},organisationUnit:{defaultValue:!1,requestable:!1},parentOrganisationUnit:{defaultValue:!1,requestable:!1},grandParentOrganisationUnit:{defaultValue:!1,requestable:!1},regression:{defaultValue:!1,requestable:!1},cumulative:{defaultValue:!1,requestable:!1},measureCriteria:{defaultValue:void 0,requestable:!0},topLimit:{defaultValue:"0",requestable:!1}},Q={baseLine:{defaultValue:!1,requestable:!1},targetLine:{defaultValue:!1,requestable:!1},axisRange:{defaultValue:void 0,requestable:!1}},J=Z,$=function(){return Object.entries(Object(_.a)({},Z,{},Q)).reduce((function(e,t){var n=Object(x.a)(t,2),a=n[0],r=n[1];return e[a]=r.defaultValue,e}),{})},ee=function(e,t){return Boolean(e[t]&&e[t]!==Z[t].defaultValue)},te=function(e){var t=Object(_.a)({},$(),{},Object(K.a)(e,Object.keys(Z)));return t.baseLine=ee(t,"baseLineLabel")||ee(t,"baseLineValue"),t.targetLine=ee(t,"targetLineLabel")||ee(t,"targetLineValue"),e.reportingParams&&(t.organisationUnit=e.reportingParams.organisationUnit,t.reportingPeriod=e.reportingParams.reportingPeriod,t.parentOrganisationUnit=e.reportingParams.parentOrganisationUnit,t.grandParentOrganisationUnit=e.reportingParams.grandParentOrganisationUnit),["sortOrder","topLimit"].forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=String(e[n]))})),t},ne=n(4),ae=n.n(ne),re=[{axisId:X.AXIS_ID_COLUMNS,name:ae.a.t("Add to series")},{axisId:X.AXIS_ID_ROWS,name:ae.a.t("Add to category")},{axisId:X.AXIS_ID_FILTERS,name:ae.a.t("Add to filter")}],ie=(ae.a.t("series"),ae.a.t("category"),ae.a.t("filter"),function(e,t){var n,a=Array.isArray(t)?t:[t];return n={},Object(W.a)(n,X.AXIS_ID_COLUMNS,e[X.AXIS_ID_COLUMNS].filter((function(e){return!a.includes(e)}))),Object(W.a)(n,X.AXIS_ID_ROWS,e[X.AXIS_ID_ROWS].filter((function(e){return!a.includes(e)}))),Object(W.a)(n,X.AXIS_ID_FILTERS,e[X.AXIS_ID_FILTERS].filter((function(e){return!a.includes(e)}))),n}),le=function(e){var t=Object.entries(e),n={};return t.forEach((function(e){var t=Object(x.a)(e,2),a=t[0];t[1].forEach((function(e){n[e]=a}))})),n},oe=function(e,t,n){var a=le(e),r=Object.keys(t),i={};return r.forEach((function(r){var l=a[r]||null,o=t[r].axisId,c=e[o]||[];if(Object(X.isAxisFull)(n,o,c.length)){var s=Object(X.getTransferableDimension)(n,o,e[o]);if(s){var u=l||Object(X.getAvailableAxes)(n).find((function(e){return!Object(X.getAxisMaxNumberOfDimensions)(n,e)}));i[s]={axisId:u}}}})),i},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)(Object(W.a)({},"name",e),t)},se={reportTable:[ce("cumulative",{option:!0}),ce("hideEmptyColumns",{option:!0}),ce("legendDisplayStyle",{option:!0}),ce("measureCriteria",{option:!0}),ce("numberType",{option:!0}),ce("regression",{option:!0}),ce("reportingParams",{option:!0}),ce("skipRounding",{option:!0})],chart:[ce("category",{excluded:!0}),ce("series",{excluded:!0}),ce("yearlySeries")],eventReport:[ce("dataType")],reportTable_eventReport:[ce("colSubTotals",{option:!0}),ce("colTotals",{option:!0}),ce("displayDensity",{option:!0}),ce("fontSize",{option:!0}),ce("hideEmptyRows",{option:!0}),ce("rowSubTotals",{option:!0}),ce("rowTotals",{option:!0}),ce("showDimensionLabels",{option:!0}),ce("showHierarchy",{option:!0})],chart_eventChart:[ce("baseLineLabel",{option:!0}),ce("baseLineValue",{option:!0}),ce("colorSet",{option:!0}),ce("cumulativeValues",{option:!0}),ce("domainAxisLabel",{option:!0}),ce("hideEmptyRowItems",{option:!0}),ce("hideLegend",{option:!0}),ce("noSpaceBetweenColumns",{option:!0}),ce("percentStackedValues",{option:!0}),ce("rangeAxisDecimals",{option:!0}),ce("rangeAxisLabel",{option:!0}),ce("rangeAxisMaxValue",{option:!0}),ce("rangeAxisMinValue",{option:!0}),ce("rangeAxisSteps",{option:!0}),ce("regressionType",{option:!0}),ce("optionalAxes"),ce("showData",{option:!0}),ce("targetLineLabel",{option:!0}),ce("targetLineValue",{option:!0}),ce("type",{option:!0})],eventReport_eventChart:[ce("attributeValueDimension"),ce("collapseDataDimensions"),ce("dataElementValueDimension"),ce("endDate"),ce("eventStatus",{option:!0}),ce("hideNaData",{option:!0}),ce("outputType",{option:!0}),ce("program"),ce("programStage"),ce("programStatus",{option:!0}),ce("startDate"),ce("value")],reportTable_chart_eventReport:[ce("legendDisplayStrategy",{option:!0}),ce("legendSet",{option:!0})],reportTable_eventReport_eventChart:[ce("columnDimensions",{excluded:!0}),ce("rowDimensions",{excluded:!0})],reportTable_chart_eventReport_eventChart:[ce("access"),ce("aggregationType",{option:!0}),ce("attributeDimensions",{excluded:!0}),ce("attributeValues",{excluded:!0}),ce("categoryDimensions",{excluded:!0}),ce("categoryOptionGroupSetDimensions",{excluded:!0}),ce("code",{excluded:!0}),ce("columns"),ce("completedOnly",{option:!0}),ce("created"),ce("dataDimensionItems",{excluded:!0}),ce("dataElementDimensions",{excluded:!0}),ce("dataElementGroupSetDimensions",{excluded:!0}),ce("description"),ce("digitGroupSeparator"),ce("displayDescription"),ce("displayName"),ce("displayShortName"),ce("externalAccess",{excluded:!0}),ce("favorite"),ce("favorites"),ce("filterDimensions",{excluded:!0}),ce("filters"),ce("hideSubtitle",{option:!0}),ce("hideTitle",{option:!0}),ce("href",{excluded:!0}),ce("id"),ce("interpretations"),ce("itemOrganisationUnitGroups",{excluded:!0}),ce("lastUpdated"),ce("lastUpdatedBy"),ce("name"),ce("organisationUnitGroupSetDimensions",{excluded:!0}),ce("organisationUnitLevels",{excluded:!0}),ce("organisationUnits",{excluded:!0}),ce("parentGraphMap"),ce("periods",{excluded:!0}),ce("programIndicatorDimensions",{excluded:!0}),ce("publicAccess"),ce("relativePeriods",{excluded:!0}),ce("rows"),ce("shortName"),ce("sortOrder",{option:!0}),ce("subscribed"),ce("subscribers"),ce("subtitle",{option:!0}),ce("timeField"),ce("title",{option:!0}),ce("topLimit",{option:!0}),ce("translations"),ce("user"),ce("userAccesses"),ce("userGroupAccesses"),ce("userOrganisationUnit",{excluded:!0}),ce("userOrganisationUnitChildren",{excluded:!0}),ce("userOrganisationUnitGrandChildren",{excluded:!0})]};se.visualization=[].concat(Object(P.a)(se.reportTable),Object(P.a)(se.chart),Object(P.a)(se.reportTable_eventReport),Object(P.a)(se.chart_eventChart),Object(P.a)(se.reportTable_chart_eventReport),Object(P.a)(se.reportTable_eventReport_eventChart),Object(P.a)(se.reportTable_chart_eventReport_eventChart));var ue,de=function(e){return e.name},me=function(e){return!0===e.excluded?Object(_.a)({},e,Object(W.a)({},"name","!".concat(e.name))):e},pe=function(e,t,n,a){return!e&&(e=a.slice()),"!"===t.charAt(0)&&e.push(e.shift()),e},fe=function(e){return Object.entries(se).reduce((function(t,n){var a=Object(x.a)(n,2),r=a[0],i=a[1];return r.includes(e)?t.concat(i):t}),[])},he=function(e){var t,n=e[X.AXIS_ID_COLUMNS].slice(),a=e[X.AXIS_ID_ROWS].slice();return t={},Object(W.a)(t,X.AXIS_ID_COLUMNS,[n.shift()]),Object(W.a)(t,X.AXIS_ID_ROWS,[a.shift()]),Object(W.a)(t,X.AXIS_ID_FILTERS,[].concat(Object(P.a)(e[X.AXIS_ID_FILTERS]),Object(P.a)(n),Object(P.a)(a))),t},Ee=function(e){var t,n=e[X.AXIS_ID_COLUMNS].slice(),a=e[X.AXIS_ID_ROWS].slice();return t={},Object(W.a)(t,X.AXIS_ID_COLUMNS,[n.shift()||a.shift()]),Object(W.a)(t,X.AXIS_ID_ROWS,[]),Object(W.a)(t,X.AXIS_ID_FILTERS,[].concat(Object(P.a)(e[X.AXIS_ID_FILTERS]),Object(P.a)(n),Object(P.a)(a))),t},be=function(e){var t;return t={},Object(W.a)(t,X.AXIS_ID_COLUMNS,[]),Object(W.a)(t,X.AXIS_ID_ROWS,[]),Object(W.a)(t,X.AXIS_ID_FILTERS,[].concat(Object(P.a)(e[X.AXIS_ID_FILTERS]),Object(P.a)(e[X.AXIS_ID_COLUMNS]),Object(P.a)(e[X.AXIS_ID_ROWS])).filter((function(e){return e!==X.DIMENSION_ID_PERIOD}))),t},ge=function(e){var t,n=e[X.AXIS_ID_COLUMNS].slice(),a=e[X.AXIS_ID_ROWS].slice();return t={},Object(W.a)(t,X.AXIS_ID_COLUMNS,[X.DIMENSION_ID_DATA]),Object(W.a)(t,X.AXIS_ID_ROWS,[]),Object(W.a)(t,X.AXIS_ID_FILTERS,[].concat(Object(P.a)(e[X.AXIS_ID_FILTERS]),Object(P.a)(n),Object(P.a)(a)).filter((function(e){return e!==X.DIMENSION_ID_DATA}))),t},ve=function(e){return!!X.ouIdHelper.hasLevelPrefix(e)&&Number.isInteger(parseInt(X.ouIdHelper.removePrefix(e),10))},ye=function(e,t){var n=Object(X.layoutGetDimension)(t,X.DIMENSION_ID_ORGUNIT);if(n&&Object(X.dimensionGetItems)(n).some((function(e){return ve(e.id)}))){var a=function(e){return function(t){if(!ve(t.id))return t;var n=parseInt(X.ouIdHelper.removePrefix(t.id),10),a=e.find((function(e){return parseInt(e.level,10)===n})).id;return Object.assign({},t,{id:X.ouIdHelper.addLevelPrefix(a)})}}(e),r=Object(X.dimensionGetItems)(n).map(a);return Object(X.layoutReplaceDimension)(t,X.DIMENSION_ID_ORGUNIT,r)}return t},Oe=function(e){return 1===e.match(/\//g).length?e:e.substr(0,e.lastIndexOf("/"))},Ie=function(e,t,n){return t[e]&&t[e].path?t[e].path:n[e]===e||""===n[e]?"/".concat(e):n[e]?"/".concat(n[e],"/").concat(e):void 0},xe=n(1679),Se="SET_UI",_e="SET_UI_FROM_VISUALIZATION",Ae="SET_UI_TYPE",je="SET_UI_OPTIONS",De="SET_UI_LAYOUT",Te="ADD_UI_LAYOUT_DIMENSIONS",Ce="REMOVE_UI_LAYOUT_DIMENSIONS",we="SET_UI_ITEMS",Ne="ADD_UI_ITEMS",Le="REMOVE_UI_ITEMS",Re="SET_UI_PARENT_GRAPH_MAP",ke="ADD_UI_PARENT_GRAPH_MAP",Me="SET_UI_ACTIVE_MODAL_DIALOG",Ve="SET_UI_YEAR_ON_YEAR_SERIES",Ue="SET_UI_YEAR_ON_YEAR_CATEGORY",Pe="CLEAR_UI",ze="TOGGLE_UI_RIGHT_SIDEBAR_OPEN",Ge="SET_UI_RIGHT_SIDEBAR_OPEN",Fe="SET_UI_INTERPRETATION",Ye="CLEAR_UI_INTERPRETATION",Be="SET_AXES",He={type:X.VIS_TYPE_COLUMN,options:$(),layout:{columns:[X.DIMENSION_ID_DATA],rows:[X.DIMENSION_ID_PERIOD],filters:[X.DIMENSION_ID_ORGUNIT]},itemsByDimension:(ue={},Object(W.a)(ue,X.DIMENSION_ID_ORGUNIT,[]),Object(W.a)(ue,X.DIMENSION_ID_PERIOD,[]),ue),yearOverYearSeries:["THIS_YEAR","LAST_YEAR"],yearOverYearCategory:["MONTHS_THIS_YEAR"],parentGraphMap:{},activeModalDialog:null,rightSidebarOpen:!1,interpretation:{},axes:null},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(_.a)({},t.value);case _e:return pt(mt(t.value,e));case Ae:return Object(_.a)({},e,{type:t.value});case je:return Object(_.a)({},e,{options:Object(_.a)({},e.options,{},t.value)});case De:return Object(_.a)({},e,{layout:Object(_.a)({},t.value)});case Te:var n=Object(_.a)({},t.value,{},oe(e.layout,t.value,e.type)),a=e.layout;return Object.entries(n).forEach((function(t){var n=Object(x.a)(t,2),r=n[0],i=n[1],l=i.axisId,o=i.index;a[l]&&Object(X.canDimensionBeAddedToAxis)(e.type,a[l],l)&&(a=ie(a,[r]),null===o||void 0===o?a[l].push(r):a[l].splice(o,0,r))})),Object(_.a)({},e,{layout:a});case Ce:return Object(_.a)({},e,{layout:ie(e.layout,t.value)});case we:var r=t.value,i=r.dimensionId,l=r.itemIds;return Object(_.a)({},e,{itemsByDimension:Object(_.a)({},e.itemsByDimension,Object(W.a)({},i,l))});case Ne:var o=t.value,c=o.dimensionId,s=o.itemIds,u=e.itemsByDimension[c]||[],d=Object(P.a)(new Set([].concat(Object(P.a)(u),Object(P.a)(s))));return Object(_.a)({},e,{itemsByDimension:Object(_.a)({},e.itemsByDimension,Object(W.a)({},c,d))});case Le:var m=t.value,p=m.dimensionId,f=m.itemIdsToRemove,h=(e.itemsByDimension[p]||[]).filter((function(e){return!f.includes(e)}));return Object(_.a)({},e,{itemsByDimension:Object(_.a)({},e.itemsByDimension,Object(W.a)({},p,h))});case Ve:return Object(_.a)({},e,{yearOverYearSeries:t.value||He.yearOverYearSeries});case Ue:return Object(_.a)({},e,{yearOverYearCategory:t.value?Object(xe.a)(t.value):He.yearOverYearCategory});case Re:return Object(_.a)({},e,{parentGraphMap:t.value});case ke:return Object(_.a)({},e,{parentGraphMap:Object(_.a)({},e.parentGraphMap,{},t.value)});case Me:return Object(_.a)({},e,{activeModalDialog:t.value||He.activeModalDialog});case Pe:var E,b=t.value,g=b.rootOrganisationUnit,v=b.relativePeriod;return Object(_.a)({},He,{itemsByDimension:Object(_.a)({},He.itemsByDimension,(E={},Object(W.a)(E,X.DIMENSION_ID_ORGUNIT,[g.id]),Object(W.a)(E,X.DIMENSION_ID_PERIOD,[v]),E)),parentGraphMap:Object(_.a)({},He.parentGraphMap,Object(W.a)({},g.id,""))});case ze:return Object(_.a)({},e,{rightSidebarOpen:!e.rightSidebarOpen});case Ge:return Object(_.a)({},e,{rightSidebarOpen:!0});case Fe:return Object(_.a)({},e,{interpretation:t.value});case Ye:return Object(_.a)({},e,{interpretation:He.interpretation});case Be:return Object(_.a)({},e,{axes:t.value});default:return e}},We=function(e){return e.ui},Xe=function(e){return We(e).type},Ke=function(e){return We(e).options},Ze=function(e){return We(e).layout},Qe=function(e){return We(e).itemsByDimension},Je=function(e){return We(e).yearOverYearSeries},$e=function(e){return We(e).yearOverYearCategory},et=function(e){return We(e).parentGraphMap},tt=function(e){return We(e).activeModalDialog},nt=function(e){return We(e).rightSidebarOpen},at=function(e){return We(e).interpretation},rt=function(e){return We(e).axes},it=function(e,t){return(le(Ze(e))||{})[t]},lt=function(e,t){return Qe(e)[t]||He.itemsByDimension[t]},ot=function(e){return Object.values(Ze(e)).reduce((function(e,t){return e.concat(t)}),[])},ct=function(e,t){return ot(e).includes(t)},st=function(e){return ct(e,X.DIMENSION_ID_ASSIGNED_CATEGORIES)},ut=function(e){var t=Ze(e).columns,n=Qe(e),a=rt(e)||{};return Array.isArray(n[t[0]])&&n[t[0]].length?n[t[0]].map((function(e){return{id:e,axis:e in a?a[e]:0}})):[]},dt=function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return"number"===typeof e.axis})).reduce((function(e,t){return e[t.dimensionalItem]=t.axis,e}),{}):He.axes},mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(_.a)({},t,{type:e.type||X.defaultVisType,options:te(e),layout:Object(X.layoutGetAxisIdDimensionIdsObject)(e),itemsByDimension:Object(X.layoutGetDimensionIdItemIdsObject)(e),parentGraphMap:e.parentGraphMap||ft(e)||t.parentGraphMap,yearOverYearSeries:Object(X.isYearOverYear)(e.type)&&e.yearlySeries?e.yearlySeries:t.yearOverYearSeries,yearOverYearCategory:Object(X.isYearOverYear)(e.type)?e.rows[0].items.map((function(e){return e.id})):t.yearOverYearCategory,axes:dt(e.optionalAxes)})},pt=function(e){switch(e.type){case X.VIS_TYPE_YEAR_OVER_YEAR_LINE:case X.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return function(e){var t=Object.assign({},e),n=Object.assign({},t.itemsByDimension);return delete n[X.DIMENSION_ID_PERIOD],Object(_.a)({},t,{layout:be(e.layout),itemsByDimension:n})}(e);case X.VIS_TYPE_PIE:return function(e){return Object(_.a)({},e,{layout:Ee(e.layout)})}(e);case X.VIS_TYPE_SINGLE_VALUE:case X.VIS_TYPE_GAUGE:return function(e){return Object(_.a)({},e,{layout:ge(e.layout)})}(e);default:return function(e){return Object(_.a)({},e,{layout:he(e.layout)})}(e)}},ft=function(e){var t=Object(X.layoutGetAxisIdDimensionIdsObject)(e),n=le(t)[X.DIMENSION_ID_ORGUNIT];if(!n)return{};var a={};return e[n].find((function(e){return e.dimension===X.DIMENSION_ID_ORGUNIT})).items.filter((function(e){return e.path})).forEach((function(e){if("/"+e.id===e.path)a[e.id]="";else{var t=Oe(e.path);a[e.id]="/"===t[0]?t.substr(1):t}})),a},ht=function(e){return Object.entries(e.layout).reduce((function(t,n){var a=Object(x.a)(n,2),r=a[0],i=a[1];return Object(_.a)({},t,Object(W.a)({},r,i.map((function(t){return n=e.itemsByDimension,a=t,Array.isArray(n[a])&&n[a].length||Object(X.getPredefinedDimensionProp)(t,X.DIMENSION_PROP_NO_ITEMS)?Object(X.dimensionCreate)(t,e.itemsByDimension[t]):null;var n,a})).filter((function(e){return null!==e}))))}),{})},Et=function(e){var t=Object(K.a)(e.options,Object.keys(J));return!1===e.options.targetLine&&(t.targetLineLabel=J.targetLineLabel.defaultValue,t.targetLineValue=J.targetLineValue.defaultValue),!1===e.options.baseLine&&(t.baseLineLabel=J.baseLineLabel.defaultValue,t.baseLineValue=J.baseLineValue.defaultValue),t.reportingParams={},["organisationUnit","reportingPeriod","parentOrganisationUnit","grandParentOrganisationUnit"].forEach((function(e){t.reportingParams[e]=t[e],delete t[e]})),["sortOrder","topLimit"].forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=Number(t[e]))})),t},bt=function(e){var t,n,a,r={};return t=r,n=e.axes,a="axis",Object.keys(n||{}).forEach((function(e){e in t||(t[e]={}),t[e][a]=n[e]})),Object.entries(r).reduce((function(e,t){var n=Object(x.a)(t,2),a=n[0],r=n[1];return r.dimensionalItem=a,e.push(r),e}),[])},gt=function(e,t){var n=Object(_.a)({},t.value,{layout:Object(_.a)({},ge(t.value.layout))}),a=ht(n),r=Object(X.layoutGetDimensionItems)(a,X.DIMENSION_ID_DATA),i=Object(X.layoutReplaceDimension)(a,X.DIMENSION_ID_DATA,[r[0]]);return Object(_.a)({},e,Object(W.a)({},"type",n.type),i,{},Et(n))},vt=function(e,t){var n=Object(_.a)({},t.value,{layout:Object(_.a)({},Ee(t.value.layout))});return Object(_.a)({},e,Object(W.a)({},"type",n.type),ht(n),{},Et(n))},yt=function(e,t){var n,a=t.value,r=a.itemsByDimension[X.DIMENSION_ID_DATA]?[a.itemsByDimension[X.DIMENSION_ID_DATA][0]]:[];return Object(_.a)({},e,(n={},Object(W.a)(n,"type",a.type),Object(W.a)(n,X.AXIS_ID_COLUMNS,[Object(X.dimensionCreate)(X.DIMENSION_ID_DATA,r)]),Object(W.a)(n,X.AXIS_ID_ROWS,[Object(X.dimensionCreate)(X.DIMENSION_ID_PERIOD,a.yearOverYearCategory)]),Object(W.a)(n,X.AXIS_ID_FILTERS,ht(a).filters.filter((function(e){return![X.DIMENSION_ID_DATA,X.DIMENSION_ID_PERIOD].includes(e.dimension)}))),Object(W.a)(n,["yearlySeries"],a.yearOverYearSeries),n),Et(a))},Ot="SET_CURRENT",It="SET_CURRENT_FROM_UI",xt="CLEAR_CURRENT",St=null,_t=function(e,t){var n=ht(t.value),a=Et(t.value),r=bt(t.value);return Object(_.a)({},e,Object(W.a)({},"type",t.value.type),n,{},a,{optionalAxes:r})},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ot:return t.value;case It:switch(t.value.type){case X.VIS_TYPE_PIE:return vt(e,t);case X.VIS_TYPE_SINGLE_VALUE:case X.VIS_TYPE_GAUGE:return gt(e,t);case X.VIS_TYPE_YEAR_OVER_YEAR_LINE:case X.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return yt(e,t);default:return _t(e,t)}case xt:return St;default:return e}},jt=function(e){return e.current},Dt=function(e){var t=e.ui;switch(t.type){case X.VIS_TYPE_PIE:return vt(e,{value:t});case X.VIS_TYPE_SINGLE_VALUE:case X.VIS_TYPE_GAUGE:return gt(e,{value:t});case X.VIS_TYPE_YEAR_OVER_YEAR_LINE:case X.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return yt(e,{value:t});default:return _t(e,{value:t})}},Tt="SET_DIMENSIONS",Ct="SET_SELECTED_DIMENSION",wt=Object(X.getPredefinedDimensions)(),Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt:return Object(_.a)({},wt,{},t.value);default:return e}},Lt=function(e){return e.dimensions},Rt="SET_RECOMMENDED_IDS",kt=[],Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rt:return t.value||kt;default:return e}},Vt=function(e){return e.recommendedIds},Ut={},Pt=function(e){return e.metadata},zt="SET_SETTINGS",Gt="ADD_SETTINGS",Ft={keyDateFormat:"yyyy-MM-dd",keyAnalysisRelativePeriod:"LAST_12_MONTHS",keyAnalysisDigitGroupSeparator:"SPACE",displayNameProperty:"displayName",uiLocale:"en",rootOrganisationUnit:{}},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zt:return Object.assign({},t.value);case Gt:return Object(_.a)({},e,{},t.value);default:return e}},Bt=function(e){return e.settings},Ht=function(e){return Bt(e).displayNameProperty},qt=function(e){return Bt(e).rootOrganisationUnit},Wt=function(e){return Bt(e).keyAnalysisRelativePeriod},Xt=function(e){return Bt(e).uiLocale},Kt={id:"",username:"",uiLocale:"",isSuperuser:!1};function Zt(e){return{id:e.id,username:e.username,uiLocale:e.settings.keyUiLocale,isSuperuser:e.authorities.has("ALL")}}var Qt,Jt=n(861),$t=n.n(Jt),en=n(862),tn=n.n(en),nn=n(527),an=n.n(nn),rn=n(387),ln=n.n(rn),on="name,displayName,displayShortName",cn="dimensionItem~rename(".concat("id",")"),sn="".concat("id",",").concat(on),un="".concat(on,",userCredentials[username]"),dn="".concat(cn,",").concat(on,",dimensionItemType"),mn="dimension,filter,legendSet[".concat(sn,"],items[").concat(dn,"]"),pn={columns:mn,rows:mn,filters:mn,user:un,interpretations:"id,created",legendSet:sn},fn=function(e){return"".concat(e).concat(pn[e]?"[".concat(pn[e],"]"):"")},hn={visualization:{resource:"visualizations",id:function(e){return e.id},params:{fields:(Qt="visualization",fe(Qt).map(me).map(de).sort().reduce(pe,null).map(fn).join(","))}}},En={visualization:{resource:"visualizations",params:function(e){var t=e.visualizationIds;return{filter:"id:in:[".concat(t,"]"),fields:["id","type"]}}}},bn=function(e,t){return e.query(hn,{variables:{id:t}})},gn=function(e,t){var n={type:"create",resource:"visualizations",data:t,params:{skipTranslations:"true",skipSharing:"true"}};return t.id&&(n.type="update",n.id=t.id),e.mutate(n)},vn=function(e){return{type:G,value:e}},yn=function(){return{type:F}},On=function(e){return{type:Ot,value:e}},In=function(){return{type:xt}},xn=function(e){return{type:It,value:e}},Sn=function(){return function(e,t){return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e(xn(We(t())));case 1:case"end":return n.stop()}}))}},_n=n(2398),An=n(2396),jn=function(e){return{type:Tt,value:Object(_n.a)(Object(An.a)(e,[function(e){return e.name.toLowerCase()}]),"id")}},Dn=function(e){return function(t,n){var a,r,i,l;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=function(e){t(jn(e))},r=function(e){return console.log("Error (apiFetchDimensions): ",e),e},o.prev=2,i=Ht(n()),o.next=6,j.a.awrap(Object(X.apiFetchDimensions)(e,i));case 6:return l=o.sent,o.abrupt("return",a(l));case 10:return o.prev=10,o.t0=o.catch(2),o.abrupt("return",r(o.t0));case 13:case"end":return o.stop()}}),null,null,[[2,10]])}},Tn=function(e){return{type:Se,value:e}},Cn=function(e){return{type:Pe,value:e}},wn=function(e){return{type:_e,value:e}},Nn=function(e){return{type:Ae,value:e}},Ln=function(e){return{type:je,value:e}},Rn=function(e){return{type:De,value:e}},kn=function(e){return{type:Te,value:e}},Mn=function(e){return{type:Ce,value:e}},Vn=function(e){return{type:we,value:e}},Un=function(e){return{type:Ne,value:e}},Pn=function(e){return{type:Le,value:e}},zn=function(e){return{type:Ve,value:e}},Gn=function(e){return{type:Ue,value:e}},Fn=function(e){return{type:ke,value:e}},Yn=function(e){return{type:Re,value:e}},Bn=function(e){return{type:Me,value:e}},Hn=function(){return{type:ze}},qn=function(){return{type:Ge}},Wn=function(e){return{type:Fe,value:e}},Xn=function(){return{type:Ye}},Kn=function(e){return{type:Be,value:e}},Zn=function(e){return{type:"ADD_METADATA",value:e}},Qn=function(){var e="".concat("/systemSettings","?").concat(T.map((function(e){return"key=".concat(e)})).join("&"));return Object(D.getInstance)().then((function(t){return t.Api.getApi().get(e)})).catch(w)},Jn=function(e){return{type:zt,value:e}},$n=function(e){return{type:Gt,value:e}},ea=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n,a,r,i;return j.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=function(n){e($n(Object.assign.apply(Object,[{},n].concat(t))))},a=function(e){return console.log("Error (apiFetchSystemSettings): ",e),e},l.prev=2,l.next=5,j.a.awrap(Qn());case 5:return r=l.sent,l.next=8,j.a.awrap(N());case 8:return i=l.sent,l.abrupt("return",n(Object(_.a)({},r,{rootOrganisationUnit:i})));case 12:return l.prev=12,l.t0=l.catch(2),l.abrupt("return",a(l.t0));case 15:case"end":return l.stop()}}),null,null,[[2,12]])}},ta=function(e){return{type:"RECEIVED_USER",value:e}},na=function(e){return e.chart},aa=function(e){return{type:Ea,value:e}},ra=function(){return{type:ba}},ia={isLoading:!1,loadingError:null},la=function(e){return e.loader.loadingError},oa=function(e){return{type:"SET_LOAD_ERROR",value:e}},ca=function(){return{type:"CLEAR_LOAD_ERROR"}},sa=function(e){var t,n,a;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.a.awrap(Object(D.getInstance)());case 2:return t=r.sent,n=t.Api.getApi(),a="/dataStatistics?eventType=".concat("CHART_VIEW","&favorite=").concat(e),r.abrupt("return",n.post(a));case 6:case"end":return r.stop()}}))},ua=function(e,t){return console.log("Error in action ".concat(e,": ").concat(t)),t},da=function(e){var t=e.id,n=e.interpretationId,a=e.ouLevels;return function(e,r,i){var l,o;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return l=function(t){var r,i;return j.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:r=ye(a,t.visualization),n&&(i=r.interpretations.find((function(e){return e.id===n})))&&(e(Wn(i)),e(qn())),sa(r.id),e(vn(r)),e(On(r)),e(wn(r)),e({type:"CLEAR_LOAD_ERROR"});case 7:case"end":return l.stop()}}))},c.prev=1,c.t0=l,c.next=5,j.a.awrap(bn(i,t));case 5:return c.t1=c.sent,c.abrupt("return",(0,c.t0)(c.t1));case 9:return c.prev=9,c.t2=c.catch(1),o=c.t2,c.t2&&c.t2.message&&(o=c.t2.message),ma(e,r,o),c.abrupt("return",ua("tDoLoadVisualization",o));case 15:case"end":return c.stop()}}),null,null,[[1,9]])}},ma=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(n?oa(n):{type:"CLEAR_LOAD_ERROR"}),e(yn()),e(In());var a=qt(t()),r=Wt(t());e(Cn({rootOrganisationUnit:a,relativePeriod:r}))},pa=n(2),fa={container:{display:"flex",alignItems:"center"},icon:{marginRight:8},closeIcon:{marginLeft:8,width:18,height:18,cursor:"pointer"},warning:{backgroundColor:pa.colors.yellow500,color:pa.colors.black},error:{backgroundColor:pa.colors.red500,color:pa.colors.white}},ha=Object(v.connect)((function(e){var t=va(e),n=t.variant,a=t.message,r=t.duration;return{variant:n,open:t.open,message:a,duration:r}}),(function(e){return{onClose:function(){return e((function(e){e(aa({open:!1})),setTimeout((function(){return e(ra())}),250)}))}}}))(Object(O.withStyles)(fa)((function(e){var t=e.classes,n=e.variant,a=e.open,r=e.message,i=e.duration,l=e.onClose;return g.a.createElement($t.a,{open:a,autoHideDuration:i,onClose:l},g.a.createElement(tn.a,{className:t[n],message:g.a.createElement("span",{className:t.container},"error"===n?g.a.createElement(an.a,{className:t.icon}):null,r,"warning"===n?g.a.createElement(ln.a,{className:t.closeIcon,onClick:l}):null)}))}))),Ea="RECEIVED_SNACKBAR_MESSAGE",ba="CLOSE_SNACKBAR",ga={message:null,duration:null,open:!1,variant:"information"},va=function(e){return e.snackbar},ya=Object(z.c)({visualization:B,current:At,dimensions:Nt,recommendedIds:Mt,ui:qe,metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_METADATA":return Object(_.a)({},e,{},t.value);default:return e}},settings:Yt,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_USER":return Zt(t.value);default:return e}},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ea:return Object(_.a)({},e,{},t.value);case ba:return ga;default:return e}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOAD_ERROR":return Object(_.a)({},e,{loadingError:t.value});case"CLEAR_LOAD_ERROR":return Object(_.a)({},e,{loadingError:ia.loadingError});case"SET_LOADING":return Object(_.a)({},e,{isLoading:t.value});default:return e}},chart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHART":return t.value;default:return e}}}),Oa=function(e){return ut(e).map((function(t){var n=Pt(e)[t.id];return Object(_.a)({},t,{name:n?n.name:""})}))},Ia=function(e){var t="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"data-visualizer-app"}):z.d;return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Object(z.e)(ya,t(z.a.apply(void 0,Object(P.a)(e))))},xa=function(e){var t=e.dispatch;return function(e){return function(n){"object"===typeof n.metadata&&!Array.isArray(n.metadata)&&t(Zn(n.metadata)),e(n)}}},Sa=n(9),_a=n(12),Aa=n(15),ja=n(11),Da=n(14),Ta=n(5),Ca=n.n(Ta),wa=n(2408),Na=n(489),La=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).rearrangeLayoutDimensions=function(e){var t=e.sourceAxisId,a=e.sourceIndex,r=e.destinationAxisId,i=e.destinationIndex,l=n.props.layout,o=Array.from(l[t]),c=o.splice(a,1),s=Object(x.a)(c,1)[0];t===r?(o.splice(i,0,s),n.props.onReorderDimensions(Object(_.a)({},l,Object(W.a)({},t,o)))):Object(X.canDimensionBeAddedToAxis)(n.props.type,l[r],r)&&n.props.onAddDimensions(Object(W.a)({},s,{axisId:r,index:i}))},n.addDimensionToLayout=function(e){var t=e.axisId,a=e.index,r=e.dimensionId,i=n.props,l=i.layout,o=i.type;if(Object(X.canDimensionBeAddedToAxis)(o,l[t],t)){n.props.onAddDimensions(Object(W.a)({},r,{axisId:t,index:a}));var c=n.props.itemsByDimension[r];Boolean(!c||!c.length)&&!Object(X.getPredefinedDimensionProp)(r,X.DIMENSION_PROP_NO_ITEMS)&&n.props.onDropWithoutItems(r)}},n.onDragEnd=function(e){var t=e.source,a=e.destination,r=e.draggableId;a&&("dimensions"===t.droppableId?n.addDimensionToLayout({axisId:a.droppableId,index:a.index,dimensionId:r}):n.rearrangeLayoutDimensions({sourceAxisId:t.droppableId,sourceIndex:t.index,destinationAxisId:a.droppableId,destinationIndex:a.index}))},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){return g.a.createElement(Na.a,{onDragEnd:this.onDragEnd},this.props.children)}}]),t}(b.Component),Ra=Object(v.connect)((function(e){return{layout:Ze(e),type:Xe(e),itemsByDimension:Qe(e)}}),(function(e){return{onAddDimensions:function(t){return e(kn(t))},onDropWithoutItems:function(t){return e(Bn(t))},onReorderDimensions:function(t){return e(Rn(t))}}}))(La),ka=n(1693),Ma=n.n(ka),Va=n(201),Ua=function(e){var t=e.onClick,n=Object(S.a)(e,["onClick"]);return g.a.createElement(Va.a,Object.assign({"data-test":"update-button"},n,{onClick:t,type:"button",primary:!0}),ae.a.t("Update"))},Pa=n(246),za=n.n(Pa),Ga=n(362),Fa=n.n(Ga),Ya=n(288),Ba=n.n(Ya),Ha=n(240),qa=n.n(Ha),Wa=n(290),Xa=n.n(Wa),Ka=n(283),Za=n.n(Ka),Qa=n(2137),Ja=n.n(Qa),$a=n(568),er=n.n($a),tr=n(2139),nr=n.n(tr),ar=n(2140),rr=n.n(ar),ir=n(2141),lr=n.n(ir),or=n(2142),cr=n.n(or),sr={arrowIcon:{marginLeft:"auto"},menuAnchorOrigin:{vertical:"bottom",horizontal:"left"},submenuAnchorOrigin:{vertical:"top",horizontal:"right"}},ur=function(e,t){var n,a,r;return j.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,j.a.awrap(Object(D.getInstance)());case 2:return n=i.sent,a=n.Api.getApi(),r="".concat(a.baseUrl,"/svg.").concat(e),i.abrupt("return",a.fetch(r,{method:"POST",body:t,headers:new Headers(a.defaultHeaders)}).then((function(e){return e.blob()})));case 6:case"end":return i.stop()}}))},dr=function(e){var t,n,a,r,i,l,o,c;return j.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.current,n=e.format,a=e.idScheme,r=e.path,s.next=3,j.a.awrap(Object(D.getInstance)());case 3:return i=s.sent,l=i.Api.getApi(),o=(new i.analytics.request).fromModel(t,"dataValueSet"===r).withFormat(n),r&&(o=o.withPath(r)),a&&(o=o.withOutputIdScheme(a)),c=new URL("".concat(l.baseUrl,"/").concat(o.buildUrl()),"".concat(window.location.origin).concat(window.location.pathname)),Object.entries(o.buildQuery()).forEach((function(e){var t=Object(x.a)(e,2),n=t[0],a=t[1];return c.searchParams.append(n,a)})),s.abrupt("return",c);case 11:case"end":return s.stop()}}))},mr=function(e){function t(e){var n;return Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).toggleMenu=function(e){return n.setState({anchorEl:e||null})},n.toggleSubmenu=function(e,t,a){var r="".concat(e,"Submenu"),i={anchorEl:t||null};"scheme"===e&&(i.dataType=a||null),n.setState(Object(W.a)({},r,i))},n.downloadImage=function(e){return function(){var t,a,r,i,l,o;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=n.props,a=t.current,r=t.chart,(i=new URLSearchParams).append("filename",a.name),r&&i.append("svg",r),c.next=6,j.a.awrap(ur(e,i));case 6:l=c.sent,o=URL.createObjectURL(l),n.toggleMenu(),window.open(o,"_blank");case 10:case"end":return c.stop()}}))}},n.downloadData=function(e,t,a){return function(){var r,i;return j.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=n.props.current,l.next=3,j.a.awrap(dr({current:r,format:e,idScheme:t,path:a}));case 3:i=l.sent,t?n.toggleSubmenu("scheme"):n.toggleSubmenu("advanced"),n.toggleMenu(),window.open(i,e.match(/(xls|csv)/)?"_top":"_blank");case 7:case"end":return l.stop()}}))}},n.state={anchorEl:null,schemeSubmenu:{anchorEl:null,dataType:null},advancedSubmenu:{anchorEl:null}},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this;return g.a.createElement(b.Fragment,null,g.a.createElement(za.a,{className:this.props.className,onClick:function(t){return e.toggleMenu(t.currentTarget)},disableRipple:!0,disableFocusRipple:!0,disabled:!this.props.current},ae.a.t("Download")),g.a.createElement(Ba.a,{open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,anchorOrigin:sr.menuAnchorOrigin,getContentAnchorEl:null,onClose:function(){return e.toggleMenu()}},g.a.createElement(Ja.a,{component:"div"},ae.a.t("Graphics")),g.a.createElement(qa.a,{onClick:this.downloadImage("png")},g.a.createElement(Xa.a,null,g.a.createElement(nr.a,null)),g.a.createElement(Za.a,null,ae.a.t("Image (.png)"))),g.a.createElement(qa.a,{onClick:this.downloadImage("pdf")},g.a.createElement(Xa.a,null,g.a.createElement(rr.a,null)),g.a.createElement(Za.a,null,ae.a.t("PDF (.pdf)"))),g.a.createElement(Fa.a,null),g.a.createElement(Ja.a,{component:"div"},ae.a.t("Plain data source")),g.a.createElement(qa.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"json")}},g.a.createElement(Xa.a,null,g.a.createElement(lr.a,null)),g.a.createElement(Za.a,null,"JSON"),g.a.createElement(er.a,{style:sr.arrowIcon})),g.a.createElement(qa.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"xml")}},g.a.createElement(Xa.a,null,g.a.createElement(lr.a,null)),g.a.createElement(Za.a,null,"XML"),g.a.createElement(er.a,{style:sr.arrowIcon})),g.a.createElement(qa.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"xls")}},g.a.createElement(Xa.a,null,g.a.createElement(lr.a,null)),g.a.createElement(Za.a,null,"Excel"),g.a.createElement(er.a,{style:sr.arrowIcon})),g.a.createElement(qa.a,{onClick:function(t){return e.toggleSubmenu("scheme",t.currentTarget,"csv")}},g.a.createElement(Xa.a,null,g.a.createElement(lr.a,null)),g.a.createElement(Za.a,null,"CSV"),g.a.createElement(er.a,{style:sr.arrowIcon})),g.a.createElement(qa.a,{onClick:function(t){return e.toggleSubmenu("advanced",t.currentTarget)}},g.a.createElement(Xa.a,null,g.a.createElement(cr.a,null)),g.a.createElement(Za.a,null,ae.a.t("Advanced")),g.a.createElement(er.a,{style:sr.arrowIcon}))),g.a.createElement(Ba.a,{open:Boolean(this.state.schemeSubmenu.anchorEl),anchorEl:this.state.schemeSubmenu.anchorEl,anchorOrigin:sr.submenuAnchorOrigin,onClose:function(){return e.toggleSubmenu("scheme")}},g.a.createElement(Ja.a,{component:"div"},ae.a.t("Metadata ID scheme")),g.a.createElement(qa.a,{onClick:this.downloadData(this.state.schemeSubmenu.dataType,"UID")},"ID"),g.a.createElement(qa.a,{onClick:this.downloadData(this.state.schemeSubmenu.dataType,"CODE")},"Code"),g.a.createElement(qa.a,{onClick:this.downloadData(this.state.schemeSubmenu.dataType,"NAME")},"Name")),g.a.createElement(Ba.a,{open:Boolean(this.state.advancedSubmenu.anchorEl),anchorEl:this.state.advancedSubmenu.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return e.toggleSubmenu("advanced")}},g.a.createElement(Ja.a,{component:"div"},ae.a.t("Data value set")),g.a.createElement(qa.a,{onClick:this.downloadData("json",null,"dataValueSet")},"JSON"),g.a.createElement(qa.a,{onClick:this.downloadData("xml",null,"dataValueSet")},"XML"),g.a.createElement(Fa.a,null),g.a.createElement(Ja.a,{component:"div"},ae.a.t("Other formats")),g.a.createElement(qa.a,{onClick:this.downloadData("jrxml")},"JRXML"),g.a.createElement(qa.a,{onClick:this.downloadData("sql",null,"debug/sql")},"Raw data SQL")))}}]),t}(b.Component),pr=Object(v.connect)((function(e){return{current:jt(e),chart:na(e)}}),{})(mr),fr=n(2144),hr=n.n(fr),Er=n(2143),br=n.n(Er),gr=Object(v.connect)((function(e){return{rightSidebarOpen:nt(e),id:(jt(e)||{}).id}}),(function(e){return{onClick:function(){return e(Hn())}}}))(Object(O.withStyles)((function(e){return{icon:{marginRight:e.spacing.unit,marginTop:2}}}))((function(e){return g.a.createElement(za.a,{className:e.className,size:"small",disabled:!e.id,disableRipple:!0,disableFocusRipple:!0,onClick:e.onClick},e.rightSidebarOpen?g.a.createElement(br.a,{className:e.classes.icon}):g.a.createElement(hr.a,{className:e.classes.icon}),ae.a.t("Interpretations"))}))),vr=n(208),yr=n(203),Or=n(204),Ir=n(206),xr=n(2407),Sr=function(e){var t=e.onClick,n=Object(S.a)(e,["onClick"]);return g.a.createElement(Va.a,Object.assign({},n,{type:"button",secondary:!0,onClick:t}),ae.a.t("Hide"))},_r=function(){return g.a.createElement("svg",{width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("path",{d:"M96.4184693 4.6480742l-2.9759268 2.6728C91.5558812 5.2202435 88.8786031 4 86 4V0c4.0260387 0 7.7809122 1.7113874 10.4184693 4.6480742zM100 19.269042h-4l-.0000544-5.3024514c-.0043849-1.346405-.2739964-2.6517927-.7866406-3.8623659l3.6833463-1.559795c.7189815 1.6978243 1.0971493 3.5288134 1.1032837 5.4156229L100 19.269042zm0 13.9999755h-4v-10h4v10zm0 14h-4v-10h4v10zm0 14h-4v-10h4v10zm0 13.9999995h-4v-9.9999995h4v9.9999995zm-.516108 14.50858l-3.8521996-1.077292C95.8751624 87.829701 96 86.924153 96 86v-6.730983h4V86c0 1.289184-.1747984 2.557136-.516108 3.777597zM87.7213345 99.895024l-.4874961-3.970182c2.8302961-.34753 5.3578432-1.892491 6.9762006-4.213767l3.2812621 2.287645c-2.2629208 3.245799-5.802045 5.409086-9.7699666 5.896304zM73.461965 100v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zM3.17264828 94.875717l3.09219912-2.537382c1.79303608 2.185097 4.4211055 3.525451 7.2855127 3.651773l-.176231 3.996116c-4.01094422-.176885-7.69477669-2.055693-10.20148082-5.110507zM0 80.192922h4l.00006331 5.84312c.00418159 1.190127.21554574 2.348454.61951638 3.438567L.86883696 90.864547C.3022517 89.335619.0059261 87.711683.00007566 86.043095L0 80.192922zm0-13.999974h4v10H0v-10zm0-14.0000005h4v10H0v-10zm0-14h4v10H0v-10zm0-14h4v10H0v-10zM.701349 9.6140131l3.79891292 1.2523021C4.17021443 11.8675286 4 12.9209553 4 14v6.1929475H0V14c0-1.5058511.2385093-2.9819426.701349-4.3859869zM12.9113947.0417954l.3073341 3.9881757c-2.8514503.2197365-5.43930476 1.6474003-7.16021518 3.8917822l-3.1742768-2.4339201C5.29022999 2.3499781 8.91606935.3496804 12.9113947.0417954zM27.07607 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10z",fill:"#A0ADBA",fillRule:"nonzero"}))},Ar=function(){return g.a.createElement("svg",{width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{fill:"#A0ADBA",fillRule:"nonzero"},g.a.createElement("path",{d:"M72.9999996 82.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM72.9999996 60.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z"}),g.a.createElement("path",{d:"M72.9999996 45.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L82.0312812 51.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z"}),g.a.createElement("path",{d:"M49.9999996-3.4e-7c27.6142375 0 50 22.38576254 50 50.00000004 0 3.4254464-.3449043 6.8082851-1.0236569 10.111998-.3334386 1.6229556-1.9194094 2.6683156-3.542365 2.334877-1.6229555-.3334386-2.6683156-1.9194094-2.334877-3.5423649.5972413-2.9069705.9008989-5.8852591.9008989-8.9045101 0-24.300529-19.699471-44.00000004-44-44.00000004S5.99999963 25.6994707 5.99999963 49.9999997c0 20.0457004 13.52123857 37.4107541 32.60787227 42.5117075 1.6006767.4277851 2.5514932 2.0721783 2.1237081 3.672855-.4277851 1.6006767-2.0721782 2.5514932-3.672855 2.1237082C15.3630605 92.5100466-3.7e-7 72.7795776-3.7e-7 49.9999997-3.7e-7 22.3857622 22.3857621-3.4e-7 49.9999996-3.4e-7z"}),g.a.createElement("path",{d:"M31.9999996 52.4999997c-1.3807118 0-2.5-1.1192882-2.5-2.5 0-1.3254834 1.031536-2.4100387 2.3356243-2.4946824l.1643757-.0053176 15.4995614-.0008627.0004386-24.4991373c0-1.3807119 1.1192882-2.5 2.5-2.5 1.3254834 0 2.4100387 1.0315359 2.4946823 2.3356243l.0053177.1643757v27c0 1.3254834-1.0315359 2.4100386-2.3356243 2.4946823l-.1643757.0053177h-18z"})))},jr=function(){return g.a.createElement("svg",{width:"98",height:"97",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{fill:"#A0ADBA",fillRule:"nonzero"},g.a.createElement("path",{d:"M47.9999996-3.4e-7c26.375131 0 48 8.64933258 48 21.00093054 0 6.7822228-6.3726775 12.3999932-16.8111022 16.1776421-1.5579685.5638263-3.2780231-.2420853-3.8418493-1.8000538-.5638263-1.5579685.2420852-3.2780231 1.8000537-3.8418493 8.3196582-3.0108708 12.8528978-7.007103 12.8528978-10.535739 0-7.5352197-18.6656043-15.00093054-42-15.00093054-23.3343956 0-41.99999997 7.46571084-41.99999997 15.00093054 0 8.3458435 22.23414277 16.1998284 47.97788217 14.8410919 1.6545514-.087326 3.066622 1.1831611 3.1539481 2.8377124.087326 1.6545514-1.1831611 3.066622-2.8377125 3.1539481C25.4193432 43.3576729-3.7e-7 34.3785482-3.7e-7 21.0009302-3.7e-7 8.64933224 21.6248687-3.4e-7 47.9999996-3.4e-7z"}),g.a.createElement("path",{d:"M92.9999996 17.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v24c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-24c0-1.6568543 1.3431458-3 3-3zM2.99999963 17.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.0917782c0 6.7884007 15.40674827 13.7997289 36.16062537 14.9125249 1.6544777.088711 2.9237824 1.5018446 2.8350715 3.1563223-.088711 1.6544776-1.5018446 2.9237823-3.1563223 2.8350714C18.3983599 64.7388196.36378289 56.6257218.00543546 45.431923L-3.7e-7 45.0917779V20.9999997c0-1.6568543 1.34314575-3 3-3z"}),g.a.createElement("path",{d:"M2.99999963 41.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.011713c0 5.6006467 10.94212037 11.6895243 27.41972777 14.017794 1.6405579.2318092 2.7825744 1.7496627 2.5507652 3.3902207-.2318092 1.640558-1.7496627 2.7825745-3.3902207 2.5507653l-1.1438963-.168296C13.057544 85.989973.26320686 78.7580311.00401161 69.3047869L-3.7e-7 69.0117127v-24.011713c0-1.6568543 1.34314575-3 3-3zM70.9999996 79.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM70.9999996 57.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z"}),g.a.createElement("path",{d:"M70.9999996 42.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L80.0312812 48.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z"})))},Dr=function(){return g.a.createElement("svg",{height:"100",width:"100",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{fill:"none"},g.a.createElement("path",{d:"M92 52c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V60c0-4.418278 3.581722-8 8-8zm0 4H8c-2.209139 0-4 1.790861-4 4v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V60c0-2.209139-1.790861-4-4-4z",fill:"#e8edf2"}),g.a.createElement("path",{d:"M99.5567844 7.04865205l-3.8222065 1.17929519C94.9653901 5.7349373 92.6508139 4 90 4V0c4.4179248 0 8.2737479 2.89021004 9.5567844 7.04865205zM100 21.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 48v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 43.8539409 9.22479438 44 10 44h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 33.461965h4V38c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 42.558667 0 40.3386428 0 38zm0-14h4v10H0zM1.6090385 4.55843779L4.96347541 6.7373717C4.33751189 7.70103338 4 8.82295605 4 10v5.461965H0V10c0-1.95639059.56487346-3.8340854 1.6090385-5.44156221zM16.0507133 0v4H10c-1.00213211 0-1.96454891.24434864-2.82591887.70537441L5.28653945 1.17873487C6.72503094.40881989 8.33525118 0 10 0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0z",fill:"#a0adba"})))},Tr=function(){return g.a.createElement("svg",{height:"100",width:"100",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{fill:"none"},g.a.createElement("path",{d:"M92 0c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V8c0-4.418278 3.581722-8 8-8zm0 4H8C5.790861 4 4 5.790861 4 8v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V8c0-2.209139-1.790861-4-4-4z",fill:"#e8edf2"}),g.a.createElement("path",{d:"M99.5567844 59.048652l-3.8222065 1.1792952C94.9653901 57.7349373 92.6508139 56 90 56v-4c4.4179248 0 8.2737479 2.89021 9.5567844 7.048652zM100 73.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 100v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 95.8539409 9.22479438 96 10 96h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 85.461965h4V90c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 94.558667 0 92.3386428 0 90zm0-14h4v10H0zm1.6090385-14.9035272l3.35443691 2.1789339C4.33751189 59.7010334 4 60.822956 4 62v5.461965H0V62c0-1.9563906.56487346-3.8340854 1.6090385-5.4415622zM16.0507133 52v4H10c-1.00213211 0-1.96454891.2443486-2.82591887.7053744l-1.88754168-3.5266395C6.72503094 52.4088199 8.33525118 52 10 52zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4z",fill:"#a0adba"})))},Cr=function(){return g.a.createElement("svg",{height:"96",viewBox:"0 0 96 96",width:"96",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{fill:"#a0adba",transform:"translate(3 3)"},g.a.createElement("path",{d:"m40.5 73.5000001c0 2.4852813 2.0147186 4.5 4.5 4.5s4.5-2.0147187 4.5-4.5c0-2.4142734-1.9012365-4.3844892-4.2881643-4.4951021l-.2128322-.0048979c-2.4848234.0005384-4.4990035 2.0150507-4.4990035 4.5z"}),g.a.createElement("path",{d:"m48 60v-30c0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3v30c0 1.6568542 1.3431458 3 3 3s3-1.3431458 3-3z"}),g.a.createElement("path",{d:"m45-2.99904788c3.8985931 0 7.4578604 2.21715778 9.1770339 5.71709169l37.8912554 77.19048409c1.3845546 2.8165473 1.2171646 6.1482722-.4427191 8.811863-1.6598833 2.6635901-4.5771005 4.2816904-7.7135702 4.2796124h-77.82201115c-3.13845856.002078-6.05567574-1.6160223-7.71555901-4.2796124-1.65988369-2.6635908-1.82727377-5.9953157-.44346379-8.8103471l37.89234295-77.19269833c1.7188306-3.49923557 5.2780979-5.71639335 9.176691-5.71639335zm0 6c-1.6106864 0-3.0811818.91600885-3.7909661 2.36100407l-37.89274459 77.19351591c-.47005356.9562122-.41322496 2.0873262.15030227 2.99161.56352731.9042839 1.5539177 1.4529206 2.62140842 1.4529206h77.8259889c1.0655018 0 2.0558922-.5486367 2.6194195-1.4529206.5635272-.9042838.6203558-2.0353978.1495577-2.9931259l-37.8916571-77.19130167c-.7101272-1.44569356-2.1806226-2.36170241-3.791309-2.36170241z"})))},wr=function e(t,n,a){Object(Sa.a)(this,e),this.icon=t,this.title=n,this.description=a},Nr=function(e){function t(){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,_r,ae.a.t("No data available"),ae.a.t("The selected dimensions didn\u2019t return any data. There may be no data, or you may not have access to it.")))}return Object(Da.a)(t,e),t}(wr),Lr=function(e){function t(){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Dr,ae.a.t("Series is empty"),ae.a.t("Add at least one item to Series.")))}return Object(Da.a)(t,e),t}(wr),Rr=function(e){function t(){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Tr,ae.a.t("Category is empty"),ae.a.t("Add at least one item to Category.")))}return Object(Da.a)(t,e),t}(wr),kr=function(e){function t(e){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Ar,ae.a.t("No period set"),ae.a.t("{{visType}} must have at least one period set in {{axes}}.",{visType:Object(X.getDisplayNameByVisType)(e),axes:Gr(e)})))}return Object(Da.a)(t,e),t}(wr),Mr=function(e){function t(e){Object(Sa.a)(this,t);var n=Object(X.getAxisPerLockedDimension)(e,X.DIMENSION_ID_DATA);return Object(Aa.a)(this,Object(ja.a)(t).call(this,jr,ae.a.t("No data set"),ae.a.t("{{visType}} must have at least one data item in {{axes}}.",{visType:Object(X.getDisplayNameByVisType)(e),axes:n?Object(X.getAxisName)(n):Gr(e)})))}return Object(Da.a)(t,e),t}(wr),Vr=function(e){function t(e){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Cr,ae.a.t("Something went wrong"),ae.a.t("There is a problem with this {{visType}} visualization.",{visType:Object(X.getDisplayNameByVisType)(e)})))}return Object(Da.a)(t,e),t}(wr),Ur=function(e){function t(){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Cr,ae.a.t("Something went wrong"),ae.a.t("There was a problem getting the data from the server.")))}return Object(Da.a)(t,e),t}(wr),Pr=function(e){function t(){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Cr,ae.a.t("Assigned Categories can only be used with data elements"),ae.a.t("Fix this problem by selecting data elements or removing Assigned Categories.")))}return Object(Da.a)(t,e),t}(wr),zr=function(e){function t(){return Object(Sa.a)(this,t),Object(Aa.a)(this,Object(ja.a)(t).call(this,Cr,ae.a.t("Assigned Categories cannot be used as Filter"),ae.a.t("Fix this problem by moving or removing Assigned Categories.")))}return Object(Da.a)(t,e),t}(wr),Gr=function(e){for(var t=Object(X.getAvailableAxes)(e),n="",a=0;a<t.length;a++)n+=Object(X.getAxisName)(t[a]),a<t.length-2?n+=", ":a<t.length-1&&(n+=" ".concat(ae.a.t("or")," "));return n},Fr=function(e,t){if(!e||!Object(X.dimensionIsValid)(e,{requireItems:!0}))throw t},Yr=function(e,t){if(!function(e){return X.AXIS.isValid(e)&&e.some((function(e){return Object(X.dimensionIsValid)(e,{requireItems:!Object(X.getPredefinedDimensionProp)(e.dimension,X.DIMENSION_PROP_NO_ITEMS)})}))}(e))throw t},Br=function(e){switch(Fr(Object(X.layoutGetDimension)(e,X.DIMENSION_ID_DATA),new Mr(e.type)),e.type){case X.VIS_TYPE_PIE:return function(e){Yr(e.columns,new Lr),Fr(Object(X.layoutGetDimension)(e,X.DIMENSION_ID_PERIOD),new kr(e.type))}(e);case X.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:case X.VIS_TYPE_YEAR_OVER_YEAR_LINE:return function(e){if(!Array.isArray(e.yearlySeries)||"string"!==typeof e.yearlySeries[0])throw new Lr;Yr(e.rows,new Rr)}(e);case X.VIS_TYPE_SINGLE_VALUE:case X.VIS_TYPE_GAUGE:return function(e){Fr(Object(X.layoutGetDimension)(e,X.DIMENSION_ID_PERIOD),new kr(e.type))}(e);default:return function(e){Yr(e.columns,new Lr),Yr(e.rows,new Rr),Fr(Object(X.layoutGetDimension)(e,X.DIMENSION_ID_PERIOD),new kr(e.type))}(e)}},Hr="currentAnalyticalObject",qr=function(e){return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.awrap(e.currentUser.dataStore.has("analytics"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},Wr=function(e,t){return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return n.next=3,j.a.awrap(e.currentUser.dataStore.get("analytics"));case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,j.a.awrap(e.currentUser.dataStore.create("analytics"));case 8:n.t0=n.sent;case 9:return n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}))},Xr=function(e,t,n){var a,r;return j.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,j.a.awrap(Object(D.getInstance)());case 3:if(a=i.sent,i.t0=n,i.t0){i.next=16;break}return i.t1=j.a,i.t2=Wr,i.t3=a,i.next=11,j.a.awrap(qr(a));case 11:return i.t4=i.sent,i.t5=(0,i.t2)(i.t3,i.t4),i.next=15,i.t1.awrap.call(i.t1,i.t5);case 15:i.t0=i.sent;case 16:return r=i.t0,i.abrupt("return",r.set(t,e));case 20:return i.prev=20,i.t6=i.catch(0),i.abrupt("return",w(i.t6));case 23:case"end":return i.stop()}}),null,null,[[0,20]])},Kr=function(e,t){var n,a;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j.a.awrap(Object(D.getInstance)());case 3:if(n=r.sent,r.t0=t,r.t0){r.next=16;break}return r.t1=j.a,r.t2=Wr,r.t3=n,r.next=11,j.a.awrap(qr(n));case 11:return r.t4=r.sent,r.t5=(0,r.t2)(r.t3,r.t4),r.next=15,r.t1.awrap.call(r.t1,r.t5);case 15:r.t0=r.sent;case 16:return a=r.t0,r.abrupt("return",a.get(e));case 20:return r.prev=20,r.t6=r.catch(0),r.abrupt("return",w(r.t6));case 23:case"end":return r.stop()}}),null,null,[[0,20]])},Zr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hr;return Xr(e,t)},Qr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr;return Kr(e)},Jr={getCurrent:function(){return function(e,t){return jt(t())}},getCurrentFromUi:function(){return function(e,t){return Dt(t())}},onUpdate:u.tSetCurrentFromUi,acSetLoadError:oa,acClearLoadError:ca},$r=Object(v.connect)(null,Jr)((function(e){var t=e.renderComponent,n=e.getCurrent,a=e.getCurrentFromUi,r=e.onUpdate,i=e.acSetLoadError,l=e.acClearLoadError;return t((function(){try{Br(a()),l()}catch(c){i(c||new Vr)}r();var e=k.location.pathname==="/"+Hr,t=n(),o=t&&t.id?"/".concat(t.id):"/";e||k.location.pathname===o||k.push(o)}))})),ei=n(2145),ti=n(2146),ni=n(2410),ai=n(2406),ri=n(3),ii=n.n(ri),li={styles:g.a.createElement(ii.a,{id:"3577720839"},["div.jsx-3577720839{position:-webkit-sticky;position:sticky;top:0;}"]),className:"jsx-3577720839"},oi={styles:g.a.createElement(ii.a,{id:"1427514941"},["div.jsx-1427514941{padding:".concat(pa.spacers.dp16," 0;}"),"div.jsx-1427514941:not(:last-child){border-bottom:1px solid ".concat(pa.colors.grey300,";margin-bottom:").concat(pa.spacers.dp8,";}")]),className:"jsx-1427514941"},ci=(g.a.createElement(ii.a,{id:"1655721637"},["div.jsx-1655721637{overflow-y:auto;}"]),{styles:g.a.createElement(ii.a,{id:"3115295887"},["span.jsx-3115295887{display:inline-block;padding-bottom:".concat(pa.spacers.dp12,";font-size:15px;color:").concat(pa.colors.grey900,";font-weight:500;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;}")]),className:"jsx-3115295887"}),si={styles:g.a.createElement(ii.a,{id:"1665807213"},["div.jsx-1665807213:not(:last-child):not(.inline){padding-bottom:".concat(pa.spacers.dp16,";}")]),className:"jsx-1665807213"},ui={styles:g.a.createElement(ii.a,{id:"2983019948"},["div.jsx-2983019948:not(:last-child){padding-bottom:".concat(pa.spacers.dp8,";}")]),className:"jsx-2983019948"},di={styles:g.a.createElement(ii.a,{id:"3717686981"},["p.jsx-3717686981{font-size:".concat(pa.spacers.dp14,";padding-bottom:").concat(pa.spacers.dp16,";}")]),className:"jsx-3717686981"},mi={styles:g.a.createElement(ii.a,{id:"684239008"},["div.jsx-684239008{margin:".concat(pa.spacers.dp4," 0 0 23px;}")]),className:"jsx-684239008"},pi={styles:g.a.createElement(ii.a,{id:"3576615552"},["div.jsx-3576615552{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]),className:"jsx-3576615552"},fi=n(2411),hi=n(2403),Ei=n(2404),bi=Object(v.connect)((function(e,t){return{value:Ke(e)[t.option.name]}}),(function(e,t){return{onChange:function(n){return e(Ln(Object(W.a)({},t.option.name,n)))}}}))((function(e){var t=e.option,n=e.label,a=e.helpText,r=e.toggleable,i=e.value,l=e.onChange,o=t.defaultValue,c=Object(b.useState)(i!==o),s=Object(x.a)(c,2),u=s[0],d=s[1],m=t.items.find((function(e){return e.value===i}))||{};return g.a.createElement("div",{className:!r||u?"":ui.className},r?g.a.createElement(fi.a,{checked:u,label:n,name:"".concat(t.name,"-toggle"),onChange:function(e){return function(e){d(e),l(e?t.items[0].value:o)}(e.checked)},dense:!0}):null,!r||u?g.a.createElement("div",{className:r?mi.className:""},g.a.createElement(hi.a,{name:"".concat(t.name,"-select"),label:r?"":n,onChange:function(e){var t=e.selected;return l(t.value)},selected:m,helpText:a,inputWidth:"280px",dense:!0},t.items.map((function(e){var t=e.value,n=e.label;return g.a.createElement(Ei.a,{key:t,value:t,label:n})})))):null)})),gi=function(){return g.a.createElement(bi,{label:ae.a.t("Aggregation type"),helpText:ae.a.t("Determines how the values in the pivot table are aggregated. Learn more"),option:{name:"aggregationType",items:[{value:"DEFAULT",label:ae.a.t("By data element")},{value:"COUNT",label:ae.a.t("Count")},{value:"AVERAGE",label:ae.a.t("Average")},{value:"AVERAGE_SUM_ORG_UNIT",label:ae.a.t("Average (sum in org unit hierarchy)")},{value:"SUM",label:ae.a.t("Sum")},{value:"LAST",label:ae.a.t("Last value")},{value:"LAST_AVERAGE_ORG_UNIT",label:ae.a.t("Last value (average in org unit hierarchy)")},{value:"MIN",label:ae.a.t("Min")},{value:"MAX",label:ae.a.t("Max")},{value:"STDDEV",label:ae.a.t("Standard deviation")},{value:"VARIANCE",label:ae.a.t("Variance")}]}})},vi=Object(v.connect)((function(e,t){return{value:Ke(e)[t.option.name]||!1}}),(function(e,t){return{onChange:function(n){return e(Ln(Object(W.a)({},t.option.name,n)))}}}))((function(e){var t=e.option,n=e.label,a=e.value,r=e.onChange;return g.a.createElement("div",{className:si.className},g.a.createElement(fi.a,{checked:a,label:n,name:t.name,onChange:function(e){var t=e.checked;return r(t)},dense:!0}))})),yi=function(){return g.a.createElement(vi,{label:ae.a.t("Dimension labels"),option:{name:"showDimensionTotals"}})},Oi=function(){return g.a.createElement(vi,{label:ae.a.t("Skip rounding"),option:{name:"skipRounding"}})},Ii=function(){return g.a.createElement(vi,{label:ae.a.t("Columns totals"),option:{name:"colTotals"}})},xi=function(){return g.a.createElement(vi,{label:ae.a.t("Column sub-totals"),option:{name:"colSubTotals"}})},Si=function(){return g.a.createElement(vi,{label:ae.a.t("Row totals"),option:{name:"rowTotals"}})},_i=function(){return g.a.createElement(vi,{label:ae.a.t("Row sub-totals"),option:{name:"rowSubTotals"}})},Ai=function(){return g.a.createElement(vi,{label:ae.a.t("Hide empty columns"),option:{name:"hideEmptyColumns"}})},ji=function(){return g.a.createElement(vi,{label:ae.a.t("Hide empty rows"),option:{name:"hideEmptyRows"}})},Di=function(){return g.a.createElement(bi,{label:ae.a.t("Number type"),helpText:ae.a.t("Display the value of percentages of the total"),option:{name:"numberType",items:[{value:"VALUE",label:ae.a.t("Value")},{value:"ROW_PERCENTAGE",label:ae.a.t("Percentage of row")},{value:"COLUMN_PERCENTAGE",label:ae.a.t("Percentage of column")}]}})},Ti=n(2412),Ci=n(2413),wi=Object(v.connect)((function(e,t){return{value:Ke(e)[t.option.name]}}),(function(e,t){return{onChange:function(n){return e(Ln(Object(W.a)({},t.option.name,n)))}}}))((function(e){var t=e.option,n=e.label,a=e.value,r=e.onChange;return g.a.createElement(Ti.a,{name:t.name,value:a,onChange:function(e){var t=e.value;return r(t)},label:n,dense:!0},t.items.map((function(e){var t=e.id,n=e.label;return g.a.createElement(Ci.a,{key:t,label:n,value:t})})))})),Ni=function(){return g.a.createElement(wi,{option:{name:"legendDisplayStyle",items:[{id:"FILL",label:ae.a.t("Legend changes background color")},{id:"TEXT",label:ae.a.t("Legend changes text color")}]}})},Li=function(){return g.a.createElement(wi,{option:{name:"legendDisplayStrategy",items:[{id:"FIXED",label:ae.a.t("Apply a legend to entire table")},{id:"BY_DATA_ITEM",label:ae.a.t("Assign a unique legend to data elements")}]}})},Ri=function(e){var t=e.value,n=e.loading,a=e.options,r=e.onFocus,i=e.onChange,l=t&&t.id?{value:t.id,label:t.displayName}:{};return g.a.createElement(hi.a,{name:"legendSet-legendSelect",label:ae.a.t("Select a legend"),selected:l,inputWidth:"280px",placeholder:ae.a.t("Select from predefined legends"),loadingText:ae.a.t("Loading legends"),loading:n,dense:!0,onFocus:r,onChange:function(e){var t=e.selected;return i({legendSet:{id:t.value,displayName:t.label}})}},a.map((function(e){var t=e.value,n=e.label;return g.a.createElement(Ei.a,{key:t,value:t,label:n})})))},ki=function(e){var t=e.value,n=e.onChange,a=Object(I.c)(),r=Object(b.useState)([]),i=Object(x.a)(r,2),l=i[0],o=i[1],c=Object(b.useState)(!1),s=Object(x.a)(c,2),u=s[0],d=s[1];t&&t.id&&(l.find((function(e){return e.value===t.id}))||o([].concat(Object(P.a)(l),[{value:t.id,label:t.displayName}])));return g.a.createElement(Ri,{loading:!u,value:t,options:l,onChange:n,onFocus:function(){var e,t,n,r;return j.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(u){i.next=8;break}return e={legendSets:{resource:"legendSets.json",params:function(){return{fields:"id,displayName~rename(name),legends[id,displayName~rename(name),startValue,endValue,color]",paging:!1}}}},i.next=4,j.a.awrap(a.query(e));case 4:t=i.sent,(n=t.legendSets)&&(r=n.legendSets.map((function(e){return{value:e.id,label:e.name}})),o(r)),d(!0);case 8:case"end":return i.stop()}}))}})},Mi=Object(v.connect)((function(e){return{value:Ke(e).legendSet||{},legendDisplayStrategy:Ke(e).legendDisplayStrategy}}),(function(e){return{onChange:function(t){return e(Ln(t))}}}))((function(e){var t=e.value,n=e.legendDisplayStrategy,a=e.onChange,r=Object(b.useState)(Boolean(t.id)),i=Object(x.a)(r,2),l=i[0],o=i[1];return g.a.createElement(b.Fragment,null,g.a.createElement(fi.a,{checked:l,label:ae.a.t("Display legend"),onChange:function(e){var t=e.checked;o(t),a(t&&!n?{legendDisplayStrategy:"FIXED"}:{legendSet:void 0,legendDisplayStrategy:void 0})},dense:!0}),l?g.a.createElement(b.Fragment,null,g.a.createElement("div",{className:oi.className},g.a.createElement(ei.a,null,g.a.createElement(ti.a,null,g.a.createElement("span",{className:ci.className},ae.a.t("Legend type"))),g.a.createElement("div",{className:si.className},g.a.createElement(Li,null)))),g.a.createElement("div",{className:oi.className},g.a.createElement(ei.a,null,g.a.createElement(ti.a,null,g.a.createElement("span",{className:ci.className},ae.a.t("Legend setup"))),"FIXED"===n?g.a.createElement("div",{className:si.className},g.a.createElement(ki,{value:t,onChange:a})):null,g.a.createElement(Ni,null)))):null)})),Vi=n(35),Ui=n(205),Pi=Object(v.connect)((function(e,t){return{value:Ke(e)[t.option.name]||"",enabled:void 0!==Ke(e)[t.option.name]}}),(function(e,t){return{onChange:function(n){return e(Ln(Object(W.a)({},t.option.name,n)))},onToggle:function(n){return e(Ln(Object(W.a)({},t.option.name,n?"":void 0)))}}}))((function(e){var t=e.type,n=e.label,a=e.placeholder,r=e.helpText,i=e.width,l=e.option,o=e.value,c=e.onChange,s=e.onToggle,u=e.toggleable,d=e.enabled,m=e.inline;return g.a.createElement("div",{className:!u||d||m?"":si.className},u?g.a.createElement(fi.a,{checked:d,label:n,name:"".concat(l.name,"-toggle"),onChange:function(e){var t=e.checked;return s(t)},dense:!0}):null,!u||d?g.a.createElement("div",{className:u?mi.className:""},m?g.a.createElement(Vi.a,{type:t,onChange:function(e){var t=e.value;return c(t)},name:l.name,value:o,placeholder:a,width:i,dense:!0}):g.a.createElement(Ui.a,{type:t,label:u?"":n,onChange:function(e){var t=e.value;return c(t)},name:l.name,value:o,helpText:r,placeholder:a,inputWidth:i,dense:!0})):null)})),zi=function(e){var t=e.label,n=e.inline;return g.a.createElement(Pi,{type:"text",width:"280px",label:t,placeholder:ae.a.t("Add a title"),option:{name:"title"},inline:n})};zi.defaultProps={inline:!1};var Gi=zi,Fi=function(){return g.a.createElement(bi,{label:ae.a.t("Display density"),option:{name:"displayDensity",items:[{value:"COMFORTABLE",label:ae.a.t("Comfortable")},{value:"NORMAL",label:ae.a.t("Normal")},{value:"COMPACT",label:ae.a.t("Compact")}]}})},Yi=function(){return g.a.createElement(bi,{label:ae.a.t("Font size"),option:{name:"fontSize",items:[{value:"LARGE",label:ae.a.t("Large")},{value:"NORMAL",label:ae.a.t("Normal")},{value:"SMALL",label:ae.a.t("Small")}]}})},Bi=function(){return g.a.createElement(bi,{label:ae.a.t("Digit group separator"),option:{name:"digitGroupSeparator",items:[{value:"NONE",label:ae.a.t("None")},{value:"SPACE",label:ae.a.t("Space")},{value:"COMMA",label:ae.a.t("Comma")}]}})},Hi=n(2395),qi=n(39),Wi=n(36),Xi=function(e){var t=e.name,n=e.value,a=e.onChange,r=[{id:"EQ",label:"="},{id:"GT",label:">"},{id:"GE",label:">="},{id:"LT",label:"<"},{id:"LE",label:"<="}],i=r.find((function(e){return e.id===n}));return g.a.createElement("div",{style:{width:"112px"}},g.a.createElement(Hi.a,{name:t,onChange:function(e){var t=e.selected;a(t.value)},selected:i?{value:i.id,label:i.label}:void 0,tabIndex:"0",inputMaxWidth:"106px",dense:!0},r.map((function(e){var t=e.id,n=e.label;return g.a.createElement(Ei.a,{key:t,value:t,label:n})}))))},Ki=function(e){var t=e.name,n=e.value,a=e.onChange;return g.a.createElement(Vi.a,{name:t,value:n,type:"number",onChange:function(e){var t=e.value;return a(t)},width:"72px",dense:!0})},Zi=function(e){function t(e){var n;Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).onClear=function(){return n.setState(n.defaultState,n.props.onChange(""))},n.onChange=function(e){return function(t){n.setState(Object(W.a)({},e,t),(function(){var e=n.state,t=e.op1,a=e.v1,r=e.op2,i=e.v2,l=[];t&&a&&l.push("".concat(t,":").concat(a)),r&&i&&l.push("".concat(r,":").concat(i)),n.props.onChange(l.length>0?l.join(";"):"")}))}},n.defaultState={op1:"",v1:"",op2:"",v2:""};var a=e.value.split(/[;:]/),r=Object(x.a)(a,4),i=r[0],l=void 0===i?"":i,o=r[1],c=void 0===o?"":o,s=r[2],u=void 0===s?"":s,d=r[3],m=void 0===d?"":d;return n.state={op1:l,v1:c,op2:u,v2:m},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.state,t=e.op1,n=e.v1,a=e.op2,r=e.v2;return g.a.createElement("div",{className:si.className},g.a.createElement("p",{className:di.className},ae.a.t("You can set a minimum or maximum value. This will apply to the entire table, all values outside of the minimum/maximum range will not be displayed")),g.a.createElement("div",{className:pi.className},g.a.createElement("div",{style:{width:"250px",paddingBottom:"16px"}},g.a.createElement(qi.a,null,ae.a.t("Minimum data value")),g.a.createElement("div",{className:pi.className},g.a.createElement(Xi,{name:"op1",value:t,onChange:this.onChange("op1")}),g.a.createElement(Ki,{name:"v1",value:n,onChange:this.onChange("v1")}))),g.a.createElement(Wi.a,null,g.a.createElement("div",{style:{width:"250px"}},g.a.createElement(qi.a,null,ae.a.t("Maximum data value")),g.a.createElement("div",{className:pi.className},g.a.createElement(Xi,{name:"op2",value:a,onChange:this.onChange("op2")}),g.a.createElement(Ki,{name:"v2",value:r,onChange:this.onChange("v2")}))))),g.a.createElement(Va.a,{onClick:this.onClear},ae.a.t("Clear min/max limits")))}}]),t}(b.Component),Qi=Object(v.connect)((function(e){return{value:Ke(e).measureCriteria||""}}),(function(e){return{onChange:function(t){return e(Ln({measureCriteria:t}))}}}))(Zi),Ji=function(){return g.a.createElement(vi,{label:ae.a.t("Reporting period"),option:{name:"reportingPeriod"}})},$i=function(){return g.a.createElement(vi,{label:ae.a.t("Organisation unit"),option:{name:"organisationUnit"}})},el=function(){return g.a.createElement(vi,{label:ae.a.t("Parent organisation unit"),option:{name:"parentOrganisationUnit"}})},tl=function(){return g.a.createElement(vi,{label:ae.a.t("Include regression"),option:{name:"regression"}})},nl=function(){return g.a.createElement(vi,{label:ae.a.t("Include cumulative"),option:{name:"cumulative"}})},al=Z.sortOrder.defaultValue,rl=function(){return g.a.createElement(bi,{label:ae.a.t("Custom sort order"),toggleable:!0,option:{name:"sortOrder",defaultValue:al,items:[{value:"-1",label:ae.a.t("Low to high")},{value:"1",label:ae.a.t("High to low")}]}})},il=function(){return g.a.createElement(bi,{label:ae.a.t("Top limit"),option:{name:"topLimit",items:[{value:"0",label:ae.a.t("None")},{value:"5",label:"5"},{value:"10",label:"10"},{value:"20",label:"20"},{value:"50",label:"50"},{value:"100",label:"100"}]}})},ll=[{key:"data-tab",label:ae.a.t("Data"),content:[{key:"data-section-1",content:g.a.Children.toArray([g.a.createElement(yi,null),g.a.createElement(Oi,null)])},{key:"data-display-totals",label:ae.a.t("Display totals"),content:g.a.Children.toArray([g.a.createElement(Ii,null),g.a.createElement(xi,null),g.a.createElement(Si,null),g.a.createElement(_i,null)])},{key:"data-display-empty-data",label:ae.a.t("Display empty data"),content:g.a.Children.toArray([g.a.createElement(Ai,null),g.a.createElement(ji,null)])},{key:"data-advanced",label:ae.a.t("Advanced"),content:g.a.Children.toArray([g.a.createElement(gi,null),g.a.createElement(Di,null)])}]},{key:"legend-tab",label:ae.a.t("Legend"),content:[{key:"legend-section-1",content:g.a.Children.toArray([g.a.createElement(Mi,null)])}]},{key:"style-tab",label:ae.a.t("Style"),content:[{key:"style-section-1",content:g.a.Children.toArray([g.a.createElement(Gi,{label:ae.a.t("Table title")}),g.a.createElement(Fi,null),g.a.createElement(Yi,null),g.a.createElement(Bi,null)])}]},{key:"limitValues-tab",label:ae.a.t("Limit values"),content:[{key:"limitValues-limit-min-max",label:ae.a.t("Limit minimum/maximum values"),content:g.a.Children.toArray([g.a.createElement(Qi,null)])}]},{key:"parameters-tab",label:ae.a.t("Parameters"),content:[{key:"parameters-section-1",content:g.a.Children.toArray([g.a.createElement(Ji,null),g.a.createElement($i,null),g.a.createElement(el,null),g.a.createElement(tl,null),g.a.createElement(nl,null),g.a.createElement(rl,null),g.a.createElement(il,null)])}]}],ol=function(){return g.a.createElement(vi,{label:ae.a.t("Cumulative values"),option:{name:"cumulativeValues"}})},cl=function(){return g.a.createElement(vi,{label:ae.a.t("Value labels"),option:{name:"showData"}})},sl=Z.hideEmptyRowItems.defaultValue,ul=function(){return g.a.createElement(bi,{label:ae.a.t("Hide empty categories"),toggleable:!0,option:{name:"hideEmptyRowItems",defaultValue:sl,items:[{value:"BEFORE_FIRST",label:ae.a.t("Before first")},{value:"AFTER_LAST",label:ae.a.t("After last")},{value:"BEFORE_FIRST_AFTER_LAST",label:ae.a.t("Before first and after last")},{value:"ALL",label:ae.a.t("All")}]}})},dl=Z.regressionType.defaultValue,ml=function(){return g.a.createElement(bi,{toggleable:!0,label:ae.a.t("Trend line"),option:{name:"regressionType",defaultValue:dl,items:[{value:"NONE",label:ae.a.t("None")},{value:"LINEAR",label:ae.a.t("Linear")},{value:"POLYNOMIAL",label:ae.a.t("Polynomial")},{value:"LOESS",label:ae.a.t("Loess")}]}})},pl=function(){return g.a.createElement(Pi,{type:"number",width:"72px",label:ae.a.t("Value"),placeholder:ae.a.t("Number"),option:{name:"targetLineValue"},inline:!0})},fl=function(){return g.a.createElement(Pi,{type:"text",width:"280px",label:ae.a.t("Title"),placeholder:ae.a.t("Target line title"),option:{name:"targetLineLabel"},inline:!0})},hl=Object(v.connect)((function(e){return{enabled:Ke(e).targetLine}}),(function(e){return{onChange:function(t){return e(Ln({targetLine:t}))}}}))((function(e){var t=e.enabled,n=e.onChange;return g.a.createElement("div",{className:si.className},g.a.createElement(fi.a,{checked:t,label:ae.a.t("Target line"),onChange:function(e){var t=e.checked;return n(t)},dense:!0}),t?g.a.createElement("div",{className:"".concat(mi.className," ").concat(pi.className)},g.a.createElement(pl,null),g.a.createElement(fl,null)):null)})),El=function(){return g.a.createElement(Pi,{type:"number",width:"72px",label:ae.a.t("Value"),placeholder:ae.a.t("Number"),option:{name:"baseLineValue"},inline:!0})},bl=function(){return g.a.createElement(Pi,{type:"text",width:"280px",label:ae.a.t("Title"),placeholder:ae.a.t("Base line title"),option:{name:"baseLineLabel"},inline:!0})},gl=Object(v.connect)((function(e){return{enabled:Ke(e).baseLine}}),(function(e){return{onChange:function(t){return e(Ln({baseLine:t}))}}}))((function(e){var t=e.enabled,n=e.onChange;return g.a.createElement("div",{className:si.className},g.a.createElement(fi.a,{checked:t,label:ae.a.t("Base line"),name:"baseLine-toggle",onChange:function(e){var t=e.checked;return n(t)},dense:!0}),t?g.a.createElement("div",{className:"".concat(mi.className," ").concat(pi.className)},g.a.createElement(El,null),g.a.createElement(bl,null)):null)})),vl=n(32),yl=function(){return g.a.createElement(Pi,{type:"number",width:"72px",placeholder:ae.a.t("Min"),option:{name:"rangeAxisMinValue"},inline:!0})},Ol=function(){return g.a.createElement(Pi,{type:"number",width:"72px",placeholder:ae.a.t("Max"),option:{name:"rangeAxisMaxValue"},inline:!0})},Il=function(){return g.a.createElement(Wi.a,null,g.a.createElement("label",null,ae.a.t("Axis range")),g.a.createElement("div",{className:pi.className},g.a.createElement(yl,null),"\xa0\u2013\xa0",g.a.createElement(Ol,null)),g.a.createElement(vl.a,null,ae.a.t("Values outside of the range will not be displayed")))},xl=function(){return g.a.createElement(Pi,{type:"number",width:"96px",helpText:ae.a.t("The number of axis steps between the min and max values"),label:ae.a.t("Steps"),placeholder:ae.a.t("Auto"),option:{name:"rangeAxisSteps"}})},Sl=function(){return g.a.createElement(Pi,{type:"number",width:"96px",label:ae.a.t("Decimals"),placeholder:ae.a.t("Auto"),option:{name:"rangeAxisDecimals"}})},_l=Z.rangeAxisLabel.defaultValue,Al=function(){return g.a.createElement(Pi,{type:"text",width:"280px",label:ae.a.t("Axis title"),placeholder:ae.a.t("Add a title"),option:{name:"rangeAxisLabel",defaultValue:_l},toggleable:!0})},jl=Z.domainAxisLabel.defaultValue,Dl=function(){return g.a.createElement(Pi,{type:"text",width:"280px",label:ae.a.t("Axis title"),placeholder:ae.a.t("Add a title"),option:{name:"domainAxisLabel",defaultValue:jl},toggleable:!0})},Tl=function(){return g.a.createElement(vi,{label:ae.a.t("No space between bars/columns"),option:{name:"noSpaceBetweenColumns"}})},Cl=function(){return g.a.createElement(vi,{label:ae.a.t("Legend key"),option:{name:"hideLegend"}})},wl=n(615),Nl=n(2405),Ll=function(e){function t(e){var n;return Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).onChange=function(e){var t=e.value;n.setState({value:t}),n.props.onChange("NONE"===t)},n.defaultState={value:"AUTO"},n.state=e.value?{value:e.value}:n.defaultState,n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.state.value,t=this.props.visualizationType;return g.a.createElement("div",{className:si.className},g.a.createElement(qi.a,null,t===X.VIS_TYPE_PIVOT_TABLE?ae.a.t("Table title"):ae.a.t("Chart title")),g.a.createElement(Nl.a,{name:"hideTitle-selector",onChange:this.onChange,value:e,dense:!0},[{id:"AUTO",label:ae.a.t("Auto generated")},{id:"NONE",label:ae.a.t("None")},{id:"CUSTOM",label:ae.a.t("Custom")}].map((function(e){var t=e.id,n=e.label;return g.a.createElement(Ci.a,{key:t,label:n,value:t,dense:!0})}))),"CUSTOM"===e?g.a.createElement("div",{className:mi.className},g.a.createElement(Gi,{inline:!0})):null)}}]),t}(b.Component),Rl=Object(wl.a)([Ke],(function(e){return e.hideTitle?"NONE":void 0===e.title?"AUTO":"CUSTOM"})),kl=Object(v.connect)((function(e){return{visualizationType:Xe(e),value:Rl(e)}}),(function(e){return{onChange:function(t){return e(Ln({hideTitle:t}))}}}))(Ll),Ml=function(){return g.a.createElement(Pi,{type:"text",width:"280px",placeholder:ae.a.t("Add a subtitle"),option:{name:"subtitle"}})},Vl=function(e){function t(e){var n;return Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).onChange=function(e){var t=e.value;n.setState({value:t}),n.props.onChange("NONE"===t)},n.defaultState={value:"NONE"},n.state=e.value?{value:e.value}:n.defaultState,n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.state.value,t=this.props.visualizationType;return g.a.createElement("div",{className:si.className},g.a.createElement(qi.a,null,t===X.VIS_TYPE_PIVOT_TABLE?ae.a.t("Table subtitle"):ae.a.t("Chart subtitle")),g.a.createElement(Nl.a,{name:"hideSubtitle-selector",onChange:this.onChange,value:e,dense:!0},[{id:"NONE",label:ae.a.t("None")},{id:"CUSTOM",label:ae.a.t("Custom")}].map((function(e){var t=e.id,n=e.label;return g.a.createElement(Ci.a,{key:t,label:n,value:t,dense:!0})}))),"CUSTOM"===e?g.a.createElement("div",{className:mi.className},g.a.createElement(Ml,{inline:!0})):null)}}]),t}(b.Component),Ul=Object(v.connect)((function(e){return{visualizationType:Xe(e),value:Ke(e).hideSubtitle?"NONE":"CUSTOM"}}),(function(e){return{onChange:function(t){return e(Ln({hideSubtitle:t}))}}}))(Vl),Pl=[{key:"data-tab",label:ae.a.t("Data"),content:[{key:"data-display",label:ae.a.t("Display"),content:g.a.Children.toArray([g.a.createElement(ol,null),g.a.createElement(ul,null),g.a.createElement(rl,null)])},{key:"data-lines",label:ae.a.t("Lines"),content:g.a.Children.toArray([g.a.createElement(ml,null),g.a.createElement(hl,null),g.a.createElement(gl,null)])},{key:"data-advanced",label:ae.a.t("Advanced"),content:g.a.Children.toArray([g.a.createElement(gi,null)])}]},{key:"axes-tab",label:ae.a.t("Axes"),content:[{key:"axes-vertical-axis",label:ae.a.t("Vertical (y) axis"),content:g.a.Children.toArray([g.a.createElement(Al,null),g.a.createElement(Il,null),g.a.createElement(xl,null),g.a.createElement(Sl,null)])},{key:"axes-horizontal-axis",label:ae.a.t("Horizontal (x) axis"),content:g.a.Children.toArray([g.a.createElement(Dl,null)])}]},{key:"colors-legends",label:ae.a.t("Colors & Legends"),content:[]},{key:"style-tab",label:ae.a.t("Style"),content:[{key:"style-chart-style",label:ae.a.t("Chart style"),content:g.a.Children.toArray([g.a.createElement(cl,null),g.a.createElement(Tl,null),g.a.createElement(Cl,null)])},{key:"style-titles",label:ae.a.t("Titles"),content:g.a.Children.toArray([g.a.createElement(kl,null),g.a.createElement(Ul,null)])}]}],zl=function(){return g.a.createElement(vi,{label:ae.a.t("Stacked values add up to 100%"),option:{name:"percentStackedValues"}})},Gl=[{key:"data-tab",label:ae.a.t("Data"),content:[{key:"data-display",label:ae.a.t("Display"),content:g.a.Children.toArray([g.a.createElement(cl,null),g.a.createElement(zl,null),g.a.createElement(ol,null),g.a.createElement(ul,null),g.a.createElement(rl,null)])},{key:"data-lines",label:ae.a.t("Lines"),content:g.a.Children.toArray([g.a.createElement(ml,null),g.a.createElement(hl,null),g.a.createElement(gl,null)])},{key:"data-advanced",label:ae.a.t("Advanced"),content:g.a.Children.toArray([g.a.createElement(gi,null)])}]},{key:"axes-tab",label:ae.a.t("Axes"),content:[{key:"axes-vertical-axis",label:ae.a.t("Vertical (y) axis"),content:g.a.Children.toArray([g.a.createElement(Al,null),g.a.createElement(Il,null),g.a.createElement(xl,null),g.a.createElement(Sl,null)])},{key:"axes-horizontal-axis",label:ae.a.t("Horizontal (x) axis"),content:g.a.Children.toArray([g.a.createElement(Dl,null)])}]},{key:"style-tab",label:ae.a.t("Style"),content:[{key:"style-chart-style",label:ae.a.t("Chart style"),content:g.a.Children.toArray([g.a.createElement(Tl,null),g.a.createElement(Cl,null)])},{key:"style-titles",label:ae.a.t("Titles"),content:g.a.Children.toArray([g.a.createElement(kl,null),g.a.createElement(Ul,null)])}]}],Fl=[{key:"data-tab",label:ae.a.t("Data"),content:[{key:"data-section-1",content:g.a.Children.toArray([g.a.createElement(cl,null),g.a.createElement(ol,null),g.a.createElement(ul,null),g.a.createElement(ml,null),g.a.createElement(hl,null),g.a.createElement(gl,null),g.a.createElement(rl,null),g.a.createElement(gi,null)])}]},{key:"axes-tab",label:ae.a.t("Axes"),content:[{key:"axes-section-1",content:g.a.Children.toArray([g.a.createElement(yl,null),g.a.createElement(Ol,null),g.a.createElement(xl,null),g.a.createElement(Sl,null),g.a.createElement(Al,null),g.a.createElement(Dl,null)])}]},{key:"style-tab",label:ae.a.t("Style"),content:[{key:"style-section-1",content:g.a.Children.toArray([g.a.createElement(Cl,null),g.a.createElement(Gi,null),g.a.createElement(kl,null),g.a.createElement(Ml,null),g.a.createElement(Ul,null)])}]}],Yl=[{key:"data-tab",label:ae.a.t("Data"),content:[{key:"data-section-1",content:g.a.Children.toArray([g.a.createElement(cl,null),g.a.createElement(zl,null),g.a.createElement(ol,null),g.a.createElement(ul,null),g.a.createElement(ml,null),g.a.createElement(hl,null),g.a.createElement(gl,null),g.a.createElement(rl,null),g.a.createElement(gi,null)])}]},{key:"axes-tab",label:ae.a.t("Axes"),content:[{key:"axes-section-1",content:g.a.Children.toArray([g.a.createElement(yl,null),g.a.createElement(Ol,null),g.a.createElement(xl,null),g.a.createElement(Sl,null),g.a.createElement(Al,null),g.a.createElement(Dl,null)])}]},{key:"style-tab",label:ae.a.t("Style"),content:[{key:"style-section-1",content:g.a.Children.toArray([g.a.createElement(Cl,null),g.a.createElement(Gi,null),g.a.createElement(kl,null),g.a.createElement(Ml,null),g.a.createElement(Ul,null)])}]}],Bl=[{key:"data-tab",label:ae.a.t("Data"),content:[{key:"data-advanced",label:ae.a.t("Advanced"),content:g.a.Children.toArray([g.a.createElement(gi,null)])}]},{key:"style-tab",label:ae.a.t("Style"),content:[{key:"style-titles",label:ae.a.t("Titles"),content:g.a.Children.toArray([g.a.createElement(kl,null),g.a.createElement(Ul,null)])}]}],Hl=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={activeTabKey:void 0},n.selectTab=function(e){n.setState({activeTabKey:e})},n.generateTabContent=function(e){return e.map((function(e){var t=e.key,n=e.label,a=e.content;return g.a.createElement("div",{key:t,className:oi.className},g.a.createElement(ei.a,null,n?g.a.createElement(ti.a,null,g.a.createElement("span",{className:ci.className},n)):null,a))}))},n.generateTabs=function(e){return e.map((function(e){var t=e.key,a=e.label,r=e.content;return{key:t,label:a,content:n.generateTabContent(r)}}))},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this,t=function(e){switch(e){case X.VIS_TYPE_COLUMN:case X.VIS_TYPE_BAR:case X.VIS_TYPE_YEAR_OVER_YEAR_LINE:case X.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return Pl;case X.VIS_TYPE_STACKED_COLUMN:case X.VIS_TYPE_STACKED_BAR:return Gl;case X.VIS_TYPE_LINE:case X.VIS_TYPE_RADAR:return Fl;case X.VIS_TYPE_AREA:return Yl;case X.VIS_TYPE_PIE:case X.VIS_TYPE_GAUGE:case X.VIS_TYPE_SINGLE_VALUE:return Bl;case X.VIS_TYPE_PIVOT_TABLE:return ll;default:return Gl}}(this.props.visualizationType),n=this.generateTabs(t),a=n.findIndex((function(t){return t.key===e.state.activeTabKey}));return a<0&&(a=0),g.a.createElement(b.Fragment,null,g.a.createElement("div",{className:li.className},g.a.createElement(ni.a,null,n.map((function(t,n){var r=t.key,i=t.label;return g.a.createElement(ai.a,{key:r,onClick:function(){return e.selectTab(r)},selected:n===a},i)}))),li.styles),n[a].content,oi.styles,ci.styles,si.styles,ui.styles,mi.styles,pi.styles,di.styles)}}]),t}(b.Component),ql=Object(v.connect)((function(e){return{visualizationType:Xe(e)}}))(Hl),Wl=function(e){function t(e){var n;return Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).onClose=function(){n.toggleVisualizationOptionsDialog()},n.toggleVisualizationOptionsDialog=function(){n.setState({dialogIsOpen:!n.state.dialogIsOpen})},n.getPrimaryOnClick=function(e){return function(){e(),n.onClose()}},n.state={dialogIsOpen:!1},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this;return g.a.createElement(b.Fragment,null,g.a.createElement(za.a,{className:this.props.className,onClick:this.toggleVisualizationOptionsDialog},ae.a.t("Options")),this.state.dialogIsOpen&&g.a.createElement(vr.a,{onClose:this.onClose,large:!0},g.a.createElement(yr.a,null,ae.a.t("Options")),g.a.createElement(Or.a,null,g.a.createElement(ql,null)),g.a.createElement(Ir.a,null,g.a.createElement(xr.a,null,g.a.createElement(Sr,{onClick:this.onClose}),g.a.createElement($r,{renderComponent:function(t){return g.a.createElement(Ua,{onClick:e.getPrimaryOnClick(t)})}})))))}}]),t}(b.Component),Xl=function(e){var t="/".concat(e);k.location.pathname===t?k.replace(t):k.push(t)},Kl=function(){return k.push("/")},Zl=function(e){return function(t){return e.onRenameVisualization(t)}},Ql=function(e){return function(t){return e.onSaveVisualization(t,!1)}},Jl=function(e){return function(t){return e.onSaveVisualization(t,!0)}},$l=function(e){return function(){return e.onDeleteVisualization()}},eo=function(e){return function(t){return e.onError(t)}},to=function(e,t){var n=e.classes,a=Object(S.a)(e,["classes"]);return g.a.createElement("div",{className:n.menuBar},g.a.createElement($r,{renderComponent:function(e){return g.a.createElement(Ua,{className:n.updateButton,small:!0,onClick:e})}}),g.a.createElement(Ma.a,{d2:t.d2,fileId:a.id||null,fileType:a.apiObjectName,onOpen:Xl,onNew:Kl,onRename:Zl(a),onSave:Ql(a),onSaveAs:Jl(a),onDelete:$l(a),onError:eo(a)}),g.a.createElement(Wl,{className:n.label}),g.a.createElement(pr,{className:n.label}),g.a.createElement("div",{className:n.grow}),g.a.createElement(gr,{className:n.label}))};to.contextTypes={d2:Ca.a.object};var no=Object(v.connect)((function(e){return{id:(jt(e)||{}).id}}),(function(e){return{onRenameVisualization:function(t){return e(function(e){var t=e.name,n=e.description;return function(e,a){var r=a(),i=H(r),l=jt(r),o=Object(_.a)({},i),c=Object(_.a)({},l);t&&(o.name=c.name=t),n&&(o.description=c.description=n),e(vn(o)),e(On(i===l?o:c)),e(aa({message:ae.a.t("Rename successful"),open:!0,duration:2e3}))}}(t))},onSaveVisualization:function(t,n){return e(function(e,t){var n=e.name,a=e.description;return function(e,r,i){var l,o;return j.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e){"OK"===e.status&&e.response.uid&&(t?k.push("/".concat(e.response.uid)):k.replace("/".concat(e.response.uid)))},e.prev=1,o=Object(_.a)({},jt(r())),t&&delete o.id,n&&(o.name=n),a&&(o.description=a),e.t0=l,e.next=9,j.a.awrap(gn(i,o));case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.prev=13,e.t2=e.catch(1),e.abrupt("return",ua("tDoSaveVisualization",e.t2));case 16:case"end":return e.stop()}}),null,null,[[1,13]])}}(t,n))},onDeleteVisualization:function(){return e((function(e,t){var n=jt(t());e(aa({message:ae.a.t('"{{what}}" successfully deleted.',{what:n.name}),open:!0,duration:2e3})),k.push("/")}))},onError:function(t){var n=function(e){var t=e.message,n=e.httpStatusCode;return{message:t,type:String(n).match(/50\d/)?"error":"warning"}}(t),a=n.type,r=n.message;e(E.acReceivedSnackbarMessage({variant:a,message:r,open:!0}))}}}))(Object(O.withStyles)((function(e){return{menuBar:{background:pa.colors.white,display:"flex",alignItems:"center",padding:"0 ".concat(e.spacing.unit,"px"),height:"38px"},updateButton:{marginRight:e.spacing.unit},label:{fontSize:"15px",fontWeight:400,textTransform:"none"},grow:{flex:"1 1 0%"}}}))(to)),ao=n(2147),ro=function(){return g.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{id:"Exp",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"2---Home-+-Selected-Intp.",transform:"translate(-522.000000, -169.000000)"},g.a.createElement("rect",{fill:"#F4F6F8",x:"0",y:"0",width:"1280",height:"850"}),g.a.createElement("g",{id:"title-area",transform:"translate(298.000000, 165.000000)"},g.a.createElement("g",{id:"name-badge",transform:"translate(220.000000, 0.000000)"},g.a.createElement("rect",{id:"Rectangle-4",fill:"#FFFFFF",opacity:"0.700613839",x:"0",y:"0",width:"260",height:"24",rx:"4"}),g.a.createElement("g",{id:"undo",transform:"translate(4.000000, 4.000000)"},g.a.createElement("rect",{id:"frame",x:"0",y:"0",width:"16",height:"16"}),g.a.createElement("polyline",{id:"Path",stroke:"#494949",strokeLinecap:"round",strokeLinejoin:"round",points:"2.375 2.374 2.375 6.124 6.125 6.124"}),g.a.createElement("path",{d:"M8,13.624 C10.8610015,13.6256787 13.2674888,11.4795583 13.5919996,8.63701982 C13.9165103,5.79448132 12.0556517,3.16119082 9.2678875,2.51799333 C6.48012327,1.87479584 3.65366782,3.42662163 2.7,6.124",id:"Path",stroke:"#494949",strokeLinecap:"round",strokeLinejoin:"round"}),g.a.createElement("path",{d:"M9,7.29289322 L11.1819805,9.47487373 C11.3772427,9.67013588 11.3772427,9.98671837 11.1819805,10.1819805 C10.9867184,10.3772427 10.6701359,10.3772427 10.4748737,10.1819805 L8.01023174,7.71733852 L8,7.7144165 L8,5.5 C8,5.22385763 8.22385763,5 8.5,5 C8.77614237,5 9,5.22385763 9,5.5 L9,7.29289322 Z",id:"Combined-Shape",fill:"#494949"})))))))},io={titleBar:{display:"flex",justifyContent:"center"},cell:{display:"flex",alignItems:"center",background:pa.colors.white,padding:"6px",borderRadius:"5px",margin:"4px"},title:{fontSize:"14px"},suffix:{paddingLeft:"4px"},interpretation:{fontSize:"12px",color:pa.colors.grey700},interpretationIcon:{display:"flex",alignItems:"center",height:"14px",width:"14px",marginRight:"3px"},titleUnsaved:{color:pa.colors.grey500,fontStyle:"italic"},titleDirty:{color:pa.colors.grey700}},lo=ae.a.t("Unsaved visualization"),oo=ae.a.t("Edited"),co=Object(_.a)({},io.cell,{},io.title),so=Object(_.a)({},io.cell,{},io.interpretation),uo=function(e,t){switch(e){case"UNSAVED":return lo;case"SAVED":case"DIRTY":return t.name;default:return""}},mo=Object(v.connect)((function(e){return{visualization:H(e),current:jt(e),interpretation:at(e),uiLocale:Xt(e)}}),null,(function(e,t,n){var a=e.visualization,r=e.current,i=e.interpretation,l=e.uiLocale,o=function(e,t){return t===St?"EMPTY":e===Y?"UNSAVED":t===e?"SAVED":"DIRTY"}(a,r);return Object(_.a)({},t,{},n,{titleState:o,titleText:uo(o,a),interpretationDate:i&&i.created?Object(ao.a)(i.created,l):null})}))((function(e){var t=e.titleState,n=e.titleText,a=e.interpretationDate,r=Object(_.a)({},co,{},function(e){switch(e){case"UNSAVED":return io.titleUnsaved;default:return null}}(t));return n?g.a.createElement("div",{"data-test":"chart-title",style:io.titleBar},g.a.createElement("div",{style:r},n,function(e){switch(e){case"DIRTY":return g.a.createElement("div",{style:Object(_.a)({},io.suffix,{},io.titleDirty)},"- ".concat(oo));default:return""}}(t)),a&&g.a.createElement("div",{style:so},g.a.createElement("div",{style:io.interpretationIcon},g.a.createElement(ro,null)),g.a.createElement("div",null,ae.a.t("Viewing interpretation from {{interpretationDate}}",{interpretationDate:a})))):null})),po=n(1003),fo=n.n(po),ho=function(e,t){if(void 0!==t[e.id])return""===t[e.id]?"/"+e.id:"/"+t[e.id]+"/"+e.id},Eo=function(e,t,n){return function(e,t){var n=t.parentGraphMap;return Object(_.a)({},e,{parentGraphMap:Object(_.a)({},e.parentGraphMap,{},n)})}(function(e,t){var n=Object(X.layoutGetAxisIdDimensionIdsObject)(e),a=le(n)[X.DIMENSION_ID_ORGUNIT],r=t.parentGraphMap;return a?Object(_.a)({},e,Object(W.a)({},a,e[a].map((function(e){return Object(_.a)({},e,{items:e.items.map((function(e){return Object(_.a)({},e,{path:ho(e,r)})}))})})))):e}(function(e,t){var n=function(e){return Object(_.a)({},e,{items:e.items.map((function(e){return Object(_.a)({},e,{name:t[e.id]?t[e.id].name:void 0})}))})};return Object(_.a)({},e,{columns:e.columns.map(n),filters:e.filters.map(n),rows:e.rows.map(n)})}(function(e){return Object(_.a)({},e,{id:void 0,name:void 0,displayName:void 0})}(e),t),n),n)},bo=n(744),go=n.n(bo),vo=n(864),yo=n.n(vo),Oo=n(865),Io=n.n(Oo),xo=n(231),So=n.n(xo),_o=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("rect",{fill:"#63A4FF",x:"6",y:"14",width:"10",height:"32"}),g.a.createElement("rect",{fill:"#1976D2",x:"20",y:"24",width:"10",height:"22"}),g.a.createElement("rect",{fill:"#004BA0",x:"36",y:"4",width:"10",height:"42"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},Ao=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("rect",{fill:"#63A4FF",x:"6",y:"14",width:"10",height:"32"}),g.a.createElement("rect",{fill:"#9EC6FF",transform:"translate(11.000000, 16.500000) scale(1, -1) translate(-11.000000, -16.500000) ",x:"6",y:"7",width:"10",height:"19"}),g.a.createElement("rect",{fill:"#1976D2",x:"20",y:"20",width:"10",height:"26"}),g.a.createElement("rect",{fill:"#63A4FF",transform:"translate(25.000000, 15.500000) scale(1, -1) translate(-25.000000, -15.500000) ",x:"20",y:"11",width:"10",height:"9"}),g.a.createElement("rect",{fill:"#004BA0",x:"36",y:"33",width:"10",height:"13"}),g.a.createElement("rect",{fill:"#1976D2",transform:"translate(41.000000, 23.500000) scale(1, -1) translate(-41.000000, -23.500000) ",x:"36",y:"14",width:"10",height:"19"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},jo=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("rect",{fill:"#63A4FF",x:"2",y:"4",width:"17",height:"10"}),g.a.createElement("rect",{fill:"#1976D2",x:"2",y:"18",width:"34",height:"10"}),g.a.createElement("rect",{fill:"#004BA0",x:"2",y:"32",width:"40",height:"10"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},Do=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("rect",{fill:"#63A4FF",x:"2",y:"4",width:"17",height:"10"}),g.a.createElement("rect",{fill:"#9EC6FF",transform:"translate(23.500000, 9.000000) scale(-1, 1) translate(-23.500000, -9.000000) ",x:"19",y:"4",width:"9",height:"10"}),g.a.createElement("rect",{fill:"#1976D2",x:"2",y:"18",width:"34",height:"10"}),g.a.createElement("rect",{fill:"#63A4FF",x:"13",y:"18",width:"23",height:"10"}),g.a.createElement("rect",{fill:"#004BA0",x:"2",y:"32",width:"40",height:"10"}),g.a.createElement("rect",{fill:"#1976D2",x:"33",y:"32",width:"9",height:"10"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"})))},To=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("defs",null,g.a.createElement("mask",{id:"mask-4",fill:"white"},g.a.createElement("circle",{cx:"24",cy:"24",r:"24"}))),g.a.createElement("g",{stroke:"none",strokeWidth:"0",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{transform:"translate(24.000000, 24.000000) rotate(-135.000000) translate(-24.000000, -24.000000) "},g.a.createElement("g",{stroke:"none",fill:"none",strokeDasharray:"30.17142857142857,240",mask:"url(#mask-4)",strokeWidth:"48"},g.a.createElement("path",{stroke:"#63A4FF",d:"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z"})),g.a.createElement("g",{stroke:"none",fill:"none",strokeDasharray:"82.97142857142858,240",mask:"url(#mask-4)",transform:"translate(24.000000, 24.000000) rotate(-72.000000) translate(-24.000000, -24.000000) ",strokeWidth:"48"},g.a.createElement("path",{stroke:"#1976D2",d:"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z"})),g.a.createElement("g",{stroke:"none",fill:"none",strokeDasharray:"37.71428571428572,240",mask:"url(#mask-4)",transform:"translate(24.000000, 24.000000) rotate(-270.000000) translate(-24.000000, -24.000000) ",strokeWidth:"48"},g.a.createElement("path",{stroke:"#004BA0",d:"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z"})))))},Co=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{transform:"translate(0.000000, -12.000000)"},g.a.createElement("path",{d:"M2,36 C2,23.8497355 11.8497355,14 24,14 C36.1502645,14 46,23.8497355 46,36 L48,36 C48,22.745166 37.254834,12 24,12 C10.745166,12 0,22.745166 0,36 L2,36 Z",fill:"#9E9E9E",fillRule:"nonzero"}),g.a.createElement("path",{d:"M39.5630877,20.4405157 C39.0656993,19.9377314 38.5441136,19.4570095 38,19 C34.2678935,15.9151064 29.3575953,14 24,14 C11.8497355,14 2,23.8497355 2,36 L8,36 C8,27.163444 15.163444,20 24,20 C27.7876065,20 31.3827316,21.3146632 34.1773496,23.6246453 C34.5775703,23.9608232 34.9595684,24.3130995 35.3225781,24.6801975 L39.5630877,20.4405157 Z",fill:"#63A4FF",fillRule:"nonzero"}))))},wo=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",null,g.a.createElement("mask",{id:"mask-line-icon",fill:"white"},g.a.createElement("rect",{x:"0",y:"0",width:"48",height:"48"})),g.a.createElement("polygon",{stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-line-icon)",points:"4 28 16 16 26.7935166 26.7935166 33.0558406 20.5311926 53 36 53 51 0 51 0 28"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"}))))},No=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",null,g.a.createElement("mask",{id:"mask-area-icon",fill:"white"},g.a.createElement("rect",{x:"0",y:"0",width:"48",height:"48"})),g.a.createElement("g",null),g.a.createElement("polygon",{stroke:"#1976D2",strokeWidth:"2",fill:"#63A4FF",mask:"url(#mask-area-icon)",points:"4 28 16 16 26.7935166 26.7935166 33.0558406 20.5311926 53 36 53 51 0 51 0 28"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"}))))},Lo=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("circle",{stroke:"#9E9E9E",strokeWidth:"2",cx:"24",cy:"24",r:"23"}),g.a.createElement("circle",{stroke:"#9E9E9E",strokeWidth:"2",cx:"24",cy:"24",r:"15"}),g.a.createElement("circle",{stroke:"#9E9E9E",strokeWidth:"2",cx:"24",cy:"24",r:"5"}),g.a.createElement("circle",{fill:"#1976D2",cx:"24",cy:"9",r:"2"}),g.a.createElement("circle",{fill:"#1976D2",cx:"11",cy:"31",r:"2"}),g.a.createElement("circle",{fill:"#63A4FF",cx:"24",cy:"39",r:"2"}),g.a.createElement("circle",{fill:"#004BA0",cx:"39",cy:"24",r:"2"}),g.a.createElement("circle",{fill:"#004BA0",cx:"40",cy:"40",r:"2"})))},Ro=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",null,g.a.createElement("mask",{id:"mask-yoyl-icon",fill:"white"},g.a.createElement("rect",{x:"0",y:"0",width:"48",height:"48"})),g.a.createElement("polygon",{stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-yoyl-icon)",points:"1 28 10 35 18 16 34 35 50 36 50 51 -3 51 -3 28"}),g.a.createElement("polygon",{stroke:"#004BA0",strokeWidth:"2",mask:"url(#mask-yoyl-icon)",points:"1 20 8 20 19 29 36 17 50 28 50 51 -3 51 -3 20"}),g.a.createElement("polygon",{stroke:"#63A4FF",strokeWidth:"2",mask:"url(#mask-yoyl-icon)",points:"1 35 19 39 28 31 38 28 50 43 50 66 -3 66 -3 35"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"0",width:"2",height:"48"}),g.a.createElement("rect",{fill:"#9E9E9E",x:"0",y:"46",width:"48",height:"2"}))))},ko=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",null,g.a.createElement("polygon",{points:"0 0 48 0 48 48 0 48"}),g.a.createElement("polygon",{fill:"#63A4FF",points:"6 14 11 14 11 46 6 46"}),g.a.createElement("polygon",{fill:"#63A4FF",points:"20 23 25 23 25 46 20 46"}),g.a.createElement("polygon",{fill:"#63A4FF",points:"34 30 39 30 39 46 34 46"}),g.a.createElement("polygon",{fill:"#004BA0",points:"11 26 16 26 16 46 11 46"}),g.a.createElement("polygon",{fill:"#004BA0",points:"25 16 30 16 30 46 25 46"}),g.a.createElement("polygon",{fill:"#004BA0",points:"39 9 44 9 44 46 39 46"}),g.a.createElement("polygon",{fill:"#9E9E9E",points:"0 0 2 0 2 48 0 48"}),g.a.createElement("polygon",{fill:"#9E9E9E",points:"0 46 48 46 48 48 0 48"}))))},Mo=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("path",{d:"M45,9.59a2,2,0,0,1,2,2v25a2,2,0,0,1-2,2H3a2,2,0,0,1-2-2v-25a2,2,0,0,1,2-2H45m0-1H3a3,3,0,0,0-3,3v25a3,3,0,0,0,3,3H45a3,3,0,0,0,3-3v-25a3,3,0,0,0-3-3Z",fill:"#9e9e9e"}),g.a.createElement("path",{d:"M13.06,31H10.82V20.16L7.51,21.29V19.4l5.26-1.94h.29Z",fill:"#1976d2"}),g.a.createElement("path",{d:"M27,31H18V29.46l4.5-4.91a10.45,10.45,0,0,0,1.38-1.81,2.91,2.91,0,0,0,.42-1.46,2.2,2.2,0,0,0-.55-1.56,1.86,1.86,0,0,0-1.46-.59,2.2,2.2,0,0,0-1.7.66,2.65,2.65,0,0,0-.6,1.83H17.69a4.36,4.36,0,0,1,.56-2.22,3.9,3.9,0,0,1,1.6-1.54,5.19,5.19,0,0,1,2.41-.54,4.54,4.54,0,0,1,3.1,1A3.41,3.41,0,0,1,26.5,21a4.66,4.66,0,0,1-.57,2.12,11.88,11.88,0,0,1-1.87,2.52l-3.3,3.53H27Z",fill:"#1976d2"}),g.a.createElement("path",{d:"M32.68,23.23h1.38a2.47,2.47,0,0,0,1.64-.54,1.9,1.9,0,0,0,.61-1.53,2.1,2.1,0,0,0-.51-1.5,2,2,0,0,0-1.54-.53,2.13,2.13,0,0,0-1.49.52A1.76,1.76,0,0,0,32.18,21H29.93a3.39,3.39,0,0,1,.55-1.89A3.74,3.74,0,0,1,32,17.79a5.15,5.15,0,0,1,2.21-.47,4.68,4.68,0,0,1,3.18,1,3.57,3.57,0,0,1,1.15,2.83A2.87,2.87,0,0,1,38,22.87a3.53,3.53,0,0,1-1.49,1.21,3.28,3.28,0,0,1,1.69,1.2,3.24,3.24,0,0,1,.58,1.95,3.63,3.63,0,0,1-1.25,2.89,4.82,4.82,0,0,1-3.28,1.08,4.82,4.82,0,0,1-3.19-1,3.44,3.44,0,0,1-1.24-2.77h2.25a1.88,1.88,0,0,0,.6,1.45,2.29,2.29,0,0,0,1.61.56,2.34,2.34,0,0,0,1.65-.56,2.09,2.09,0,0,0,.6-1.61,2.13,2.13,0,0,0-.63-1.65A2.7,2.7,0,0,0,34,25H32.68Z",fill:"#1976d2"}))},Vo=function(e){var t=e.style,n=void 0===t?{width:24,height:24,paddingRight:"8px"}:t;return g.a.createElement(So.a,{viewBox:"0 0 48 48",style:n},g.a.createElement("title",null,"icon_chart_GIS"),g.a.createElement("desc",null,"Created with Sketch."),g.a.createElement("defs",null,g.a.createElement("rect",{id:"path-1",x:"0",y:"0",width:"48",height:"48"})),g.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"Icon/48x48/chart_GIS"},g.a.createElement("g",{id:"icon_chart_GIS"},g.a.createElement("mask",{id:"mask-globe-icon",fill:"white"},g.a.createElement("use",{xlinkHref:"#path-1"})),g.a.createElement("g",{id:"Bounds"}),g.a.createElement("circle",{id:"Oval-4",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-globe-icon)",cx:"24",cy:"24",r:"23"}),g.a.createElement("polyline",{id:"Path-6",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-globe-icon)",points:"1 21 4 24 8 26 9 24 6 19 11 18 18 12 14 9 16 6 15 3"}),g.a.createElement("polyline",{id:"Path-7",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-globe-icon)",points:"47 25 45 21 43 19 40 18 37 18 34 17 32 18 30 23 33 27 37 27 38 30 38 38 38.5 42"}),g.a.createElement("polyline",{id:"Path-5",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-globe-icon)",points:"38 6 37 7 34 6 32 8 34 10 33 12 33 15 37 14 39 15 43 12"}),g.a.createElement("polyline",{id:"Path-8",stroke:"#1976D2",strokeWidth:"2",mask:"url(#mask-globe-icon)",points:"18 46 16 41 15 36 13 34 10 31 11 28 14 26 18 27 20 29 23 30 25 32 25 36 23 40 21 47"})))))},Uo=function(e){var t=e.style,n=void 0===t?{paddingRight:"8px",width:24,height:24}:t;return g.a.createElement(So.a,{viewBox:"0,0,48,48",style:n},g.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("polygon",{points:"0 0 48 0 48 48 0 48"}),g.a.createElement("rect",{stroke:"#4A5768",strokeWidth:"2",x:"7",y:"11",width:"34",height:"26"}),g.a.createElement("rect",{fill:"#4A5768",x:"8",y:"18",width:"32",height:"2"}),g.a.createElement("rect",{fill:"#4A5768",x:"19",y:"11",width:"2",height:"26"}),g.a.createElement("rect",{fill:"#4A5768",x:"8",y:"24",width:"32",height:"2"}),g.a.createElement("rect",{fill:"#4A5768",x:"8",y:"30",width:"32",height:"2"})))},Po=function(e){var t=e.iconType,n=e.style;switch(t){case X.VIS_TYPE_STACKED_COLUMN:return g.a.createElement(Ao,{style:n});case X.VIS_TYPE_BAR:return g.a.createElement(jo,{style:n});case X.VIS_TYPE_STACKED_BAR:return g.a.createElement(Do,{style:n});case X.VIS_TYPE_PIE:return g.a.createElement(To,{style:n});case X.VIS_TYPE_GAUGE:return g.a.createElement(Co,{style:n});case X.VIS_TYPE_LINE:return g.a.createElement(wo,{style:n});case X.VIS_TYPE_AREA:return g.a.createElement(No,{style:n});case X.VIS_TYPE_RADAR:return g.a.createElement(Lo,{style:n});case X.VIS_TYPE_YEAR_OVER_YEAR_LINE:return g.a.createElement(Ro,{style:n});case X.VIS_TYPE_YEAR_OVER_YEAR_COLUMN:return g.a.createElement(ko,{style:n});case X.VIS_TYPE_SINGLE_VALUE:return g.a.createElement(Mo,{style:n});case"MAP":return g.a.createElement(Vo,{style:n});case X.VIS_TYPE_PIVOT_TABLE:return g.a.createElement(Uo,{style:n});case X.VIS_TYPE_COLUMN:default:return g.a.createElement(_o,{style:n})}},zo=function(e){var t=e.iconType,n=e.styles,a=e.label,r=e.isSelected,i=Object(S.a)(e,["iconType","styles","label","isSelected"]);return g.a.createElement(go.a,Object.assign({selected:Boolean(r),style:n.menuItem,disableRipple:!0},i),g.a.createElement(yo.a,{style:n.listItemIcon},g.a.createElement(Po,{iconType:t,style:n.listItemSvg})),g.a.createElement(Io.a,{primary:a,disableTypography:!0,style:n.listItemText}))},Go={button:{padding:"6px",color:pa.colors.black,fontSize:"15px",textTransform:"none",fontWeight:"normal",backgroundColor:pa.colors.white,justifyContent:"flex-start"},dropDownArrow:{marginLeft:"auto"},menu:{maxWidth:"600px",padding:0},menuDivider:{border:"none",borderBottom:"1px solid",borderColor:pa.colors.grey300},menuItem:{height:120,width:126,margin:"8px",padding:"0 4px",display:"flex",flexDirection:"column",justifyContent:"center",borderRadius:"8px",float:"left"},listItemIcon:{margin:0,marginBottom:15},listItemSvg:{width:48,height:48},listItemText:{fontSize:14,flex:"none",padding:0,whiteSpace:"normal",textAlign:"center"},clearFix:{clear:"both"}},Fo={anchorEl:null},Yo=function(e){function t(e,n){var a;return Object(Sa.a)(this,t),(a=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).handleButtonClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuItemClick=function(e){return function(){a.props.setUi(pt(Object(_.a)({},a.props.ui,{type:e}))),a.handleClose()}},a.handleOpenAsMapClick=function(){var e;return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Eo(a.props.current,a.props.metadata,a.props.ui),t.next=3,j.a.awrap(Zr(e));case 3:window.location.href="".concat(a.baseUrl,"/").concat("dhis-web-maps","?").concat(Hr,"=true");case 4:case"end":return t.stop()}}))},a.handleClose=function(){a.setState({anchorEl:null})},a.getVisTypes=function(){return Object.keys(X.visTypeDisplayNames)},a.state=Fo,a.baseUrl=n.baseUrl,a}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,n=this.props.visualizationType;return g.a.createElement(b.Fragment,null,g.a.createElement(za.a,{onClick:this.handleButtonClick,disableRipple:!0,disableFocusRipple:!0,fullWidth:!0,size:"small",style:Go.button},g.a.createElement(Po,{iconType:n}),X.visTypeDisplayNames[n],g.a.createElement(fo.a,{style:Go.dropDownArrow})),g.a.createElement(Ba.a,{open:Boolean(t),anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:this.handleClose,getContentAnchorEl:null,MenuListProps:{style:Go.menu}},this.getVisTypes().map((function(t){return g.a.createElement(zo,{key:t,iconType:t,label:X.visTypeDisplayNames[t],isSelected:t===n,styles:Go,onClick:e.handleMenuItemClick(t)})})),g.a.createElement("div",{style:Go.clearFix}),g.a.createElement("hr",{style:Go.menuDivider}),g.a.createElement(zo,{key:"MAP",iconType:"MAP",label:ae.a.t("Open as Map"),styles:Go,onClick:this.handleOpenAsMapClick,disabled:!this.props.current})))}}]),t}(b.Component);Yo.contextTypes={baseUrl:Ca.a.string};var Bo=Object(v.connect)((function(e){return{visualizationType:Xe(e),current:jt(e),metadata:Pt(e),ui:We(e)}}),(function(e){return{setUi:function(t){return e(Tn(t))}}}))(Yo),Ho=n(1059),qo=n(616),Wo=n(281),Xo=n.n(Wo),Ko=n(282),Zo=n.n(Ko),Qo=n(2148),Jo=n.n(Qo),$o={arrowDown:{borderRadius:"0px 2px 2px 0px",padding:"0px",height:"36px",minWidth:"40px"},arrowIcon:{fill:pa.colors.white}},ec=Object(O.withStyles)($o)((function(e){var t=e.classes,n=e.onClick,a=e.open;return g.a.createElement(za.a,{className:t.arrowDown,color:"primary",variant:"contained",disableRipple:!0,disableFocusRipple:!0,onClick:n},a?g.a.createElement(Jo.a,{className:t.arrowIcon}):g.a.createElement(fo.a,{className:t.arrowIcon}))})),tc=function(e){var t=e.anchorEl,n=e.classes,a=e.onClick,r=e.onClose,i=e.menuItems,l=e.addToButtonRef.offsetWidth-5,o=t&&t.getBoundingClientRect().bottom+100>window.innerHeight,c=o?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"},s=o?{vertical:"bottom",horizontal:"right"}:{vertical:"top",horizontal:"right"};return g.a.createElement(b.Fragment,null,g.a.createElement(ec,{onClick:a,open:Boolean(t)}),g.a.createElement(Ba.a,{open:Boolean(t),onClose:r,anchorEl:t,getContentAnchorEl:null,MenuListProps:{style:{minWidth:l},className:n.menuList},anchorOrigin:c,transformOrigin:s},i))};tc.defaultProps={anchorEl:null};var nc=Object(O.withStyles)({menuList:{display:"flex",flexDirection:"column"}})(tc),ac=function(e){function t(e){var n;return Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).state={anchorEl:null},n.onClose=function(){return n.setState({anchorEl:null})},n.onToggle=function(e){return n.state.anchorEl?n.onClose():n.setState({anchorEl:e.currentTarget})},n.onUpdate=function(e){n.props.onAddDimension(Object(W.a)({},n.props.dialogId,{axisId:e})),n.props.onClick()},n.getAxisMeta=function(e){return e.map((function(e){return re.find((function(t){return t.axisId===e}))}))},n.renderMenuItems=function(){return n.getAxisMeta(Object(X.getAvailableAxes)(n.props.visType)).slice(1).map((function(e){return g.a.createElement(za.a,{className:n.props.classes.menuItem,component:"li",key:e.axisId,onClick:function(){return n.onUpdate(e.axisId)}},e.name)}))},n.buttonRef=g.a.createRef(),n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this,t=this.getAxisMeta(Object(X.getAvailableAxes)(this.props.visType));return g.a.createElement("div",{ref:function(t){return e.buttonRef=t}},g.a.createElement(za.a,{className:this.props.classes.button,variant:"contained",color:"primary",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return e.onUpdate(t[0].axisId)}},t[0].name),t.length>1?g.a.createElement(nc,{onClose:this.onClose,onClick:this.onToggle,anchorEl:this.state.anchorEl,menuItems:this.renderMenuItems(),addToButtonRef:this.buttonRef}):null)}}]),t}(b.Component),rc=Object(v.connect)((function(e){return{visType:Xe(e),dialogId:tt(e)}}),{onAddDimension:kn})(Object(O.withStyles)({button:{borderRadius:"2px 0px 0px 2px",marginLeft:"5px",fontSize:"12px"},menuItem:{fontSize:"15px",textTransform:"initial",whiteSpace:"nowrap",justifyContent:"start",flexWrap:"nowrap",padding:"8px",fontWeight:"400"}})(ac)),ic=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={onMounted:!1},n.componentDidUpdate=function(e){(!Object(qo.a)(e.dxIds,n.props.dxIds)||!Object(qo.a)(e.ouIds,n.props.ouIds))&&n.fetchRecommended(),n.props.dialogId!==X.DIMENSION_ID_ORGUNIT||n.state.ouMounted||n.setState({ouMounted:!0})},n.fetchRecommended=Object(Ho.a)((function(){var e;return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.awrap(Object(X.apiFetchRecommendedIds)(n.context.d2,n.props.dxIds,n.props.ouIds));case 2:e=t.sent,n.props.setRecommendedIds(e);case 4:case"end":return t.stop()}}))}),1e3),n.selectUiItems=function(e){var t=e.dimensionId,a=e.items;switch(n.props.setUiItems({dimensionId:t,itemIds:a.map((function(e){return e.id}))}),t){case X.DIMENSION_ID_ORGUNIT:var r={},i={};a.forEach((function(e){var t=X.ouIdHelper.removePrefix(e.id);if(r[t]={id:t,name:e.name||e.displayName,displayName:e.displayName},e.path){var n=Oe(e.path);i[e.id]=n==="/".concat(e.id)?"":n.replace(/^\//,"")}})),n.props.addMetadata(r),n.props.addParentGraphMap(i);break;default:n.props.addMetadata(a.reduce((function(e,t){return e[t.id]={id:t.id,name:t.name||t.displayName,displayName:t.displayName},e}),{}))}},n.closeDialog=function(){return n.props.closeDialog(null)},n.getSelectedItems=function(e){return n.props.selectedItems[e]?n.props.selectedItems[e].filter((function(e){return n.props.metadata[e]})).map((function(e){return{id:e,name:n.props.metadata[e].name}})):[]},n.getOrgUnitsFromIds=function(e,t,n){return e.filter((function(e){return void 0!==t[X.ouIdHelper.removePrefix(e)]})).map((function(e){var a=X.ouIdHelper.removePrefix(e);return{id:e,name:t[a].displayName||t[a].name,path:Ie(a,t,n)}}))},n.renderPersistedContent=function(e){var t=n.props,a=t.displayNameProperty,r=t.ouIds,i=t.metadata,l=t.parentGraphMap,o=t.dialogId;if(n.state.ouMounted){var c=n.getOrgUnitsFromIds(r,i,l),s=X.DIMENSION_ID_ORGUNIT===o?"block":"none";return g.a.createElement("div",{key:X.DIMENSION_ID_ORGUNIT,style:{display:s}},g.a.createElement(X.OrgUnitDimension,Object.assign({displayNameProperty:a,ouItems:c},e)))}return null},n.renderDialogContent=function(){var e=n.props,t=e.displayNameProperty,a=e.dialogId,r=e.type,i=e.dimensions,l=e.removeUiItems,o=e.setUiItems,c={d2:n.context.d2,onSelect:n.selectUiItems,onDeselect:l,onReorder:o};return g.a.createElement(b.Fragment,null,n.renderPersistedContent(c),a&&function(){var e,l=n.getSelectedItems(a),o=n.props.getAxisIdByDimensionId(a),s=r,u=l.length,d=Object(X.getAxisMaxNumberOfItems)(s,o);if(!!d&&u>d&&(e=1===d?ae.a.t("'{{visualizationType}}' is intended to show a single data item. Only the first item will be used and saved.",{visualizationType:Object(X.getDisplayNameByVisType)(s)}):ae.a.t("'{{visualiationType}}' is intended to show maximum {{maxNumber}} number of items. Only the first {{maxNumber}} items will be used and saved.",{visualiationType:Object(X.getDisplayNameByVisType)(s),maxNumber:d}),l.forEach((function(e,t){e.isActive=t<d}))),a===X.DIMENSION_ID_DATA)return g.a.createElement(X.DataDimension,Object.assign({displayNameProp:t,selectedDimensions:l,infoBoxMessage:e},c));if(a===X.DIMENSION_ID_PERIOD)return g.a.createElement(X.PeriodDimension,Object.assign({selectedPeriods:l},c));if(Object(X.filterOutPredefinedDimensions)(Object.keys(n.props.dimensions)).includes(a)){var m=i[a]&&i[a].name;return g.a.createElement(X.DynamicDimension,Object.assign({selectedItems:l,dialogId:a,dialogTitle:m},c))}return null}())},n.renderPrimaryButton=function(e){return g.a.createElement($r,{renderComponent:function(t){return n.props.dimensionIdsInLayout.includes(e)?g.a.createElement(Ua,{onClick:n.getPrimaryOnClick(t)}):g.a.createElement(rc,{onClick:n.getPrimaryOnClick(t)})}})},n.getPrimaryOnClick=function(e){return function(){e(),n.closeDialog()}},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dialogId,n=e.dimensions,a=!t||t===X.DIMENSION_ID_ORGUNIT;return g.a.createElement(Xo.a,{"data-test":"dialog-manager",open:t in n,onClose:this.closeDialog,maxWidth:"lg",disableEnforceFocus:!0,keepMounted:a},this.renderDialogContent(),g.a.createElement(Zo.a,null,g.a.createElement(Sr,{onClick:this.closeDialog}),t&&this.renderPrimaryButton(t)))}}]),t}(b.Component);ic.contextTypes={d2:Ca.a.object},ic.defaultProps={dialogId:null,dxIds:[]};var lc=Object(v.connect)((function(e){return{displayNameProperty:Ht(e),dialogId:tt(e),dimensions:Lt(e),metadata:Pt(e),parentGraphMap:et(e),dxIds:lt(e,X.DIMENSION_ID_DATA),ouIds:lt(e,X.DIMENSION_ID_ORGUNIT),selectedItems:Qe(e),type:Xe(e),getAxisIdByDimensionId:function(t){return it(e,t)},dimensionIdsInLayout:ot(e)}}),{closeDialog:Bn,setRecommendedIds:function(e){return{type:Rt,value:e}},setUiItems:Vn,addMetadata:Zn,addUiItems:Un,removeUiItems:Pn,addParentGraphMap:Fn})(ic),oc=n(2149),cc=n.n(oc),sc=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).render=function(){var e=n.props,t=e.id,a=e.index,r=e.name,i=e.isSelected,l=e.isLocked,o=e.isDeactivated,c=e.isRecommended,s=e.onClick,u=e.onOptionsClick,d={name:r,isSelected:i,isLocked:l,isDeactivated:o,isRecommended:c};return g.a.createElement(Na.b,{draggableId:t,index:a,isDragDisabled:i||o||l},(function(e,n){return g.a.createElement(g.a.Fragment,null,g.a.createElement(X.DimensionItem,Object.assign({innerRef:e.innerRef},e.draggableProps,e.dragHandleProps,{id:t,className:n.isDragging?cc.a.dragging:null,onClick:s,onOptionsClick:u},d)),n.isDragging&&g.a.createElement(X.DimensionItem,Object.assign({id:"dimension-item-clone-".concat(t),className:cc.a.dimensionItemClone},d)))}))},n}return Object(Da.a)(t,e),t}(b.Component),uc=n(2150),dc=n.n(uc),mc=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).nameContainsFilterText=function(e){return e.name.toLowerCase().includes(n.props.filterText.toLowerCase())},n.isSelected=function(e){return n.props.selectedIds.includes(e)},n.isDisabledDimension=function(e){return n.props.disallowedDimensions.includes(e)},n.isLockedDimension=function(e){return n.props.lockedDimensions.includes(e)},n.isRecommendedDimension=function(e){return n.props.recommendedIds.includes(e)},n.renderItem=function(e,t){var a=e.id,r={id:a,name:e.name,index:t,isSelected:n.isSelected(a),isLocked:n.isLockedDimension(a),isDeactivated:n.isDisabledDimension(a),isRecommended:n.isRecommendedDimension(a),onClick:n.props.onDimensionClick,onOptionsClick:n.props.onDimensionOptionsClick};return g.a.createElement(sc,Object.assign({key:"".concat("dimensions","-").concat(a)},r))},n.getDimensionItemsByFilter=function(e){return n.props.dimensions.filter(e).filter(n.nameContainsFilterText).map(n.renderItem)},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.getDimensionItemsByFilter((function(e){return Object.values(Object(X.getFixedDimensions)()).some((function(t){return t.id===e.id}))})),t=this.getDimensionItemsByFilter((function(e){return Object.values(Object(X.getDynamicDimensions)()).some((function(t){return t.id===e.id}))})),n=this.getDimensionItemsByFilter((function(e){return!Object.values(Object(X.getPredefinedDimensions)()).some((function(t){return t.id===e.id}))}));return g.a.createElement(Na.c,{droppableId:"dimensions",isDropDisabled:!0},(function(a){return g.a.createElement("div",Object.assign({className:dc.a.container,ref:a.innerRef},a.droppableProps),g.a.createElement("div",{className:dc.a.wrapper},g.a.createElement("div",{className:dc.a.section},g.a.createElement("h3",{className:dc.a.header},"Main dimensions"),g.a.createElement("ul",{className:dc.a.list},e)),g.a.createElement("div",{className:dc.a.section},g.a.createElement("h3",{className:dc.a.header},"Other dimensions"),g.a.createElement("ul",{className:dc.a.list},t)),g.a.createElement("div",{className:dc.a.section},g.a.createElement("h3",{className:dc.a.header},"Your dimensions"),g.a.createElement("ul",{className:dc.a.list},n))),a.placeholder)}))}}]),t}(b.Component),pc=Object(wl.a)([r.sGetUiType],(function(e){return Object(X.getDisallowedDimensions)(e)})),fc=Object(wl.a)([r.sGetUiType],(function(e){return Object(X.getAllLockedDimensionIds)(e)})),hc=Object(v.connect)((function(e){return{dimensions:Object.values(l.sGetDimensions(e)),selectedIds:r.sGetDimensionIdsFromLayout(e),recommendedIds:o.sGetRecommendedIds(e),disallowedDimensions:pc(e),lockedDimensions:fc(e)}}),(function(e){return{onDimensionClick:function(t){return e(Bn(t))}}}))(mc),Ec=n(2151),bc=n.n(Ec),gc=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={filterText:""},n.onClearFilter=function(){n.setState({filterText:""})},n.onFilterTextChange=function(e){n.setState({filterText:e})},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){return g.a.createElement("div",{className:bc.a.container},g.a.createElement(X.DimensionFilter,{style:{marginBottom:"6px",background:"#fff",border:"1px solid ".concat(pa.colors.grey400),borderRadius:"5px"},placeholder:ae.a.t("Filter dimensions"),text:this.state.filterText,onChange:this.onFilterTextChange,onClear:this.onClearFilter,disableUnderline:!0}),g.a.createElement(hc,{filterText:this.state.filterText,onDimensionOptionsClick:this.props.onDimensionOptionsClick}))}}]),t}(b.Component),vc={divContainer:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:pa.colors.grey050}},yc=n(261),Oc=n.n(yc),Ic=n(255),xc=n.n(Ic),Sc=n(2152),_c=n.n(Sc),Ac=n(870),jc=n.n(Ac),Dc=n(873),Tc=n.n(Dc),Cc=n(874),wc=n.n(Cc),Nc=n(583),Lc=n.n(Nc),Rc=n(872),kc=n.n(Rc),Mc={tableContainer:{marginTop:"20px"},nameColumn:{width:"80%"},axisColumn:{width:"10%"},coloredColumn:{backgroundColor:pa.colors.grey100},tableCell:{padding:"4px 24px",borderBottom:"1px solid ".concat(pa.colors.grey300)},head:{borderBottom:"none"},axisRadio:{padding:"0px 10px"},dialogContent:{marginBottom:"0px"},helpText:{lineHeight:"1.5"},dialogActions:{border:"none"}},Vc=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={items:void 0},n.setItems=function(e){var t=e.reduce((function(e,t){return e[t.id]=t,e}),{});n.setState({items:t})},n.onAxisChange=function(e,t){n.setState({items:Object(_.a)({},n.state.items,Object(W.a)({},e.id,Object(_.a)({},e,{axis:t})))})},n.getAxes=function(){var e=Object.keys(n.state.items).reduce((function(e,t){var a=n.state.items[t].axis;return a>0&&(e[t]=a),e}),{});return Object.keys(e).length>0?e:He.axes},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"componentDidMount",value:function(){this.setItems(this.props.items)}},{key:"componentDidUpdate",value:function(e){var t=e.items,n=this.props.items;Object(qo.a)(t,n)||this.setItems(n)}},{key:"renderTable",value:function(){var e=this,t=this.props.classes;return g.a.createElement(jc.a,null,g.a.createElement("colgroup",null,g.a.createElement("col",{className:t.nameColumn}),g.a.createElement("col",{className:"".concat(t.axisColumn," ").concat(t.coloredColumn)}),g.a.createElement("col",{className:t.axisColumn})),g.a.createElement(Tc.a,null,g.a.createElement(wc.a,null,g.a.createElement(Lc.a,{className:t.head}),g.a.createElement(Lc.a,{className:"".concat(t.tableCell," ").concat(t.head),align:"center"},ae.a.t("Axis 1")),g.a.createElement(Lc.a,{className:"".concat(t.tableCell," ").concat(t.head),align:"center"},ae.a.t("Axis 2")))),g.a.createElement(kc.a,null,Object.keys(this.state.items).map((function(n){var a=e.state.items[n];return g.a.createElement(wc.a,{key:"multiaxis-table-row-".concat(n)},g.a.createElement(Lc.a,{className:t.tableCell},a.name),g.a.createElement(Lc.a,{className:t.tableCell,align:"center"},g.a.createElement(_c.a,{onClick:function(){return e.onAxisChange(a,0)},checked:0===a.axis,className:t.axisRadio})),g.a.createElement(Lc.a,{className:t.tableCell,align:"center"},g.a.createElement(_c.a,{onClick:function(){return e.onAxisChange(a,1)},checked:1===a.axis,className:t.axisRadio})))}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.isOpen,r=t.dialogMaxWidth,i=t.onCancelClick;return g.a.createElement(Xo.a,{open:a,maxWidth:r,onClose:i,disableEnforceFocus:!0},g.a.createElement(Oc.a,null,ae.a.t("Manage axes")),g.a.createElement(xc.a,{className:n.dialogContent},g.a.createElement("p",{className:n.helpText},ae.a.t("A chart can have two axes. Each axis will have its own scale. Set the axis for each data selection below.")),g.a.createElement("div",{className:n.tableContainer},this.state.items&&this.renderTable())),g.a.createElement(Zo.a,{className:n.dialogActions},g.a.createElement(za.a,{color:"primary",disableRipple:!0,disableFocusRipple:!0,onClick:i},ae.a.t("Cancel")),g.a.createElement(za.a,{color:"primary",variant:"contained",onClick:function(){return e.props.onUpdateClick(e.getAxes(),e.props.ui)}},ae.a.t("Update"))))}}]),t}(b.Component);Vc.defaultProps={classes:{},isOpen:!1,items:[],onUpdateClick:Function.prototype,onCancelClick:Function.prototype,dialogMaxWidth:"md"};var Uc=Object(v.connect)((function(e){return{isOpen:"axisSetup"===tt(e),items:Oa(e),ui:We(e)}}),(function(e){return{onUpdateClick:function(t,n){e(Kn(t)),e(xn(Object(_.a)({},n,{axes:t}))),e(Bn())},onCancelClick:function(){return e(Bn())}}}))(Object(O.withStyles)(Mc)(Vc)),Pc=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={dimensionMenuAnchorEl:null,dimensionId:null},n.openOptionsMenuForDimension=function(e,t){e.stopPropagation(),n.setState({dimensionMenuAnchorEl:e.currentTarget,dimensionId:t})},n.closeOptionsMenuForDimension=function(){return n.setState({dimensionMenuAnchorEl:null,dimensionId:null})},n.getNumberOfDimensionItems=function(){return(n.props.itemsByDimension[n.state.dimensionId]||[]).length},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this;return g.a.createElement("div",{style:vc.divContainer},g.a.createElement(gc,{onDimensionOptionsClick:this.openOptionsMenuForDimension}),g.a.createElement(X.DimensionMenu,{dimensionId:this.state.dimensionId,currentAxisId:this.props.getCurrentAxisId(this.state.dimensionId),visType:this.props.ui.type,numberOfDimensionItems:this.getNumberOfDimensionItems(),dualAxisItemHandler:this.props.dualAxisItemHandler,isAssignedCategoriesInLayout:this.props.layoutHasAssignedCategories,assignedCategoriesItemHandler:function(t){return e.props.assignedCategoriesItemHandler(e.props.layoutHasAssignedCategories,t)},axisItemHandler:this.props.axisItemHandler,removeItemHandler:this.props.removeItemHandler,anchorEl:this.state.dimensionMenuAnchorEl,onClose:this.closeOptionsMenuForDimension}),g.a.createElement(lc,null))}}]),t}(b.Component),zc=Object(v.connect)((function(e){return{ui:r.sGetUi(e),dimensions:l.sGetDimensions(e),layout:r.sGetUiLayout(e),itemsByDimension:r.sGetUiItems(e),layoutHasAssignedCategories:r.sLayoutHasAssignedCategories(e),getCurrentAxisId:function(t){return r.getAxisIdByDimensionId(e,t)}}}),(function(e){return{dualAxisItemHandler:function(){return e(Bn("axisSetup"))},axisItemHandler:function(t,n,a){e(kn(Object(W.a)({},t,{axisId:n}))),a>0&&e(Bn(t))},removeItemHandler:function(t){e(Mn(t))},assignedCategoriesItemHandler:function(t,n){e(t?Mn(X.DIMENSION_ID_ASSIGNED_CATEGORIES):kn(Object(W.a)({},X.DIMENSION_ID_ASSIGNED_CATEGORIES,{axisId:n})))}}}))(Pc),Gc=n(2156),Fc=n.n(Gc),Yc={wrapper:{position:"relative",width:"380px"},container:{position:"absolute",height:"100%",width:"100%"}},Bc=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).onInterpretationChange=function(e){if(e){var t="/".concat(n.props.id,"/interpretation/").concat(e.id);k.location.pathname!==t&&(k.push(t),n.props.acSetUiInterpretation({id:e.id,created:e.created}))}else k.push("/".concat(n.props.id))},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.id,a=e.interpretationId;return n?g.a.createElement("div",{style:Yc.wrapper},g.a.createElement("div",{style:Yc.container},g.a.createElement(Fc.a,{d2:this.context.d2,type:t,id:n,currentInterpretationId:a,onCurrentInterpretationChange:this.onInterpretationChange}))):null}}]),t}(b.Component);Bc.defaultProps={type:"chart"},Bc.contextTypes={d2:Ca.a.object};var Hc=Object(v.connect)((function(e){return{interpretationId:at(e).id||null}}),{acSetUiInterpretation:Wn,acClearUiInterpretation:Xn})(Bc),qc={chartCanvas:{display:"flex",justifyContent:"center",height:"100%"}},Wc=n(216),Xc=n.n(Wc),Kc=n(361),Zc=n.n(Kc),Qc=n(2304);function Jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function es(e,t,n){return t&&$c(e.prototype,t),n&&$c(e,n),e}function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){ts(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ls(e,t)}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ls(e,t){return(ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cs(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?os(e):t}function ss(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(c){r=!0,i=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var us=function(e,t,n){var a,r;return j.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=(new e.analytics.request).fromModel(t).withParameters(n),i.next=3,j.a.awrap(e.analytics.aggregate.get(a));case 3:return r=i.sent,i.abrupt("return",[new e.analytics.response(r)]);case 5:case"end":return i.stop()}}))},ds=function(e,t,n){var a,r,i,l,o,c,s;return j.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return a=(new e.analytics.request).addPeriodDimension(t.yearlySeries).withSkipData(!0).withSkipMeta(!1).withIncludeMetadataDetails(!0),n.relativePeriodDate&&(a=a.withRelativePeriodDate(n.relativePeriodDate)),u.next=4,j.a.awrap(e.analytics.aggregate.fetch(a));case 4:return r=u.sent,i=[],l=[],o=new Date,c=(""+o.getDate()).padStart(2,0),s=(""+(o.getMonth()+1)).padStart(2,0),r.metaData.dimensions.pe.forEach((function(a){l.push(r.metaData.items[a].name);var o="".concat(a,"-").concat(s,"-").concat(c),u=(new e.analytics.request).fromModel(t).withParameters(n).withRelativePeriodDate(o);i.push(e.analytics.aggregate.get(u))})),u.abrupt("return",Promise.all(i).then((function(t){return{responses:t.map((function(t){return new e.analytics.response(t)})),yearlySeriesLabels:l}})));case 12:case"end":return u.stop()}}))},ms={baseLineLabel:{defaultValue:void 0,requestable:!1},baseLineValue:{defaultValue:void 0,requestable:!1},cumulativeValues:{defaultValue:!1,requestable:!1},domainAxisLabel:{defaultValue:void 0,requestable:!1},hideEmptyRowItems:{defaultValue:"NONE",requestable:!1},hideLegend:{defaultValue:!1,requestable:!1},noSpaceBetweenColumns:{defaultValue:!1,requestable:!1},percentStackedValues:{defaultValue:!1,requestable:!1},rangeAxisDecimals:{defaultValue:void 0,requestable:!1},rangeAxisLabel:{defaultValue:void 0,requestable:!1},rangeAxisMaxValue:{defaultValue:void 0,requestable:!1},rangeAxisMinValue:{defaultValue:void 0,requestable:!1},rangeAxisSteps:{defaultValue:void 0,requestable:!1},regressionType:{defaultValue:"NONE",requestable:!1},showData:{defaultValue:!0,requestable:!1},targetLineLabel:{defaultValue:void 0,requestable:!1},targetLineValue:{defaultValue:void 0,requestable:!1},aggregationType:{defaultValue:"DEFAULT",requestable:!0},completedOnly:{defaultValue:!1,requestable:!0},hideSubtitle:{defaultValue:!1,requestable:!1},hideTitle:{defaultValue:!1,requestable:!1},sortOrder:{defaultValue:"0",requestable:!1},subtitle:{defaultValue:void 0,requestable:!1},title:{defaultValue:void 0,requestable:!1},colTotals:{defaultValue:!1,requestable:!1},colSubTotals:{defaultValue:!1,requestable:!1},rowTotals:{defaultValue:!1,requestable:!1},rowSubTotals:{defaultValue:!1,requestable:!1},showDimensionLabels:{defaultValue:!1,requestable:!1},hideEmptyColumns:{defaultValue:!1,requestable:!0},hideEmptyRows:{defaultValue:!1,requestable:!0},skipRounding:{defaultValue:!1,requestable:!0},numberType:{defaultValue:"VALUE",requestable:!1},showHierarchy:{defaultValue:!1,requestable:!0},legendSet:{defaultValue:"NONE",requestable:!1},legendDisplayStyle:{defaultValue:"FILL",requestable:!1},displayDensity:{defaultValue:"NORMAL",requestable:!1},fontSize:{defaultValue:"NORMAL",requestable:!1},digitGroupSeparator:{defaultValue:"SPACE",requestable:!1},paramReportingPeriod:{defaultValue:!1,requestable:!1},paramOrganisationUnit:{defaultValue:!1,requestable:!1},paramParentOrganisationUnit:{defaultValue:!1,requestable:!1},paramGrandParentOrganisationUnit:{defaultValue:!1,requestable:!1},regression:{defaultValue:!1,requestable:!1},cumulative:{defaultValue:!1,requestable:!1},measureCriteria:{defaultValue:void 0,requestable:!0},topLimit:{defaultValue:"0",requestable:!1}},ps=function(){return Object.entries(ms).filter((function(e){return e[1].requestable}))},fs=function(e){var t=e.reduce((function(e,t){return e.metaData?t.metaData.dimensions.pe.length>e.metaData.dimensions.pe.length&&(e=t):e=t,e}),{}).metaData;return t.dimensions.pe.reduce((function(e,n){var a=t.items[n].name;return e.push(a.replace(/\s+\d{4}$/,"")),e}),[])};function hs(e){var t=e.classes;return g.a.createElement("div",{className:t.outer},g.a.createElement(Zc.a,{className:t.progress}))}hs.propTypes={classes:Ca.a.object.isRequired};var Es=Object(O.withStyles)((function(e){return{progress:{margin:2*e.spacing.unit,maxWidth:200,textAlign:"center",alignSelf:"center"},outer:{display:"flex",justifyContent:"center",height:"100%"}}}))(hs),bs=function(e){function t(e){var n;return Jc(this,t),ts(os(n=cs(this,is(t).call(this,e))),"getRequestOptions",(function(e,t){var n=ps().reduce((function(t,n){var a=ss(n,2),r=a[0],i=a[1];return void 0!==e[r]&&e[r]!==i.defaultValue&&(t[r]=e[r]),t}),{});if(t.relativePeriodDate&&(n.relativePeriodDate=t.relativePeriodDate),t.userOrgUnit&&t.userOrgUnit.length){var a=t.userOrgUnit.map((function(e){return e.split("/").slice(-1)[0]}));n.userOrgUnit=a.join(";")}return n})),ts(os(n),"renderChart",(function(){var e,t,a,r,i,l,o,c,s,u,d,m;return j.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=n.props,t=e.config,a=e.filters,r=e.forDashboard,i=e.onResponsesReceived,l=e.onChartGenerated,o=e.onError,p.prev=1,c=n.getRequestOptions(t,a),s={dashboard:r,noData:{text:Xc.a.t("No data")}},u=[],!Object(X.isYearOverYear)(t.type)){p.next=16;break}return d=[],p.next=9,j.a.awrap(ds(n.props.d2,t,c));case 9:m=p.sent,u=m.responses,d=m.yearlySeriesLabels,s.yearlySeries=d,s.xAxisLabels=fs(u),p.next=19;break;case 16:return p.next=18,j.a.awrap(us(n.props.d2,t,c));case 18:u=p.sent;case 19:u.length&&i(u),n.recreateVisualization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.animation,a=Object(X.createVisualization)(u,t,n.canvasRef.current,as({},s,{animation:e}),void 0,void 0,Object(X.isSingleValue)(t.type)?"dhis":"highcharts");Object(X.isSingleValue)(t.type)?l(a.visualization):l(a.visualization.getSVGForExport({sourceHeight:768,sourceWidth:1024}))},n.recreateVisualization(),n.setState({isLoading:!1}),p.next=28;break;case 25:p.prev=25,p.t0=p.catch(1),o(p.t0);case 28:case"end":return p.stop()}}),null,null,[[1,25]])})),n.canvasRef=g.a.createRef(),n.recreateVisualization=Function.prototype,n.state={isLoading:!0},n}return rs(t,e),es(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e){Object(qo.a)(this.props.config,e.config)&&Object(qo.a)(this.props.filters,e.filters)?this.props.id===e.id&&Object(qo.a)(this.props.style,e.style)||this.recreateVisualization(0):this.renderChart()}},{key:"render",value:function(){return g.a.createElement(b.Fragment,null,this.state.isLoading?g.a.createElement(Es,null):null,g.a.createElement("div",{ref:this.canvasRef,style:this.props.style}))}}]),t}(b.Component);bs.defaultProps={config:{},filters:{},forDashboard:!1,style:{},animation:200,onError:Function.prototype,onChartGenerated:Function.prototype,onResponsesReceived:Function.prototype},bs.propTypes={config:Ca.a.object.isRequired,d2:Ca.a.object.isRequired,onError:Ca.a.func.isRequired,animation:Ca.a.number,filters:Ca.a.object,forDashboard:Ca.a.bool,id:Ca.a.number,style:Ca.a.object,onChartGenerated:Ca.a.func,onResponsesReceived:Ca.a.func};var gs=[".pivot td{border:1px solid #b2b2b2;padding:5px;}",".pivot-empty{background-color:#cddaed;}",".pivot-dim{background-color:#dae6f8;text-align:center;}",".pivot-dim-total{background-color:#bac6d8;text-align:center;}",".pivot-value{background-color:#fff;text-align:right;}",".pivot-value-total-subgrandtotal{background-color:#d8d8d8;white-space:nowrap;text-align:right;}",".pointer{cursor:pointer;}"];gs.__hash="3856634977";var vs=function(e){function t(e){var n;return Jc(this,t),ts(os(n=cs(this,is(t).call(this,e))),"getRequestOptions",(function(e,t){var n=ps().reduce((function(t,n){var a=ss(n,2),r=a[0],i=a[1];return void 0!==e[r]&&e[r]!==i.defaultValue&&(t[r]=e[r]),t}),{});if(t.relativePeriodDate&&(n.relativePeriodDate=t.relativePeriodDate),t.userOrgUnit&&t.userOrgUnit.length){var a=t.userOrgUnit.map((function(e){return e.split("/").slice(-1)[0]}));n.userOrgUnit=a.join(";")}return n})),ts(os(n),"renderTable",(function(){var e,t,a,r,i,l,o,c,s,u,d,m;return j.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return e=n.props,t=e.config,a=e.filters,r=e.onResponsesReceived,i=e.onError,l={get:function(e){return Xc.a.t(e)}},o={getLegendSetById:function(){return""},getApiPath:function(){return""}},c={},(s=new Qc.config.OptionConfig).setI18nManager(l),s.init(),u={api:Qc.api,appManager:o,uiManager:c,i18nManager:l,optionConfig:s},p.prev=8,d=n.getRequestOptions(t,a),p.next=12,j.a.awrap(us(n.props.d2,t,d));case 12:(m=p.sent).length&&r(m),n.recreateVisualization=function(){var e={showColTotals:t.colTotals,showRowTotals:t.rowTotals,showColSubTotals:t.colSubTotals,showRowSubTotals:t.rowSubTotals,numberType:t.numberType||"VALUE"},a=new Qc.Layout(u,t,e),r=new Qc.table.PivotTable(u,a,new Qc.Response(u,m[0].response),{renderLimit:1e5,trueTotals:!0});r.initialize(),r.build(),n.canvasRef.current.innerHTML=r.render()},n.recreateVisualization(),n.setState({isLoading:!1}),p.next=22;break;case 19:p.prev=19,p.t0=p.catch(8),i(p.t0);case 22:case"end":return p.stop()}}),null,null,[[8,19]])})),n.canvasRef=g.a.createRef(),n.recreateVisualization=Function.prototype,n.state={isLoading:!0},n}return rs(t,e),es(t,[{key:"componentDidMount",value:function(){this.renderTable()}},{key:"componentDidUpdate",value:function(e){Object(qo.a)(this.props.config,e.config)&&Object(qo.a)(this.props.filters,e.filters)?this.props.id===e.id&&Object(qo.a)(this.props.style,e.style)||this.recreateVisualization(0):this.renderTable()}},{key:"render",value:function(){return g.a.createElement(b.Fragment,null,this.state.isLoading?g.a.createElement(Es,null):null,g.a.createElement("div",{ref:this.canvasRef,style:this.props.style,className:"jsx-".concat(gs.__hash)},g.a.createElement(ii.a,{id:gs.__hash},gs)))}}]),t}(b.Component);vs.defaultProps={config:{},filters:{},style:{},animation:200,onError:Function.prototype,onResponsesReceived:Function.prototype},vs.propTypes={config:Ca.a.object.isRequired,d2:Ca.a.object.isRequired,onError:Ca.a.func.isRequired,filters:Ca.a.object,id:Ca.a.number,style:Ca.a.object,onResponsesReceived:Ca.a.func};var ys=function(e){return e.config.type&&e.config.type!==X.VIS_TYPE_PIVOT_TABLE?g.a.createElement(bs,e):g.a.createElement(vs,e)},Os={outer:{display:"flex",justifyContent:"center",height:"100%"},inner:{padding:"".concat(pa.spacers.dp16," ").concat(pa.spacers.dp24),maxWidth:600,boxSizing:"border-box",color:pa.colors.grey900,position:"relative",display:"flex",alignItems:"center"},errorContainer:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},errorIcon:{width:"136px",height:"136px",margin:"0 auto 24px"},errorTitle:{fontWeight:"500",fontSize:"20px",color:pa.colors.grey800,letterSpacing:"0.15px",lineHeight:"24px",width:"360px",margin:"0 auto 12px"},errorDescription:{fontWeight:"400",fontSize:"14px",color:pa.colors.grey700,lineHeight:"19px",width:"360px",margin:"0 auto"},title:{fontWeight:"bold",marginTop:0,lineHeight:"22px",color:pa.colors.grey700},section:{textAlign:"left",background:"#fff",padding:20,marginBottom:20,borderRadius:5},guide:{lineHeight:"18px",letterSpacing:"0.1px",listStylePosition:"outside",margin:"0 0 0 12px",padding:"0 0 0 10px"},guideItem:{fontSize:"14px",lineHeight:"18px",letterSpacing:"0.1px",marginBottom:"12px"},visualization:{display:"flex",alignItems:"center",margin:"0 0 12px 0",padding:0,letterSpacing:"0.1px",lineHeight:"16px",cursor:"pointer",fontSize:"14px","&:hover":{textDecoration:"underline"}},visIcon:{height:"16px","& svg":{height:"16px",marginRight:"8px"}}},Is=function(e,t){var n={visualization:{resource:"dataStatistics/favorites",params:{eventType:"VISUALIZATION_VIEW",pageSize:t||10}}};return e.query(n)},xs=Object(v.connect)((function(e){return{error:la(e)}}))(Object(O.withStyles)(Os)((function(e){var t=e.error,n=e.classes,a=Object(b.useState)([]),r=Object(x.a)(a,2),i=r[0],l=r[1],o=Object(I.c)();Object(b.useEffect)((function(){!function(e){var t,n,a,r,i;j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,j.a.awrap(Is(e,6));case 2:if(t=o.sent,!(n=t.visualization)||!n.length){o.next=11;break}return o.next=7,j.a.awrap((c=e,s=n.map((function(e){return e.id})),c.query(En,{variables:{visualizationIds:s}})));case 7:a=o.sent,r=a.visualization.visualizations,i=n.map((function(e){return Object(_.a)({},r.find((function(t){return t.id===e.id&&t})),{},e)})),l(i);case 11:case"end":return o.stop()}var c,s}))}(o)}),[]);var c=function(){return t instanceof wr?g.a.createElement("div",{style:Os.errorContainer},g.a.createElement("div",{style:Os.errorIcon},t.icon()),g.a.createElement("p",{style:Os.errorTitle},t.title),g.a.createElement("p",{style:Os.errorDescription},t.description)):g.a.createElement("div",{style:Os.errorContainer},g.a.createElement("div",{style:Os.errorIcon},Cr()),g.a.createElement("p",{style:Os.errorTitle},ae.a.t("Something went wrong")),g.a.createElement("p",{style:Os.errorDescription},t.message||t))};return g.a.createElement("div",{style:Os.outer},g.a.createElement("div",{style:Os.inner},t?c():g.a.createElement("div",null,g.a.createElement("div",{style:Os.section},g.a.createElement("h3",{style:Os.title},"Getting started"),g.a.createElement("ul",{style:Os.guide},g.a.createElement("li",{style:Os.guideItem},"All dimensions that you can use to build visualizations are shown in the left sidebar"),g.a.createElement("li",{style:Os.guideItem},"Add dimensions to the layout above"),g.a.createElement("li",{style:Os.guideItem},"Double click a dimension to add or remove items"))),i.length>0&&g.a.createElement("div",{style:Os.section},g.a.createElement("h3",{style:Os.title},"Most viewed charts and tables"),i.map((function(e,t){return g.a.createElement("p",{key:t,className:n.visualization,onClick:function(){return k.push("/".concat(e.id))}},g.a.createElement("span",{className:n.visIcon},X.visTypeIcons[e.type]),g.a.createElement("span",null,e.name))}))))))}))),Ss=function(e){function t(e){var n;return Object(Sa.a)(this,t),(n=Object(Aa.a)(this,Object(ja.a)(t).call(this,e))).onError=function(e){var t;t=e?"E7114"===e.errorCode?new Pr:"E7110"===e.errorCode?new zr:e:new Ur,n.props.acSetLoadError(t)},n.onChartGenerated=function(e){return n.props.acSetChart(e)},n.onResponsesReceived=function(e){var t={};e.forEach((function(e){if(!e.rows||!e.rows.length)throw new Nr;Object.entries(e.metaData.items).forEach((function(e){var n=Object(x.a)(e,2),a=n[0],r=n[1];t[a]={id:a,name:r.name||r.displayName,displayName:r.displayName}}))})),n.props.acAddMetadata(t)},n.getNewRenderId=function(){return n.setState({renderId:"number"===typeof n.state.renderId?n.state.renderId+1:1})},n.addResizeHandler=function(){window.addEventListener("resize",Object(Ho.a)((function(){n.getNewRenderId()}),300))},n.state={renderId:null},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"componentDidMount",value:function(){this.addResizeHandler()}},{key:"componentDidUpdate",value:function(e){this.props.rightSidebarOpen!==e.rightSidebarOpen&&this.getNewRenderId()}},{key:"render",value:function(){var e=this.props,t=e.visConfig,n=e.visFilters,a=e.error,r=this.state.renderId;return!t||a?g.a.createElement(xs,null):g.a.createElement(ys,{id:r,d2:this.context.d2,config:t,filters:n,onChartGenerated:this.onChartGenerated,onResponsesReceived:this.onResponsesReceived,onError:this.onError,style:qc.chartCanvas})}}]),t}(b.Component);Ss.contextTypes={d2:Ca.a.object};var _s=Object(wl.a)([jt,H,at],(function(e,t,n){return n.id?t:e})),As=Object(wl.a)([at],(function(e){return e.created?{relativePeriodDate:e.created}:{}})),js=Object(v.connect)((function(e){return{visConfig:_s(e),visFilters:As(e),rightSidebarOpen:nt(e),error:la(e)}}),{acAddMetadata:Zn,acSetChart:function(e){return{type:"SET_CHART",value:e}},acSetLoadError:oa})(Ss),Ds=n(1052),Ts=n.n(Ds),Cs=n(454),ws=n.n(Cs),Ns=n(279),Ls=n.n(Ns),Rs=function(e){var t=e.style;return g.a.createElement("svg",{style:Object(_.a)({},t),xmlns:"http://www.w3.org/2000/svg",width:"22",height:"24",viewBox:"0 0 24 24"},g.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),g.a.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))},ks={icon:{width:22,height:22,background:"none",color:pa.colors.black,padding:0}},Ms=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},n.handleClick=function(e){e.stopPropagation(),n.setState({anchorEl:e.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n.getMenuId=function(){return"menu-for-".concat(n.props.id)},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement(Ls.a,{"aria-owns":this.state.anchorEl?this.getMenuId():null,"aria-haspopup":"true",onClick:this.handleClick,style:ks.icon},g.a.createElement(Rs,{style:ks.icon})),g.a.createElement(X.DimensionMenu,{dimensionId:this.props.dimensionId,currentAxisId:this.props.currentAxisId,visType:this.props.visType,numberOfDimensionItems:this.props.numberOfDimensionItems,dualAxisItemHandler:this.props.dualAxisItemHandler,isAssignedCategoriesInLayout:this.props.layoutHasAssignedCategories,assignedCategoriesItemHandler:function(t){return e.props.assignedCategoriesItemHandler(e.props.layoutHasAssignedCategories,t)},axisItemHandler:this.props.axisItemHandler,removeItemHandler:this.props.removeItemHandler,anchorEl:this.state.anchorEl,onClose:this.handleClose}))}}]),t}(g.a.Component),Vs=Object(v.connect)((function(e){return{layoutHasAssignedCategories:r.sLayoutHasAssignedCategories(e)}}),(function(e){return{dualAxisItemHandler:function(){return e(Bn("axisSetup"))},axisItemHandler:function(t,n){e(kn(Object(W.a)({},t,{axisId:n})))},removeItemHandler:function(t){e(Mn(t))},assignedCategoriesItemHandler:function(t,n){e(t?Mn(X.DIMENSION_ID_ASSIGNED_CATEGORIES):kn(Object(W.a)({},X.DIMENSION_ID_ASSIGNED_CATEGORIES,{axisId:n})))}}}))(Ms),Us=n(318),Ps=n.n(Us),zs=n(278),Gs=n.n(zs),Fs={tooltip:{fontFamily:"roboto",padding:"7px 9px",color:pa.colors.white,fontSize:"12px",backgroundColor:pa.colors.grey900,boxShadow:"none",borderRadius:"3px",position:"relative",top:"5px",maxWidth:"300px"},list:{listStyleType:"none",margin:"0px",marginBottom:"-3px",padding:"0px"},item:{marginBottom:"3px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{fontSize:"13px",marginRight:"6px"},iconWrapper:{display:"flex",alignItems:"center",marginBottom:"5px"},warningLabel:{whiteSpace:"normal"}},Ys={noneSelected:ae.a.t("None selected"),onlyOneInUse:function(e){return ae.a.t("Only '{{- name}}' in use",{name:e})},onlyLimitedNumberInUse:function(e){return ae.a.t("Only '{{number}}' in use",{number:e})}},Bs=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).getWarningLabel=function(){var e=n.props,t=e.itemIds,a=e.metadata,r=e.displayLimitedAmount,i=1===t.length?Ys.onlyOneInUse(a[t[0]]?a[t[0]].name:t[0]):Ys.onlyLimitedNumberInUse(t.length);return r?i:null},n.getItemDisplayNames=function(){var e=n.props,t=e.itemIds,a=e.metadata,r=e.displayLimitedAmount;return t.length&&!r?t.map((function(e){return a[e]?a[e].name:e})):[]},n.renderWarningLabel=function(e){return g.a.createElement("li",{style:Fs.item},g.a.createElement("div",{style:Fs.iconWrapper},g.a.createElement(Ts.a,{style:Fs.icon}),g.a.createElement("span",{style:Fs.warningLabel},e)))},n.renderItems=function(e){return e.map((function(e){return g.a.createElement("li",{key:"".concat(n.props.dimensionId,"-").concat(e),style:Fs.item},e)}))},n.renderLockedLabel=function(){return g.a.createElement("li",{style:Fs.item},g.a.createElement("div",{style:Fs.iconWrapper},g.a.createElement(ws.a,{style:Fs.icon}),g.a.createElement("span",null,n.props.lockedLabel)))},n.renderNoItemsLabel=function(){return g.a.createElement("li",{key:"".concat(n.props.dimensionId,"-").concat(Ys.noneSelected),style:Fs.item},Ys.noneSelected)},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this.getItemDisplayNames(),t=this.getWarningLabel(),n=!e.length&&!t;return g.a.createElement(Ps.a,{anchorEl:this.props.anchorEl,open:this.props.open,placement:"bottom-start"},g.a.createElement(Gs.a,{style:Fs.tooltip},g.a.createElement("ul",{style:Fs.list},t&&this.renderWarningLabel(t),this.props.lockedLabel&&this.renderLockedLabel(),e&&this.renderItems(e),n&&this.renderNoItemsLabel())))}}]),t}(g.a.Component),Hs=Object(v.connect)((function(e){return{metadata:Pt(e)}}))(Bs),qs=function(e,t){e.dataTransfer.setData("text",JSON.stringify({dimensionId:e.target.dataset.dimensionid,source:t}))},Ws=function(){return g.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",{id:"Exp",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.a.createElement("g",{id:"Artboard",transform:"translate(-80.000000, -9.000000)"},g.a.createElement("g",{id:"icon_dimension_new",transform:"translate(80.000000, 9.000000)"},g.a.createElement("rect",{id:"frame",x:"0",y:"0",width:"16",height:"16"}),g.a.createElement("g",{id:"module",transform:"translate(4.000000, 4.000000)",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round"},g.a.createElement("path",{d:"M0.33209728,1.1742111 L3.16308174,0.0641666694 C3.37911767,-0.0213888898 3.61963794,-0.0213888898 3.83567387,0.0641666694 L6.66665833,1.1742111 C6.87300668,1.26220739 7.00497003,1.467 6.99984343,1.69127776 L6.99984343,5.30887771 C7.00517859,5.53285411 6.87376309,5.73756106 6.66790272,5.82594437 L3.83691826,6.93629991 C3.62076407,7.02123336 3.38048032,7.02123336 3.16432613,6.93629991 L0.333341668,5.82594437 C0.126993317,5.73794808 -0.00497002591,5.53315547 0.000156574133,5.30887771 L0.000156574133,1.69127776 C-0.00517858533,1.46730136 0.126236906,1.26259441 0.33209728,1.1742111 Z",id:"Shape"}),g.a.createElement("path",{d:"M3.5,2.72795833 L0.322,1.48195833",id:"Shape"}),g.a.createElement("path",{d:"M3.5,2.72795833 L6.678,1.48195833",id:"Shape"}),g.a.createElement("path",{d:"M3.5,6.78125 L3.5,2.72795833",id:"Shape"}))))))},Xs=pa.colors.grey300,Ks=pa.colors.white,Zs={padding:"1px 6px",fontSize:"14px",fontWeight:400,color:pa.colors.grey900,cursor:"pointer",minHeight:24,userSelect:"none"},Qs={chipWrapper:{display:"flex",margin:"4px",backgroundColor:pa.theme.secondary200,borderRadius:"2px",alignItems:"center",maxWidth:"400px"},chip:Object(_.a)({},Zs,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),chipEmpty:{backgroundColor:pa.colors.grey300},fixedDimensionIcon:{paddingRight:"6px"},iconWrapper:{paddingRight:"6px",display:"flex",alignItems:"center"},warningIcon:{fontSize:"14px"},warningIconWrapper:{paddingLeft:"6px",display:"flex",alignItems:"center"},lockIcon:{fontSize:"14px"},lockIconWrapper:{paddingLeft:"6px",display:"flex",alignItems:"center"},label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};Qs.chipLeft=Object(_.a)({},Zs,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",borderTopRightRadius:"0px",borderBottomRightRadius:"0px",alignItems:"center"}),Qs.chipRight=Object(_.a)({},Zs,{paddingLeft:"0px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"});var Js=g.a.createElement("div",{style:Qs.lockIconWrapper},g.a.createElement(ws.a,{style:Qs.lockIcon})),$s=g.a.createElement("div",{style:Qs.warningIconWrapper},g.a.createElement(Ts.a,{style:Qs.warningIcon})),eu=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={tooltipOpen:!1},n.id=Math.random().toString(36),n.timeout=null,n.isLocked=function(){return Object(X.isDimensionLocked)(n.props.type,n.props.dimensionId)},n.getMaxNumberOfItems=function(){return Object(X.getAxisMaxNumberOfItems)(n.props.type,n.props.axisId)},n.handleMouseOver=function(){null===n.timeout&&(n.timeout=setTimeout((function(){return n.setState({tooltipOpen:!0})}),500))},n.handleMouseOut=function(){"number"===typeof n.timeout&&(clearTimeout(n.timeout),n.timeout=null,n.setState({tooltipOpen:!1}))},n.handleClick=function(){Object(X.getPredefinedDimensionProp)(n.props.dimensionId,X.DIMENSION_PROP_NO_ITEMS)||n.props.getOpenHandler(n.props.dimensionId),n.handleMouseOut()},n.getDragStartHandler=function(){return function(e){n.handleMouseOut(),qs(e,n.props.axisId)}},n.getAnchorEl=function(){return document.getElementById(n.id)},n.getWrapperStyles=function(){return Object(_.a)({},Qs.chipWrapper,{},Object(X.getPredefinedDimensionProp)(n.props.dimensionId,X.DIMENSION_PROP_NO_ITEMS)||n.props.items.length?{}:Qs.chipEmpty)},n.renderChipLabelSuffix=function(){var e=n.props.items.length,t=n.getMaxNumberOfItems()&&e>n.getMaxNumberOfItems()?ae.a.t("{{total}} of {{axisMaxNumberOfItems}} selected",{total:e,axisMaxNumberOfItems:n.getMaxNumberOfItems()}):ae.a.t("{{total}} selected",{total:e});return"".concat(n.props.items.length>0?": ".concat(t):"")},n.renderChipIcon=function(){var e=Object(X.getPredefinedDimensionProp)(n.props.dimensionId,"icon");return e?g.a.createElement(e,{style:Qs.fixedDimensionIcon}):g.a.createElement(Ws,{style:Qs.dynamicDimensionIcon})},n.renderMenu=function(){return g.a.createElement("div",{style:Qs.chipRight},g.a.createElement(Vs,{dimensionId:n.props.dimensionId,currentAxisId:n.props.axisId,visType:n.props.type,numberOfDimensionItems:n.props.items.length}))},n.renderTooltip=function(){if(n.props.dimensionId!==X.DIMENSION_ID_ASSIGNED_CATEGORIES){var e=n.getMaxNumberOfItems()?n.props.items.slice(0,n.getMaxNumberOfItems()):n.props.items,t=n.isLocked()?ae.a.t("{{dimensionName}} is locked to {{axisName}} for {{visTypeName}}",{dimensionName:n.props.dimensionName,axisName:Object(X.getAxisName)(n.props.axisId),visTypeName:Object(X.getDisplayNameByVisType)(n.props.type)}):null;return g.a.createElement(Hs,{dimensionId:n.props.dimensionId,itemIds:e,lockedLabel:t,displayLimitedAmount:n.props.items.length>e.length,open:n.state.tooltipOpen,anchorEl:n.getAnchorEl()})}},n.render=function(){return g.a.createElement("div",{style:n.getWrapperStyles(),"data-dimensionid":n.props.dimensionId,draggable:!n.isLocked(),onDragStart:n.getDragStartHandler()},g.a.createElement("div",{id:n.id,style:Qs.chipLeft,onClick:n.handleClick,onMouseOver:n.handleMouseOver,onMouseOut:n.handleMouseOut},g.a.createElement("div",{style:Qs.iconWrapper},n.renderChipIcon()),g.a.createElement("span",{style:Qs.label},n.props.dimensionName),g.a.createElement("span",null,n.renderChipLabelSuffix()),Object(X.hasAxisTooManyItems)(n.props.type,n.props.axisId,n.props.items.length)&&$s,n.isLocked()&&Js),!n.isLocked()&&n.renderMenu(),n.getAnchorEl()&&n.renderTooltip())},n}return Object(Da.a)(t,e),t}(g.a.Component);eu.defaultProps={items:[]};var tu=Object(v.connect)((function(e,t){return{dimensionName:(Lt(e)[t.dimensionId]||{}).name,items:lt(e,t.dimensionId)||[],type:Xe(e)}}),(function(e){return{getOpenHandler:function(t){return e(Bn(t))}}}))(eu),nu={axisContainer:{display:"flex",backgroundColor:Ks,borderColor:Xs,borderStyle:"solid",borderWidth:"0px 0px 1px 1px",padding:"4px 4px 2px 6px"},axisContainerLeft:{borderLeftWidth:0},label:{minWidth:55,maxWidth:55,padding:"2px 0px 0px 0px",fontSize:11,color:pa.colors.grey700,userSelect:"none",letterSpacing:"0.2px"},content:{width:"100%",display:"flex",alignItems:"flex-start",alignContent:"flex-start",flexWrap:"wrap",minHeight:32,"& > div":{cursor:"pointer"}}},au=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).onDragOver=function(e){e.preventDefault()},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.axisId,a=t.axis,r=t.style,i=t.type,l=t.getOpenHandler;return g.a.createElement("div",{id:n,style:Object(_.a)({},nu.axisContainer,{},r),onDragOver:this.onDragOver},g.a.createElement("div",{style:nu.label},this.props.label||Object(X.getAxisName)(n)),g.a.createElement(Na.c,{droppableId:n,direction:"horizontal"},(function(t){return g.a.createElement("div",Object.assign({className:e.props.classes.content,ref:t.innerRef},t.droppableProps),a.map((function(e,t){var a="".concat(n,"-").concat(e);return g.a.createElement(Na.b,{key:a,draggableId:a,index:t,isDragDisabled:Object(X.isDimensionLocked)(i,e)},(function(t){return g.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps),g.a.createElement(tu,{onClick:l(e),axisId:n,dimensionId:e}))}))})),t.placeholder)})))}}]),t}(g.a.Component),ru=Object(v.connect)((function(e){return{ui:We(e),type:Xe(e),layout:Ze(e)}}),(function(e){return{getOpenHandler:function(t){return function(){return e(Bn(t))}}}}),(function(e,t,n){return Object(_.a)({},e,{},t,{},n,{axis:e.ui.layout[n.axisId]})}))(Object(O.withStyles)(nu)(au)),iu={ct:{display:"flex",minHeight:"78px"},axisGroup:{display:"flex",flexDirection:"column"},axisGroupLeft:{flexBasis:"".concat(100-parseInt("67%",10),"%")},axisGroupRight:{flexBasis:"67%"},columns:{flexBasis:"50%"},rows:{flexBasis:"50%"},filters:{flexBasis:"100%"}},lu=function(){return g.a.createElement("div",{id:"layout-ct",style:iu.ct},g.a.createElement("div",{id:"axis-group-1",style:Object(_.a)({},iu.axisGroup,{},iu.axisGroupLeft)},g.a.createElement(ru,{axisId:"columns",style:Object(_.a)({},iu.columns,{},nu.axisContainerLeft)}),g.a.createElement(ru,{axisId:"rows",style:Object(_.a)({},iu.rows,{},nu.axisContainerLeft)})),g.a.createElement("div",{id:"axis-group-2",style:Object(_.a)({},iu.axisGroup,{},iu.axisGroupRight)},g.a.createElement(ru,{axisId:"filters",style:iu.filters})))};lu.displayName="Layout";var ou=lu,cu={flex:"1 1 0%"},su=Object(v.connect)((function(e){return{yearOverYearSeries:Je(e),yearOverYearCategory:$e(e)}}))((function(e){return g.a.createElement("div",{id:e.axisId,style:Object(_.a)({},nu.axisContainer,{},e.style)},g.a.createElement("div",{className:"label",style:nu.label},Object(X.getAxisName)(e.axisId)),g.a.createElement("div",{className:"content",style:Object(_.a)({},nu.content,{},cu)},e.children))})),uu=n(272),du=n.n(uu),mu={displayProps:{background:"transparent",marginLeft:"4px"}},pu=function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleClose=function(){n.setState({open:!1})},n.handleOpen=function(){n.setState({open:!0})},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"render",value:function(){return g.a.createElement(du.a,{disableUnderline:!0,multiple:Boolean(this.props.multiple),open:this.state.open,onChange:this.props.onChange,onClose:this.handleClose,onOpen:this.handleOpen,value:this.props.value,SelectDisplayProps:{style:mu.displayProps}},this.props.options.map((function(e){return g.a.createElement(qa.a,{key:e.id,value:e.id},e.name)})))}}]),t}(g.a.Component),fu={axisGroupLeft:{flexBasis:"".concat(100-parseInt("67%",10),"%")},axisGroupRight:{flexBasis:"67%"}},hu=[{id:"THIS_YEAR",name:ae.a.t("This year")},{id:"LAST_YEAR",name:ae.a.t("Last year")},{id:"LAST_5_YEARS",name:ae.a.t("Last 5 years")}].concat(Object(P.a)(function(e){var t=(new Date).getFullYear();return new Array(e).fill(null).map((function(){return{id:String(t),name:t--}}))}(10))),Eu=[{id:"LAST_3_DAYS",name:ae.a.t("Last 3 days")},{id:"LAST_7_DAYS",name:ae.a.t("Last 7 days")},{id:"LAST_14_DAYS",name:ae.a.t("Last 14 days")},{id:"LAST_4_WEEKS",name:ae.a.t("Last 4 weeks")},{id:"LAST_12_WEEKS",name:ae.a.t("Last 12 weeks")},{id:"LAST_52_WEEKS",name:ae.a.t("Last 52 weeks")},{id:"WEEKS_THIS_YEAR",name:ae.a.t("Weeks per year")},{id:"LAST_3_MONTHS",name:ae.a.t("Last 3 months")},{id:"LAST_6_MONTHS",name:ae.a.t("Last 6 months")},{id:"LAST_12_MONTHS",name:ae.a.t("Last 12 months")},{id:"MONTHS_THIS_YEAR",name:ae.a.t("Months per year")},{id:"LAST_6_BIMONTHS",name:ae.a.t("Last 6 bimonths")},{id:"BIMONTHS_THIS_YEAR",name:ae.a.t("Bimonths per year")},{id:"LAST_4_QUARTERS",name:ae.a.t("Last 4 quarters")},{id:"QUARTERS_THIS_YEAR",name:ae.a.t("Quarters per year")},{id:"LAST_2_SIXMONTHS",name:ae.a.t("Last 2 six-months")}],bu=function(e){return g.a.createElement("div",{id:"layout-ct",style:iu.ct},g.a.createElement("div",{id:"axis-group-1",style:Object(_.a)({},iu.axisGroup,{},fu.axisGroupLeft)},g.a.createElement(su,{axisId:"yearOverYearSeries",style:Object(_.a)({},iu.columns,{},nu.axisContainerLeft)},g.a.createElement(pu,{multiple:"true",value:e.yearOverYearSeries,onChange:e.onSeriesChange,options:hu})),g.a.createElement(su,{axisId:"yearOverYearCategory",style:Object(_.a)({},iu.rows,{},nu.axisContainerLeft)},g.a.createElement(pu,{value:e.yearOverYearCategory[0],onChange:e.onCategoryChange,options:Eu}))),g.a.createElement("div",{id:"axis-group-2",style:Object(_.a)({},iu.axisGroup,{},fu.axisGroupRight)},g.a.createElement(ru,{axisId:X.AXIS_ID_FILTERS,style:iu.filters})))};bu.displayName="Layout";var gu=Object(v.connect)((function(e){return{yearOverYearSeries:Je(e),yearOverYearCategory:$e(e)}}),(function(e){return{onSeriesChange:function(t){t.target.value.length&&e(zn(t.target.value))},onCategoryChange:function(t){return e(Gn(t.target.value))}}}))(bu),vu=function(){return g.a.createElement("div",{id:"layout-ct",style:iu.ct},g.a.createElement("div",{id:"axis-group-1",style:Object(_.a)({},iu.axisGroup,{},iu.axisGroupLeft)},g.a.createElement(ru,{axisId:X.AXIS_ID_COLUMNS,style:Object(_.a)({},iu.filters,{},nu.axisContainerLeft)})),g.a.createElement("div",{id:"axis-group-2",style:Object(_.a)({},iu.axisGroup,{},iu.axisGroupRight)},g.a.createElement(ru,{axisId:X.AXIS_ID_FILTERS,style:iu.filters})))},yu={axisGroupLeft:{flexBasis:"".concat(100-parseInt("50%",10),"%")},axisGroupRight:{flexBasis:"50%"}},Ou=function(){return g.a.createElement("div",{id:"layout-ct",style:iu.ct},g.a.createElement("div",{id:"axis-group-1",style:Object(_.a)({},iu.axisGroup,{},yu.axisGroupLeft)},g.a.createElement(ru,{axisId:X.AXIS_ID_COLUMNS,label:ae.a.t("Columns"),style:Object(_.a)({},iu.columns,{},nu.axisContainerLeft)}),g.a.createElement(ru,{axisId:X.AXIS_ID_ROWS,label:ae.a.t("Rows"),style:Object(_.a)({},iu.rows,{},nu.axisContainerLeft)})),g.a.createElement("div",{id:"axis-group-2",style:Object(_.a)({},iu.axisGroup,{},yu.axisGroupRight)},g.a.createElement(ru,{axisId:X.AXIS_ID_FILTERS,style:iu.filters})))};Ou.displayName="Layout";var Iu,xu=Ou,Su=(Iu={},Object(W.a)(Iu,X.LAYOUT_TYPE_DEFAULT,ou),Object(W.a)(Iu,X.LAYOUT_TYPE_PIE,vu),Object(W.a)(Iu,X.LAYOUT_TYPE_YEAR_OVER_YEAR,gu),Object(W.a)(Iu,X.LAYOUT_TYPE_PIVOT_TABLE,xu),Iu),_u=Object(v.connect)((function(e){return{visType:Xe(e)}}),null)((function(e){var t=e.visType,n=Object(X.getLayoutTypeByVisType)(t),a=Su[n];return g.a.createElement(a,{visType:t})})),Au={TODAY:ae.a.t("Today"),YESTERDAY:ae.a.t("Yesterday"),LAST_3_DAYS:ae.a.t("Last 3 days"),LAST_7_DAYS:ae.a.t("Last 7 days"),LAST_14_DAYS:ae.a.t("Last 14 days"),THIS_WEEK:ae.a.t("This week"),LAST_WEEK:ae.a.t("Last week"),LAST_4_WEEKS:ae.a.t("Last 4 weeks"),LAST_12_WEEKS:ae.a.t("Last 12 weeks"),LAST_52_WEEKS:ae.a.t("Last 52 weeks"),WEEKS_THIS_YEAR:ae.a.t("Weeks this year"),THIS_MONTH:ae.a.t("This month"),LAST_MONTH:ae.a.t("Last month"),LAST_3_MONTHS:ae.a.t("Last 3 months"),LAST_6_MONTHS:ae.a.t("Last 6 months"),LAST_12_MONTHS:ae.a.t("Last 12 months"),MONTHS_THIS_YEAR:ae.a.t("Months this year"),THIS_BIMONTH:ae.a.t("This bimonth"),LAST_BIMONTH:ae.a.t("Last bimonth"),LAST_6_BIMONTHS:ae.a.t("Last 6 bimonths"),BIMONTHS_THIS_YEAR:ae.a.t("Bimonths this year"),THIS_QUARTER:ae.a.t("This quarter"),LAST_QUARTER:ae.a.t("Last quarter"),LAST_4_QUARTERS:ae.a.t("Last 4 quarters"),QUARTERS_THIS_YEAR:ae.a.t("Quarters this year"),THIS_SIX_MONTH:ae.a.t("This six-month"),LAST_SIX_MONTH:ae.a.t("Last six-month"),LAST_2_SIXMONTHS:ae.a.t("Last 2 six-months"),THIS_FINANCIAL_YEAR:ae.a.t("This financial year"),LAST_FINANCIAL_YEAR:ae.a.t("Last financial year"),LAST_5_FINANCIAL_YEARS:ae.a.t("Last 5 financial years"),THIS_YEAR:ae.a.t("This year"),LAST_YEAR:ae.a.t("Last year"),LAST_5_YEARS:ae.a.t("Last 5 years")},ju={USER_ORGUNIT:ae.a.t("User org unit"),USER_ORGUNIT_CHILDREN:ae.a.t("User org unit children"),USER_ORGUNIT_GRANDCHILDREN:ae.a.t("User org unit grand children")},Du=Object.entries(Object(_.a)({},Au,{},ju)).reduce((function(e,t){var n=Object(x.a)(t,2),a=n[0],r=n[1];return Object(_.a)({},e,Object(W.a)({},a,{name:r}))}),{}),Tu=(n(2390),n(2391),function(e){function t(){var e,n;Object(Sa.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(Aa.a)(this,(e=Object(ja.a)(t)).call.apply(e,[this].concat(r)))).unlisten=null,n.apiObjectName="visualization",n.state={previousLocation:null,initialLoadIsComplete:!1},n.refetch=function(e){return!n.state.previousLocation||(e.pathname.slice(1).split("/")[0]!==n.state.previousLocation.slice(1).split("/")[0]||n.state.previousLocation===e.pathname)},n.loadVisualization=function(e){var t,a,r,i,l,o;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=n.context.store,!(e.pathname.length>1)){c.next=20;break}if(a=e.pathname.slice(1).split("/"),r=a[0],i=a[2],!(l=r===Hr)){c.next=14;break}return c.next=9,j.a.awrap(Qr());case 9:o=c.sent,n.props.addParentGraphMap(ft(o)),n.props.setVisualization(o),n.props.setUiFromVisualization(o),n.props.setCurrentFromUi(n.props.ui);case 14:if(l||!n.refetch(e)){c.next=17;break}return c.next=17,j.a.awrap(t.dispatch(da({id:r,interpretationId:i,ouLevels:n.props.ouLevels})));case 17:i||t.dispatch(m.acClearUiInterpretation()),c.next=22;break;case 20:ma(t.dispatch,t.getState),m.acClearUiInterpretation(t.dispatch);case 22:n.setState({initialLoadIsComplete:!0}),n.setState({previousLocation:e.pathname});case 24:case"end":return c.stop()}}))},n.componentDidMount=function(){var e,t,a,r,i;return j.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=n.context.store,t=n.props,a=t.d2,r=t.userSettings,l.next=4,j.a.awrap(e.dispatch(f.tAddSettings(r)));case 4:e.dispatch(h.acReceivedUser(a.currentUser)),e.dispatch(d.tSetDimensions(a)),i=n.props.settings.rootOrganisationUnit,e.dispatch(p.acAddMetadata(Object(_.a)({},Du,Object(W.a)({},i.id,Object(_.a)({},i,{path:"/".concat(i.id)}))))),n.loadVisualization(n.props.location),n.unlisten=k.listen((function(e){n.loadVisualization(e)})),document.body.addEventListener("keyup",(function(e){return"Enter"===e.key&&!0===e.ctrlKey&&n.props.setCurrentFromUi(n.props.ui)}));case 11:case"end":return l.stop()}}))},n}return Object(Da.a)(t,e),Object(_a.a)(t,[{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"getChildContext",value:function(){return{baseUrl:this.props.baseUrl,i18n:ae.a,d2:this.props.d2}}},{key:"render",value:function(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(Uc,null),g.a.createElement("div",{className:"data-visualizer-app flex-ct flex-dir-col"},g.a.createElement("div",{className:"section-toolbar flex-ct"},g.a.createElement("div",{className:"toolbar-type"},g.a.createElement(Bo,null)),g.a.createElement("div",{className:"toolbar-menubar flex-grow-1"},g.a.createElement(no,{apiObjectName:this.apiObjectName}))),g.a.createElement("div",{className:"section-main flex-grow-1 flex-ct"},g.a.createElement(Ra,null,g.a.createElement("div",{className:"main-left"},g.a.createElement(zc,null)),g.a.createElement("div",{className:"main-center flex-grow-1 flex-basis-0 flex-ct flex-dir-col"},g.a.createElement("div",{className:"main-center-layout"},g.a.createElement(_u,null)),g.a.createElement("div",{className:"main-center-titlebar"},g.a.createElement(mo,null)),g.a.createElement("div",{className:"main-center-canvas flex-grow-1"},this.state.initialLoadIsComplete&&g.a.createElement(js,null)))),this.props.ui.rightSidebarOpen&&this.props.current&&g.a.createElement("div",{className:"main-right"},g.a.createElement(Hc,{type:this.apiObjectName,id:this.props.current.id})))),g.a.createElement(ha,null),g.a.createElement(wa.a,{colors:!0,spacers:!0}))}}]),t}(b.Component));Tu.contextTypes={store:Ca.a.object},Tu.childContextTypes={d2:Ca.a.object,baseUrl:Ca.a.string,i18n:Ca.a.object};var Cu=Object(v.connect)((function(e){return{settings:c.sGetSettings(e),current:i.sGetCurrent(e),interpretations:a.sGetInterpretations(e),ui:r.sGetUi(e)}}),(function(e){return{setCurrentFromUi:function(t){return e(u.acSetCurrentFromUi(t))},setVisualization:function(t){return e(s.acSetVisualization(t))},setUiFromVisualization:function(t){return e(m.acSetUiFromVisualization(t))},addParentGraphMap:function(t){return e(m.acAddParentGraphMap(t))}}}))(Tu),wu=n(2392),Nu=n.n(wu),Lu=Object(_.a)({},Nu.a),Ru=Object(O.createMuiTheme)(Lu);t.default=function(){var e=Object(I.c)(),t=Ia([y.default.withExtraArgument(e),xa]);window.Cypress&&(window.store=t);return g.a.createElement(v.Provider,{store:t},g.a.createElement(O.MuiThemeProvider,{theme:Ru},g.a.createElement(U,{schemas:["visualization","organisationUnit","userGroup"]},(function(e){return g.a.createElement(Cu,e)}))))}}}]);
//# sourceMappingURL=app.c8a5821a.chunk.js.map