{"version":3,"sources":["D2App/components/Snackbar/styles/Snackbar.module.css","D2App/components/MenuButton/styles/MenuButton.module.css","D2App/components/DownloadMenu/styles/DownloadMenu.module.css","D2App/components/MenuBar/styles/MenuBar.module.css","D2App/modules/formatDate.js","D2App/components/DimensionsPanel/Dialogs/AddToLayoutButton/styles/AddToLayoutButton.module.css","D2App/components/DimensionsPanel/styles/DndDimensionItem.module.css","D2App/components/DimensionsPanel/styles/DndDimensionList.module.css","D2App/components/DimensionsPanel/styles/DndDimensionsPanel.module.css","D2App/components/AxisSetup/styles/AxisSetup.module.css","D2App/components/Visualization/styles/StartScreen.module.css","D2App/widgets/styles/LoadingMask.module.css","D2App/modules/settings.js","D2App/api/index.js","D2App/api/organisationUnits.js","D2App/modules/history.js","D2App/D2Shim.js","D2App/reducers/visualization.js","D2App/modules/options.js","D2App/modules/layout.js","D2App/modules/fields/baseFields.js","D2App/modules/layoutAdapters.js","D2App/modules/orgUnit.js","D2App/reducers/ui.js","D2App/modules/optionalAxes.js","D2App/modules/ui.js","D2App/modules/current.js","D2App/reducers/current.js","D2App/reducers/dimensions.js","D2App/reducers/recommendedIds.js","D2App/reducers/metadata.js","D2App/reducers/settings.js","D2App/reducers/user.js","D2App/modules/fields/index.js","D2App/reducers/snackbar.js","D2App/reducers/loader.js","D2App/reducers/chart.js","D2App/reducers/index.js","D2App/configureStore.js","D2App/actions/metadata.js","D2App/middleware/metadata.js","D2App/actions/ui.js","D2App/components/DndContext.js","D2App/actions/snackbar.js","D2App/components/Snackbar/Snackbar.js","D2App/components/UpdateButton/UpdateButton.js","D2App/api/analytics.js","D2App/components/MenuButton/MenuButton.js","D2App/assets/MoreHorizontalIcon.js","D2App/components/DownloadMenu/DownloadMenu.js","D2App/components/Interpretations/InterpretationsButton.js","D2App/components/HideButton/HideButton.js","D2App/modules/fields/nestedFields.js","D2App/api/visualization.js","D2App/actions/visualization.js","D2App/actions/current.js","D2App/actions/dimensions.js","D2App/api/settings.js","D2App/actions/settings.js","D2App/actions/loader.js","D2App/assets/ErrorIcons.js","D2App/modules/error.js","D2App/api/user.js","D2App/actions/user.js","D2App/modules/visualization.js","D2App/api/dataStatistics.js","D2App/actions/index.js","D2App/modules/layoutValidation.js","D2App/api/userDataStore.js","D2App/components/UpdateButton/UpdateVisualizationContainer.js","D2App/components/VisualizationOptions/styles/VisualizationOptions.style.js","D2App/components/VisualizationOptions/Options/SelectBaseOption.js","D2App/components/VisualizationOptions/Options/AggregationType.js","D2App/components/VisualizationOptions/Options/CheckboxBaseOption.js","D2App/components/VisualizationOptions/Options/ShowDimensionLabels.js","D2App/components/VisualizationOptions/Options/SkipRounding.js","D2App/components/VisualizationOptions/Options/ColTotals.js","D2App/components/VisualizationOptions/Options/ColSubTotals.js","D2App/components/VisualizationOptions/Options/RowTotals.js","D2App/components/VisualizationOptions/Options/RowSubTotals.js","D2App/components/VisualizationOptions/Options/HideEmptyColumns.js","D2App/components/VisualizationOptions/Options/HideEmptyRows.js","D2App/components/VisualizationOptions/Options/NumberType.js","D2App/components/VisualizationOptions/Options/RadioBaseOption.js","D2App/components/VisualizationOptions/Options/LegendDisplayStyle.js","D2App/components/VisualizationOptions/Options/LegendSet.js","D2App/components/VisualizationOptions/Options/LegendDisplayStrategy.js","D2App/components/VisualizationOptions/Options/Legend.js","D2App/components/VisualizationOptions/Options/TextBaseOption.js","D2App/components/VisualizationOptions/Options/Title.js","D2App/components/VisualizationOptions/Options/DisplayDensity.js","D2App/components/VisualizationOptions/Options/FontSize.js","D2App/components/VisualizationOptions/Options/DigitGroupSeparator.js","D2App/components/VisualizationOptions/Options/MeasureCriteria.js","D2App/components/VisualizationOptions/Options/ParamReportingPeriod.js","D2App/components/VisualizationOptions/Options/ParamOrganisationUnit.js","D2App/components/VisualizationOptions/Options/ParamParentOrganisationUnit.js","D2App/components/VisualizationOptions/Options/Regression.js","D2App/components/VisualizationOptions/Options/Cumulative.js","D2App/components/VisualizationOptions/Options/SortOrder.js","D2App/components/VisualizationOptions/Options/TopLimit.js","D2App/components/VisualizationOptions/Options/ApprovalLevel.js","D2App/components/VisualizationOptions/Options/ShowHierarchy.js","D2App/components/VisualizationOptions/Options/CompletedOnly.js","D2App/modules/options/pivotTableConfig.js","D2App/components/VisualizationOptions/Options/CumulativeValues.js","D2App/components/VisualizationOptions/Options/ShowData.js","D2App/components/VisualizationOptions/Options/HideEmptyRowItems.js","D2App/components/VisualizationOptions/Options/RegressionType.js","D2App/components/VisualizationOptions/Options/TargetLineValue.js","D2App/components/VisualizationOptions/Options/TargetLineLabel.js","D2App/components/VisualizationOptions/Options/TargetLine.js","D2App/components/VisualizationOptions/Options/BaseLineValue.js","D2App/components/VisualizationOptions/Options/BaseLineLabel.js","D2App/components/VisualizationOptions/Options/BaseLine.js","D2App/components/VisualizationOptions/Options/RangeAxisMinValue.js","D2App/components/VisualizationOptions/Options/RangeAxisMaxValue.js","D2App/components/VisualizationOptions/Options/AxisRange.js","D2App/components/VisualizationOptions/Options/RangeAxisSteps.js","D2App/components/VisualizationOptions/Options/RangeAxisDecimals.js","D2App/components/VisualizationOptions/Options/RangeAxisLabel.js","D2App/components/VisualizationOptions/Options/DomainAxisLabel.js","D2App/components/VisualizationOptions/Options/NoSpaceBetweenColumns.js","D2App/components/VisualizationOptions/Options/HideLegend.js","D2App/components/VisualizationOptions/Options/HideTitle.js","D2App/components/VisualizationOptions/Options/Subtitle.js","D2App/components/VisualizationOptions/Options/HideSubtitle.js","D2App/modules/options/columnConfig.js","D2App/components/VisualizationOptions/Options/PercentStackedValues.js","D2App/modules/options/stackedColumnConfig.js","D2App/modules/options/lineConfig.js","D2App/modules/options/areaConfig.js","D2App/modules/options/pieConfig.js","D2App/modules/options/gaugeConfig.js","D2App/modules/options/singleValueConfig.js","D2App/components/VisualizationOptions/VisualizationOptions.js","D2App/modules/options/config.js","D2App/components/VisualizationOptions/VisualizationOptionsManager.js","D2App/components/MenuBar/MenuBar.js","D2App/assets/InterpretationIcon.js","D2App/components/TitleBar/styles/TitleBar.style.js","D2App/components/TitleBar/TitleBar.js","D2App/modules/currentAnalyticalObject.js","D2App/assets/ColumnIcon.js","D2App/assets/StackedColumnIcon.js","D2App/assets/BarIcon.js","D2App/assets/StackedBarIcon.js","D2App/assets/PieIcon.js","D2App/assets/GaugeIcon.js","D2App/assets/LineIcon.js","D2App/assets/AreaIcon.js","D2App/assets/RadarIcon.js","D2App/assets/YearOverYearLineIcon.js","D2App/assets/YearOverYearColumnIcon.js","D2App/assets/SingleValueIcon.js","D2App/assets/GlobeIcon.js","D2App/assets/PivotTableIcon.js","D2App/components/VisualizationTypeSelector/ListItemIcon.js","D2App/components/VisualizationTypeSelector/VisualizationTypeListItem.js","D2App/components/VisualizationTypeSelector/VisualizationTypeSelector.js","D2App/components/DimensionsPanel/Dialogs/AddToLayoutButton/AddToLayoutButton.js","D2App/components/DimensionsPanel/Dialogs/DialogManager.js","D2App/actions/recommendedIds.js","D2App/components/DimensionsPanel/DndDimensionItem.js","D2App/components/DimensionsPanel/DndDimensionList.js","D2App/components/DimensionsPanel/DndDimensionsPanel.js","D2App/components/DimensionsPanel/styles/DimensionsPanel.style.js","D2App/components/AxisSetup/AxisSetup.js","D2App/components/AxisSetup/constants.js","D2App/components/DimensionsPanel/DimensionsPanel.js","D2App/components/Interpretations/styles/Interpretations.style.js","D2App/components/Interpretations/Interpretations.js","D2App/components/Visualization/styles/Visualization.style.js","../../../src/api/legendSets.js","../../../src/ChartPlugin.js","../../../src/PivotPlugin.js","../../../src/api/analytics.js","../../../src/modules/analytics.js","../../../src/modules/options.js","../../../src/modules/getRequestOptions.js","../../../src/modules/fetchData.js","../../../src/VisualizationPlugin.js","D2App/api/mostViewedVisualizations.js","D2App/components/Visualization/StartScreen.js","D2App/widgets/LoadingMask.js","D2App/components/Visualization/Visualization.js","D2App/actions/chart.js","D2App/components/Layout/styles/Menu.style.js","D2App/components/Layout/Menu.js","D2App/components/Layout/styles/Tooltip.style.js","D2App/components/Layout/Tooltip.js","D2App/modules/dnd.js","D2App/assets/DynamicDimensionIcon.js","D2App/components/Layout/styles/style.js","D2App/components/Layout/styles/Chip.style.js","D2App/components/Layout/Chip.js","D2App/components/Layout/DefaultLayout/styles/DefaultAxis.style.js","D2App/components/Layout/DefaultLayout/DefaultAxis.js","D2App/components/Layout/DefaultLayout/styles/DefaultLayout.style.js","D2App/components/Layout/DefaultLayout/DefaultLayout.js","D2App/components/Layout/YearOverYearLayout/styles/YearOverYearAxis.style.js","D2App/components/Layout/YearOverYearLayout/YearOverYearAxis.js","D2App/modules/yearOverYear.js","D2App/components/Layout/YearOverYearLayout/YearOverYearSelect.js","D2App/components/Layout/YearOverYearLayout/styles/YearOverYearLayout.style.js","D2App/components/Layout/YearOverYearLayout/YearOverYearLayout.js","D2App/components/Layout/PieLayout/PieLayout.js","D2App/components/Layout/PivotTableLayout/styles/PivotTableLayout.style.js","D2App/components/Layout/PivotTableLayout/PivotTableLayout.js","D2App/components/Layout/Layout.js","D2App/modules/metadata.js","D2App/components/App.js","D2App/modules/theme.js","D2App/AppWrapper.js","D2App/components/VisualizationTypeSelector/styles/VisualizationTypeSelector.module.css"],"names":["module","exports","formatDate","value","uiLocale","global","Intl","DateTimeFormat","year","month","day","format","Date","substr","replace","SYSTEM_SETTINGS","extractUserSettings","settings","displayNameProperty","keyAnalysisDisplayProperty","keyUiLocale","onError","error","console","log","apiFetchOrganisationUnitRoot","url","join","getInstance","then","d2","Api","getApi","get","organisationUnits","catch","apiFetchOrganisationUnitLevels","organisationUnitLevels","createHashHistory","configI18n","userSettings","a","async","d2Config","i18n","sources","add","D2Shim","children","initConfig","appConfig","useConfig","useState","params","setParams","useEffect","baseUrl","apiVersion","apiUrl","getUserSettings","d2Init","ouLevels","location","history","initD2","SET_VISUALIZATION","CLEAR_VISUALIZATION","DEFAULT_VISUALIZATION","state","action","type","sGetVisualization","visualization","sGetInterpretations","interpretations","options","baseLineLabel","defaultValue","undefined","requestable","savable","baseLineValue","cumulativeValues","domainAxisLabel","hideEmptyRowItems","hideLegend","noSpaceBetweenColumns","percentStackedValues","rangeAxisDecimals","rangeAxisLabel","rangeAxisMaxValue","rangeAxisMinValue","rangeAxisSteps","regressionType","showData","targetLineLabel","targetLineValue","aggregationType","completedOnly","hideSubtitle","hideTitle","sortOrder","subtitle","title","colTotals","colSubTotals","rowTotals","rowSubTotals","showDimensionLabels","hideEmptyColumns","hideEmptyRows","skipRounding","numberType","showHierarchy","legendSet","legendDisplayStrategy","legendDisplayStyle","displayDensity","fontSize","digitGroupSeparator","approvalLevel","reportingPeriod","organisationUnit","parentOrganisationUnit","grandParentOrganisationUnit","regression","cumulative","measureCriteria","topLimit","computedOptions","baseLine","targetLine","axisRange","legend","getOptionsForUi","Object","entries","reduce","map","option","props","isNotDefault","optionsFromVisualization","prop","Boolean","getOptionsFromVisualization","pick","keys","reportingParams","forEach","prototype","hasOwnProperty","call","String","getFilteredLayout","layout","excludedIds","ids","Array","isArray","AXIS_ID_COLUMNS","filter","dim","includes","AXIS_ID_ROWS","AXIS_ID_FILTERS","getInverseLayout","axisId","id","getRetransfer","transfer","visType","inverseLayout","dimensionIds","retransfer","sourceAxis","destinationAxisId","dimensionsAtDestination","isAxisFull","length","transferableDimension","getTransferableDimension","getAvailableAxes","find","axis","getAxisMaxNumberOfDimensions","getFieldObject","name","fieldsByType","reportTable","chart","excluded","eventReport","reportTable_eventReport","chart_eventChart","eventReport_eventChart","reportTable_chart_eventReport","reportTable_eventReport_eventChart","reportTable_chart_eventReport_eventChart","extractName","propObj","markExcluded","fieldObj","moveExcludedToEnd","acc","current","curIndex","array","slice","charAt","push","shift","getAllFieldObjectsByType","fields","key","concat","defaultLayoutAdapter","columns","rows","pieLayoutAdapter","yearOverYearLayoutAdapter","DIMENSION_ID_PERIOD","singleValueLayoutAdapter","DIMENSION_ID_DATA","isOuLevelIntId","ouIdHelper","hasLevelPrefix","Number","isInteger","parseInt","removePrefix","convertOuLevelsToUids","ouDimension","layoutGetDimension","DIMENSION_ID_ORGUNIT","dimensionGetItems","some","item","replaceNumericOuLevel","ouIntId","ouUid","l","level","assign","addLevelPrefix","replaceNumericOuLevelWithUid","updatedOuItems","layoutReplaceDimension","removeLastPathSegment","path","match","lastIndexOf","getOuPath","metadata","parentGraphMap","SET_UI","SET_UI_FROM_VISUALIZATION","SET_UI_TYPE","SET_UI_OPTIONS","SET_UI_LAYOUT","ADD_UI_LAYOUT_DIMENSIONS","REMOVE_UI_LAYOUT_DIMENSIONS","SET_UI_ITEMS","ADD_UI_ITEMS","REMOVE_UI_ITEMS","SET_UI_PARENT_GRAPH_MAP","ADD_UI_PARENT_GRAPH_MAP","SET_UI_ACTIVE_MODAL_DIALOG","SET_UI_YEAR_ON_YEAR_SERIES","SET_UI_YEAR_ON_YEAR_CATEGORY","CLEAR_UI","TOGGLE_UI_RIGHT_SIDEBAR_OPEN","SET_UI_RIGHT_SIDEBAR_OPEN","SET_UI_INTERPRETATION","CLEAR_UI_INTERPRETATION","SET_AXES","DEFAULT_UI","defaultVisType","filters","itemsByDimension","yearOverYearSeries","yearOverYearCategory","activeModalDialog","rightSidebarOpen","interpretation","axes","PRESELECTED_YEAR_OVER_YEAR_SERIES","PRESELECTED_YEAR_OVER_YEAR_CATEGORY","getPreselectedUi","rootOrganisationUnit","relativePeriod","rootOrganisationUnits","getAdaptedUiByType","getUiFromVisualization","transfers","newLayout","dimensionId","index","canDimensionBeAddedToAxis","splice","itemIds","currentItemIds","dxItems","Set","itemIdsToRemove","castArray","sGetUi","ui","sGetUiType","sGetUiOptions","sGetUiLayout","sGetUiItems","sGetUiYearOverYearSeries","sGetUiYearOverYearCategory","sGetUiParentGraphMap","sGetUiActiveModalDialog","sGetUiRightSidebarOpen","sGetUiInterpretation","sGetAxes","getAxisIdByDimensionId","sGetUiItemsByDimension","dimension","sGetDimensionIdsFromLayout","values","axisDimensionIds","sLayoutHasDimension","sLayoutHasAssignedCategories","DIMENSION_ID_ASSIGNED_CATEGORIES","sGetAxisSetup","items","getIdAxisMap","optionalAxes","vis","currentState","layoutGetAxisIdDimensionIdsObject","layoutGetDimensionIdItemIdsObject","getParentGraphMapFromVisualization","isYearOverYear","VIS_TYPE_YEAR_OVER_YEAR_LINE","VIS_TYPE_YEAR_OVER_YEAR_COLUMN","yearOverYearUiAdapter","VIS_TYPE_PIE","pieUiAdapter","VIS_TYPE_SINGLE_VALUE","VIS_TYPE_GAUGE","singleValueUiAdapter","VIS_TYPE_PIVOT_TABLE","defaultUiAdapter","dimensionIdsByAxis","ouAxis","orgUnit","getAxesFromUi","object","getPredefinedDimensionProp","DIMENSION_PROP_NO_ITEMS","dimensionCreate","getOptionsFromUi","optionsFromUi","getOptionalAxesFromUi","destinationMap","sourceMap","propName","arr","getSingleValueCurrentFromUi","axesFromUi","layoutGetDimensionItems","singleValueAxesFromUi","getPieCurrentFromUi","getYearOverYearCurrentFromUi","dxItem","f","SET_CURRENT","SET_CURRENT_FROM_UI","CLEAR_CURRENT","DEFAULT_CURRENT","getDefaultFromUi","sGetCurrent","sGetCurrentFromUi","SET_DIMENSIONS","SET_SELECTED_DIMENSION","DEFAULT_DIMENSIONS","getPredefinedDimensions","sGetDimensions","dimensions","SET_RECOMMENDED_IDS","DEFAULT_RECOMMENDED_IDS","sGetRecommendedIds","recommendedIds","DEFAULT_METADATA","sGetMetadata","SET_SETTINGS","ADD_SETTINGS","DEFAULT_SETTINGS","keyDateFormat","keyAnalysisRelativePeriod","keyAnalysisDigitGroupSeparator","keyIgnoreAnalyticsApprovalYearThreshold","sGetSettings","sGetSettingsDisplayNameProperty","sGetRootOrgUnit","sGetRelativePeriod","sGetUiLocale","DEFAULT_USER","username","isSuperuser","authorities","fromD2ToUserObj","d2Object","has","sGetUser","user","RECEIVED_SNACKBAR_MESSAGE","CLEAR_SNACKBAR","DEFAULT_SNACKBAR","message","duration","sGetSnackbar","snackbar","DEFAULT_LOADING","isLoading","loadingError","isPluginLoading","sGetLoadError","loader","sGetIsPluginLoading","sGetChart","combineReducers","sGetAxisSetupItems","fromUi","obj","fromMetadata","configureStore","middleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","acAddMetadata","dispatch","next","acSetUi","acClear","acSetUiFromVisualization","acSetUiType","acSetUiOptions","acSetUiLayout","acAddUiLayoutDimensions","acRemoveUiLayoutDimensions","acSetUiItems","acAddUiItems","acRemoveUiItems","acSetUiYearOverYearSeries","acSetUiYearOverYearCategory","acAddParentGraphMap","acSetParentGraphMap","acSetUiActiveModalDialog","acToggleUiRightSidebarOpen","acSetUiRightSidebarOpen","acSetUiInterpretation","acClearUiInterpretation","acSetAxes","DndContext","rearrangeLayoutDimensions","sourceAxisId","sourceIndex","destinationIndex","sourceList","from","moved","onReorderDimensions","onAddDimensions","addDimensionToLayout","onDropWithoutItems","onDragEnd","result","source","destination","draggableId","droppableId","this","Component","connect","acReceivedSnackbarMessage","acClearSnackbar","onClose","variant","className","styles","container","critical","success","warning","permanent","onHidden","UpdateButton","onClick","data-test","primary","t","apiDownloadImage","formData","api","fetch","method","body","headers","Headers","defaultHeaders","res","blob","addCommonParameters","req","withSkipRounding","withAggregationType","withMeasureCriteria","withParameters","displayProperty","withDisplayProperty","withApprovalLevel","relativePeriodDate","withRelativePeriodDate","apiDownloadTable","analytics","request","fromModel","withFormat","withTableLayout","withRows","withColumns","withHideEmptyColumns","withHideEmptyRows","withShowHierarchy","URL","buildUrl","origin","pathname","buildQuery","searchParams","append","apiDownloadData","idScheme","withHierarchyMeta","withIncludeMetadataDetails","withIncludeNumDen","withPath","withOutputIdScheme","MenuButton","dataTest","disabled","onBlur","onFocus","menuButton","MoreHorizontalIcon","style","xmlns","width","height","viewBox","d","fill","DenseMenuItem","Icon","rest","dense","icon","color","colors","grey600","relativePeriodDateSelector","createSelector","created","dialogIsOpen","setDialogIsOpen","toggleMenu","downloadImage","URLSearchParams","createObjectURL","open","downloadData","downloadTable","plainDataSourceSubLevel","menuSectionTitle","label","buttonRef","createRef","ref","createPortal","backdrop","reference","placement","ListAltIcon","ImageIcon","PictureAsPdfIcon","ListIcon","document","withStyles","theme","marginRight","spacing","unit","marginTop","classes","HideButton","secondary","NAME","DIMENSION_ITEM","LEGEND_SET","USER","ITEMS","AXIS","nestedFields","extendFields","field","visualizationQuery","resource","sort","visualizationsQuery","visualizationIds","apiFetchVisualization","dataEngine","query","variables","apiSaveVisualization","mutation","data","skipTranslations","skipSharing","mutate","acSetVisualization","acSetCurrent","acSetCurrentFromUi","tSetCurrentFromUi","getState","acSetDimensions","keyBy","sortBy","toLowerCase","tSetDimensions","onSuccess","displayNameProp","apiFetchDimensions","apiFetchSystemSettings","s","acSetSettings","acAddSettings","tAddSettings","extraSettings","fetchedSettings","systemSettings","acSetLoadError","acClearLoadError","acSetPluginLoading","EmptyBox","fillRule","PeriodError","DataError","EmptySeries","EmptyCategory","GenericError","transform","VisualizationError","description","EmptyResponseError","NoSeriesError","axisName","getAxisNameByLayoutType","getLayoutTypeByVisType","NoCategoryError","NoSeriesOrCategoryError","columnsAxisName","rowsAxisName","visualizationType","getDisplayNameByVisType","NoPeriodError","getAvailableAxesDescription","NoDataOrDataElementGroupSetError","lockedAxis","getAxisPerLockedDimension","NoDataError","MultipleIndicatorAsFilterError","CombinationDEGSRRError","genericErrorTitle","GenericClientError","GenericServerError","AssignedCategoriesDataElementsError","AssignedCategoriesAsFilterError","axesDescription","userAuthorityQuery","authority","authorityId","acReceivedUser","acSetUserAuthority","tLoadUserAuthority","authorityKey","engine","response","getVisualizationFromCurrent","getVisualizationState","STATE_EMPTY","STATE_UNSAVED","STATE_SAVED","STATE_DIRTY","apiPostDataStatistics","post","logError","tDoLoadVisualization","interpretationId","fromLoader","i","fromVisualization","fromCurrent","clearVisualization","isAxisValid","isValid","axisItem","dimensionIsValid","requireItems","validateDimension","validateAxis","validateLayout","validatePieLayout","validateYearOverYearLayout","validateSingleValueLayout","validatePivotTableLayout","validateDefaultLayout","CURRENT_AO_KEY","hasNamespace","currentUser","dataStore","getNamespace","create","apiSave","namespace","ns","set","apiFetch","apiSaveAOInUserDataStore","apiFetchAOFromUserDataStore","mapDispatchToProps","getCurrent","getCurrentFromUi","onUpdate","fromActions","onLoadingStart","renderComponent","urlContainsCurrentAOKey","pathWithoutInterpretation","tabBar","tabSection","spacers","dp16","grey300","dp8","tabSectionTitle","dp12","grey900","tabSectionOption","tabSectionOptionItem","tabSectionOptionText","dp14","tabSectionOptionToggleable","dp4","tabSectionOptionComplexInline","ownProps","onChange","helpText","toggleable","enabled","setEnabled","selected","checked","onToggle","inputWidth","AggregationType","ShowDimensionLabels","SkipRounding","ColTotals","ColSubTotals","RowTotals","RowSubTotals","HideEmptyColumns","HideEmptyRows","NumberType","LegendDisplayStyle","legendSets","paging","LegendSetSelect","loading","displayName","placeholder","loadingText","useDataEngine","setOptions","isLoaded","setIsLoaded","hideStyleOptions","legendEnabled","setLegendEnabled","inline","Title","defaultProps","DisplayDensity","FontSize","DigitGroupSeparator","OperatorSelect","tabIndex","inputMaxWidth","ValueInput","MeasureCriteria","onClear","setState","defaultState","op1","v1","op2","v2","split","paddingTop","ParamReportingPeriod","ParamOrganisationUnit","ParamParentOrganisationUnit","Regression","Cumulative","SortOrder","TopLimit","dataApprovalLevels","order","ApprovalLevelSelect","approvalLevelEnabledSelector","ShowHierarchy","CompletedOnly","content","React","Children","toArray","CumulativeValues","ShowData","HideEmptyRowItems","RegressionType","TargetLineValue","TargetLineLabel","BaseLineValue","BaseLineLabel","RangeAxisMinValue","RangeAxisMaxValue","AxisRange","RangeAxisSteps","RangeAxisDecimals","RangeAxisLabel","DomainAxisLabel","NoSpaceBetweenColumns","HideLegend","HIDE_TITLE_AUTO","HIDE_TITLE_NONE","HIDE_TITLE_CUSTOM","HideTitle","onRadioGroupChange","hideTitleSelector","uiOptions","Subtitle","HIDE_SUBTITLE_AUTO","HIDE_SUBTITLE_NONE","HIDE_SUBTITLE_CUSTOM","HideSubtitle","hideSubtitleSelector","PercentStackedValues","VisualizationOptions","activeTabKey","selectTab","tabKey","generateTabContent","sections","generateTabs","tabs","optionsConfig","VIS_TYPE_COLUMN","VIS_TYPE_BAR","columnConfig","VIS_TYPE_STACKED_COLUMN","VIS_TYPE_STACKED_BAR","stackedColumnConfig","VIS_TYPE_LINE","VIS_TYPE_RADAR","lineConfig","VIS_TYPE_AREA","areaConfig","gaugeConfig","pieConfig","singleValueConfig","pivotTableConfig","getOptionsByType","activeTabIndex","findIndex","tab","VisualizationOptionsManager","toggleVisualizationOptionsDialog","getPrimaryOnClick","handler","position","large","onOpen","onNew","getOnRename","details","onRenameVisualization","getOnSave","onSaveVisualization","getOnSaveAs","getOnDelete","onDeleteVisualization","getOnError","MenuBar","context","menuBar","updateButton","small","fileId","fileType","apiObjectName","onRename","onSave","onSaveAs","onDelete","grow","contextTypes","PropTypes","updatedVisualization","updatedCurrent","fromSnackbar","copy","status","uid","isSaving","deletedObject","httpStatusCode","parseError","InterpretationIcon","version","stroke","strokeWidth","x","y","opacity","rx","strokeLinecap","strokeLinejoin","points","titleBar","display","justifyContent","cell","alignItems","background","white","padding","borderRadius","margin","suffix","paddingLeft","grey700","interpretationIcon","titleUnsaved","grey500","fontStyle","titleDirty","TITLE_UNSAVED","TITLE_DIRTY","defaultTitleStyle","defaultInterpretationStyle","getTitleText","titleState","stateProps","dispatchProps","titleText","interpretationDate","titleStyle","getCustomTitleStyle","getSuffix","getPathForOrgUnit","prepareCurrentAnalyticalObject","appendCompleteParentGraphMap","appendPathsToOrgUnits","appendDimensionType","dimensionItemType","appendDimensionItemTypeToAnalyticalObject","appendNames","appendDimensionItemNamesToAnalyticalObject","removeUnnecessaryAttributesFromAnalyticalObject","ColumnIcon","paddingRight","StackedColumnIcon","BarIcon","StackedBarIcon","PieIcon","cx","cy","r","strokeDasharray","mask","GaugeIcon","LineIcon","AreaIcon","RadarIcon","YearOverYearLineIcon","YearOverYearColumnIcon","SingleValueIcon","GlobeIcon","PivotTableIcon","ListItemIcon","iconType","VisualizationTypeListItem","isSelected","classNames","listItem","listItemActive","listItemDisabled","listItemIcon","listItemText","VisualizationTypeSelector","setUi","listIsOpen","setListIsOpen","toggleList","handleListItemClick","VisTypesList","listContainer","visTypeDisplayNames","event","stopPropagation","currentAnalyticalObject","href","button","marginLeft","cardContainer","string","dialogId","onAddDimension","availableAxes","AddToLayoutButton","SplitButton","Button","clickHandler","component","maxWidth","DialogManager","onMounted","componentDidUpdate","prevProps","isEqual","dxIds","ouIds","fetchRecommended","ouMounted","debounce","apiFetchRecommendedIds","setRecommendedIds","selectUiItems","setUiItems","forMetadata","forParentGraphMap","ou","addMetadata","addParentGraphMap","closeDialog","getSelectedItems","selectedItems","getOrgUnitsFromIds","renderPersistedContent","dimensionProps","ouItems","renderDialogContent","removeUiItems","onSelect","onDeselect","onReorder","infoBoxMessage","numberOfItems","axisMaxNumberOfItems","getAxisMaxNumberOfItems","visualiationType","maxNumber","isActive","selectedDimensions","selectedPeriods","filterOutPredefinedDimensions","dynamicContent","nonPredefinedDimensions","dialogTitle","dimensionIdsInLayout","addUiItems","DndDimensionItem","render","isLocked","isDeactivated","isRecommended","onOptionsClick","itemCommonProps","isDragDisabled","provided","snapshot","innerRef","draggableProps","dragHandleProps","isDragging","dragging","notDragging","dimensionItemClone","DndDimensionList","dndIndex","nameContainsFilterText","filterText","selectedIds","isDisabledDimension","disallowedDimensions","isLockedDimension","lockedDimensions","isRecommendedDimension","renderItem","itemProps","onDimensionClick","onDimensionOptionsClick","getDimensionItemsByFilter","fixedDimensions","getFixedDimensions","fixedDim","dynamicDimensions","getDynamicDimensions","dynDim","predefDim","isDropDisabled","droppableProps","wrapper","section","header","list","getDisallowedDimensionsMemo","fromReducers","getDisallowedDimensions","getisLockedDimensionsMemo","getAllLockedDimensionIds","DndDimensionsPanel","onClearFilter","onFilterTextChange","marginBottom","border","grey400","text","disableUnderline","divContainer","flexDirection","backgroundColor","grey050","AxisSetup","isOpen","onUpdateClick","initItems","onCancelClick","setItems","itemsMap","onAxisChange","table","nameColumn","coloredColumn","axisColumn","centered","end","getAxes","Function","Dimensions","dimensionMenuAnchorEl","openOptionsMenuForDimension","currentTarget","closeOptionsMenuForDimension","getNumberOfDimensionItems","currentAxisId","getCurrentAxisId","numberOfDimensionItems","dualAxisItemHandler","isAssignedCategoriesInLayout","layoutHasAssignedCategories","assignedCategoriesItemHandler","axisItemHandler","removeItemHandler","anchorEl","isDimensionInLayout","Interpretations","onInterpretationChange","interpretationUrl","currentInterpretationId","onCurrentInterpretationChange","chartCanvas","loadingCover","left","top","zIndex","legendSetsQuery","ChartPlugin","responses","extraOptions","renderCounter","onChartGenerated","defaultAnimation","animation","canvasRef","useRef","renderVisualization","useCallback","visualizationConfig","createVisualization","isSingleValue","sourceHeight","sourceWidth","func","PivotPlugin","apiFetchAnalytics","rawResponse","apiFetchAnalyticsForYearOverYear","yearlySeriesReq","yearlySeriesRes","requests","yearlySeriesLabels","now","currentDay","currentMonth","period","startDate","Promise","computeGenericPeriodNames","out","genericPeriodNames","getRequestOptions","entry","ouPath","fetchData","forDashboard","dashboard","noData","yearlySeries","xAxisLabels","VisualizationPlugin","onLoadingComplete","onResponsesReceived","fetchResult","setFetchResult","doFetchData","doFetchLegendSets","legendSetIds","dxId","legendSetId","doFetchAll","apiFetchMostViewedVisualizations","pageSize","eventType","mostViewedVisualizations","setMostViewedVisualizations","mostViewedVisualizationsResult","visualizations","visualizationsResult","visualizationsWithType","visWithType","populateMostViewedVisualizations","getErrorContent","errorContainer","errorIcon","errorTitle","errorDescription","outer","inner","guide","guideItem","visIcon","visTypeIcons","LoadingMask","progress","Visualization","errorCode","setLoadError","svg","setChart","metaData","getNewRenderId","renderId","addResizeHandler","addEventListener","visFilters","visualizationSelector","visFiltersSelector","black","ChipMenu","handleClick","handleClose","getMenuId","Fragment","aria-owns","aria-haspopup","tooltip","fontFamily","boxShadow","listStyleType","whiteSpace","overflow","textOverflow","iconWrapper","warningLabel","labels","noneSelected","onlyOneInUse","onlyLimitedNumberInUse","number","Tooltip","getWarningLabel","displayLimitedAmount","getNameList","idList","levelString","levelId","getItemDisplayNames","levelIds","groupIds","itemDisplayNames","hasGroupPrefix","renderWarningLabel","renderItems","renderLockedLabel","lockedLabel","renderNoItemsLabel","hasNoItemsLabel","setDataTransfer","e","dataTransfer","setData","JSON","stringify","target","dataset","dimensionid","DynamicDimensionIcon","AXIS_BORDER_COLOR","AXIS_BACKGROUND_COLOR","baseChip","fontWeight","cursor","minHeight","userSelect","chipWrapper","secondary200","chip","chipEmpty","fixedDimensionIcon","warningIcon","warningIconWrapper","lockIcon","lockIconWrapper","chipLeft","borderTopRightRadius","borderBottomRightRadius","chipRight","borderTopLeftRadius","borderBottomLeftRadius","LockIconWrapper","WarningIconWrapper","Chip","tooltipOpen","Math","random","toString","timeout","isDimensionLocked","getMaxNumberOfItems","handleMouseOver","setTimeout","handleMouseOut","clearTimeout","getOpenHandler","getDragStartHandler","getAnchorEl","getElementById","getWrapperStyles","renderChipLabelSuffix","getItemsLabel","total","renderChipIcon","dynamicDimensionIcon","renderMenu","Menu","renderTooltip","activeItemIds","dimensionName","visTypeName","data-dimensionid","draggable","onDragStart","onMouseOver","onMouseOut","hasAxisTooManyItems","axisContainer","layoutStyle","borderColor","borderStyle","borderWidth","axisContainerLeft","borderLeftWidth","minWidth","letterSpacing","alignContent","flexWrap","Axis","onDragOver","preventDefault","direction","ct","axisGroup","axisGroupLeft","flexBasis","axisGroupRight","Layout","DefaultAxis","defaultAxisStyles","flex","LAYOUT_TYPE_YEAR_OVER_YEAR","YearOverYearAxisStyles","seriesOptions","len","getFullYear","getFixedYears","categoryOptions","SinglePeriodSelector","MultiPeriodSelector","YearOverYearSelect","multiple","defaultLayoutStyles","YearOverYearLayoutStyles","onSeriesChange","onCategoryChange","pivotTableLayoutStyles","componentMap","LAYOUT_TYPE_DEFAULT","DefaultLayout","LAYOUT_TYPE_PIE","PieLayout","YearOverYearLayout","LAYOUT_TYPE_PIVOT_TABLE","PivotTableLayout","layoutType","LayoutComponent","relativePeriods","TODAY","YESTERDAY","LAST_3_DAYS","LAST_7_DAYS","LAST_14_DAYS","THIS_WEEK","LAST_WEEK","LAST_4_WEEKS","LAST_12_WEEKS","LAST_52_WEEKS","WEEKS_THIS_YEAR","THIS_MONTH","LAST_MONTH","LAST_3_MONTHS","LAST_6_MONTHS","LAST_12_MONTHS","MONTHS_THIS_YEAR","THIS_BIMONTH","LAST_BIMONTH","LAST_6_BIMONTHS","BIMONTHS_THIS_YEAR","THIS_QUARTER","LAST_QUARTER","LAST_4_QUARTERS","QUARTERS_THIS_YEAR","THIS_SIX_MONTH","LAST_SIX_MONTH","LAST_2_SIXMONTHS","THIS_FINANCIAL_YEAR","LAST_FINANCIAL_YEAR","LAST_5_FINANCIAL_YEARS","THIS_YEAR","LAST_YEAR","LAST_5_YEARS","USER_ORGUNIT","USER_ORGUNIT_CHILDREN","USER_ORGUNIT_GRANDCHILDREN","App","unlisten","previousLocation","initialLoadIsComplete","locationToConfirm","refetch","loadVisualization","store","pathParts","AO","clearCurrent","setUiFromVisualization","setCurrentFromUi","componentDidMount","rootOrgUnit","defaultMetadata","listen","ctrlKey","returnValue","DimensionsPanel","childContextTypes","clearSnackbar","dhis2theme","createMuiTheme","AppWrapper","thunk","withExtraArgument","metadataMiddleware","Cypress","muiTheme","schemas"],"mappings":"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","file":"static/js/app.9d66597f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Snackbar_container__3g0Vn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"MenuButton_menuButton__1AF2U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"DownloadMenu_backdrop__3RHIU\",\"menuSectionTitle\":\"DownloadMenu_menuSectionTitle__3DttW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuBar\":\"MenuBar_menuBar__3-AXT\",\"updateButton\":\"MenuBar_updateButton__1NS3q\",\"grow\":\"MenuBar_grow__1w_QG\"};","/**\n *\n * @param {Date} value Javascript date\n * @param {String} uiLocale\n * @returns {String}\n */\nconst formatDate = (value = '', uiLocale = 'en') => {\n  if (typeof global.Intl !== 'undefined' && Intl.DateTimeFormat) {\n    return new Intl.DateTimeFormat(uiLocale, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    }).format(new Date(value));\n  }\n\n  return value.substr(0, 19).replace('T', ' ');\n};\n\nexport default formatDate;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"AddToLayoutButton_button__8dlEv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notDragging\":\"DndDimensionItem_notDragging__3jgQJ\",\"dragging\":\"DndDimensionItem_dragging__1uXIT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DndDimensionList_container__DCFRx\",\"wrapper\":\"DndDimensionList_wrapper__1gYqU\",\"list\":\"DndDimensionList_list__1sErz\",\"header\":\"DndDimensionList_header__Ugsfp\",\"section\":\"DndDimensionList_section__1KL69\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DndDimensionsPanel_container__1gaeS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"AxisSetup_table__2qUt0\",\"nameColumn\":\"AxisSetup_nameColumn__85zW_\",\"axisColumn\":\"AxisSetup_axisColumn__LKHIm\",\"coloredColumn\":\"AxisSetup_coloredColumn__2gOaV\",\"centered\":\"AxisSetup_centered__2hFhj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer\":\"StartScreen_outer__2nbkE\",\"inner\":\"StartScreen_inner__2exeL\",\"errorContainer\":\"StartScreen_errorContainer__u2dgL\",\"errorIcon\":\"StartScreen_errorIcon__1QTyz\",\"errorTitle\":\"StartScreen_errorTitle__2Ksw9\",\"errorDescription\":\"StartScreen_errorDescription__syq9m\",\"title\":\"StartScreen_title__2-0vP\",\"section\":\"StartScreen_section__3ITr1\",\"guide\":\"StartScreen_guide__d793i\",\"guideItem\":\"StartScreen_guideItem__13mvT\",\"visualization\":\"StartScreen_visualization__3FqSm\",\"visIcon\":\"StartScreen_visIcon__2SFAA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progress\":\"LoadingMask_progress__2bHzE\",\"outer\":\"LoadingMask_outer__d-GDr\"};","export const SYSTEM_SETTINGS = ['keyDateFormat', 'keyAnalysisRelativePeriod', 'keyAnalysisDigitGroupSeparator', 'keyIgnoreAnalyticsApprovalYearThreshold'];\nexport const extractUserSettings = settings => {\n  const nameProp = settings.keyAnalysisDisplayProperty;\n  return {\n    displayNameProperty: nameProp === 'name' ? 'displayName' : 'displayShortName',\n    uiLocale: settings.keyUiLocale\n  };\n};","// Helper functions\nexport const onError = error => console.log('Error: ', error);","import { getInstance } from 'd2';\nimport { onError } from './index';\nexport const apiFetchOrganisationUnitRoot = () => {\n  const endPoint = '/organisationUnits';\n  const fields = ['id', 'displayName', 'name'];\n  const url = `${endPoint}?paging=false&userDataViewFallback=true&fields=${fields.join(',')}`;\n  return getInstance().then(d2 => d2.Api.getApi().get(url)).then(({\n    organisationUnits\n  }) => organisationUnits[0]).catch(onError);\n};\n/**\n * Fetch organisation unit levels\n * @returns {Promise}\n */\n\nexport const apiFetchOrganisationUnitLevels = () => {\n  const endPoint = '/organisationUnitLevels';\n  const fields = ['id', 'name', 'displayName', 'level'];\n  const url = `${endPoint}?paging=false&fields=${fields.join(',')}`;\n  return getInstance().then(d2 => d2.Api.getApi().get(url)).then(({\n    organisationUnitLevels\n  }) => organisationUnitLevels).catch(onError);\n};","import { createHashHistory } from 'history';\nexport default createHashHistory();","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { useState } from 'react';\nimport { init as d2Init, config as d2Config, getUserSettings } from 'd2';\nimport { extractUserSettings } from './modules/settings';\nimport { apiFetchOrganisationUnitLevels } from './api/organisationUnits';\nimport history from './modules/history';\nimport { ScreenCover, CircularLoader } from '@dhis2/ui-core';\n\nconst configI18n = async userSettings => {\n  const uiLocale = userSettings.uiLocale; // TODO: Remove and port to modern i18n\n\n  if (uiLocale && uiLocale !== 'en') {\n    d2Config.i18n.sources.add(`./i18n_old/i18n_module_${uiLocale}.properties`);\n  }\n\n  d2Config.i18n.sources.add('./i18n_old/i18n_module_en.properties');\n};\n\nconst initD2 = async ({\n  baseUrl,\n  apiVersion\n}, initConfig) => {\n  const apiUrl = `${baseUrl}/api/${apiVersion}`;\n  d2Config.baseUrl = apiUrl;\n  const userSettings = extractUserSettings((await getUserSettings()));\n  await configI18n(userSettings);\n  const d2 = await d2Init({ ...initConfig,\n    baseUrl: apiUrl\n  });\n  const ouLevels = await apiFetchOrganisationUnitLevels();\n  return {\n    location: history.location,\n    baseUrl,\n    d2,\n    userSettings,\n    ouLevels\n  };\n};\n\nexport const D2Shim = ({\n  children,\n  ...initConfig\n}) => {\n  const appConfig = useConfig();\n  const [params, setParams] = useState(null);\n  useEffect(() => {\n    initD2(appConfig, initConfig).then(setParams);\n  }, []);\n  /* eslint-disable-line react-hooks/exhaustive-deps */\n\n  if (!params) {\n    return <ScreenCover>\n                <CircularLoader />\n            </ScreenCover>;\n  }\n\n  return children(params);\n};\nD2Shim.propTypes = {\n  children: PropTypes.func\n};","export const SET_VISUALIZATION = 'SET_VISUALIZATION';\nexport const CLEAR_VISUALIZATION = 'CLEAR_VISUALIZATION';\nexport const DEFAULT_VISUALIZATION = null;\nexport default ((state = DEFAULT_VISUALIZATION, action) => {\n  switch (action.type) {\n    case SET_VISUALIZATION:\n      {\n        return action.value;\n      }\n\n    case CLEAR_VISUALIZATION:\n      {\n        return DEFAULT_VISUALIZATION;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetVisualization = state => state.visualization;\nexport const sGetInterpretations = state => state.visualization ? state.visualization.interpretations : [];","import pick from 'lodash-es/pick';\nexport const options = {\n  baseLineLabel: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  baseLineValue: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  // colorSet:\n  cumulativeValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  domainAxisLabel: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRowItems: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  hideLegend: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  noSpaceBetweenColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  percentStackedValues: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rangeAxisDecimals: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  rangeAxisLabel: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  rangeAxisMaxValue: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  rangeAxisMinValue: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  rangeAxisSteps: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  regressionType: {\n    defaultValue: 'NONE',\n    requestable: false,\n    savable: true\n  },\n  showData: {\n    defaultValue: true,\n    requestable: false,\n    savable: true\n  },\n  targetLineLabel: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  targetLineValue: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  aggregationType: {\n    defaultValue: 'DEFAULT',\n    requestable: true,\n    savable: true\n  },\n  completedOnly: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  hideSubtitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideTitle: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  sortOrder: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  },\n  subtitle: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  title: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  // only for PT\n  colTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  colSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  rowSubTotals: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  showDimensionLabels: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyColumns: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  hideEmptyRows: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  skipRounding: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  numberType: {\n    defaultValue: 'VALUE',\n    requestable: false,\n    savable: true\n  },\n  showHierarchy: {\n    defaultValue: false,\n    requestable: true,\n    savable: true\n  },\n  legendSet: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStrategy: {\n    defaultValue: 'FIXED',\n    requestable: false,\n    savable: true\n  },\n  legendDisplayStyle: {\n    defaultValue: 'FILL',\n    requestable: false,\n    savable: true\n  },\n  displayDensity: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  fontSize: {\n    defaultValue: 'NORMAL',\n    requestable: false,\n    savable: true\n  },\n  digitGroupSeparator: {\n    defaultValue: 'SPACE',\n    requestable: false,\n    savable: true\n  },\n  approvalLevel: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: false\n  },\n  // these are stored in the AO under reportingParams\n  reportingPeriod: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  organisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  parentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  // not exposed in UI\n  grandParentOrganisationUnit: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  regression: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  cumulative: {\n    defaultValue: false,\n    requestable: false,\n    savable: true\n  },\n  measureCriteria: {\n    defaultValue: undefined,\n    requestable: true,\n    savable: true\n  },\n  topLimit: {\n    defaultValue: '0',\n    requestable: false,\n    savable: true\n  }\n};\nexport const computedOptions = {\n  baseLine: {\n    defaultValue: false,\n    requestable: false,\n    savable: false\n  },\n  targetLine: {\n    defaultValue: false,\n    requestable: false,\n    savable: false\n  },\n  axisRange: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: false\n  },\n  legend: {\n    defaultValue: undefined,\n    requestable: false,\n    savable: false\n  }\n};\nexport default options;\nexport const getOptionsForUi = () => {\n  return Object.entries({ ...options,\n    ...computedOptions\n  }).reduce((map, [option, props]) => {\n    map[option] = props.defaultValue;\n    return map;\n  }, {});\n};\nexport const getOptionsForRequest = () => {\n  return Object.entries(options).filter(entry => entry[1].requestable // entry = [option, props]\n  );\n};\n\nconst isNotDefault = (optionsFromVisualization, prop) => {\n  return Boolean(optionsFromVisualization[prop] && optionsFromVisualization[prop] !== options[prop].defaultValue);\n};\n\nexport const getOptionsFromVisualization = visualization => {\n  const optionsFromVisualization = { ...getOptionsForUi(),\n    ...pick(visualization, Object.keys(options))\n  };\n  optionsFromVisualization.baseLine = isNotDefault(optionsFromVisualization, 'baseLineLabel') || isNotDefault(optionsFromVisualization, 'baseLineValue');\n  optionsFromVisualization.targetLine = isNotDefault(optionsFromVisualization, 'targetLineLabel') || isNotDefault(optionsFromVisualization, 'targetLineValue'); // nested options under reportingParams\n\n  if (visualization.reportingParams) {\n    optionsFromVisualization.organisationUnit = visualization.reportingParams.organisationUnit;\n    optionsFromVisualization.reportingPeriod = visualization.reportingParams.reportingPeriod;\n    optionsFromVisualization.parentOrganisationUnit = visualization.reportingParams.parentOrganisationUnit;\n    optionsFromVisualization.grandParentOrganisationUnit = visualization.reportingParams.grandParentOrganisationUnit;\n  } // cast option values from Number for some options\n\n\n  ;\n  ['baseLineValue', 'targetLineValue', 'sortOrder', 'topLimit'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n      optionsFromVisualization[option] = String(visualization[option]);\n    }\n  });\n  return optionsFromVisualization;\n};","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, getAxisMaxNumberOfDimensions, getAvailableAxes, isAxisFull, getTransferableDimension } from '@dhis2/analytics'; // Names for dnd sources\n\nexport const SOURCE_DIMENSIONS = 'dimensions'; // Layout utility functions\n// Exclude one or many dimensions from layout\n\nexport const getFilteredLayout = (layout, excludedIds) => {\n  const ids = Array.isArray(excludedIds) ? excludedIds : [excludedIds];\n  return {\n    [AXIS_ID_COLUMNS]: layout[AXIS_ID_COLUMNS].filter(dim => !ids.includes(dim)),\n    [AXIS_ID_ROWS]: layout[AXIS_ID_ROWS].filter(dim => !ids.includes(dim)),\n    [AXIS_ID_FILTERS]: layout[AXIS_ID_FILTERS].filter(dim => !ids.includes(dim))\n  };\n}; // Accepts layout: { columns: ['dx'] }\n// Returns inverse layout: { dx: 'columns' }\n\nexport const getInverseLayout = layout => {\n  const entries = Object.entries(layout);\n  const map = {};\n  entries.forEach(([axisId, dimensionIds]) => {\n    dimensionIds.forEach(id => {\n      map[id] = axisId;\n    });\n  });\n  return map;\n}; // Accepts layout and transfer object\n// Returns transfer with possible retransfers\n\nexport const getRetransfer = (layout, transfer, visType) => {\n  const inverseLayout = getInverseLayout(layout);\n  const dimensionIds = Object.keys(transfer);\n  const retransfer = {};\n  dimensionIds.forEach(id => {\n    const sourceAxis = inverseLayout[id] || null;\n    const destinationAxisId = transfer[id].axisId;\n    const dimensionsAtDestination = layout[destinationAxisId] || [];\n\n    if (isAxisFull(visType, destinationAxisId, dimensionsAtDestination.length)) {\n      const transferableDimension = getTransferableDimension(visType, destinationAxisId, layout[destinationAxisId]);\n\n      if (transferableDimension) {\n        const axisId = sourceAxis ? sourceAxis : getAvailableAxes(visType).find(axis => !getAxisMaxNumberOfDimensions(visType, axis));\n        retransfer[transferableDimension] = {\n          axisId\n        };\n      }\n    }\n  });\n  return retransfer;\n};","export const BASE_FIELD_NAME = 'name';\nexport const BASE_FIELD_TYPE = 'type';\nexport const BASE_FIELD_YEARLY_SERIES = 'yearlySeries';\n\nconst getFieldObject = (name, props = {}) => ({\n  [BASE_FIELD_NAME]: name,\n  ...props\n}); // fields by type\n\n\nexport const fieldsByType = {\n  reportTable: [getFieldObject('cumulative', {\n    option: true\n  }), getFieldObject('hideEmptyColumns', {\n    option: true\n  }), getFieldObject('legendDisplayStyle', {\n    option: true\n  }), getFieldObject('measureCriteria', {\n    option: true\n  }), getFieldObject('numberType', {\n    option: true\n  }), getFieldObject('regression', {\n    option: true\n  }), getFieldObject('reportingParams', {\n    option: true\n  }), getFieldObject('skipRounding', {\n    option: true\n  })],\n  chart: [getFieldObject('category', {\n    excluded: true\n  }), getFieldObject('series', {\n    excluded: true\n  }), getFieldObject(BASE_FIELD_YEARLY_SERIES)],\n  eventReport: [getFieldObject('dataType')],\n  reportTable_eventReport: [getFieldObject('colSubTotals', {\n    option: true\n  }), getFieldObject('colTotals', {\n    option: true\n  }), getFieldObject('displayDensity', {\n    option: true\n  }), getFieldObject('fontSize', {\n    option: true\n  }), getFieldObject('hideEmptyRows', {\n    option: true\n  }), getFieldObject('rowSubTotals', {\n    option: true\n  }), getFieldObject('rowTotals', {\n    option: true\n  }), getFieldObject('showDimensionLabels', {\n    option: true\n  }), getFieldObject('showHierarchy', {\n    option: true\n  })],\n  chart_eventChart: [getFieldObject('baseLineLabel', {\n    option: true\n  }), getFieldObject('baseLineValue', {\n    option: true\n  }), getFieldObject('colorSet', {\n    option: true\n  }), getFieldObject('cumulativeValues', {\n    option: true\n  }), getFieldObject('domainAxisLabel', {\n    option: true\n  }), getFieldObject('hideEmptyRowItems', {\n    option: true\n  }), getFieldObject('hideLegend', {\n    option: true\n  }), getFieldObject('noSpaceBetweenColumns', {\n    option: true\n  }), getFieldObject('percentStackedValues', {\n    option: true\n  }), getFieldObject('rangeAxisDecimals', {\n    option: true\n  }), getFieldObject('rangeAxisLabel', {\n    option: true\n  }), getFieldObject('rangeAxisMaxValue', {\n    option: true\n  }), getFieldObject('rangeAxisMinValue', {\n    option: true\n  }), getFieldObject('rangeAxisSteps', {\n    option: true\n  }), getFieldObject('regressionType', {\n    option: true\n  }), getFieldObject('optionalAxes'), getFieldObject('showData', {\n    option: true\n  }), getFieldObject('targetLineLabel', {\n    option: true\n  }), getFieldObject('targetLineValue', {\n    option: true\n  }), getFieldObject(BASE_FIELD_TYPE, {\n    option: true\n  })],\n  eventReport_eventChart: [getFieldObject('attributeValueDimension'), getFieldObject('collapseDataDimensions'), getFieldObject('dataElementValueDimension'), getFieldObject('endDate'), getFieldObject('eventStatus', {\n    option: true\n  }), getFieldObject('hideNaData', {\n    option: true\n  }), getFieldObject('outputType', {\n    option: true\n  }), getFieldObject('program'), getFieldObject('programStage'), getFieldObject('programStatus', {\n    option: true\n  }), getFieldObject('startDate'), getFieldObject('value')],\n  reportTable_chart_eventReport: [getFieldObject('legendDisplayStrategy', {\n    option: true\n  }), getFieldObject('legendSet', {\n    option: true\n  })],\n  reportTable_eventReport_eventChart: [getFieldObject('columnDimensions', {\n    excluded: true\n  }), getFieldObject('rowDimensions', {\n    excluded: true\n  })],\n  reportTable_chart_eventReport_eventChart: [getFieldObject('access'), getFieldObject('aggregationType', {\n    option: true\n  }), getFieldObject('attributeDimensions', {\n    excluded: true\n  }), getFieldObject('attributeValues', {\n    excluded: true\n  }), getFieldObject('categoryDimensions', {\n    excluded: true\n  }), getFieldObject('categoryOptionGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('code', {\n    excluded: true\n  }), getFieldObject('columns'), getFieldObject('completedOnly', {\n    option: true\n  }), getFieldObject('created'), getFieldObject('dataDimensionItems', {\n    excluded: true\n  }), getFieldObject('dataElementDimensions', {\n    excluded: true\n  }), getFieldObject('dataElementGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('description'), getFieldObject('digitGroupSeparator'), getFieldObject('displayDescription'), getFieldObject('displayName'), getFieldObject('displayShortName'), getFieldObject('externalAccess', {\n    excluded: true\n  }), getFieldObject('favorite'), getFieldObject('favorites'), getFieldObject('filterDimensions', {\n    excluded: true\n  }), getFieldObject('filters'), getFieldObject('hideSubtitle', {\n    option: true\n  }), getFieldObject('hideTitle', {\n    option: true\n  }), getFieldObject('href', {\n    excluded: true\n  }), getFieldObject('id'), getFieldObject('interpretations'), getFieldObject('itemOrganisationUnitGroups', {\n    excluded: true\n  }), getFieldObject('lastUpdated'), getFieldObject('lastUpdatedBy'), getFieldObject('name'), getFieldObject('organisationUnitGroupSetDimensions', {\n    excluded: true\n  }), getFieldObject('organisationUnitLevels', {\n    excluded: true\n  }), getFieldObject('organisationUnits', {\n    excluded: true\n  }), getFieldObject('parentGraphMap'), getFieldObject('periods', {\n    excluded: true\n  }), getFieldObject('programIndicatorDimensions', {\n    excluded: true\n  }), getFieldObject('publicAccess'), getFieldObject('relativePeriods', {\n    excluded: true\n  }), getFieldObject('rows'), getFieldObject('shortName'), getFieldObject('sortOrder', {\n    option: true\n  }), getFieldObject('subscribed'), getFieldObject('subscribers'), getFieldObject('subtitle', {\n    option: true\n  }), getFieldObject('timeField'), getFieldObject('title', {\n    option: true\n  }), getFieldObject('topLimit', {\n    option: true\n  }), getFieldObject('translations'), getFieldObject('user'), getFieldObject('userAccesses'), getFieldObject('userGroupAccesses'), getFieldObject('userOrganisationUnit', {\n    excluded: true\n  }), getFieldObject('userOrganisationUnitChildren', {\n    excluded: true\n  }), getFieldObject('userOrganisationUnitGrandChildren', {\n    excluded: true\n  })]\n};\nfieldsByType.visualization = [...fieldsByType.reportTable, ...fieldsByType.chart, ...fieldsByType.reportTable_eventReport, ...fieldsByType.chart_eventChart, ...fieldsByType.reportTable_chart_eventReport, ...fieldsByType.reportTable_eventReport_eventChart, ...fieldsByType.reportTable_chart_eventReport_eventChart]; // actions\n\nexport const extractName = propObj => propObj[BASE_FIELD_NAME];\nexport const markExcluded = fieldObj => fieldObj.excluded === true ? { ...fieldObj,\n  [BASE_FIELD_NAME]: `!${fieldObj[BASE_FIELD_NAME]}`\n} : fieldObj;\n/* eslint-disable-next-line max-params */\n\nexport const moveExcludedToEnd = (acc, current, curIndex, array) => {\n  !acc && (acc = array.slice());\n  current.charAt(0) === '!' && acc.push(acc.shift());\n  return acc;\n}; // getters\n\nexport const getAllFieldObjectsByType = type => Object.entries(fieldsByType).reduce((fields, [key, value]) => key.includes(type) ? fields.concat(value) : fields, []);","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD } from '@dhis2/analytics'; // Transform from ui.layout to default layout format\n\nexport const defaultLayoutAdapter = layout => {\n  const columns = layout[AXIS_ID_COLUMNS].slice();\n  const rows = layout[AXIS_ID_ROWS].slice();\n  return {\n    [AXIS_ID_COLUMNS]: columns.length ? [columns.shift()] : columns,\n    [AXIS_ID_ROWS]: rows.length ? [rows.shift()] : rows,\n    [AXIS_ID_FILTERS]: [...layout[AXIS_ID_FILTERS], ...columns, ...rows]\n  };\n}; // Transform from ui.layout to pie layout format\n\nexport const pieLayoutAdapter = layout => {\n  const columns = layout[AXIS_ID_COLUMNS].slice();\n  const rows = layout[AXIS_ID_ROWS].slice();\n  return {\n    [AXIS_ID_COLUMNS]: columns.length ? [columns.shift()] : rows.length ? [rows.shift()] : [],\n    [AXIS_ID_ROWS]: [],\n    [AXIS_ID_FILTERS]: [...layout[AXIS_ID_FILTERS], ...columns, ...rows]\n  };\n}; // Transform from ui.layout to year on year layout format\n\nexport const yearOverYearLayoutAdapter = layout => ({\n  [AXIS_ID_COLUMNS]: [],\n  [AXIS_ID_ROWS]: [],\n  [AXIS_ID_FILTERS]: [...layout[AXIS_ID_FILTERS], ...layout[AXIS_ID_COLUMNS], ...layout[AXIS_ID_ROWS]].filter(dim => dim !== DIMENSION_ID_PERIOD)\n}); // Transform from ui.layout to single value layout format\n\nexport const singleValueLayoutAdapter = layout => {\n  const columns = layout[AXIS_ID_COLUMNS].slice();\n  const rows = layout[AXIS_ID_ROWS].slice();\n  return {\n    [AXIS_ID_COLUMNS]: [DIMENSION_ID_DATA],\n    [AXIS_ID_ROWS]: [],\n    [AXIS_ID_FILTERS]: [...layout[AXIS_ID_FILTERS], ...columns, ...rows].filter(dim => dim !== DIMENSION_ID_DATA)\n  };\n};","import { ouIdHelper, DIMENSION_ID_ORGUNIT, dimensionGetItems, layoutReplaceDimension, layoutGetDimension } from '@dhis2/analytics';\n\nconst isOuLevelIntId = id => ouIdHelper.hasLevelPrefix(id) ? Number.isInteger(parseInt(ouIdHelper.removePrefix(id), 10)) : false;\n\nconst replaceNumericOuLevelWithUid = ouLevels => item => {\n  if (!isOuLevelIntId(item.id)) {\n    return item;\n  }\n\n  const ouIntId = parseInt(ouIdHelper.removePrefix(item.id), 10);\n  const ouUid = ouLevels.find(l => parseInt(l.level, 10) === ouIntId).id;\n  return Object.assign({}, item, {\n    id: ouIdHelper.addLevelPrefix(ouUid)\n  });\n};\n\nexport const convertOuLevelsToUids = (ouLevels, layout) => {\n  const ouDimension = layoutGetDimension(layout, DIMENSION_ID_ORGUNIT);\n  const hasNumericOuLevels = ouDimension && dimensionGetItems(ouDimension).some(item => isOuLevelIntId(item.id));\n\n  if (hasNumericOuLevels) {\n    const replaceNumericOuLevel = replaceNumericOuLevelWithUid(ouLevels);\n    const updatedOuItems = dimensionGetItems(ouDimension).map(replaceNumericOuLevel);\n    return layoutReplaceDimension(layout, DIMENSION_ID_ORGUNIT, updatedOuItems);\n  }\n\n  return layout;\n};\nexport const removeLastPathSegment = path => {\n  // if root path, then return unprocessed path\n  if (path.match(/\\//g).length === 1) {\n    return path;\n  }\n\n  return path.substr(0, path.lastIndexOf('/'));\n};\n/**\n * Get org unit path by ou id\n * @param id\n * @param metadata\n * @param parentGraphMap\n * @returns {*}\n */\n\nexport const getOuPath = (id, metadata, parentGraphMap) => {\n  if (metadata[id] && metadata[id].path) {\n    return metadata[id].path;\n  } // for root org units\n\n\n  if (parentGraphMap[id] === id || parentGraphMap[id] === '') {\n    return `/${id}`;\n  }\n\n  return parentGraphMap[id] ? `/${parentGraphMap[id]}/${id}` : undefined;\n};","import castArray from 'lodash-es/castArray';\nimport { DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, DIMENSION_ID_ASSIGNED_CATEGORIES, canDimensionBeAddedToAxis, defaultVisType } from '@dhis2/analytics';\nimport { getFilteredLayout, getInverseLayout, getRetransfer } from '../modules/layout';\nimport { getOptionsForUi } from '../modules/options';\nimport { getAdaptedUiByType, getUiFromVisualization } from '../modules/ui';\nexport const SET_UI = 'SET_UI';\nexport const SET_UI_FROM_VISUALIZATION = 'SET_UI_FROM_VISUALIZATION';\nexport const SET_UI_TYPE = 'SET_UI_TYPE';\nexport const SET_UI_OPTIONS = 'SET_UI_OPTIONS';\nexport const SET_UI_LAYOUT = 'SET_UI_LAYOUT';\nexport const ADD_UI_LAYOUT_DIMENSIONS = 'ADD_UI_LAYOUT_DIMENSIONS';\nexport const REMOVE_UI_LAYOUT_DIMENSIONS = 'REMOVE_UI_LAYOUT_DIMENSIONS';\nexport const SET_UI_ITEMS = 'SET_UI_ITEMS';\nexport const ADD_UI_ITEMS = 'ADD_UI_ITEMS';\nexport const REMOVE_UI_ITEMS = 'REMOVE_UI_ITEMS';\nexport const SET_UI_PARENT_GRAPH_MAP = 'SET_UI_PARENT_GRAPH_MAP';\nexport const ADD_UI_PARENT_GRAPH_MAP = 'ADD_UI_PARENT_GRAPH_MAP';\nexport const SET_UI_ACTIVE_MODAL_DIALOG = 'SET_UI_ACTIVE_MODAL_DIALOG';\nexport const SET_UI_YEAR_ON_YEAR_SERIES = 'SET_UI_YEAR_ON_YEAR_SERIES';\nexport const SET_UI_YEAR_ON_YEAR_CATEGORY = 'SET_UI_YEAR_ON_YEAR_CATEGORY';\nexport const CLEAR_UI = 'CLEAR_UI';\nexport const TOGGLE_UI_RIGHT_SIDEBAR_OPEN = 'TOGGLE_UI_RIGHT_SIDEBAR_OPEN';\nexport const SET_UI_RIGHT_SIDEBAR_OPEN = 'SET_UI_RIGHT_SIDEBAR_OPEN';\nexport const SET_UI_INTERPRETATION = 'SET_UI_INTERPRETATION';\nexport const CLEAR_UI_INTERPRETATION = 'CLEAR_UI_INTERPRETATION';\nexport const SET_AXES = 'SET_AXES';\nexport const DEFAULT_UI = {\n  type: defaultVisType,\n  options: getOptionsForUi(),\n  layout: {\n    columns: [DIMENSION_ID_DATA],\n    rows: [DIMENSION_ID_PERIOD],\n    filters: [DIMENSION_ID_ORGUNIT]\n  },\n  itemsByDimension: {\n    [DIMENSION_ID_ORGUNIT]: [],\n    [DIMENSION_ID_PERIOD]: []\n  },\n  yearOverYearSeries: [],\n  yearOverYearCategory: [],\n  parentGraphMap: {},\n  activeModalDialog: null,\n  rightSidebarOpen: false,\n  interpretation: {},\n  axes: null\n};\nexport const PRESELECTED_YEAR_OVER_YEAR_SERIES = ['THIS_YEAR', 'LAST_YEAR'];\nexport const PRESELECTED_YEAR_OVER_YEAR_CATEGORY = ['MONTHS_THIS_YEAR'];\n\nconst getPreselectedUi = options => {\n  const {\n    rootOrganisationUnit,\n    relativePeriod\n  } = options;\n  const rootOrganisationUnits = [];\n  const parentGraphMap = { ...DEFAULT_UI.parentGraphMap\n  };\n\n  if (rootOrganisationUnit && rootOrganisationUnit.id) {\n    rootOrganisationUnits.push(rootOrganisationUnit.id);\n    parentGraphMap[rootOrganisationUnit.id] = '';\n  }\n\n  return { ...DEFAULT_UI,\n    itemsByDimension: { ...DEFAULT_UI.itemsByDimension,\n      [DIMENSION_ID_ORGUNIT]: rootOrganisationUnits,\n      [DIMENSION_ID_PERIOD]: [relativePeriod]\n    },\n    yearOverYearSeries: PRESELECTED_YEAR_OVER_YEAR_SERIES,\n    yearOverYearCategory: PRESELECTED_YEAR_OVER_YEAR_CATEGORY,\n    parentGraphMap\n  };\n};\n\nexport default ((state = DEFAULT_UI, action) => {\n  switch (action.type) {\n    case SET_UI:\n      {\n        return { ...action.value\n        };\n      }\n\n    case SET_UI_FROM_VISUALIZATION:\n      {\n        return getAdaptedUiByType(getUiFromVisualization(action.value, state));\n      }\n\n    case SET_UI_TYPE:\n      {\n        return { ...state,\n          type: action.value\n        };\n      }\n\n    case SET_UI_OPTIONS:\n      {\n        return { ...state,\n          options: { ...state.options,\n            ...action.value\n          }\n        };\n      }\n\n    case SET_UI_LAYOUT:\n      {\n        return { ...state,\n          layout: { ...action.value\n          }\n        };\n      }\n    // action.value: transfer object (dimensionId:axisId) saying what to add where: { ou: 'rows' }\n    // Reducer takes care of swapping (retransfer) if dimension already exists in layout\n\n    case ADD_UI_LAYOUT_DIMENSIONS:\n      {\n        const transfers = { ...action.value,\n          ...getRetransfer(state.layout, action.value, state.type)\n        };\n        let newLayout = state.layout; // Add dimension ids to destination (axisId === null means remove from layout)\n\n        Object.entries(transfers).forEach(([dimensionId, {\n          axisId,\n          index\n        }]) => {\n          if (newLayout[axisId] && canDimensionBeAddedToAxis(state.type, newLayout[axisId], axisId)) {\n            // Filter out transferred dimension id (remove from source)\n            newLayout = getFilteredLayout(newLayout, [dimensionId]);\n\n            if (index === null || index === undefined) {\n              newLayout[axisId].push(dimensionId);\n            } else {\n              newLayout[axisId].splice(index, 0, dimensionId);\n            }\n          }\n        });\n        return { ...state,\n          layout: newLayout\n        };\n      }\n\n    case REMOVE_UI_LAYOUT_DIMENSIONS:\n      {\n        return { ...state,\n          layout: getFilteredLayout(state.layout, action.value)\n        };\n      }\n\n    case SET_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: itemIds\n          }\n        };\n      }\n\n    case ADD_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIds\n        } = action.value;\n        const currentItemIds = state.itemsByDimension[dimensionId] || [];\n        const dxItems = [...new Set([...currentItemIds, ...itemIds])];\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          }\n        };\n      }\n\n    case REMOVE_UI_ITEMS:\n      {\n        const {\n          dimensionId,\n          itemIdsToRemove\n        } = action.value;\n        const dxItems = (state.itemsByDimension[dimensionId] || []).filter(id => !itemIdsToRemove.includes(id));\n        return { ...state,\n          itemsByDimension: { ...state.itemsByDimension,\n            [dimensionId]: dxItems\n          }\n        };\n      }\n\n    case SET_UI_YEAR_ON_YEAR_SERIES:\n      {\n        return { ...state,\n          yearOverYearSeries: action.value || DEFAULT_UI.yearOverYearSeries\n        };\n      }\n\n    case SET_UI_YEAR_ON_YEAR_CATEGORY:\n      {\n        return { ...state,\n          yearOverYearCategory: action.value ? castArray(action.value) : DEFAULT_UI.yearOverYearCategory\n        };\n      }\n\n    case SET_UI_PARENT_GRAPH_MAP:\n      {\n        return { ...state,\n          parentGraphMap: action.value\n        };\n      }\n\n    case ADD_UI_PARENT_GRAPH_MAP:\n      {\n        return { ...state,\n          parentGraphMap: { ...state.parentGraphMap,\n            ...action.value\n          }\n        };\n      }\n\n    case SET_UI_ACTIVE_MODAL_DIALOG:\n      {\n        return { ...state,\n          activeModalDialog: action.value || DEFAULT_UI.activeModalDialog\n        };\n      }\n\n    case CLEAR_UI:\n      {\n        return getPreselectedUi(action.value);\n      }\n\n    case TOGGLE_UI_RIGHT_SIDEBAR_OPEN:\n      return { ...state,\n        rightSidebarOpen: !state.rightSidebarOpen\n      };\n\n    case SET_UI_RIGHT_SIDEBAR_OPEN:\n      return { ...state,\n        rightSidebarOpen: true\n      };\n\n    case SET_UI_INTERPRETATION:\n      return { ...state,\n        interpretation: action.value\n      };\n\n    case CLEAR_UI_INTERPRETATION:\n      return { ...state,\n        interpretation: DEFAULT_UI.interpretation\n      };\n\n    case SET_AXES:\n      return { ...state,\n        axes: action.value\n      };\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetUi = state => state.ui;\nexport const sGetUiType = state => sGetUi(state).type;\nexport const sGetUiOptions = state => sGetUi(state).options;\nexport const sGetUiLayout = state => sGetUi(state).layout;\nexport const sGetUiItems = state => sGetUi(state).itemsByDimension;\nexport const sGetUiYearOverYearSeries = state => sGetUi(state).yearOverYearSeries;\nexport const sGetUiYearOverYearCategory = state => sGetUi(state).yearOverYearCategory;\nexport const sGetUiParentGraphMap = state => sGetUi(state).parentGraphMap;\nexport const sGetUiActiveModalDialog = state => sGetUi(state).activeModalDialog;\nexport const sGetUiRightSidebarOpen = state => sGetUi(state).rightSidebarOpen;\nexport const sGetUiInterpretation = state => sGetUi(state).interpretation;\nexport const sGetAxes = state => sGetUi(state).axes; // Selectors level 2\n\nexport const getAxisIdByDimensionId = (state, dimensionId) => (getInverseLayout(sGetUiLayout(state)) || {})[dimensionId];\nexport const sGetUiItemsByDimension = (state, dimension) => sGetUiItems(state)[dimension] || DEFAULT_UI.itemsByDimension[dimension];\nexport const sGetDimensionIdsFromLayout = state => Object.values(sGetUiLayout(state)).reduce((ids, axisDimensionIds) => ids.concat(axisDimensionIds), []);\nexport const sLayoutHasDimension = (state, dimension) => sGetDimensionIdsFromLayout(state).includes(dimension);\nexport const sLayoutHasAssignedCategories = state => sLayoutHasDimension(state, DIMENSION_ID_ASSIGNED_CATEGORIES);\nexport const sGetAxisSetup = state => {\n  const columns = sGetUiLayout(state).columns;\n  const items = sGetUiItems(state);\n  const axes = sGetAxes(state) || {};\n  return Array.isArray(items[columns[0]]) && items[columns[0]].length ? items[columns[0]].map(id => ({\n    id,\n    axis: id in axes ? axes[id] : 0\n  })) : [];\n};","import { DEFAULT_UI } from '../reducers/ui';\nexport const OPTIONAL_AXES_DIMENSIONAL_ITEM = 'dimensionalItem';\nexport const OPTIONAL_AXES_AXIS = 'axis';\nexport const getIdAxisMap = optionalAxes => {\n  if (!(Array.isArray(optionalAxes) && optionalAxes.length)) {\n    return DEFAULT_UI.axes;\n  }\n\n  return optionalAxes.filter(item => typeof item[OPTIONAL_AXES_AXIS] === 'number').reduce((map, item) => {\n    map[item[OPTIONAL_AXES_DIMENSIONAL_ITEM]] = item[OPTIONAL_AXES_AXIS];\n    return map;\n  }, {});\n};","import { DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, layoutGetAxisIdDimensionIdsObject, layoutGetDimensionIdItemIdsObject, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE, defaultVisType, isYearOverYear } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout';\nimport { getOptionsFromVisualization } from './options';\nimport { BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { defaultLayoutAdapter, pieLayoutAdapter, yearOverYearLayoutAdapter, singleValueLayoutAdapter } from './layoutAdapters';\nimport { removeLastPathSegment } from './orgUnit';\nimport { getIdAxisMap } from './optionalAxes'; // Transform from backend model to store.ui format\n\nexport const getUiFromVisualization = (vis, currentState = {}) => ({ ...currentState,\n  type: vis.type || defaultVisType,\n  options: getOptionsFromVisualization(vis),\n  layout: layoutGetAxisIdDimensionIdsObject(vis),\n  itemsByDimension: layoutGetDimensionIdItemIdsObject(vis),\n  parentGraphMap: vis.parentGraphMap || getParentGraphMapFromVisualization(vis) || currentState.parentGraphMap,\n  yearOverYearSeries: isYearOverYear(vis.type) && vis[BASE_FIELD_YEARLY_SERIES] ? vis[BASE_FIELD_YEARLY_SERIES] : currentState.yearOverYearSeries,\n  yearOverYearCategory: isYearOverYear(vis.type) ? vis.rows[0].items.map(item => item.id) : currentState.yearOverYearCategory,\n  axes: getIdAxisMap(vis.optionalAxes)\n}); // Transform from store.ui to default format\n\nexport const defaultUiAdapter = ui => ({ ...ui,\n  layout: defaultLayoutAdapter(ui.layout)\n}); // Transform from store.ui to pie format\n\nexport const pieUiAdapter = ui => ({ ...ui,\n  layout: pieLayoutAdapter(ui.layout)\n}); // Transform from store.ui to year on year format\n\nexport const yearOverYearUiAdapter = ui => {\n  const state = Object.assign({}, ui);\n  const items = Object.assign({}, state.itemsByDimension);\n  delete items[DIMENSION_ID_PERIOD];\n  return { ...state,\n    layout: yearOverYearLayoutAdapter(ui.layout),\n    itemsByDimension: items\n  };\n};\nexport const singleValueUiAdapter = ui => ({ ...ui,\n  layout: singleValueLayoutAdapter(ui.layout)\n});\nexport const getAdaptedUiByType = ui => {\n  switch (ui.type) {\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      {\n        return yearOverYearUiAdapter(ui);\n      }\n\n    case VIS_TYPE_PIE:\n      {\n        return pieUiAdapter(ui);\n      }\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      {\n        return singleValueUiAdapter(ui);\n      }\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return ui;\n\n    default:\n      return defaultUiAdapter(ui);\n  }\n};\nexport const getParentGraphMapFromVisualization = vis => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(vis);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n\n  if (!ouAxis) {\n    return {};\n  }\n\n  const parentGraphMap = {};\n  const ouDimension = vis[ouAxis].find(dimension => dimension.dimension === DIMENSION_ID_ORGUNIT);\n  ouDimension.items.filter(orgUnit => orgUnit.path).forEach(orgUnit => {\n    if ('/' + orgUnit.id === orgUnit.path) {\n      // root org unit case\n      parentGraphMap[orgUnit.id] = '';\n    } else {\n      const path = removeLastPathSegment(orgUnit.path);\n      parentGraphMap[orgUnit.id] = path[0] === '/' ? path.substr(1) : path;\n    }\n  });\n  return parentGraphMap;\n};\nexport const mergeUiMaps = (destinationMap, sourceMap, propName) => {\n  Object.keys(sourceMap || {}).forEach(key => {\n    if (!(key in destinationMap)) {\n      destinationMap[key] = {};\n    }\n\n    destinationMap[key][propName] = sourceMap[key];\n  });\n};","import pick from 'lodash-es/pick';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, dimensionCreate, layoutGetDimensionItems, layoutReplaceDimension, getPredefinedDimensionProp, DIMENSION_PROP_NO_ITEMS } from '@dhis2/analytics';\nimport options from './options';\nimport './layout';\nimport { BASE_FIELD_TYPE, BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { pieLayoutAdapter, singleValueLayoutAdapter } from './layoutAdapters';\nimport { mergeUiMaps } from './ui';\nimport { OPTIONAL_AXES_DIMENSIONAL_ITEM } from './optionalAxes';\n\nconst hasItems = (object, id) => Array.isArray(object[id]) && object[id].length;\n\nexport const getAxesFromUi = ui => Object.entries(ui.layout).reduce((layout, [axisId, dimensionIds]) => ({ ...layout,\n  [axisId]: dimensionIds.map(dimensionId => hasItems(ui.itemsByDimension, dimensionId) || getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS) ? dimensionCreate(dimensionId, ui.itemsByDimension[dimensionId]) : null).filter(dim => dim !== null)\n}), {});\nexport const getOptionsFromUi = ui => {\n  const optionsFromUi = pick(ui.options, Object.keys(options));\n\n  if (ui.options.targetLine === false) {\n    optionsFromUi.targetLineLabel = options.targetLineLabel.defaultValue;\n    optionsFromUi.targetLineValue = options.targetLineValue.defaultValue;\n  }\n\n  if (ui.options.baseLine === false) {\n    optionsFromUi.baseLineLabel = options.baseLineLabel.defaultValue;\n    optionsFromUi.baseLineValue = options.baseLineValue.defaultValue;\n  } // approvalLevel is stored as an object { id, level, displayName }\n  // only pass approvalLevel id\n\n\n  if (optionsFromUi.approvalLevel !== options.approvalLevel.defaultValue) {\n    optionsFromUi.approvalLevel = optionsFromUi.approvalLevel.id;\n  } // nested options under reportingParams\n\n\n  optionsFromUi.reportingParams = {};\n  ['organisationUnit', 'reportingPeriod', 'parentOrganisationUnit', 'grandParentOrganisationUnit'].forEach(option => {\n    optionsFromUi.reportingParams[option] = optionsFromUi[option];\n    delete optionsFromUi[option];\n  }) // cast option values to Number for some options\n  ;\n  ['baseLineValue', 'targetLineValue', 'sortOrder', 'topLimit', 'rangeAxisMinValue', 'rangeAxisMaxValue'].forEach(option => {\n    if (Object.prototype.hasOwnProperty.call(optionsFromUi, option)) {\n      if (optionsFromUi[option] !== undefined) {\n        optionsFromUi[option] = Number(optionsFromUi[option]);\n      }\n    }\n  });\n  return optionsFromUi;\n}; // expand to support series types later\n\nexport const getOptionalAxesFromUi = ui => {\n  const optionalAxes = {}; // axes\n\n  mergeUiMaps(optionalAxes, ui.axes, 'axis');\n  return Object.entries(optionalAxes).reduce((arr, [key, value]) => {\n    value[OPTIONAL_AXES_DIMENSIONAL_ITEM] = key;\n    arr.push(value);\n    return arr;\n  }, []);\n};\nexport const getSingleValueCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...singleValueLayoutAdapter(action.value.layout)\n    }\n  };\n  const axesFromUi = getAxesFromUi(ui); // only save the first dx item\n\n  const dxItems = layoutGetDimensionItems(axesFromUi, DIMENSION_ID_DATA);\n  const singleValueAxesFromUi = layoutReplaceDimension(axesFromUi, DIMENSION_ID_DATA, [dxItems[0]]);\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...singleValueAxesFromUi,\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getPieCurrentFromUi = (state, action) => {\n  const ui = { ...action.value,\n    layout: { ...pieLayoutAdapter(action.value.layout)\n    }\n  };\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    ...getAxesFromUi(ui),\n    ...getOptionsFromUi(ui)\n  };\n};\nexport const getYearOverYearCurrentFromUi = (state, action) => {\n  const ui = action.value;\n  const dxItem = ui.itemsByDimension[DIMENSION_ID_DATA] ? [ui.itemsByDimension[DIMENSION_ID_DATA][0]] : [];\n  return { ...state,\n    [BASE_FIELD_TYPE]: ui.type,\n    [AXIS_ID_COLUMNS]: [dimensionCreate(DIMENSION_ID_DATA, dxItem)],\n    [AXIS_ID_ROWS]: [dimensionCreate(DIMENSION_ID_PERIOD, ui.yearOverYearCategory)],\n    [AXIS_ID_FILTERS]: getAxesFromUi(ui).filters.filter(f => ![DIMENSION_ID_DATA, DIMENSION_ID_PERIOD].includes(f.dimension)),\n    [[BASE_FIELD_YEARLY_SERIES]]: ui.yearOverYearSeries,\n    ...getOptionsFromUi(ui)\n  };\n};","import { VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE } from '@dhis2/analytics';\nimport { getAxesFromUi, getOptionsFromUi, getPieCurrentFromUi, getYearOverYearCurrentFromUi, getSingleValueCurrentFromUi, getOptionalAxesFromUi } from '../modules/current';\nimport { BASE_FIELD_TYPE } from '../modules/fields/baseFields';\nexport const SET_CURRENT = 'SET_CURRENT';\nexport const SET_CURRENT_FROM_UI = 'SET_CURRENT_FROM_UI';\nexport const CLEAR_CURRENT = 'CLEAR_CURRENT';\nexport const DEFAULT_CURRENT = null;\n\nconst getDefaultFromUi = (state, action) => {\n  const axesFromUi = getAxesFromUi(action.value);\n  const optionsFromUi = getOptionsFromUi(action.value);\n  const optionalAxes = getOptionalAxesFromUi(action.value);\n  return { ...state,\n    [BASE_FIELD_TYPE]: action.value.type,\n    ...axesFromUi,\n    ...optionsFromUi,\n    optionalAxes\n  };\n};\n\nexport default ((state = DEFAULT_CURRENT, action) => {\n  switch (action.type) {\n    case SET_CURRENT:\n      {\n        return action.value;\n      }\n\n    case SET_CURRENT_FROM_UI:\n      {\n        switch (action.value.type) {\n          case VIS_TYPE_PIE:\n            return getPieCurrentFromUi(state, action);\n\n          case VIS_TYPE_SINGLE_VALUE:\n          case VIS_TYPE_GAUGE:\n            return getSingleValueCurrentFromUi(state, action);\n\n          case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n          case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n            return getYearOverYearCurrentFromUi(state, action);\n\n          default:\n            {\n              return getDefaultFromUi(state, action);\n            }\n        }\n      }\n\n    case CLEAR_CURRENT:\n      return DEFAULT_CURRENT;\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetCurrent = state => state.current;\nexport const sGetCurrentFromUi = state => {\n  const ui = state.ui;\n\n  switch (ui.type) {\n    case VIS_TYPE_PIE:\n      return getPieCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      return getSingleValueCurrentFromUi(state, {\n        value: ui\n      });\n\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return getYearOverYearCurrentFromUi(state, {\n        value: ui\n      });\n\n    default:\n      {\n        return getDefaultFromUi(state, {\n          value: ui\n        });\n      }\n  }\n};","import { getPredefinedDimensions } from '@dhis2/analytics';\nexport const SET_DIMENSIONS = 'SET_DIMENSIONS';\nexport const SET_SELECTED_DIMENSION = 'SET_SELECTED_DIMENSION';\nconst DEFAULT_DIMENSIONS = getPredefinedDimensions();\nexport default ((state = DEFAULT_DIMENSIONS, action) => {\n  switch (action.type) {\n    case SET_DIMENSIONS:\n      {\n        return { ...DEFAULT_DIMENSIONS,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\n/**\n * Selector which returns dimensions from the state object\n * If state.dimensions is null, then the dimensions api request\n * has not yet completed. If state.dimensions is an empty object\n * then the dimensions api request is complete, and there are no\n * dimensions\n *\n * @function\n * @param {Object} state The current state\n * @returns {Array}\n */\n\nexport const sGetDimensions = state => state.dimensions;","export const SET_RECOMMENDED_IDS = 'SET_RECOMMENDED_IDS';\nexport const DEFAULT_RECOMMENDED_IDS = [];\nexport default ((state = DEFAULT_RECOMMENDED_IDS, action) => {\n  switch (action.type) {\n    case SET_RECOMMENDED_IDS:\n      {\n        return action.value || DEFAULT_RECOMMENDED_IDS;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetRecommendedIds = state => state.recommendedIds;","export const ADD_METADATA = 'ADD_METADATA';\nexport const DEFAULT_METADATA = {};\nexport default ((state = DEFAULT_METADATA, action) => {\n  switch (action.type) {\n    case ADD_METADATA:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetMetadata = state => state.metadata;","export const SET_SETTINGS = 'SET_SETTINGS';\nexport const ADD_SETTINGS = 'ADD_SETTINGS';\nexport const DEFAULT_SETTINGS = {\n  keyDateFormat: 'yyyy-MM-dd',\n  keyAnalysisRelativePeriod: 'LAST_12_MONTHS',\n  keyAnalysisDigitGroupSeparator: 'SPACE',\n  keyIgnoreAnalyticsApprovalYearThreshold: -1,\n  displayNameProperty: 'displayName',\n  uiLocale: 'en',\n  rootOrganisationUnit: {}\n};\nexport default ((state = DEFAULT_SETTINGS, action) => {\n  switch (action.type) {\n    case SET_SETTINGS:\n      {\n        return Object.assign({}, action.value);\n      }\n\n    case ADD_SETTINGS:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetSettings = state => state.settings;\nexport const sGetSettingsDisplayNameProperty = state => sGetSettings(state).displayNameProperty;\nexport const sGetRootOrgUnit = state => sGetSettings(state).rootOrganisationUnit;\nexport const sGetRelativePeriod = state => sGetSettings(state).keyAnalysisRelativePeriod;\nexport const sGetUiLocale = state => sGetSettings(state).uiLocale;","export const RECEIVED_USER = 'RECEIVED_USER';\nexport const SET_USER_AUTHORITY = 'SET_USER_AUTHORITY';\nexport const DEFAULT_USER = {\n  id: '',\n  username: '',\n  uiLocale: '',\n  isSuperuser: false,\n  authorities: {}\n};\nexport default ((state = DEFAULT_USER, action) => {\n  switch (action.type) {\n    case RECEIVED_USER:\n      {\n        return fromD2ToUserObj(action.value);\n      }\n\n    case SET_USER_AUTHORITY:\n      {\n        return { ...state,\n          authorities: { ...state.authorities,\n            ...action.value\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n});\n\nfunction fromD2ToUserObj(d2Object) {\n  return {\n    id: d2Object.id,\n    username: d2Object.username,\n    uiLocale: d2Object.settings.keyUiLocale,\n    isSuperuser: d2Object.authorities.has('ALL')\n  };\n} // Selectors\n\n\nexport const sGetUser = state => state.user;\nexport const sGetUserId = state => sGetUser(state).id;\nexport const sGetUsername = state => sGetUser(state).username;\nexport const sGetIsSuperuser = state => sGetUser(state).isSuperuser;\nexport const sGetUiLocale = state => sGetUser(state).uiLocale;\nexport const sGetUserAuthorities = state => sGetUser(state).authorities;","import { getAllFieldObjectsByType, extractName, markExcluded, moveExcludedToEnd } from './baseFields';\nimport { extendFields } from './nestedFields';\nexport { getAllFieldObjectsByType };\nexport const getOptionsByType = type => getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.option === true);\nexport const getIncludedByType = type => getAllFieldObjectsByType(type).filter(fieldObj => !fieldObj.excluded);\nexport const getExcludedByType = type => getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.excluded === true);\nexport const getFieldsStringByType = type => getAllFieldObjectsByType(type).map(markExcluded).map(extractName).sort().reduce(moveExcludedToEnd, null).map(extendFields).join(',');","export const RECEIVED_SNACKBAR_MESSAGE = 'RECEIVED_SNACKBAR_MESSAGE';\nexport const CLEAR_SNACKBAR = 'CLEAR_SNACKBAR';\nexport const DEFAULT_SNACKBAR = {\n  message: null,\n  duration: null\n};\nexport default ((state = DEFAULT_SNACKBAR, action) => {\n  switch (action.type) {\n    case RECEIVED_SNACKBAR_MESSAGE:\n      {\n        return { ...state,\n          ...action.value\n        };\n      }\n\n    case CLEAR_SNACKBAR:\n      {\n        return DEFAULT_SNACKBAR;\n      }\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetSnackbar = state => state.snackbar;","export const SET_LOAD_ERROR = 'SET_LOAD_ERROR';\nexport const CLEAR_LOAD_ERROR = 'CLEAR_LOAD_ERROR';\nexport const SET_LOADING = 'SET_LOADING';\nexport const SET_PLUGIN_LOADING = 'SET_PLUGIN_LOADING';\nexport const DEFAULT_LOADING = {\n  isLoading: false,\n  loadingError: null,\n  isPluginLoading: true\n};\nexport default ((state = DEFAULT_LOADING, action) => {\n  switch (action.type) {\n    case SET_LOAD_ERROR:\n      {\n        return { ...state,\n          loadingError: action.value\n        };\n      }\n\n    case CLEAR_LOAD_ERROR:\n      return { ...state,\n        loadingError: DEFAULT_LOADING.loadingError\n      };\n\n    case SET_LOADING:\n      return { ...state,\n        isLoading: action.value\n      };\n\n    case SET_PLUGIN_LOADING:\n      return { ...state,\n        isPluginLoading: action.value\n      };\n\n    default:\n      return state;\n  }\n}); // Selectors\n\nexport const sGetLoadError = state => state.loader.loadingError;\nexport const sGetIsLoading = state => state.loader.isLoading;\nexport const sGetIsPluginLoading = state => state.loader.isPluginLoading;","export const SET_CHART = 'SET_CHART';\nexport const DEFAULT_CHART = null;\nexport default ((state = DEFAULT_CHART, action) => {\n  switch (action.type) {\n    case SET_CHART:\n      {\n        return action.value;\n      }\n\n    default:\n      return state;\n  }\n});\nexport const sGetChart = state => state.chart;","import { combineReducers } from 'redux';\nimport visualization, * as fromVisualization from './visualization';\nimport current, * as fromCurrent from './current';\nimport dimensions, * as fromDimensions from './dimensions';\nimport recommendedIds, * as fromRecommendedIds from './recommendedIds';\nimport ui, * as fromUi from './ui';\nimport metadata, * as fromMetadata from './metadata';\nimport settings, * as fromSettings from './settings';\nimport user, * as fromUser from './user';\nimport snackbar, * as fromSnackbar from './snackbar';\nimport loader, * as fromLoader from './loader';\nimport chart, * as fromChart from './chart'; // Reducers\n\nexport default combineReducers({\n  visualization,\n  current,\n  dimensions,\n  recommendedIds,\n  ui,\n  metadata,\n  settings,\n  user,\n  snackbar,\n  loader,\n  chart\n}); // Selectors\n\nexport { fromVisualization, fromCurrent, fromDimensions, fromRecommendedIds, fromUi, fromMetadata, fromSettings, fromUser, fromSnackbar, fromLoader, fromChart };\nexport const sGetAxisSetupItems = state => fromUi.sGetAxisSetup(state).map(obj => {\n  const metadata = fromMetadata.sGetMetadata(state)[obj.id];\n  return { ...obj,\n    name: metadata ? metadata.name : ''\n  };\n});","import { createStore, applyMiddleware, compose } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport reducer from './reducers';\n\nconst configureStore = middleware => {\n  // Enable Redux devtools if extension is installed instead of redux-logger\n  // const composeEnhancers =\n  //     window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const composeEnhancers = typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: 'data-visualizer-app'\n  }) : compose;\n\n  if (!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV !== 'production') {\n    middleware.push(createLogger());\n  }\n\n  return createStore(reducer, composeEnhancers(applyMiddleware(...middleware)));\n};\n\nexport default configureStore;","import { ADD_METADATA } from '../reducers/metadata';\nexport const acAddMetadata = value => ({\n  type: ADD_METADATA,\n  value\n});","import { acAddMetadata } from '../actions/metadata';\nexport default (({\n  dispatch\n}) => next => action => {\n  typeof action.metadata === 'object' && !Array.isArray(action.metadata) && dispatch(acAddMetadata(action.metadata));\n  next(action);\n});","import { SET_UI, CLEAR_UI, SET_UI_FROM_VISUALIZATION, SET_UI_TYPE, SET_UI_OPTIONS, SET_UI_LAYOUT, ADD_UI_LAYOUT_DIMENSIONS, REMOVE_UI_LAYOUT_DIMENSIONS, SET_UI_ITEMS, ADD_UI_ITEMS, REMOVE_UI_ITEMS, ADD_UI_PARENT_GRAPH_MAP, SET_UI_PARENT_GRAPH_MAP, SET_UI_ACTIVE_MODAL_DIALOG, SET_UI_YEAR_ON_YEAR_SERIES, SET_UI_YEAR_ON_YEAR_CATEGORY, TOGGLE_UI_RIGHT_SIDEBAR_OPEN, SET_UI_RIGHT_SIDEBAR_OPEN, SET_UI_INTERPRETATION, CLEAR_UI_INTERPRETATION, SET_AXES } from '../reducers/ui';\nexport const acSetUi = value => ({\n  type: SET_UI,\n  value\n});\nexport const acClear = value => ({\n  type: CLEAR_UI,\n  value\n});\nexport const acSetUiFromVisualization = value => ({\n  type: SET_UI_FROM_VISUALIZATION,\n  value\n});\nexport const acSetUiType = value => ({\n  type: SET_UI_TYPE,\n  value\n});\nexport const acSetUiOptions = value => ({\n  type: SET_UI_OPTIONS,\n  value\n});\nexport const acSetUiLayout = value => ({\n  type: SET_UI_LAYOUT,\n  value\n});\nexport const acAddUiLayoutDimensions = value => ({\n  type: ADD_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acRemoveUiLayoutDimensions = value => ({\n  type: REMOVE_UI_LAYOUT_DIMENSIONS,\n  value\n});\nexport const acSetUiItems = value => ({\n  type: SET_UI_ITEMS,\n  value\n});\nexport const acAddUiItems = value => ({\n  type: ADD_UI_ITEMS,\n  value\n});\nexport const acRemoveUiItems = value => ({\n  type: REMOVE_UI_ITEMS,\n  value\n});\nexport const acSetUiYearOverYearSeries = value => ({\n  type: SET_UI_YEAR_ON_YEAR_SERIES,\n  value\n});\nexport const acSetUiYearOverYearCategory = value => ({\n  type: SET_UI_YEAR_ON_YEAR_CATEGORY,\n  value\n});\nexport const acAddParentGraphMap = value => ({\n  type: ADD_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetParentGraphMap = value => ({\n  type: SET_UI_PARENT_GRAPH_MAP,\n  value\n});\nexport const acSetUiActiveModalDialog = value => ({\n  type: SET_UI_ACTIVE_MODAL_DIALOG,\n  value\n});\nexport const acToggleUiRightSidebarOpen = () => ({\n  type: TOGGLE_UI_RIGHT_SIDEBAR_OPEN\n});\nexport const acSetUiRightSidebarOpen = () => ({\n  type: SET_UI_RIGHT_SIDEBAR_OPEN\n});\nexport const acSetUiInterpretation = value => ({\n  type: SET_UI_INTERPRETATION,\n  value\n});\nexport const acClearUiInterpretation = () => ({\n  type: CLEAR_UI_INTERPRETATION\n});\nexport const acSetAxes = value => ({\n  type: SET_AXES,\n  value\n});","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport { canDimensionBeAddedToAxis, getPredefinedDimensionProp, DIMENSION_PROP_NO_ITEMS } from '@dhis2/analytics';\nimport { sGetUiLayout, sGetUiItems, sGetUiType } from '../reducers/ui';\nimport { acAddUiLayoutDimensions, acSetUiActiveModalDialog, acSetUiLayout } from '../actions/ui';\nimport { SOURCE_DIMENSIONS } from '../modules/layout';\n\nclass DndContext extends Component {\n  rearrangeLayoutDimensions = ({\n    sourceAxisId,\n    sourceIndex,\n    destinationAxisId,\n    destinationIndex\n  }) => {\n    const layout = this.props.layout;\n    const sourceList = Array.from(layout[sourceAxisId]);\n    const [moved] = sourceList.splice(sourceIndex, 1);\n\n    if (sourceAxisId === destinationAxisId) {\n      sourceList.splice(destinationIndex, 0, moved);\n      this.props.onReorderDimensions({ ...layout,\n        [sourceAxisId]: sourceList\n      });\n    } else {\n      if (canDimensionBeAddedToAxis(this.props.type, layout[destinationAxisId], destinationAxisId)) {\n        this.props.onAddDimensions({\n          [moved]: {\n            axisId: destinationAxisId,\n            index: destinationIndex\n          }\n        });\n      }\n    }\n  };\n  addDimensionToLayout = ({\n    axisId,\n    index,\n    dimensionId\n  }) => {\n    const {\n      layout,\n      type\n    } = this.props;\n\n    if (!canDimensionBeAddedToAxis(type, layout[axisId], axisId)) {\n      return;\n    }\n\n    this.props.onAddDimensions({\n      [dimensionId]: {\n        axisId,\n        index\n      }\n    });\n    const items = this.props.itemsByDimension[dimensionId];\n    const hasNoItems = Boolean(!items || !items.length);\n\n    if (hasNoItems && !getPredefinedDimensionProp(dimensionId, DIMENSION_PROP_NO_ITEMS)) {\n      this.props.onDropWithoutItems(dimensionId);\n    }\n  };\n  onDragEnd = result => {\n    const {\n      source,\n      destination,\n      draggableId\n    } = result;\n\n    if (!destination) {\n      return;\n    }\n\n    if (source.droppableId === SOURCE_DIMENSIONS) {\n      this.addDimensionToLayout({\n        axisId: destination.droppableId,\n        index: destination.index,\n        dimensionId: draggableId\n      });\n    } else {\n      this.rearrangeLayoutDimensions({\n        sourceAxisId: source.droppableId,\n        sourceIndex: source.index,\n        destinationAxisId: destination.droppableId,\n        destinationIndex: destination.index\n      });\n    }\n  };\n\n  render() {\n    return <DragDropContext onDragEnd={this.onDragEnd}>\n                {this.props.children}\n            </DragDropContext>;\n  }\n\n}\n\nDndContext.propTypes = {\n  children: PropTypes.node,\n  itemsByDimension: PropTypes.object,\n  layout: PropTypes.object,\n  type: PropTypes.string,\n  onAddDimensions: PropTypes.func,\n  onDropWithoutItems: PropTypes.func,\n  onReorderDimensions: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  layout: sGetUiLayout(state),\n  type: sGetUiType(state),\n  itemsByDimension: sGetUiItems(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onAddDimensions: map => dispatch(acAddUiLayoutDimensions(map)),\n  onDropWithoutItems: dimensionId => dispatch(acSetUiActiveModalDialog(dimensionId)),\n  onReorderDimensions: layout => dispatch(acSetUiLayout(layout))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DndContext);","import { RECEIVED_SNACKBAR_MESSAGE, CLEAR_SNACKBAR } from '../reducers/snackbar';\nexport const acReceivedSnackbarMessage = value => ({\n  type: RECEIVED_SNACKBAR_MESSAGE,\n  value\n});\nexport const acClearSnackbar = () => ({\n  type: CLEAR_SNACKBAR\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { AlertBar } from '@dhis2/ui-core';\nimport styles from './styles/Snackbar.module.css';\nimport { sGetSnackbar } from '../../reducers/snackbar';\nimport { acClearSnackbar } from '../../actions/snackbar';\nexport const VARIANT_ERROR = 'error';\nexport const VARIANT_SUCCESS = 'success';\nexport const VARIANT_WARNING = 'warning';\nexport const Snackbar = ({\n  snackbar,\n  onClose\n}) => {\n  const {\n    variant,\n    message,\n    duration\n  } = snackbar;\n  return message && <div className={styles.container}>\n                <AlertBar duration={duration} critical={variant === VARIANT_ERROR} success={variant === VARIANT_SUCCESS} warning={variant === VARIANT_WARNING} permanent={variant === VARIANT_ERROR || variant === VARIANT_WARNING} onHidden={onClose}>\n                    {message}\n                </AlertBar>\n            </div>;\n};\nSnackbar.propTypes = {\n  snackbar: PropTypes.object,\n  onClose: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  snackbar: sGetSnackbar(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClose: () => dispatch(acClearSnackbar())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Snackbar);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui-core';\n\nconst UpdateButton = ({\n  onClick,\n  ...props\n}) => {\n  return <Button data-test=\"update-button\" {...props} onClick={onClick} type=\"button\" primary>\n            {i18n.t('Update')}\n        </Button>;\n};\n\nUpdateButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default UpdateButton;","import { getInstance } from 'd2';\nexport const apiDownloadImage = async (type, formData) => {\n  const d2 = await getInstance();\n  const api = d2.Api.getApi();\n  const url = `${api.baseUrl}/svg.${type}`;\n  return api.fetch(url, {\n    method: 'POST',\n    body: formData,\n    headers: new Headers(api.defaultHeaders)\n  }).then(res => res.blob());\n};\n\nconst addCommonParameters = (req, current, options) => {\n  req = req.withSkipRounding(current.skipRounding).withAggregationType(current.aggregationType).withMeasureCriteria(current.measureCriteria).withParameters({\n    completedOnly: current.completedOnly\n  }); //        .withUserOrgUnit(?) TODO\n\n  if (current.displayProperty) {\n    req = req.withDisplayProperty(current.displayProperty);\n  }\n\n  if (current.approvalLevel) {\n    req = req.withApprovalLevel(current.approvalLevel);\n  }\n\n  if (options.relativePeriodDate) {\n    req = req.withRelativePeriodDate(options.relativePeriodDate);\n  }\n\n  return req;\n};\n\nexport const apiDownloadTable = async ({\n  current,\n  format,\n  options,\n  rows,\n  columns\n}) => {\n  const d2 = await getInstance();\n  const api = d2.Api.getApi();\n  let req = new d2.analytics.request().fromModel(current).withFormat(format).withTableLayout().withRows(rows.join(';')).withColumns(columns.join(';'));\n  req = addCommonParameters(req, current, options);\n\n  if (current.hideEmptyColumns) {\n    req = req.withHideEmptyColumns();\n  }\n\n  if (current.hideEmptyRows) {\n    req = req.withHideEmptyRows();\n  }\n\n  if (current.showHierarchy) {\n    req = req.withShowHierarchy();\n  }\n\n  const url = new URL(`${api.baseUrl}/${req.buildUrl()}`, `${window.location.origin}${window.location.pathname}`);\n  Object.entries(req.buildQuery()).forEach(([key, value]) => url.searchParams.append(key, value));\n  return url;\n};\nexport const apiDownloadData = async ({\n  current,\n  format,\n  options,\n  idScheme,\n  path\n}) => {\n  const d2 = await getInstance();\n  const api = d2.Api.getApi();\n  let req = new d2.analytics.request().fromModel(current, path === 'dataValueSet').withFormat(format).withShowHierarchy(current.showHierarchy).withHierarchyMeta(current.showHierarchy).withIncludeMetadataDetails(true).withIncludeNumDen(); //.withApprovalLevel(current.?) TODO\n\n  req = addCommonParameters(req, current, options);\n\n  if (path) {\n    req = req.withPath(path);\n  }\n\n  if (idScheme) {\n    req = req.withOutputIdScheme(idScheme);\n  }\n\n  const url = new URL(`${api.baseUrl}/${req.buildUrl()}`, `${window.location.origin}${window.location.pathname}`);\n  Object.entries(req.buildQuery()).forEach(([key, value]) => url.searchParams.append(key, value));\n  return url;\n};","import PropTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './styles/MenuButton.module.css';\n\nconst MenuButton = ({\n  children,\n  dataTest,\n  disabled,\n  name,\n  onBlur,\n  onClick,\n  onFocus\n}) => <button className={styles.menuButton} data-test={dataTest} disabled={disabled} name={name} onBlur={onBlur} onClick={onClick} onFocus={onFocus}>\n        {children}\n    </button>;\n\nMenuButton.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default MenuButton;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MoreHorizontalIcon = ({\n  style\n}) => {\n  return <svg style={{ ...style\n  }} xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"24\" viewBox=\"0 0 24 24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n        </svg>;\n};\n\nMoreHorizontalIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default MoreHorizontalIcon;","import React, { useState, createRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport ImageIcon from '@material-ui/icons/Image';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport ListIcon from '@material-ui/icons/List';\nimport ListAltIcon from '@material-ui/icons/ListAlt';\nimport { Menu, MenuItem, Divider, Popper, colors } from '@dhis2/ui-core';\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport { sGetUiType, sGetUiLayout, sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetChart } from '../../reducers/chart';\nimport { apiDownloadImage, apiDownloadData, apiDownloadTable } from '../../api/analytics';\nimport MenuButton from '../MenuButton/MenuButton';\nimport MoreHorizontalIcon from '../../assets/MoreHorizontalIcon';\nimport styles from './styles/DownloadMenu.module.css';\n\nconst DenseMenuItem = ({\n  Icon,\n  children,\n  ...rest\n}) => <MenuItem dense icon={Icon && <Icon style={{\n  color: colors.grey600\n}} />} {...rest}>\n        {children}\n    </MenuItem>;\n\nDenseMenuItem.propTypes = {\n  Icon: PropTypes.elementType,\n  children: PropTypes.element\n};\nexport const DownloadMenu = ({\n  current,\n  rows,\n  columns,\n  chart,\n  relativePeriodDate,\n  visType\n}) => {\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n\n  const toggleMenu = () => setDialogIsOpen(!dialogIsOpen);\n\n  const downloadImage = format => async () => {\n    const formData = new URLSearchParams();\n    formData.append('filename', current.name);\n\n    if (chart) {\n      formData.append('svg', chart);\n    }\n\n    const blob = await apiDownloadImage(format, formData);\n    const url = URL.createObjectURL(blob);\n    toggleMenu();\n    window.open(url, '_blank');\n  };\n\n  const downloadData = (format, idScheme, path) => async () => {\n    const url = await apiDownloadData({\n      current,\n      format,\n      options: {\n        relativePeriodDate\n      },\n      idScheme,\n      path\n    });\n    toggleMenu();\n    window.open(url, format.match(/(xls|csv)/) ? '_top' : '_blank');\n  };\n\n  const downloadTable = format => async () => {\n    const url = await apiDownloadTable({\n      current,\n      format,\n      options: {\n        relativePeriodDate\n      },\n      rows,\n      columns\n    });\n    toggleMenu();\n    window.open(url, format === 'html' ? '_blank' : '_top');\n  };\n\n  const graphicsMenuSection = () => <>\n            <div className={styles.menuSectionTitle}>{i18n.t('Graphics')}</div>\n            <DenseMenuItem Icon={ImageIcon} label={i18n.t('Image (.png)')} onClick={downloadImage('png')} />\n            <DenseMenuItem Icon={PictureAsPdfIcon} label={i18n.t('PDF (.pdf)')} onClick={downloadImage('pdf')} />\n        </>;\n\n  const tableMenuSection = () => <>\n            <div className={styles.menuSectionTitle}>\n                {i18n.t('Table layout')}\n            </div>\n            <DenseMenuItem Icon={ListAltIcon} label={i18n.t('Excel (.xls)')} onClick={downloadTable('xls')} />\n            <DenseMenuItem Icon={ListAltIcon} label={i18n.t('CSV (.csv)')} onClick={downloadTable('csv')} />\n            <DenseMenuItem Icon={ListAltIcon} label={i18n.t('HTML (.html)')} onClick={downloadTable('html')} />\n        </>;\n\n  const plainDataSourceSubLevel = format => <Menu>\n            <div className={styles.menuSectionTitle}>\n                {i18n.t('Metadata ID scheme')}\n            </div>\n            <DenseMenuItem label=\"ID\" onClick={downloadData(format, 'UID')} />\n            <DenseMenuItem label=\"Code\" onClick={downloadData(format, 'CODE')} />\n            <DenseMenuItem label=\"Name\" onClick={downloadData(format, 'NAME')} />\n        </Menu>;\n\n  const buttonRef = createRef();\n  return <>\n            <div ref={buttonRef}>\n                <MenuButton onClick={toggleMenu} disabled={!current}>\n                    {i18n.t('Download')}\n                </MenuButton>\n            </div>\n            {dialogIsOpen && createPortal(<div onClick={toggleMenu} className={styles.backdrop}>\n                        <Popper reference={buttonRef} placement=\"bottom-start\">\n                            <Menu>\n                                {visType === VIS_TYPE_PIVOT_TABLE ? tableMenuSection() : graphicsMenuSection()}\n                                <Divider />\n                                <div className={styles.menuSectionTitle}>\n                                    {i18n.t('Plain data source')}\n                                </div>\n                                <DenseMenuItem Icon={ListIcon} label=\"JSON\">\n                                    {plainDataSourceSubLevel('json')}\n                                </DenseMenuItem>\n                                <DenseMenuItem Icon={ListIcon} label=\"XML\">\n                                    {plainDataSourceSubLevel('xml')}\n                                </DenseMenuItem>\n                                <DenseMenuItem Icon={ListIcon} label=\"Excel\">\n                                    {plainDataSourceSubLevel('xls')}\n                                </DenseMenuItem>\n                                <DenseMenuItem Icon={ListIcon} label=\"CSV\">\n                                    {plainDataSourceSubLevel('csv')}\n                                </DenseMenuItem>\n                                <DenseMenuItem Icon={MoreHorizontalIcon} label={i18n.t('Advanced')}>\n                                    <Menu>\n                                        <div className={styles.menuSectionTitle}>\n                                            {i18n.t('Data value set')}\n                                        </div>\n                                        <DenseMenuItem label=\"JSON\" onClick={downloadData('json', null, 'dataValueSet')} />\n                                        <DenseMenuItem label=\"XML\" onClick={downloadData('xml', null, 'dataValueSet')} />\n                                        <Divider />\n                                        <div className={styles.menuSectionTitle}>\n                                            {i18n.t('Other formats')}\n                                        </div>\n                                        <DenseMenuItem label=\"JRXML\" onClick={downloadData('jrxml')} />\n                                        <DenseMenuItem label={i18n.t('Raw data SQL')} onClick={downloadData('sql', null, 'debug/sql')} />\n                                    </Menu>\n                                </DenseMenuItem>\n                            </Menu>\n                        </Popper>\n                    </div>, document.body)}\n        </>;\n};\nconst relativePeriodDateSelector = createSelector([sGetUiInterpretation], interpretation => interpretation.created || undefined);\nDownloadMenu.propTypes = {\n  chart: PropTypes.string,\n  columns: PropTypes.array,\n  current: PropTypes.object,\n  relativePeriodDate: PropTypes.string,\n  rows: PropTypes.array,\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  current: sGetCurrent(state),\n  relativePeriodDate: relativePeriodDateSelector(state),\n  rows: sGetUiLayout(state).rows,\n  columns: sGetUiLayout(state).columns,\n  chart: sGetChart(state),\n  visType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps)(DownloadMenu);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiRightSidebarOpen } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { acToggleUiRightSidebarOpen } from '../../actions/ui';\nimport MenuButton from '../MenuButton/MenuButton';\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing.unit,\n    marginTop: 2\n  }\n});\n\nexport const InterpretationsButton = props => <MenuButton disabled={!props.id} onClick={props.onClick}>\n        {props.rightSidebarOpen ? <KeyboardArrowRightIcon className={props.classes.icon} /> : <KeyboardArrowLeftIcon className={props.classes.icon} />}\n        {i18n.t('Interpretations')}\n    </MenuButton>;\nInterpretationsButton.propTypes = {\n  classes: PropTypes.object.isRequired,\n  id: PropTypes.string,\n  rightSidebarOpen: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  rightSidebarOpen: sGetUiRightSidebarOpen(state),\n  id: (sGetCurrent(state) || {}).id\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClick: () => dispatch(acToggleUiRightSidebarOpen())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(InterpretationsButton));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui-core';\n\nconst HideButton = ({\n  onClick,\n  ...props\n}) => <Button {...props} type=\"button\" secondary onClick={onClick}>\n        {i18n.t('Hide')}\n    </Button>;\n\nHideButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default HideButton;","// constants\nconst ID = 'id';\nconst NAME = 'name,displayName,displayShortName';\nconst DIMENSION_ITEM = `dimensionItem~rename(${ID})`;\nconst LEGEND_SET = `${ID},${NAME}`;\nconst USER = `${NAME},userCredentials[username]`;\nconst ITEMS = `${DIMENSION_ITEM},${NAME},dimensionItemType`;\nconst AXIS = `dimension,filter,legendSet[${LEGEND_SET}],items[${ITEMS}]`;\nconst INTERPRETATIONS = 'id,created'; // nested fields map\n\nexport const nestedFields = {\n  columns: AXIS,\n  rows: AXIS,\n  filters: AXIS,\n  user: USER,\n  interpretations: INTERPRETATIONS,\n  legendSet: LEGEND_SET\n};\nexport const extendFields = field => `${field}${nestedFields[field] ? `[${nestedFields[field]}]` : ''}`;","import { getFieldsStringByType } from '../modules/fields';\nconst visualizationQuery = {\n  visualization: {\n    resource: 'visualizations',\n    id: ({\n      id\n    }) => id,\n    params: {\n      fields: getFieldsStringByType('visualization')\n    }\n  }\n};\nconst visualizationsQuery = {\n  visualization: {\n    resource: 'visualizations',\n    params: ({\n      visualizationIds\n    }) => ({\n      filter: `id:in:[${visualizationIds}]`,\n      fields: ['id', 'type']\n    })\n  }\n};\nexport const apiFetchVisualization = (dataEngine, id) => {\n  return dataEngine.query(visualizationQuery, {\n    variables: {\n      id\n    }\n  });\n};\nexport const apiFetchVisualizations = (dataEngine, visualizationIds) => {\n  return dataEngine.query(visualizationsQuery, {\n    variables: {\n      visualizationIds\n    }\n  });\n};\nexport const apiSaveVisualization = (dataEngine, visualization) => {\n  const mutation = {\n    type: 'create',\n    resource: 'visualizations',\n    data: visualization,\n    params: {\n      skipTranslations: 'true',\n      skipSharing: 'true'\n    }\n  };\n\n  if (visualization.id) {\n    mutation.type = 'update';\n    mutation.id = visualization.id;\n  }\n\n  return dataEngine.mutate(mutation);\n};","import { SET_VISUALIZATION, CLEAR_VISUALIZATION } from '../reducers/visualization';\nexport const acSetVisualization = visualization => ({\n  type: SET_VISUALIZATION,\n  value: visualization\n});\nexport const acClear = () => ({\n  type: CLEAR_VISUALIZATION\n});","import { SET_CURRENT, SET_CURRENT_FROM_UI, CLEAR_CURRENT } from '../reducers/current';\nimport { sGetUi } from '../reducers/ui';\nexport const acSetCurrent = value => ({\n  type: SET_CURRENT,\n  value\n});\nexport const acClear = () => ({\n  type: CLEAR_CURRENT\n});\nexport const acSetCurrentFromUi = value => ({\n  type: SET_CURRENT_FROM_UI,\n  value\n});\nexport const tSetCurrentFromUi = () => async (dispatch, getState) => {\n  dispatch(acSetCurrentFromUi(sGetUi(getState())));\n};","import keyBy from 'lodash-es/keyBy';\nimport sortBy from 'lodash-es/sortBy';\nimport { SET_DIMENSIONS } from '../reducers/dimensions';\nimport { apiFetchDimensions } from '@dhis2/analytics';\nimport { sGetSettingsDisplayNameProperty } from '../reducers/settings';\nexport const acSetDimensions = dimensions => ({\n  type: SET_DIMENSIONS,\n  value: keyBy(sortBy(dimensions, [d => d.name.toLowerCase()]), 'id')\n});\nexport const tSetDimensions = d2 => async (dispatch, getState) => {\n  const onSuccess = dimensions => {\n    dispatch(acSetDimensions(dimensions));\n  };\n\n  const onError = error => {\n    console.log('Error (apiFetchDimensions): ', error);\n    return error;\n  };\n\n  try {\n    const displayNameProp = sGetSettingsDisplayNameProperty(getState());\n    const dimensions = await apiFetchDimensions(d2, displayNameProp);\n    return onSuccess(dimensions);\n  } catch (err) {\n    return onError(err);\n  }\n};","import { getInstance } from 'd2';\nimport { onError } from './index';\nimport { SYSTEM_SETTINGS } from '../modules/settings';\nexport const apiFetchSystemSettings = () => {\n  const endPoint = '/systemSettings';\n  const url = `${endPoint}?${SYSTEM_SETTINGS.map(s => `key=${s}`).join('&')}`;\n  return getInstance().then(d2 => d2.Api.getApi().get(url)).catch(onError);\n};\nexport const apiFetchUserSettings = () => {\n  // \"key\" params not supported in the backend yet\n  // update: now it is, should be used here\n  const endPoint = '/userSettings';\n  return getInstance().then(d2 => d2.Api.getApi().get(endPoint)).catch(onError);\n};","import { SET_SETTINGS, ADD_SETTINGS } from '../reducers/settings';\nimport { apiFetchSystemSettings } from '../api/settings';\nimport { apiFetchOrganisationUnitRoot } from '../api/organisationUnits';\nexport const acSetSettings = value => ({\n  type: SET_SETTINGS,\n  value\n});\nexport const acAddSettings = value => ({\n  type: ADD_SETTINGS,\n  value\n});\nexport const tAddSettings = (...extraSettings) => async dispatch => {\n  const onSuccess = fetchedSettings => {\n    dispatch(acAddSettings(Object.assign({}, fetchedSettings, ...extraSettings)));\n  };\n\n  const onError = error => {\n    console.log('Error (apiFetchSystemSettings): ', error);\n    return error;\n  };\n\n  try {\n    const systemSettings = await apiFetchSystemSettings();\n    const rootOrganisationUnit = await apiFetchOrganisationUnitRoot();\n    return onSuccess({ ...systemSettings,\n      rootOrganisationUnit\n    });\n  } catch (err) {\n    return onError(err);\n  }\n};","import { SET_LOAD_ERROR, CLEAR_LOAD_ERROR, SET_LOADING, SET_PLUGIN_LOADING } from '../reducers/loader';\nexport const acSetLoadError = value => ({\n  type: SET_LOAD_ERROR,\n  value\n});\nexport const acClearLoadError = () => ({\n  type: CLEAR_LOAD_ERROR\n});\nexport const acSetLoading = value => ({\n  type: SET_LOADING,\n  value\n});\nexport const acSetPluginLoading = value => ({\n  type: SET_PLUGIN_LOADING,\n  value\n});","import React from 'react';\nexport const EmptyBox = () => <svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M96.4184693 4.6480742l-2.9759268 2.6728C91.5558812 5.2202435 88.8786031 4 86 4V0c4.0260387 0 7.7809122 1.7113874 10.4184693 4.6480742zM100 19.269042h-4l-.0000544-5.3024514c-.0043849-1.346405-.2739964-2.6517927-.7866406-3.8623659l3.6833463-1.559795c.7189815 1.6978243 1.0971493 3.5288134 1.1032837 5.4156229L100 19.269042zm0 13.9999755h-4v-10h4v10zm0 14h-4v-10h4v10zm0 14h-4v-10h4v10zm0 13.9999995h-4v-9.9999995h4v9.9999995zm-.516108 14.50858l-3.8521996-1.077292C95.8751624 87.829701 96 86.924153 96 86v-6.730983h4V86c0 1.289184-.1747984 2.557136-.516108 3.777597zM87.7213345 99.895024l-.4874961-3.970182c2.8302961-.34753 5.3578432-1.892491 6.9762006-4.213767l3.2812621 2.287645c-2.2629208 3.245799-5.802045 5.409086-9.7699666 5.896304zM73.461965 100v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zm-14 0v-4h10v4h-10zM3.17264828 94.875717l3.09219912-2.537382c1.79303608 2.185097 4.4211055 3.525451 7.2855127 3.651773l-.176231 3.996116c-4.01094422-.176885-7.69477669-2.055693-10.20148082-5.110507zM0 80.192922h4l.00006331 5.84312c.00418159 1.190127.21554574 2.348454.61951638 3.438567L.86883696 90.864547C.3022517 89.335619.0059261 87.711683.00007566 86.043095L0 80.192922zm0-13.999974h4v10H0v-10zm0-14.0000005h4v10H0v-10zm0-14h4v10H0v-10zm0-14h4v10H0v-10zM.701349 9.6140131l3.79891292 1.2523021C4.17021443 11.8675286 4 12.9209553 4 14v6.1929475H0V14c0-1.5058511.2385093-2.9819426.701349-4.3859869zM12.9113947.0417954l.3073341 3.9881757c-2.8514503.2197365-5.43930476 1.6474003-7.16021518 3.8917822l-3.1742768-2.4339201C5.29022999 2.3499781 8.91606935.3496804 12.9113947.0417954zM27.07607 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10zm14 0v4h-10V0h10z\" fill=\"#A0ADBA\" fillRule=\"nonzero\" />\n    </svg>;\nexport const PeriodError = () => <svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"#A0ADBA\" fillRule=\"nonzero\">\n            <path d=\"M72.9999996 82.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM72.9999996 60.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\" />\n            <path d=\"M72.9999996 45.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L82.0312812 51.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\" />\n            <path d=\"M49.9999996-3.4e-7c27.6142375 0 50 22.38576254 50 50.00000004 0 3.4254464-.3449043 6.8082851-1.0236569 10.111998-.3334386 1.6229556-1.9194094 2.6683156-3.542365 2.334877-1.6229555-.3334386-2.6683156-1.9194094-2.334877-3.5423649.5972413-2.9069705.9008989-5.8852591.9008989-8.9045101 0-24.300529-19.699471-44.00000004-44-44.00000004S5.99999963 25.6994707 5.99999963 49.9999997c0 20.0457004 13.52123857 37.4107541 32.60787227 42.5117075 1.6006767.4277851 2.5514932 2.0721783 2.1237081 3.672855-.4277851 1.6006767-2.0721782 2.5514932-3.672855 2.1237082C15.3630605 92.5100466-3.7e-7 72.7795776-3.7e-7 49.9999997-3.7e-7 22.3857622 22.3857621-3.4e-7 49.9999996-3.4e-7z\" />\n            <path d=\"M31.9999996 52.4999997c-1.3807118 0-2.5-1.1192882-2.5-2.5 0-1.3254834 1.031536-2.4100387 2.3356243-2.4946824l.1643757-.0053176 15.4995614-.0008627.0004386-24.4991373c0-1.3807119 1.1192882-2.5 2.5-2.5 1.3254834 0 2.4100387 1.0315359 2.4946823 2.3356243l.0053177.1643757v27c0 1.3254834-1.0315359 2.4100386-2.3356243 2.4946823l-.1643757.0053177h-18z\" />\n        </g>\n    </svg>;\nexport const DataError = () => <svg width=\"98\" height=\"97\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"#A0ADBA\" fillRule=\"nonzero\">\n            <path d=\"M47.9999996-3.4e-7c26.375131 0 48 8.64933258 48 21.00093054 0 6.7822228-6.3726775 12.3999932-16.8111022 16.1776421-1.5579685.5638263-3.2780231-.2420853-3.8418493-1.8000538-.5638263-1.5579685.2420852-3.2780231 1.8000537-3.8418493 8.3196582-3.0108708 12.8528978-7.007103 12.8528978-10.535739 0-7.5352197-18.6656043-15.00093054-42-15.00093054-23.3343956 0-41.99999997 7.46571084-41.99999997 15.00093054 0 8.3458435 22.23414277 16.1998284 47.97788217 14.8410919 1.6545514-.087326 3.066622 1.1831611 3.1539481 2.8377124.087326 1.6545514-1.1831611 3.066622-2.8377125 3.1539481C25.4193432 43.3576729-3.7e-7 34.3785482-3.7e-7 21.0009302-3.7e-7 8.64933224 21.6248687-3.4e-7 47.9999996-3.4e-7z\" />\n            <path d=\"M92.9999996 17.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v24c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-24c0-1.6568543 1.3431458-3 3-3zM2.99999963 17.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.0917782c0 6.7884007 15.40674827 13.7997289 36.16062537 14.9125249 1.6544777.088711 2.9237824 1.5018446 2.8350715 3.1563223-.088711 1.6544776-1.5018446 2.9237823-3.1563223 2.8350714C18.3983599 64.7388196.36378289 56.6257218.00543546 45.431923L-3.7e-7 45.0917779V20.9999997c0-1.6568543 1.34314575-3 3-3z\" />\n            <path d=\"M2.99999963 41.9999997c1.59768088 0 2.90366088 1.2489199 2.9949073 2.8237272l.0050927.1762728v24.011713c0 5.6006467 10.94212037 11.6895243 27.41972777 14.017794 1.6405579.2318092 2.7825744 1.7496627 2.5507652 3.3902207-.2318092 1.640558-1.7496627 2.7825745-3.3902207 2.5507653l-1.1438963-.168296C13.057544 85.989973.26320686 78.7580311.00401161 69.3047869L-3.7e-7 69.0117127v-24.011713c0-1.6568543 1.34314575-3 3-3zM70.9999996 79.4999997l.1996404.0048953c2.1163912.1040258 3.8003596 1.8529093 3.8003596 3.9951047 0 2.209139-1.790861 4-4 4s-4-1.790861-4-4c0-2.1421954 1.6839685-3.8910789 3.8003597-3.9951047l.1996403-.0048953zM70.9999996 57.9999997c1.5976809 0 2.9036609 1.2489199 2.9949073 2.8237272l.0050927.1762728v12c0 1.6568542-1.3431457 3-3 3-1.5976809 0-2.9036609-1.24892-2.9949073-2.8237272l-.0050927-.1762728v-12c0-1.6568543 1.3431458-3 3-3z\" />\n            <path d=\"M70.9999996 42.999137c-3.825395 0-7.3222315 2.1620358-9.0317655 5.5841902l-16.903516 33.8070317c-1.5642876 3.1303349-1.39639 6.8466948.4434382 9.8226487 1.8397692 2.9758587 5.0891084 4.7869921 8.5878433 4.7869921h33.808c3.498735 0 6.7480741-1.8111334 8.5878434-4.7869921 1.8398282-2.9759539 2.0077257-6.6923138.4437399-9.8220451L80.0312812 48.5823589c-1.70905-3.4211861-5.2058865-5.5832219-9.0312816-5.5832219zm0 6c1.5519828 0 2.9706677.8771492 3.6642345 2.2655352l16.904484 33.8089683c.6342155 1.2691447.5660986 2.7768914-.1803294 3.9842515-.7463845 1.20729-2.0647148 1.9421077-3.4843891 1.9421077h-33.808c-1.4196743 0-2.7380045-.7348177-3.4843891-1.9421077-.7464279-1.2073601-.8145448-2.7151068-.1800276-3.9848551l16.9036983-33.8073964c.6940508-1.3893543 2.1127357-2.2665035 3.6647184-2.2665035z\" />\n        </g>\n    </svg>;\nexport const EmptySeries = () => <svg height=\"100\" width=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\">\n            <path d=\"M92 52c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V60c0-4.418278 3.581722-8 8-8zm0 4H8c-2.209139 0-4 1.790861-4 4v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V60c0-2.209139-1.790861-4-4-4z\" fill=\"#e8edf2\" />\n            <path d=\"M99.5567844 7.04865205l-3.8222065 1.17929519C94.9653901 5.7349373 92.6508139 4 90 4V0c4.4179248 0 8.2737479 2.89021004 9.5567844 7.04865205zM100 21.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 48v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 43.8539409 9.22479438 44 10 44h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 33.461965h4V38c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 42.558667 0 40.3386428 0 38zm0-14h4v10H0zM1.6090385 4.55843779L4.96347541 6.7373717C4.33751189 7.70103338 4 8.82295605 4 10v5.461965H0V10c0-1.95639059.56487346-3.8340854 1.6090385-5.44156221zM16.0507133 0v4H10c-1.00213211 0-1.96454891.24434864-2.82591887.70537441L5.28653945 1.17873487C6.72503094.40881989 8.33525118 0 10 0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0zm14 0v4h-10V0z\" fill=\"#a0adba\" />\n        </g>\n    </svg>;\nexport const EmptyCategory = () => <svg height=\"100\" width=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\">\n            <path d=\"M92 0c4.418278 0 8 3.581722 8 8v32c0 4.418278-3.581722 8-8 8H8c-4.418278 0-8-3.581722-8-8V8c0-4.418278 3.581722-8 8-8zm0 4H8C5.790861 4 4 5.790861 4 8v32c0 2.209139 1.790861 4 4 4h84c2.209139 0 4-1.790861 4-4V8c0-2.209139-1.790861-4-4-4z\" fill=\"#e8edf2\" />\n            <path d=\"M99.5567844 59.048652l-3.8222065 1.1792952C94.9653901 57.7349373 92.6508139 56 90 56v-4c4.4179248 0 8.2737479 2.89021 9.5567844 7.048652zM100 73.5126783h-4v-10h4zm0 14h-4v-10h4zm-8.9023158 12.4275918l-.4351277-3.9762625c2.6119243-.2858263 4.7413083-2.2609654 5.2311813-4.831976l3.9293103.7486795c-.8182548 4.2944636-4.3626818 7.582145-8.7253639 8.059559zM76.9746433 100v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14 0v-4h10v4zm-14.68916798-.7131886l1.48642012-3.7135636C8.47315871 95.8539409 9.22479438 96 10 96h6.9746433v4H10c-1.28653043 0-2.54248712-.2440596-3.71452468-.7131886zM0 85.461965h4V90c0 1.4062377.48279968 2.7330308 1.35449343 3.7976522l-3.09491728 2.5340653C.8078328 94.558667 0 92.3386428 0 90zm0-14h4v10H0zm1.6090385-14.9035272l3.35443691 2.1789339C4.33751189 59.7010334 4 60.822956 4 62v5.461965H0V62c0-1.9563906.56487346-3.8340854 1.6090385-5.4415622zM16.0507133 52v4H10c-1.00213211 0-1.96454891.2443486-2.82591887.7053744l-1.88754168-3.5266395C6.72503094 52.4088199 8.33525118 52 10 52zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4zm14 0v4h-10v-4z\" fill=\"#a0adba\" />\n        </g>\n    </svg>;\nexport const GenericError = () => <svg height=\"96\" viewBox=\"0 0 96 96\" width=\"96\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"#a0adba\" transform=\"translate(3 3)\">\n            <path d=\"m40.5 73.5000001c0 2.4852813 2.0147186 4.5 4.5 4.5s4.5-2.0147187 4.5-4.5c0-2.4142734-1.9012365-4.3844892-4.2881643-4.4951021l-.2128322-.0048979c-2.4848234.0005384-4.4990035 2.0150507-4.4990035 4.5z\" />\n            <path d=\"m48 60v-30c0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3v30c0 1.6568542 1.3431458 3 3 3s3-1.3431458 3-3z\" />\n            <path d=\"m45-2.99904788c3.8985931 0 7.4578604 2.21715778 9.1770339 5.71709169l37.8912554 77.19048409c1.3845546 2.8165473 1.2171646 6.1482722-.4427191 8.811863-1.6598833 2.6635901-4.5771005 4.2816904-7.7135702 4.2796124h-77.82201115c-3.13845856.002078-6.05567574-1.6160223-7.71555901-4.2796124-1.65988369-2.6635908-1.82727377-5.9953157-.44346379-8.8103471l37.89234295-77.19269833c1.7188306-3.49923557 5.2780979-5.71639335 9.176691-5.71639335zm0 6c-1.6106864 0-3.0811818.91600885-3.7909661 2.36100407l-37.89274459 77.19351591c-.47005356.9562122-.41322496 2.0873262.15030227 2.99161.56352731.9042839 1.5539177 1.4529206 2.62140842 1.4529206h77.8259889c1.0655018 0 2.0558922-.5486367 2.6194195-1.4529206.5635272-.9042838.6203558-2.0353978.1495577-2.9931259l-37.8916571-77.19130167c-.7101272-1.44569356-2.1806226-2.36170241-3.791309-2.36170241z\" />\n        </g>\n    </svg>;","import i18n from '@dhis2/d2-i18n';\nimport { getDisplayNameByVisType, getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType, getAxisPerLockedDimension, DIMENSION_ID_DATA, AXIS_ID_COLUMNS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport { EmptySeries, EmptyCategory, PeriodError, DataError, GenericError, EmptyBox } from '../assets/ErrorIcons';\nimport { VARIANT_ERROR, VARIANT_WARNING } from '../components/Snackbar/Snackbar';\nexport class VisualizationError {\n  constructor(icon, title, description) {\n    this.icon = icon;\n    this.title = title;\n    this.description = description;\n  }\n\n}\nexport class EmptyResponseError extends VisualizationError {\n  constructor() {\n    super(EmptyBox, i18n.t('No data available'), i18n.t('The selected dimensions didn’t return any data. There may be no data, or you may not have access to it.'));\n  }\n\n}\nexport class NoSeriesError extends VisualizationError {\n  constructor(visType) {\n    super(EmptySeries, i18n.t(`{{axisName}} is empty`, {\n      axisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoCategoryError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyCategory, i18n.t(`{{axisName}} is empty`, {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{axisName}}.', {\n      axisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }));\n  }\n\n}\nexport class NoSeriesOrCategoryError extends VisualizationError {\n  constructor(visType) {\n    super(EmptyBox, i18n.t(`{{columnsAxisName}} and {{rowsAxisName}} are empty`, {\n      columnsAxisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType)),\n      rowsAxisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType))\n    }), i18n.t('Add at least one item to {{columnsAxisName}} or {{rowsAxisName}} to create a {{visualizationType}}.', {\n      columnsAxisName: getAxisNameByLayoutType(AXIS_ID_COLUMNS, getLayoutTypeByVisType(visType)),\n      rowsAxisName: getAxisNameByLayoutType(AXIS_ID_ROWS, getLayoutTypeByVisType(visType)),\n      visualizationType: getDisplayNameByVisType(visType)\n    }));\n  }\n\n}\nexport class NoPeriodError extends VisualizationError {\n  constructor(visType) {\n    super(PeriodError, i18n.t('No period selected'), i18n.t('{{visualizationType}} must have at least one period selected in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class NoDataOrDataElementGroupSetError extends VisualizationError {\n  constructor(visType) {\n    const lockedAxis = getAxisPerLockedDimension(visType, DIMENSION_ID_DATA);\n    super(DataError, i18n.t('No data selected'), i18n.t('{{visualizationType}} must have at least one data item or data element group set item in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: lockedAxis ? getAxisNameByLayoutType(lockedAxis, getLayoutTypeByVisType(visType)) : getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class NoDataError extends VisualizationError {\n  constructor(visType) {\n    const lockedAxis = getAxisPerLockedDimension(visType, DIMENSION_ID_DATA);\n    super(DataError, i18n.t('No data selected'), i18n.t('{{visualizationType}} must have at least one data item in {{axes}}.', {\n      visualizationType: getDisplayNameByVisType(visType),\n      axes: lockedAxis ? getAxisNameByLayoutType(lockedAxis, getLayoutTypeByVisType(visType)) : getAvailableAxesDescription(visType)\n    }));\n  }\n\n}\nexport class MultipleIndicatorAsFilterError extends VisualizationError {\n  constructor() {\n    super(DataError, i18n.t(\"There's a problem with the layout\"), i18n.t('A single indicator must be the only data item when using indicators as Data in Filter.'));\n  }\n\n}\nexport class CombinationDEGSRRError extends VisualizationError {\n  constructor() {\n    super(DataError, genericErrorTitle, i18n.t('Data Element Group Sets and Reporting Rates cannot be used together.'));\n  }\n\n}\nexport class GenericClientError extends VisualizationError {\n  constructor(visType) {\n    super(GenericError, genericErrorTitle, i18n.t('There is a problem with this {{visualizationType}} visualization.', {\n      visualizationType: getDisplayNameByVisType(visType)\n    }));\n  }\n\n}\nexport class GenericServerError extends VisualizationError {\n  constructor() {\n    super(GenericError, genericErrorTitle, i18n.t('There was a problem getting the data from the server.'));\n  }\n\n}\nexport class AssignedCategoriesDataElementsError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Assigned Categories can only be used with data elements'), i18n.t('Fix this problem by selecting data elements or removing Assigned Categories.'));\n  }\n\n}\nexport class AssignedCategoriesAsFilterError extends VisualizationError {\n  constructor() {\n    super(GenericError, i18n.t('Assigned Categories cannot be used as Filter'), i18n.t('Fix this problem by moving or removing Assigned Categories.'));\n  }\n\n}\nexport const genericErrorTitle = i18n.t('Something went wrong');\n\nconst getAvailableAxesDescription = visType => {\n  const axes = getAvailableAxes(visType);\n  let axesDescription = '';\n\n  for (let index = 0; index < axes.length; index++) {\n    axesDescription += getAxisNameByLayoutType(axes[index], getLayoutTypeByVisType(visType));\n\n    if (index < axes.length - 2) {\n      axesDescription += ', ';\n    } else if (index < axes.length - 1) {\n      axesDescription += ` ${i18n.t('or')} `;\n    }\n  }\n\n  return axesDescription;\n};\n\nexport const parseError = ({\n  message,\n  httpStatusCode\n}) => ({\n  message,\n  type: String(httpStatusCode).match(/50\\d/) ? VARIANT_ERROR : VARIANT_WARNING\n});","const userAuthorityQuery = {\n  authority: {\n    resource: 'me/authorization',\n    id: ({\n      authorityId\n    }) => authorityId\n  }\n};\nexport const apiFetchUserAuthority = (dataEngine, authorityId) => dataEngine.query(userAuthorityQuery, {\n  variables: {\n    authorityId\n  }\n});","import { RECEIVED_USER, SET_USER_AUTHORITY } from '../reducers/user';\nimport { acSetLoadError } from './loader';\nimport { GenericServerError } from '../modules/error';\nimport { apiFetchUserAuthority } from '../api/user';\nexport const acReceivedUser = value => ({\n  type: RECEIVED_USER,\n  value\n});\nexport const acSetUserAuthority = value => ({\n  type: SET_USER_AUTHORITY,\n  value\n});\nexport const tLoadUserAuthority = authorityKey => async (dispatch, getState, engine) => {\n  const onSuccess = response => {\n    dispatch(acSetUserAuthority({\n      [authorityKey]: response.authority\n    }));\n  };\n\n  try {\n    return onSuccess((await apiFetchUserAuthority(engine, authorityKey)));\n  } catch (err) {\n    dispatch(acSetLoadError(new GenericServerError()));\n  }\n};","import options from './options';\nimport { DEFAULT_VISUALIZATION } from '../reducers/visualization';\nimport { DEFAULT_CURRENT } from '../reducers/current';\nexport const getVisualizationFromCurrent = current => {\n  const visualization = Object.assign({}, current);\n  const nonSavableOptions = Object.keys(options).filter(option => !options[option].savable);\n  nonSavableOptions.forEach(option => delete visualization[option]);\n  return visualization;\n};\nexport const getVisualizationState = (visualization, current) => {\n  if (current === DEFAULT_CURRENT) {\n    return STATE_EMPTY;\n  } else if (visualization === DEFAULT_VISUALIZATION) {\n    return STATE_UNSAVED;\n  } else if (current === visualization) {\n    return STATE_SAVED;\n  } else {\n    return STATE_DIRTY;\n  }\n};\nexport const STATE_EMPTY = 'EMPTY';\nexport const STATE_SAVED = 'SAVED';\nexport const STATE_UNSAVED = 'UNSAVED';\nexport const STATE_DIRTY = 'DIRTY';","import { getInstance } from 'd2';\nconst EVENT_TYPE_CHART_VIEW = 'CHART_VIEW';\nexport const apiPostDataStatistics = async id => {\n  const d2 = await getInstance();\n  const api = d2.Api.getApi();\n  const url = `/dataStatistics?eventType=${EVENT_TYPE_CHART_VIEW}&favorite=${id}`;\n  return api.post(url);\n};","import i18n from '@dhis2/d2-i18n';\nimport { apiFetchVisualization, apiSaveVisualization } from '../api/visualization';\nimport * as fromVisualization from './visualization';\nimport * as fromCurrent from './current';\nimport * as fromDimensions from './dimensions';\nimport * as fromRecommended from './recommendedIds';\nimport * as fromUi from './ui';\nimport * as fromMetadata from './metadata';\nimport * as fromSettings from './settings';\nimport * as fromUser from './user';\nimport * as fromChart from './chart';\nimport * as fromSnackbar from './snackbar';\nimport * as fromLoader from './loader';\nimport { VARIANT_SUCCESS } from '../components/Snackbar/Snackbar';\nimport { sGetCurrent } from '../reducers/current';\nimport { sGetVisualization } from '../reducers/visualization';\nimport { sGetRootOrgUnit, sGetRelativePeriod } from '../reducers/settings';\nimport history from '../modules/history';\nimport { getVisualizationFromCurrent } from '../modules/visualization';\nimport { convertOuLevelsToUids } from '../modules/orgUnit';\nimport { apiPostDataStatistics } from '../api/dataStatistics';\nimport { GenericServerError } from '../modules/error';\nexport { fromVisualization, fromCurrent, fromDimensions, fromRecommended, fromUi, fromMetadata, fromSettings, fromUser, fromChart, fromSnackbar, fromLoader };\n\nconst logError = (action, error) => {\n  console.log(`Error in action ${action}: ${error}`);\n}; // visualization, current, ui\n\n\nexport const tDoLoadVisualization = ({\n  id,\n  interpretationId,\n  ouLevels\n}) => async (dispatch, getState, engine) => {\n  const onSuccess = async response => {\n    dispatch(fromLoader.acSetPluginLoading(true));\n    const visualization = convertOuLevelsToUids(ouLevels, response.visualization);\n\n    if (interpretationId) {\n      const interpretation = visualization.interpretations.find(i => i.id === interpretationId);\n\n      if (interpretation) {\n        dispatch(fromUi.acSetUiInterpretation(interpretation));\n        dispatch(fromUi.acSetUiRightSidebarOpen());\n      }\n    }\n\n    apiPostDataStatistics(visualization.id);\n    dispatch(fromVisualization.acSetVisualization(visualization));\n    dispatch(fromCurrent.acSetCurrent(visualization));\n    dispatch(fromUi.acSetUiFromVisualization(visualization));\n    dispatch(fromLoader.acClearLoadError());\n  };\n\n  try {\n    return onSuccess((await apiFetchVisualization(engine, id)));\n  } catch (errorResponse) {\n    let error = errorResponse;\n\n    if (errorResponse && errorResponse.message) {\n      error = errorResponse.message;\n    } else {\n      error = new GenericServerError();\n    }\n\n    clearVisualization(dispatch, getState, error);\n    logError('tDoLoadVisualization', error);\n  }\n};\nexport const clearVisualization = (dispatch, getState, error = null) => {\n  if (error) {\n    dispatch(fromLoader.acSetLoadError(error));\n  } else {\n    dispatch(fromLoader.acClearLoadError());\n  }\n\n  dispatch(fromVisualization.acClear());\n  dispatch(fromCurrent.acClear());\n  const rootOrganisationUnit = sGetRootOrgUnit(getState());\n  const relativePeriod = sGetRelativePeriod(getState());\n  dispatch(fromUi.acClear({\n    rootOrganisationUnit,\n    relativePeriod\n  }));\n};\nexport const tDoRenameVisualization = ({\n  name,\n  description\n}) => (dispatch, getState) => {\n  const state = getState();\n  const visualization = sGetVisualization(state);\n  const current = sGetCurrent(state);\n  const updatedVisualization = { ...visualization\n  };\n  const updatedCurrent = { ...current\n  };\n\n  if (name) {\n    updatedVisualization.name = updatedCurrent.name = name;\n  }\n\n  if (description) {\n    updatedVisualization.description = updatedCurrent.description = description;\n  }\n\n  dispatch(fromVisualization.acSetVisualization(updatedVisualization)); // keep the same reference for current if there are no changes\n  // other than the name/description\n\n  if (visualization === current) {\n    dispatch(fromCurrent.acSetCurrent(updatedVisualization));\n  } else {\n    dispatch(fromCurrent.acSetCurrent(updatedCurrent));\n  }\n\n  dispatch(fromSnackbar.acReceivedSnackbarMessage({\n    variant: VARIANT_SUCCESS,\n    message: i18n.t('Rename successful'),\n    duration: 2000\n  }));\n};\nexport const tDoSaveVisualization = ({\n  name,\n  description\n}, copy) => async (dispatch, getState, engine) => {\n  const onSuccess = res => {\n    if (res.status === 'OK' && res.response.uid) {\n      if (copy) {\n        history.push({\n          pathname: `/${res.response.uid}`,\n          state: {\n            isSaving: true\n          }\n        }); // Save as\n      } else {\n        history.replace({\n          pathname: `/${res.response.uid}`,\n          state: {\n            isSaving: true\n          }\n        }); // Save\n      }\n    }\n  };\n\n  try {\n    dispatch(fromLoader.acSetPluginLoading(true));\n    const visualization = getVisualizationFromCurrent(sGetCurrent(getState())); // remove the id to trigger a POST request and save a new AO\n\n    if (copy) {\n      delete visualization.id;\n    }\n\n    if (name) {\n      visualization.name = name;\n    }\n\n    if (description) {\n      visualization.description = description;\n    }\n\n    return onSuccess((await apiSaveVisualization(engine, visualization)));\n  } catch (error) {\n    dispatch(fromLoader.acSetPluginLoading(false));\n    logError('tDoSaveVisualization', error); // TODO: Once the API returns custom error codes for validation errors, make sure they're relayed properly to be displayed to the user\n    // In the meantime we only display a generic error (doesn't give any constructive information but at least it doesn't fail silently any more)\n\n    dispatch(fromLoader.acSetLoadError(new GenericServerError()));\n  }\n};\nexport const tDoDeleteVisualization = () => (dispatch, getState) => {\n  const current = sGetCurrent(getState());\n  dispatch(fromSnackbar.acReceivedSnackbarMessage({\n    variant: VARIANT_SUCCESS,\n    message: i18n.t('\"{{deletedObject}}\" successfully deleted.', {\n      deletedObject: current.name\n    }),\n    duration: 2000\n  }));\n  history.push('/');\n};","import { AXIS, DIMENSION_ID_PERIOD, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE, getPredefinedDimensionProp, dimensionIsValid, layoutGetDimension, DIMENSION_PROP_NO_ITEMS, DIMENSION_ID_DATA } from '@dhis2/analytics';\nimport { BASE_FIELD_YEARLY_SERIES } from './fields/baseFields';\nimport { NoSeriesError, NoCategoryError, NoPeriodError, NoDataError, NoSeriesOrCategoryError } from './error'; // Layout validation helper functions\n\nconst isAxisValid = axis => AXIS.isValid(axis) && axis.some(axisItem => dimensionIsValid(axisItem, {\n  requireItems: !getPredefinedDimensionProp(axisItem.dimension, DIMENSION_PROP_NO_ITEMS)\n}));\n\nconst validateDimension = (dimension, error) => {\n  if (!(dimension && dimensionIsValid(dimension, {\n    requireItems: true\n  }))) {\n    throw error;\n  }\n};\n\nconst validateAxis = (axis, error) => {\n  if (!isAxisValid(axis)) {\n    throw error;\n  }\n}; // Layout validation\n\n\nconst validateDefaultLayout = layout => {\n  validateAxis(layout.columns, new NoSeriesError(layout.type));\n  validateAxis(layout.rows, new NoCategoryError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), // TODO: old validation rule, refactor\n  new NoPeriodError(layout.type));\n};\n\nconst validatePivotTableLayout = layout => {\n  if (!isAxisValid(layout.columns) && !isAxisValid(layout.rows)) {\n    throw new NoSeriesOrCategoryError(layout.type);\n  }\n\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateYearOverYearLayout = layout => {\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_DATA), new NoDataError(layout.type));\n\n  if (!(Array.isArray(layout[BASE_FIELD_YEARLY_SERIES]) && typeof layout[BASE_FIELD_YEARLY_SERIES][0] === 'string')) {\n    throw new NoSeriesError(layout.type);\n  }\n\n  validateAxis(layout.rows, new NoCategoryError(layout.type));\n};\n\nconst validatePieLayout = layout => {\n  validateAxis(layout.columns, new NoSeriesError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nconst validateSingleValueLayout = layout => {\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_DATA), new NoDataError(layout.type));\n  validateDimension(layoutGetDimension(layout, DIMENSION_ID_PERIOD), new NoPeriodError(layout.type));\n};\n\nexport const validateLayout = layout => {\n  switch (layout.type) {\n    case VIS_TYPE_PIE:\n      return validatePieLayout(layout);\n\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n      return validateYearOverYearLayout(layout);\n\n    case VIS_TYPE_SINGLE_VALUE:\n    case VIS_TYPE_GAUGE:\n      return validateSingleValueLayout(layout);\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return validatePivotTableLayout(layout);\n\n    default:\n      return validateDefaultLayout(layout);\n  }\n};","import { getInstance } from 'd2';\nimport { onError } from './index';\nexport const NAMESPACE = 'analytics';\nexport const CURRENT_AO_KEY = 'currentAnalyticalObject';\nexport const hasNamespace = async d2 => await d2.currentUser.dataStore.has(NAMESPACE);\nexport const getNamespace = async (d2, hasNamespace) => hasNamespace ? await d2.currentUser.dataStore.get(NAMESPACE) : await d2.currentUser.dataStore.create(NAMESPACE);\nexport const apiSave = async (data, key, namespace) => {\n  try {\n    const d2 = await getInstance();\n    const ns = namespace || (await getNamespace(d2, (await hasNamespace(d2))));\n    return ns.set(key, data);\n  } catch (error) {\n    return onError(error);\n  }\n};\nexport const apiFetch = async (key, namespace) => {\n  try {\n    const d2 = await getInstance();\n    const ns = namespace || (await getNamespace(d2, (await hasNamespace(d2))));\n    return ns.get(key);\n  } catch (error) {\n    return onError(error);\n  }\n};\nexport const apiSaveAOInUserDataStore = (current, key = CURRENT_AO_KEY) => apiSave(current, key);\nexport const apiFetchAOFromUserDataStore = (key = CURRENT_AO_KEY) => apiFetch(key);","import { connect } from 'react-redux';\nimport { sGetCurrent, sGetCurrentFromUi } from '../../reducers/current';\nimport * as fromActions from '../../actions';\nimport { validateLayout } from '../../modules/layoutValidation';\nimport { acSetLoadError, acClearLoadError, acSetPluginLoading } from '../../actions/loader';\nimport history from '../../modules/history';\nimport { CURRENT_AO_KEY } from '../../api/userDataStore';\nimport { GenericClientError } from '../../modules/error';\n\nconst UpdateVisualizationContainer = ({\n  renderComponent,\n  getCurrent,\n  getCurrentFromUi,\n  onUpdate,\n  acSetLoadError,\n  acClearLoadError,\n  onLoadingStart\n}) => {\n  // validate layout on update\n  // validation error message will be shown without loading the plugin first\n  const onClick = () => {\n    try {\n      validateLayout(getCurrentFromUi());\n      acClearLoadError();\n    } catch (error) {\n      acSetLoadError(error || new GenericClientError());\n    }\n\n    onLoadingStart();\n    onUpdate();\n    const urlContainsCurrentAOKey = history.location.pathname === '/' + CURRENT_AO_KEY;\n    const current = getCurrent();\n    const pathWithoutInterpretation = current && current.id ? `/${current.id}` : '/';\n\n    if (!urlContainsCurrentAOKey && history.location.pathname !== pathWithoutInterpretation) {\n      history.push(pathWithoutInterpretation);\n    }\n  };\n\n  return renderComponent(onClick);\n};\n\nconst mapDispatchToProps = {\n  getCurrent: () => (dispatch, getState) => sGetCurrent(getState()),\n  getCurrentFromUi: () => (dispatch, getState) => sGetCurrentFromUi(getState()),\n  onUpdate: fromActions.fromCurrent.tSetCurrentFromUi,\n  acSetLoadError,\n  acClearLoadError,\n  onLoadingStart: () => acSetPluginLoading(true)\n};\nexport default connect(null, mapDispatchToProps)(UpdateVisualizationContainer);","import _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\n/* eslint-disable-line no-unused-vars */\n\nimport { colors, spacers } from '@dhis2/ui-core';\nexport const tabBar = {\n  styles: <_JSXStyle id={\"3577720839\"}>{[\"div.jsx-3577720839{position:-webkit-sticky;position:sticky;top:0;}\"]}</_JSXStyle>,\n  className: \"jsx-3577720839\"\n};\nexport const tabSection = {\n  styles: <_JSXStyle id={\"1427514941\"}>{[`div.jsx-1427514941{padding:${spacers.dp16} 0;}`, `div.jsx-1427514941:not(:last-child){border-bottom:1px solid ${colors.grey300};margin-bottom:${spacers.dp8};}`]}</_JSXStyle>,\n  className: \"jsx-1427514941\"\n};\nexport const tabSectionContent = {\n  styles: <_JSXStyle id={\"1655721637\"}>{[\"div.jsx-1655721637{overflow-y:auto;}\"]}</_JSXStyle>,\n  className: \"jsx-1655721637\"\n};\nexport const tabSectionTitle = {\n  styles: <_JSXStyle id={\"3115295887\"}>{[`span.jsx-3115295887{display:inline-block;padding-bottom:${spacers.dp12};font-size:15px;color:${colors.grey900};font-weight:500;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;}`]}</_JSXStyle>,\n  className: \"jsx-3115295887\"\n};\nexport const tabSectionOption = {\n  styles: <_JSXStyle id={\"1665807213\"}>{[`div.jsx-1665807213:not(:last-child):not(.inline){padding-bottom:${spacers.dp16};}`]}</_JSXStyle>,\n  className: \"jsx-1665807213\"\n};\nexport const tabSectionOptionItem = {\n  styles: <_JSXStyle id={\"2983019948\"}>{[`div.jsx-2983019948:not(:last-child){padding-bottom:${spacers.dp8};}`]}</_JSXStyle>,\n  className: \"jsx-2983019948\"\n};\nexport const tabSectionOptionText = {\n  styles: <_JSXStyle id={\"3717686981\"}>{[`p.jsx-3717686981{font-size:${spacers.dp14};padding-bottom:${spacers.dp16};}`]}</_JSXStyle>,\n  className: \"jsx-3717686981\"\n};\nexport const tabSectionOptionToggleable = {\n  styles: <_JSXStyle id={\"684239008\"}>{[`div.jsx-684239008{margin:${spacers.dp4} 0 0 23px;}`]}</_JSXStyle>,\n  className: \"jsx-684239008\"\n};\nexport const tabSectionOptionComplexInline = {\n  styles: <_JSXStyle id={\"3576615552\"}>{[\"div.jsx-3576615552{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\"]}</_JSXStyle>,\n  className: \"jsx-3576615552\"\n};","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox, SingleSelectField, SingleSelectOption } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nexport const SelectBaseOption = ({\n  option,\n  label,\n  helpText,\n  toggleable,\n  value,\n  onChange\n}) => {\n  const defaultValue = option.defaultValue;\n  const [enabled, setEnabled] = useState(value !== defaultValue);\n  const selected = option.items.find(item => item.value === value) || {};\n\n  const onToggle = checked => {\n    setEnabled(checked);\n    onChange(checked ? option.items[0].value : defaultValue);\n  };\n\n  return <div className={!toggleable || enabled ? '' : tabSectionOption.className}>\n            {toggleable ? <Checkbox checked={enabled} label={label} name={`${option.name}-toggle`} onChange={({\n      checked\n    }) => onToggle(checked)} dense /> : null}\n            {!toggleable || enabled ? <div className={toggleable ? tabSectionOptionToggleable.className : ''}>\n                    <SingleSelectField name={`${option.name}-select`} label={toggleable ? '' : label} onChange={({\n        selected\n      }) => onChange(selected.value)} selected={selected} helpText={helpText} inputWidth=\"280px\" dense>\n                        {option.items.map(({\n          value,\n          label\n        }) => <SingleSelectOption key={value} value={value} label={label} />)}\n                    </SingleSelectField>\n                </div> : null}\n        </div>;\n};\nSelectBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  toggleable: PropTypes.bool\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst AggregationType = () => <SelectBaseOption label={i18n.t('Aggregation type')} helpText={i18n.t('Determines how the values in the pivot table are aggregated.')} option={{\n  name: 'aggregationType',\n  items: [{\n    value: 'DEFAULT',\n    label: i18n.t('By data element')\n  }, {\n    value: 'COUNT',\n    label: i18n.t('Count')\n  }, {\n    value: 'AVERAGE',\n    label: i18n.t('Average')\n  }, {\n    value: 'AVERAGE_SUM_ORG_UNIT',\n    label: i18n.t('Average (sum in org unit hierarchy)')\n  }, {\n    value: 'SUM',\n    label: i18n.t('Sum')\n  }, {\n    value: 'LAST',\n    label: i18n.t('Last value')\n  }, {\n    value: 'LAST_AVERAGE_ORG_UNIT',\n    label: i18n.t('Last value (average in org unit hierarchy)')\n  }, {\n    value: 'MIN',\n    label: i18n.t('Min')\n  }, {\n    value: 'MAX',\n    label: i18n.t('Max')\n  }, {\n    value: 'STDDEV',\n    label: i18n.t('Standard deviation')\n  }, {\n    value: 'VARIANCE',\n    label: i18n.t('Variance')\n  }]\n}} />;\n\nexport default AggregationType;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\nexport const CheckboxBaseOption = ({\n  option,\n  label,\n  value,\n  onChange\n}) => <div className={tabSectionOption.className}>\n        <Checkbox checked={value} label={label} name={option.name} onChange={({\n    checked\n  }) => onChange(checked)} dense />\n    </div>;\nCheckboxBaseOption.propTypes = {\n  label: PropTypes.string,\n  option: PropTypes.object,\n  value: PropTypes.bool,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name] || false\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: checked => dispatch(acSetUiOptions({\n    [ownProps.option.name]: checked\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckboxBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowDimensionLabels = () => <CheckboxBaseOption label={i18n.t('Dimension labels')} option={{\n  name: 'showDimensionLabels'\n}} />;\n\nexport default ShowDimensionLabels;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst SkipRounding = () => <CheckboxBaseOption label={i18n.t('Skip rounding')} option={{\n  name: 'skipRounding'\n}} />;\n\nexport default SkipRounding;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ColTotals = () => <CheckboxBaseOption label={i18n.t('Columns totals')} option={{\n  name: 'colTotals'\n}} />;\n\nexport default ColTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ColSubTotals = () => <CheckboxBaseOption label={i18n.t('Column sub-totals')} option={{\n  name: 'colSubTotals'\n}} />;\n\nexport default ColSubTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst RowTotals = () => <CheckboxBaseOption label={i18n.t('Row totals')} option={{\n  name: 'rowTotals'\n}} />;\n\nexport default RowTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst RowSubTotals = () => <CheckboxBaseOption label={i18n.t('Row sub-totals')} option={{\n  name: 'rowSubTotals'\n}} />;\n\nexport default RowSubTotals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideEmptyColumns = () => <CheckboxBaseOption label={i18n.t('Hide empty columns')} option={{\n  name: 'hideEmptyColumns'\n}} />;\n\nexport default HideEmptyColumns;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideEmptyRows = () => <CheckboxBaseOption label={i18n.t('Hide empty rows')} option={{\n  name: 'hideEmptyRows'\n}} />;\n\nexport default HideEmptyRows;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst NumberType = () => <SelectBaseOption label={i18n.t('Number type')} helpText={i18n.t('Display the value of percentages of the total')} option={{\n  name: 'numberType',\n  items: [{\n    value: 'VALUE',\n    label: i18n.t('Value')\n  }, {\n    value: 'ROW_PERCENTAGE',\n    label: i18n.t('Percentage of row')\n  }, {\n    value: 'COLUMN_PERCENTAGE',\n    label: i18n.t('Percentage of column')\n  }]\n}} />;\n\nexport default NumberType;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Radio, RadioGroupField } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const RadioBaseOption = ({\n  option,\n  label,\n  value,\n  onChange\n}) => <RadioGroupField name={option.name} value={value} onChange={({\n  value\n}) => onChange(value)} label={label} dense>\n        {option.items.map(({\n    id,\n    label\n  }) => <Radio key={id} label={label} value={id} />)}\n    </RadioGroupField>;\nRadioBaseOption.propTypes = {\n  option: PropTypes.object.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onChange: PropTypes.func.isRequired,\n  label: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name]\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RadioBaseOption);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport RadioBaseOption from './RadioBaseOption';\nexport const LEGEND_DISPLAY_STYLE_OPTION_NAME = 'legendDisplayStyle';\nexport const LEGEND_DISPLAY_STYLE_FILL = 'FILL';\nexport const LEGEND_DISPLAY_STYLE_TEXT = 'TEXT';\n\nconst LegendDisplayStyle = () => <RadioBaseOption option={{\n  name: LEGEND_DISPLAY_STYLE_OPTION_NAME,\n  items: [{\n    id: LEGEND_DISPLAY_STYLE_FILL,\n    label: i18n.t('Legend changes background color')\n  }, {\n    id: LEGEND_DISPLAY_STYLE_TEXT,\n    label: i18n.t('Legend changes text color')\n  }]\n}} />;\n\nexport default LegendDisplayStyle;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui-core';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const LEGEND_SET_OPTION_NAME = 'legendSet';\nconst query = {\n  legendSets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'legends[id,displayName~rename(name),startValue,endValue,color]'],\n      paging: false\n    }\n  }\n};\n\nconst LegendSetSelect = ({\n  value,\n  loading,\n  options,\n  onFocus,\n  onChange\n}) => {\n  const selected = value && value.id ? {\n    value: value.id,\n    label: value.displayName\n  } : {};\n  return <SingleSelectField name=\"legendSetSelect\" label={i18n.t('Legend')} selected={selected} inputWidth=\"280px\" placeholder={i18n.t('Select from legends')} loadingText={i18n.t('Loading legends')} loading={loading} dense onFocus={onFocus} onChange={({\n    selected\n  }) => onChange({\n    id: selected.value,\n    displayName: selected.label\n  })}>\n            {options.map(({\n      value,\n      label\n    }) => <SingleSelectOption key={value} value={value} label={label} />)}\n        </SingleSelectField>;\n};\n\nLegendSetSelect.propTypes = {\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\n\nconst LegendSet = ({\n  value,\n  onChange\n}) => {\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        legendSets\n      } = await engine.query(query);\n\n      if (legendSets) {\n        const options = legendSets.legendSets.map(legendSet => ({\n          value: legendSet.id,\n          label: legendSet.name\n        }));\n        setOptions(options);\n      }\n\n      setIsLoaded(true);\n    }\n  };\n\n  return <LegendSetSelect loading={!isLoaded} value={value} options={options} onChange={onChange} onFocus={onSelectFocus} />;\n};\n\nLegendSet.propTypes = {\n  value: PropTypes.object,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[LEGEND_SET_OPTION_NAME] || {}\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    id,\n    displayName\n  }) => dispatch(acSetUiOptions({\n    [LEGEND_SET_OPTION_NAME]: {\n      id,\n      displayName\n    }\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendSet);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroup, Radio } from '@dhis2/ui-core';\nimport LegendSet from './LegendSet';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const LEGEND_DISPLAY_STRATEGY_OPTION_NAME = 'legendDisplayStrategy';\nexport const LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM';\nexport const LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED';\nimport { tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\n\nconst LegendDisplayStrategy = ({\n  value,\n  onChange\n}) => <Fragment>\n        <RadioGroup name={LEGEND_DISPLAY_STRATEGY_OPTION_NAME} value={value} onChange={onChange} dense>\n            <Radio key={LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM} label={i18n.t('Use pre-defined legend per data item')} value={LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM} />\n            <Radio key={LEGEND_DISPLAY_STRATEGY_FIXED} label={i18n.t('Select a single legend for the entire visualization')} value={LEGEND_DISPLAY_STRATEGY_FIXED} />\n        </RadioGroup>\n        {value === LEGEND_DISPLAY_STRATEGY_FIXED ? <div className={tabSectionOptionToggleable.className}>\n                <LegendSet />\n            </div> : null}\n    </Fragment>;\n\nLegendDisplayStrategy.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state)[LEGEND_DISPLAY_STRATEGY_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    value\n  }) => dispatch(acSetUiOptions({\n    [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LegendDisplayStrategy);","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, FieldSet, Legend as UiCoreLegend } from '@dhis2/ui-core';\nimport LegendDisplayStyle, { LEGEND_DISPLAY_STYLE_OPTION_NAME, LEGEND_DISPLAY_STYLE_FILL } from './LegendDisplayStyle';\nimport LegendDisplayStrategy, { LEGEND_DISPLAY_STRATEGY_OPTION_NAME, LEGEND_DISPLAY_STRATEGY_FIXED, LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM } from './LegendDisplayStrategy';\nimport { LEGEND_SET_OPTION_NAME } from './LegendSet';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOptionToggleable, tabSectionOption, tabSectionTitle } from '../styles/VisualizationOptions.style.js';\n\nconst Legend = ({\n  legendSet,\n  legendDisplayStrategy,\n  onChange,\n  hideStyleOptions\n}) => {\n  const [legendEnabled, setLegendEnabled] = useState(!(legendDisplayStrategy === LEGEND_DISPLAY_STRATEGY_FIXED && !legendSet));\n\n  const onCheckboxChange = ({\n    checked\n  }) => {\n    setLegendEnabled(checked);\n\n    if (checked) {\n      onChange({\n        [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM\n      });\n    } else {\n      onChange({\n        [LEGEND_SET_OPTION_NAME]: undefined,\n        [LEGEND_DISPLAY_STRATEGY_OPTION_NAME]: LEGEND_DISPLAY_STRATEGY_FIXED,\n        [LEGEND_DISPLAY_STYLE_OPTION_NAME]: LEGEND_DISPLAY_STYLE_FILL\n      });\n    }\n  };\n\n  return <div className={tabSectionOption.className}>\n            <Checkbox checked={legendEnabled} label={i18n.t('Display legend')} onChange={onCheckboxChange} dense />\n            {legendEnabled ? <div className={tabSectionOptionToggleable.className}>\n                    {!hideStyleOptions ? <FieldSet>\n                            <UiCoreLegend>\n                                <span className={tabSectionTitle.className} style={{\n            marginTop: 8\n          }}>\n                                    {i18n.t('Legend style')}\n                                </span>\n                            </UiCoreLegend>\n                            <div className={tabSectionOption.className}>\n                                <LegendDisplayStyle />\n                            </div>\n                        </FieldSet> : null}\n                    <FieldSet>\n                        <UiCoreLegend>\n                            <span className={tabSectionTitle.className}>\n                                {i18n.t('Legend type')}\n                            </span>\n                        </UiCoreLegend>\n                        <div className={tabSectionOption.className}>\n                            <LegendDisplayStrategy />\n                        </div>\n                    </FieldSet>\n                </div> : null}\n        </div>;\n};\n\nLegend.propTypes = {\n  legendDisplayStrategy: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  hideStyleOptions: PropTypes.bool,\n  legendSet: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  legendSet: sGetUiOptions(state)[LEGEND_SET_OPTION_NAME],\n  legendDisplayStrategy: sGetUiOptions(state)[LEGEND_DISPLAY_STRATEGY_OPTION_NAME]\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions(value))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Legend);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Checkbox, Constrictor, Input, InputField } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nexport const TextBaseOption = ({\n  type,\n  label,\n  placeholder,\n  helpText,\n  width,\n  option,\n  value,\n  onChange,\n  onToggle,\n  toggleable,\n  enabled,\n  inline\n}) => <div className={!toggleable || enabled || inline ? '' : tabSectionOption.className}>\n        {toggleable ? <Checkbox checked={enabled} label={label} name={`${option.name}-toggle`} onChange={({\n    checked\n  }) => onToggle(checked)} dense /> : null}\n        {!toggleable || enabled ? <div className={toggleable ? tabSectionOptionToggleable.className : ''}>\n                {inline ? <Constrictor width={width}>\n                        <Input type={type} onChange={({\n        value\n      }) => onChange(value)} name={option.name} value={value} placeholder={placeholder} dense />\n                    </Constrictor> : <InputField type={type} label={toggleable ? '' : label} onChange={({\n      value\n    }) => onChange(value)} name={option.name} value={value} helpText={helpText} placeholder={placeholder} inputWidth={width} dense />}\n            </div> : null}\n    </div>;\nTextBaseOption.propTypes = {\n  enabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  inline: PropTypes.bool,\n  label: PropTypes.string,\n  option: PropTypes.object,\n  placeholder: PropTypes.string,\n  toggleable: PropTypes.bool,\n  type: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.string,\n  onChange: PropTypes.func,\n  onToggle: PropTypes.func\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  value: sGetUiOptions(state)[ownProps.option.name] || '',\n  enabled: sGetUiOptions(state)[ownProps.option.name] !== undefined\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onChange: value => dispatch(acSetUiOptions({\n    [ownProps.option.name]: value\n  })),\n  onToggle: checked => dispatch(acSetUiOptions({\n    [ownProps.option.name]: checked ? '' : undefined\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TextBaseOption);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst Title = ({\n  label,\n  inline\n}) => <TextBaseOption type=\"text\" width=\"280px\" label={label} placeholder={i18n.t('Add a title')} option={{\n  name: 'title'\n}} inline={inline} />;\n\nTitle.defaultProps = {\n  inline: false\n};\nTitle.propTypes = {\n  inline: PropTypes.bool,\n  label: PropTypes.string\n};\nexport default Title;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst DisplayDensity = () => <SelectBaseOption label={i18n.t('Display density')} option={{\n  name: 'displayDensity',\n  items: [{\n    value: 'COMFORTABLE',\n    label: i18n.t('Comfortable')\n  }, {\n    value: 'NORMAL',\n    label: i18n.t('Normal')\n  }, {\n    value: 'COMPACT',\n    label: i18n.t('Compact')\n  }]\n}} />;\n\nexport default DisplayDensity;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst FontSize = () => <SelectBaseOption label={i18n.t('Font size')} option={{\n  name: 'fontSize',\n  items: [{\n    value: 'LARGE',\n    label: i18n.t('Large')\n  }, {\n    value: 'NORMAL',\n    label: i18n.t('Normal')\n  }, {\n    value: 'SMALL',\n    label: i18n.t('Small')\n  }]\n}} />;\n\nexport default FontSize;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst DigitGroupSeparator = () => <SelectBaseOption label={i18n.t('Digit group separator')} option={{\n  name: 'digitGroupSeparator',\n  items: [{\n    value: 'NONE',\n    label: i18n.t('None')\n  }, {\n    value: 'SPACE',\n    label: i18n.t('Space')\n  }, {\n    value: 'COMMA',\n    label: i18n.t('Comma')\n  }]\n}} />;\n\nexport default DigitGroupSeparator;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Input, Label, SingleSelect, SingleSelectOption } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport { tabSectionOption, tabSectionOptionText, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\n\nconst OperatorSelect = ({\n  name,\n  value,\n  onChange\n}) => {\n  const options = [{\n    id: 'EQ',\n    label: '='\n  }, {\n    id: 'GT',\n    label: '>'\n  }, {\n    id: 'GE',\n    label: '>='\n  }, {\n    id: 'LT',\n    label: '<'\n  }, {\n    id: 'LE',\n    label: '<='\n  }];\n  const selected = options.find(option => option.id === value);\n  return <div style={{\n    width: '112px'\n  }}>\n            <SingleSelect name={name} onChange={({\n      selected\n    }) => {\n      onChange(selected.value);\n    }} selected={selected ? {\n      value: selected.id,\n      label: selected.label\n    } : undefined} tabIndex=\"0\" inputMaxWidth=\"106px\" dense>\n                {options.map(({\n        id,\n        label\n      }) => <SingleSelectOption key={id} value={id} label={label} />)}\n            </SingleSelect>\n        </div>;\n};\n\nOperatorSelect.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst ValueInput = ({\n  name,\n  value,\n  onChange\n}) => <Input name={name} value={value} type=\"number\" onChange={({\n  value\n}) => onChange(value)} width=\"72px\" dense />;\n\nValueInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nclass MeasureCriteria extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      op1: '',\n      v1: '',\n      op2: '',\n      v2: ''\n    };\n    const [op1 = '', v1 = '', op2 = '', v2 = ''] = props.value.split(/[;:]/);\n    this.state = {\n      op1,\n      v1,\n      op2,\n      v2\n    };\n  }\n\n  onClear = () => this.setState(this.defaultState, this.props.onChange(''));\n  onChange = name => value => {\n    this.setState({\n      [name]: value\n    }, () => {\n      const {\n        op1,\n        v1,\n        op2,\n        v2\n      } = this.state;\n      const value = [];\n\n      if (op1 && v1) {\n        value.push(`${op1}:${v1}`);\n      }\n\n      if (op2 && v2) {\n        value.push(`${op2}:${v2}`);\n      }\n\n      this.props.onChange(value.length > 0 ? value.join(';') : '');\n    });\n  };\n\n  render() {\n    const {\n      op1,\n      v1,\n      op2,\n      v2\n    } = this.state;\n    return <div className={tabSectionOption.className}>\n                <p className={tabSectionOptionText.className}>\n                    {i18n.t('You can set a minimum or maximum value. This will apply to the entire table, all values outside of the minimum/maximum range will not be displayed')}\n                </p>\n                <div className={tabSectionOptionComplexInline.className}>\n                    <div style={{\n          width: '250px'\n        }}>\n                        <Label>{i18n.t('Minimum data value')}</Label>\n                        <div className={tabSectionOptionComplexInline.className}>\n                            <OperatorSelect name=\"op1\" value={op1} onChange={this.onChange('op1')} />\n                            <ValueInput name=\"v1\" value={v1} onChange={this.onChange('v1')} />\n                        </div>\n                    </div>\n                    <div style={{\n          width: '250px'\n        }}>\n                        <Label>{i18n.t('Maximum data value')}</Label>\n                        <div className={tabSectionOptionComplexInline.className}>\n                            <OperatorSelect name=\"op2\" value={op2} onChange={this.onChange('op2')} />\n                            <ValueInput name=\"v2\" value={v2} onChange={this.onChange('v2')} />\n                        </div>\n                    </div>\n                </div>\n                <div style={{\n        paddingTop: '16px'\n      }}>\n                    <Button onClick={this.onClear}>\n                        {i18n.t('Clear min/max limits')}\n                    </Button>\n                </div>\n            </div>;\n  }\n\n}\n\nMeasureCriteria.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  value: sGetUiOptions(state).measureCriteria || ''\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: value => dispatch(acSetUiOptions({\n    measureCriteria: value\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasureCriteria);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamReportingPeriod = () => <CheckboxBaseOption label={i18n.t('Reporting period')} option={{\n  name: 'reportingPeriod'\n}} />;\n\nexport default ParamReportingPeriod;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamOrganisationUnit = () => <CheckboxBaseOption label={i18n.t('Organisation unit')} option={{\n  name: 'organisationUnit'\n}} />;\n\nexport default ParamOrganisationUnit;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ParamParentOrganisationUnit = () => <CheckboxBaseOption label={i18n.t('Parent organisation unit')} option={{\n  name: 'parentOrganisationUnit'\n}} />;\n\nexport default ParamParentOrganisationUnit;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst Regression = () => <CheckboxBaseOption label={i18n.t('Include regression')} option={{\n  name: 'regression'\n}} />;\n\nexport default Regression;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst Cumulative = () => <CheckboxBaseOption label={i18n.t('Include cumulative')} option={{\n  name: 'cumulative'\n}} />;\n\nexport default Cumulative;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'sortOrder';\nconst defaultValue = options[optionName].defaultValue;\n\nconst SortOrder = () => <SelectBaseOption label={i18n.t('Custom sort order')} toggleable={true} option={{\n  name: optionName,\n  defaultValue: defaultValue,\n  items: [{\n    value: '-1',\n    label: i18n.t('Low to high')\n  }, {\n    value: '1',\n    label: i18n.t('High to low')\n  }]\n}} />;\n\nexport default SortOrder;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\n\nconst TopLimit = () => <SelectBaseOption label={i18n.t('Top limit')} option={{\n  name: 'topLimit',\n  items: [{\n    value: '0',\n    label: i18n.t('None')\n  }, {\n    value: '5',\n    label: '5'\n  }, {\n    value: '10',\n    label: '10'\n  }, {\n    value: '20',\n    label: '20'\n  }, {\n    value: '50',\n    label: '50'\n  }, {\n    value: '100',\n    label: '100'\n  }]\n}} />;\n\nexport default TopLimit;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui-core';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { sGetUserAuthorities } from '../../../reducers/user';\nimport { sGetSettings } from '../../../reducers/settings';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nexport const APPROVAL_LEVEL_OPTION_AUTH = 'F_VIEW_UNAPPROVED_DATA';\nconst optionName = 'approvalLevel';\nconst query = {\n  dataApprovalLevels: {\n    resource: 'dataApprovalLevels.json',\n    params: {\n      order: 'level:asc',\n      fields: 'id,displayName~rename(name),level',\n      paging: false\n    }\n  }\n};\n\nconst ApprovalLevelSelect = ({\n  value,\n  loading,\n  options,\n  onFocus,\n  onChange\n}) => {\n  const selected = value && value.id ? {\n    value: value.id,\n    label: value.displayName\n  } : {};\n  return <SingleSelectField name=\"approvalLevelSelect\" label={i18n.t('Data approved at level')} selected={selected} inputWidth=\"280px\" placeholder={i18n.t('Select from predefined levels')} loadingText={i18n.t('Loading data approval levels')} loading={loading} dense onFocus={onFocus} onChange={({\n    selected\n  }) => onChange({\n    id: selected.value,\n    displayName: selected.label\n  })}>\n            {options.map(({\n      value,\n      label\n    }) => <SingleSelectOption key={value} value={value} label={label} />)}\n        </SingleSelectField>;\n};\n\nApprovalLevelSelect.propTypes = {\n  loading: PropTypes.bool,\n  options: PropTypes.array,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\n\nconst ApprovalLevel = ({\n  value,\n  onChange,\n  enabled\n}) => {\n  const engine = useDataEngine();\n  const [options, setOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  if (!enabled) {\n    return null;\n  }\n\n  if (value && value.id) {\n    if (!options.find(option => option.value === value.id)) {\n      setOptions([...options, {\n        value: value.id,\n        label: value.displayName\n      }]);\n    }\n  }\n\n  const onSelectFocus = async () => {\n    if (!isLoaded) {\n      const {\n        dataApprovalLevels\n      } = await engine.query(query);\n\n      if (dataApprovalLevels) {\n        const options = dataApprovalLevels.dataApprovalLevels.map(level => ({\n          value: level.id,\n          label: level.name\n        }));\n        setOptions(options);\n      }\n\n      setIsLoaded(true);\n    }\n  };\n\n  return <ApprovalLevelSelect loading={!isLoaded} value={value} options={options} onChange={onChange} onFocus={onSelectFocus} />;\n};\n\nApprovalLevel.propTypes = {\n  enabled: PropTypes.bool,\n  value: PropTypes.object,\n  onChange: PropTypes.func\n};\nconst approvalLevelEnabledSelector = createSelector([sGetSettings, sGetUserAuthorities], (settings, authorities) => settings.keyIgnoreAnalyticsApprovalYearThreshold !== -1 && authorities[APPROVAL_LEVEL_OPTION_AUTH]);\n\nconst mapStateToProps = state => ({\n  enabled: approvalLevelEnabledSelector(state),\n  value: sGetUiOptions(state)[optionName] || {}\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: ({\n    id,\n    displayName\n  }) => dispatch(acSetUiOptions({\n    [optionName]: {\n      id,\n      displayName\n    }\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ApprovalLevel);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowHierarchy = () => <CheckboxBaseOption label={i18n.t('Display organisation unit hierarchy')} option={{\n  name: 'showHierarchy'\n}} />;\n\nexport default ShowHierarchy;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label } from '@dhis2/ui-core';\nimport CheckboxBaseOption from './CheckboxBaseOption';\nimport { tabSectionOption } from '../styles/VisualizationOptions.style.js';\n\nconst CompletedOnly = () => <div className={tabSectionOption.className}>\n        <Label>{i18n.t('Event data')}</Label>\n        <CheckboxBaseOption label={i18n.t('Only include completed events')} option={{\n    name: 'completedOnly'\n  }} />\n    </div>;\n\nexport default CompletedOnly;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport ShowDimensionLabels from '../../components/VisualizationOptions/Options/ShowDimensionLabels';\nimport SkipRounding from '../../components/VisualizationOptions/Options/SkipRounding';\nimport ColTotals from '../../components/VisualizationOptions/Options/ColTotals';\nimport ColSubTotals from '../../components/VisualizationOptions/Options/ColSubTotals';\nimport RowTotals from '../../components/VisualizationOptions/Options/RowTotals';\nimport RowSubTotals from '../../components/VisualizationOptions/Options/RowSubTotals';\nimport HideEmptyColumns from '../../components/VisualizationOptions/Options/HideEmptyColumns';\nimport HideEmptyRows from '../../components/VisualizationOptions/Options/HideEmptyRows';\nimport NumberType from '../../components/VisualizationOptions/Options/NumberType';\nimport Legend from '../../components/VisualizationOptions/Options/Legend';\nimport Title from '../../components/VisualizationOptions/Options/Title';\nimport DisplayDensity from '../../components/VisualizationOptions/Options/DisplayDensity';\nimport FontSize from '../../components/VisualizationOptions/Options/FontSize';\nimport DigitGroupSeparator from '../../components/VisualizationOptions/Options/DigitGroupSeparator';\nimport MeasureCriteria from '../../components/VisualizationOptions/Options/MeasureCriteria';\nimport ParamReportingPeriod from '../../components/VisualizationOptions/Options/ParamReportingPeriod';\nimport ParamOrganisationUnit from '../../components/VisualizationOptions/Options/ParamOrganisationUnit';\nimport ParamParentOrganisationUnit from '../../components/VisualizationOptions/Options/ParamParentOrganisationUnit';\nimport Regression from '../../components/VisualizationOptions/Options/Regression';\nimport Cumulative from '../../components/VisualizationOptions/Options/Cumulative';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport TopLimit from '../../components/VisualizationOptions/Options/TopLimit';\nimport ApprovalLevel from '../../components/VisualizationOptions/Options/ApprovalLevel';\nimport ShowHierarchy from '../../components/VisualizationOptions/Options/ShowHierarchy';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-section-1',\n    content: React.Children.toArray([<ShowDimensionLabels />, <SkipRounding />])\n  }, {\n    key: 'data-display-totals',\n    label: i18n.t('Display totals'),\n    content: React.Children.toArray([<ColTotals />, <ColSubTotals />, <RowTotals />, <RowSubTotals />])\n  }, {\n    key: 'data-display-empty-data',\n    label: i18n.t('Display empty data'),\n    content: React.Children.toArray([<HideEmptyColumns />, <HideEmptyRows />])\n  }, {\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<AggregationType />, <NumberType />, <CompletedOnly />, <ApprovalLevel />])\n  }]\n}, {\n  key: 'legend-tab',\n  label: i18n.t('Legend'),\n  content: [{\n    key: 'legend-section-1',\n    content: React.Children.toArray([<Legend />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-section-1',\n    content: React.Children.toArray([<Title label={i18n.t('Table title')} />, <DisplayDensity />, <FontSize />, <DigitGroupSeparator />])\n  }, {\n    key: 'style-section-2',\n    label: i18n.t('Labels'),\n    content: React.Children.toArray([<ShowHierarchy />])\n  }]\n}, {\n  key: 'limitValues-tab',\n  label: i18n.t('Limit values'),\n  content: [\n  /*\n  {\n      key: 'limitValues-limit-numbers',\n      label: i18n.t('Limit number of values'),\n      content: [<TopLimit />],\n  },*/\n  {\n    key: 'limitValues-limit-min-max',\n    label: i18n.t('Limit minimum/maximum values'),\n    content: React.Children.toArray([<MeasureCriteria />])\n  }]\n}, {\n  key: 'parameters-tab',\n  label: i18n.t('Parameters'),\n  content: [{\n    key: 'parameters-section-1',\n    content: React.Children.toArray([<ParamReportingPeriod />, <ParamOrganisationUnit />, <ParamParentOrganisationUnit />, <Regression />, <Cumulative />, <SortOrder />, <TopLimit />])\n  }]\n}];","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst CumulativeValues = () => <CheckboxBaseOption label={i18n.t('Cumulative values')} option={{\n  name: 'cumulativeValues'\n}} />;\n\nexport default CumulativeValues;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst ShowData = () => <CheckboxBaseOption label={i18n.t('Value labels')} option={{\n  name: 'showData'\n}} />;\n\nexport default ShowData;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'hideEmptyRowItems';\nconst defaultValue = options[optionName].defaultValue;\n\nconst HideEmptyRowItems = () => <SelectBaseOption label={i18n.t('Hide empty categories')} toggleable={true} option={{\n  name: optionName,\n  defaultValue: defaultValue,\n  items: [{\n    value: 'BEFORE_FIRST',\n    label: i18n.t('Before first')\n  }, {\n    value: 'AFTER_LAST',\n    label: i18n.t('After last')\n  }, {\n    value: 'BEFORE_FIRST_AFTER_LAST',\n    label: i18n.t('Before first and after last')\n  }, {\n    value: 'ALL',\n    label: i18n.t('All')\n  }]\n}} />;\n\nexport default HideEmptyRowItems;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport SelectBaseOption from './SelectBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'regressionType';\nconst defaultValue = options[optionName].defaultValue;\n\nconst RegressionType = () => <SelectBaseOption toggleable={true} label={i18n.t('Trend line')} option={{\n  name: optionName,\n  defaultValue: defaultValue,\n  items: [{\n    value: 'LINEAR',\n    label: i18n.t('Linear')\n  }, {\n    value: 'POLYNOMIAL',\n    label: i18n.t('Polynomial')\n  }, {\n    value: 'LOESS',\n    label: i18n.t('Loess')\n  }]\n}} />;\n\nexport default RegressionType;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst TargetLineValue = () => <TextBaseOption type=\"number\" width=\"96px\" label={i18n.t('Value')} placeholder={i18n.t('Number')} option={{\n  name: 'targetLineValue'\n}} inline />;\n\nexport default TargetLineValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst TargetLineLabel = () => <TextBaseOption type=\"text\" width=\"280px\" label={i18n.t('Title')} placeholder={i18n.t('Target line title')} option={{\n  name: 'targetLineLabel'\n}} inline />;\n\nexport default TargetLineLabel;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, Label } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport TargetLineValue from './TargetLineValue';\nimport TargetLineLabel from './TargetLineLabel';\nimport { tabSectionOption, tabSectionOptionToggleable, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\nexport const TargetLine = ({\n  enabled,\n  onChange\n}) => <div className={tabSectionOption.className}>\n        <Checkbox checked={enabled} label={i18n.t('Target line')} onChange={({\n    checked\n  }) => onChange(checked)} dense />\n        {enabled ? <div className={`${tabSectionOptionToggleable.className} ${tabSectionOptionComplexInline.className}`}>\n                <div>\n                    <Label>{i18n.t('Value')}</Label>\n                    <TargetLineValue />\n                </div>\n                <div>\n                    <Label>{i18n.t('Title')}</Label>\n                    <TargetLineLabel />\n                </div>\n            </div> : null}\n    </div>;\nTargetLine.propTypes = {\n  enabled: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  enabled: sGetUiOptions(state).targetLine\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: enabled => dispatch(acSetUiOptions({\n    targetLine: enabled\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TargetLine);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst BaseLineValue = () => <TextBaseOption type=\"number\" width=\"96px\" label={i18n.t('Value')} placeholder={i18n.t('Number')} option={{\n  name: 'baseLineValue'\n}} inline />;\n\nexport default BaseLineValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst BaseLineLabel = () => <TextBaseOption type=\"text\" width=\"280px\" label={i18n.t('Title')} placeholder={i18n.t('Base line title')} option={{\n  name: 'baseLineLabel'\n}} inline />;\n\nexport default BaseLineLabel;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Checkbox, Label } from '@dhis2/ui-core';\nimport { sGetUiOptions } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport BaseLineValue from './BaseLineValue';\nimport BaseLineLabel from './BaseLineLabel';\nimport { tabSectionOption, tabSectionOptionToggleable, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\nexport const BaseLine = ({\n  enabled,\n  onChange\n}) => <div className={tabSectionOption.className}>\n        <Checkbox checked={enabled} label={i18n.t('Base line')} name=\"baseLine-toggle\" onChange={({\n    checked\n  }) => onChange(checked)} dense />\n        {enabled ? <div className={`${tabSectionOptionToggleable.className} ${tabSectionOptionComplexInline.className}`}>\n                <div>\n                    <Label>{i18n.t('Value')}</Label>\n                    <BaseLineValue />\n                </div>\n                <div>\n                    <Label>{i18n.t('Title')}</Label>\n                    <BaseLineLabel />\n                </div>\n            </div> : null}\n    </div>;\nBaseLine.propTypes = {\n  enabled: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  enabled: sGetUiOptions(state).baseLine\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: enabled => dispatch(acSetUiOptions({\n    baseLine: enabled\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BaseLine);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst RangeAxisMinValue = () => <TextBaseOption type=\"number\" width=\"100px\" placeholder={i18n.t('Min')} option={{\n  name: 'rangeAxisMinValue'\n}} inline />;\n\nexport default RangeAxisMinValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst RangeAxisMaxValue = () => <TextBaseOption type=\"number\" width=\"100px\" placeholder={i18n.t('Max')} option={{\n  name: 'rangeAxisMaxValue'\n}} inline />;\n\nexport default RangeAxisMaxValue;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Help } from '@dhis2/ui-core';\nimport RangeAxisMinValue from './RangeAxisMinValue';\nimport RangeAxisMaxValue from './RangeAxisMaxValue';\nimport { tabSectionOption, tabSectionOptionComplexInline } from '../styles/VisualizationOptions.style.js';\n\nconst AxisRange = () => <div className={tabSectionOption.className}>\n        <Label>{i18n.t('Axis range')}</Label>\n        <div className={tabSectionOptionComplexInline.className}>\n            <RangeAxisMinValue />\n            {'\\u00A0\\u2013\\u00A0'}\n            <RangeAxisMaxValue />\n        </div>\n        <Help>\n            {i18n.t('Values outside of the range will not be displayed')}\n        </Help>\n    </div>;\n\nexport default AxisRange;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\nexport const RangeAxisSteps = () => <TextBaseOption type=\"number\" width=\"96px\" helpText={i18n.t('The number of axis steps between the min and max values')} label={i18n.t('Steps')} placeholder={i18n.t('Auto')} option={{\n  name: 'rangeAxisSteps'\n}} />;\nexport default RangeAxisSteps;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst RangeAxisDecimals = () => <TextBaseOption type=\"number\" width=\"96px\" label={i18n.t('Decimals')} placeholder={i18n.t('Auto')} option={{\n  name: 'rangeAxisDecimals'\n}} />;\n\nexport default RangeAxisDecimals;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'rangeAxisLabel';\nconst defaultValue = options[optionName].defaultValue;\n\nconst RangeAxisLabel = () => <TextBaseOption type=\"text\" width=\"280px\" label={i18n.t('Axis title')} placeholder={i18n.t('Add a title')} option={{\n  name: optionName,\n  defaultValue: defaultValue\n}} toggleable={true} />;\n\nexport default RangeAxisLabel;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\nimport { options } from '../../../modules/options';\nconst optionName = 'domainAxisLabel';\nconst defaultValue = options[optionName].defaultValue;\n\nconst DomainAxisLabel = () => <TextBaseOption type=\"text\" width=\"280px\" label={i18n.t('Axis title')} placeholder={i18n.t('Add a title')} option={{\n  name: optionName,\n  defaultValue: defaultValue\n}} toggleable={true} />;\n\nexport default DomainAxisLabel;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst NoSpaceBetweenColumns = () => <CheckboxBaseOption label={i18n.t('No space between bars/columns')} option={{\n  name: 'noSpaceBetweenColumns'\n}} />;\n\nexport default NoSpaceBetweenColumns;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst HideLegend = () => <CheckboxBaseOption label={i18n.t('Legend key')} option={{\n  name: 'hideLegend'\n}} />;\n\nexport default HideLegend;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Radio, RadioGroup } from '@dhis2/ui-core';\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport { sGetUiOptions, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport Title from './Title';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nconst HIDE_TITLE_AUTO = 'AUTO';\nconst HIDE_TITLE_NONE = 'NONE';\nconst HIDE_TITLE_CUSTOM = 'CUSTOM';\n\nclass HideTitle extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      value: HIDE_TITLE_AUTO\n    };\n    this.state = props.value ? {\n      value: props.value\n    } : this.defaultState;\n  }\n\n  onRadioGroupChange = ({\n    value\n  }) => {\n    this.setState({\n      value\n    });\n    this.props.onChange(value === HIDE_TITLE_NONE, value === HIDE_TITLE_AUTO ? undefined : this.props.title || undefined);\n  };\n\n  render() {\n    const {\n      value\n    } = this.state;\n    const {\n      visualizationType\n    } = this.props;\n    return <div className={tabSectionOption.className}>\n                <Label>\n                    {visualizationType === VIS_TYPE_PIVOT_TABLE ? i18n.t('Table title') : i18n.t('Chart title')}\n                </Label>\n                <RadioGroup name=\"hideTitle-selector\" onChange={this.onRadioGroupChange} value={value} dense>\n                    {[{\n          id: HIDE_TITLE_AUTO,\n          label: i18n.t('Auto generated')\n        }, {\n          id: HIDE_TITLE_NONE,\n          label: i18n.t('None')\n        }, {\n          id: HIDE_TITLE_CUSTOM,\n          label: i18n.t('Custom')\n        }].map(({\n          id,\n          label\n        }) => <Radio key={id} label={label} value={id} dense />)}\n                </RadioGroup>\n                {value === HIDE_TITLE_CUSTOM ? <div className={tabSectionOptionToggleable.className}>\n                        <Title inline />\n                    </div> : null}\n            </div>;\n  }\n\n}\n\nHideTitle.propTypes = {\n  title: PropTypes.string,\n  value: PropTypes.string,\n  visualizationType: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst hideTitleSelector = createSelector([sGetUiOptions], uiOptions => uiOptions.hideTitle ? HIDE_TITLE_NONE : uiOptions.title === undefined ? HIDE_TITLE_AUTO : HIDE_TITLE_CUSTOM);\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  value: hideTitleSelector(state),\n  title: sGetUiOptions(state).title\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (hideTitle, title) => dispatch(acSetUiOptions({\n    hideTitle,\n    title\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HideTitle);","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TextBaseOption from './TextBaseOption';\n\nconst Subtitle = () => <TextBaseOption type=\"text\" width=\"280px\" placeholder={i18n.t('Add a subtitle')} option={{\n  name: 'subtitle'\n}} />;\n\nexport default Subtitle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport i18n from '@dhis2/d2-i18n';\nimport { Label, Radio, RadioGroup } from '@dhis2/ui-core';\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport { sGetUiOptions, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiOptions } from '../../../actions/ui';\nimport Subtitle from './Subtitle';\nimport { tabSectionOption, tabSectionOptionToggleable } from '../styles/VisualizationOptions.style.js';\nconst HIDE_SUBTITLE_AUTO = 'AUTO';\nconst HIDE_SUBTITLE_NONE = 'NONE';\nconst HIDE_SUBTITLE_CUSTOM = 'CUSTOM';\n\nclass HideSubtitle extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      value: HIDE_SUBTITLE_AUTO\n    };\n    this.state = props.value ? {\n      value: props.value\n    } : this.defaultState;\n  }\n\n  onChange = ({\n    value\n  }) => {\n    this.setState({\n      value\n    });\n    this.props.onChange(value === HIDE_SUBTITLE_NONE, value === HIDE_SUBTITLE_AUTO ? undefined : this.props.subtitle || undefined);\n  };\n\n  render() {\n    const {\n      value\n    } = this.state;\n    const {\n      visualizationType\n    } = this.props;\n    return <div className={tabSectionOption.className}>\n                <Label>\n                    {visualizationType === VIS_TYPE_PIVOT_TABLE ? i18n.t('Table subtitle') : i18n.t('Chart subtitle')}\n                </Label>\n                <RadioGroup name=\"hideSubtitle-selector\" onChange={this.onChange} value={value} dense>\n                    {[{\n          id: HIDE_SUBTITLE_AUTO,\n          label: i18n.t('Auto generated')\n        }, {\n          id: HIDE_SUBTITLE_NONE,\n          label: i18n.t('None')\n        }, {\n          id: HIDE_SUBTITLE_CUSTOM,\n          label: i18n.t('Custom')\n        }].map(({\n          id,\n          label\n        }) => <Radio key={id} label={label} value={id} dense />)}\n                </RadioGroup>\n                {value === HIDE_SUBTITLE_CUSTOM ? <div className={tabSectionOptionToggleable.className}>\n                        <Subtitle inline />\n                    </div> : null}\n            </div>;\n  }\n\n}\n\nHideSubtitle.propTypes = {\n  subtitle: PropTypes.string,\n  value: PropTypes.string,\n  visualizationType: PropTypes.string,\n  onChange: PropTypes.func\n};\nconst hideSubtitleSelector = createSelector([sGetUiOptions], uiOptions => uiOptions.hideSubtitle ? HIDE_SUBTITLE_NONE : uiOptions.subtitle === undefined ? HIDE_SUBTITLE_AUTO : HIDE_SUBTITLE_CUSTOM);\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  value: hideSubtitleSelector(state),\n  subtitle: sGetUiOptions(state).subtitle\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (hideSubtitle, subtitle) => dispatch(acSetUiOptions({\n    hideSubtitle,\n    subtitle\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HideSubtitle);","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CumulativeValues from '../../components/VisualizationOptions/Options/CumulativeValues';\nimport ShowData from '../../components/VisualizationOptions/Options/ShowData';\nimport HideEmptyRowItems from '../../components/VisualizationOptions/Options/HideEmptyRowItems';\nimport RegressionType from '../../components/VisualizationOptions/Options/RegressionType';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport RangeAxisSteps from '../../components/VisualizationOptions/Options/RangeAxisSteps';\nimport RangeAxisDecimals from '../../components/VisualizationOptions/Options/RangeAxisDecimals';\nimport RangeAxisLabel from '../../components/VisualizationOptions/Options/RangeAxisLabel';\nimport DomainAxisLabel from '../../components/VisualizationOptions/Options/DomainAxisLabel';\nimport NoSpaceBetweenColumns from '../../components/VisualizationOptions/Options/NoSpaceBetweenColumns';\nimport HideLegend from '../../components/VisualizationOptions/Options/HideLegend';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-display',\n    label: i18n.t('Display'),\n    content: React.Children.toArray([<CumulativeValues />, <HideEmptyRowItems />, <SortOrder />])\n  }, {\n    key: 'data-lines',\n    label: i18n.t('Lines'),\n    content: React.Children.toArray([<RegressionType />, <TargetLine />, <BaseLine />])\n  }, {\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<AggregationType />, <CompletedOnly />])\n  }]\n}, {\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content: [{\n    key: 'axes-vertical-axis',\n    label: i18n.t('Vertical (y) axis'),\n    content: React.Children.toArray([<RangeAxisLabel />, <AxisRange />, <RangeAxisSteps />, <RangeAxisDecimals />])\n  }, {\n    key: 'axes-horizontal-axis',\n    label: i18n.t('Horizontal (x) axis'),\n    content: React.Children.toArray([<DomainAxisLabel />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-chart-style',\n    label: i18n.t('Chart style'),\n    content: React.Children.toArray([<ShowData />, <NoSpaceBetweenColumns />, <HideLegend />\n    /* TODO new option <BackgroundLines /> */\n    ])\n  }, {\n    key: 'style-titles',\n    label: i18n.t('Titles'),\n    content: React.Children.toArray([<HideTitle />, <HideSubtitle />])\n  }]\n}];","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CheckboxBaseOption from './CheckboxBaseOption';\n\nconst PercentStackedValues = () => <CheckboxBaseOption label={i18n.t('Stacked values add up to 100%')} option={{\n  name: 'percentStackedValues'\n}} />;\n\nexport default PercentStackedValues;","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CumulativeValues from '../../components/VisualizationOptions/Options/CumulativeValues';\nimport PercentStackedValues from '../../components/VisualizationOptions/Options/PercentStackedValues';\nimport ShowData from '../../components/VisualizationOptions/Options/ShowData';\nimport HideEmptyRowItems from '../../components/VisualizationOptions/Options/HideEmptyRowItems';\nimport RegressionType from '../../components/VisualizationOptions/Options/RegressionType';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport RangeAxisSteps from '../../components/VisualizationOptions/Options/RangeAxisSteps';\nimport RangeAxisDecimals from '../../components/VisualizationOptions/Options/RangeAxisDecimals';\nimport RangeAxisLabel from '../../components/VisualizationOptions/Options/RangeAxisLabel';\nimport DomainAxisLabel from '../../components/VisualizationOptions/Options/DomainAxisLabel';\nimport NoSpaceBetweenColumns from '../../components/VisualizationOptions/Options/NoSpaceBetweenColumns';\nimport HideLegend from '../../components/VisualizationOptions/Options/HideLegend';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-display',\n    label: i18n.t('Display'),\n    content: React.Children.toArray([<ShowData />, <PercentStackedValues />, <CumulativeValues />, <HideEmptyRowItems />, <SortOrder />])\n  }, {\n    key: 'data-lines',\n    label: i18n.t('Lines'),\n    content: React.Children.toArray([<RegressionType />, <TargetLine />, <BaseLine />])\n  }, {\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<AggregationType />, <CompletedOnly />])\n  }]\n}, {\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content: [{\n    key: 'axes-vertical-axis',\n    label: i18n.t('Vertical (y) axis'),\n    content: React.Children.toArray([<RangeAxisLabel />, <AxisRange />, <RangeAxisSteps />, <RangeAxisDecimals />])\n  }, {\n    key: 'axes-horizontal-axis',\n    label: i18n.t('Horizontal (x) axis'),\n    content: React.Children.toArray([<DomainAxisLabel />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-chart-style',\n    label: i18n.t('Chart style'),\n    content: React.Children.toArray([<NoSpaceBetweenColumns />, <HideLegend />\n    /* TODO new option <BackgroundLines /> */\n    ])\n  }, {\n    key: 'style-titles',\n    label: i18n.t('Titles'),\n    content: React.Children.toArray([<HideTitle />, <HideSubtitle />])\n  }]\n}];","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CumulativeValues from '../../components/VisualizationOptions/Options/CumulativeValues';\nimport ShowData from '../../components/VisualizationOptions/Options/ShowData';\nimport HideEmptyRowItems from '../../components/VisualizationOptions/Options/HideEmptyRowItems';\nimport RegressionType from '../../components/VisualizationOptions/Options/RegressionType';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport RangeAxisSteps from '../../components/VisualizationOptions/Options/RangeAxisSteps';\nimport RangeAxisDecimals from '../../components/VisualizationOptions/Options/RangeAxisDecimals';\nimport RangeAxisLabel from '../../components/VisualizationOptions/Options/RangeAxisLabel';\nimport DomainAxisLabel from '../../components/VisualizationOptions/Options/DomainAxisLabel';\nimport HideLegend from '../../components/VisualizationOptions/Options/HideLegend';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport Title from '../../components/VisualizationOptions/Options/Title';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport Subtitle from '../../components/VisualizationOptions/Options/Subtitle';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-section-1',\n    content: React.Children.toArray([<ShowData />, <CumulativeValues />, <HideEmptyRowItems />, <RegressionType />, <TargetLine />, <BaseLine />, <SortOrder />, <AggregationType />])\n  }, {\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<CompletedOnly />])\n  }]\n}, {\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content: [{\n    key: 'axes-vertical-axis',\n    label: i18n.t('Vertical (y) axis'),\n    content: React.Children.toArray([<RangeAxisLabel />, <AxisRange />, <RangeAxisSteps />, <RangeAxisDecimals />])\n  }, {\n    key: 'axes-horizontal-axis',\n    label: i18n.t('Horizontal (x) axis'),\n    content: React.Children.toArray([<DomainAxisLabel />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-section-1',\n    content: React.Children.toArray([<HideLegend />, <Title />, <HideTitle />, <Subtitle />, <HideSubtitle />])\n  }]\n}];","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport CumulativeValues from '../../components/VisualizationOptions/Options/CumulativeValues';\nimport PercentStackedValues from '../../components/VisualizationOptions/Options/PercentStackedValues';\nimport ShowData from '../../components/VisualizationOptions/Options/ShowData';\nimport HideEmptyRowItems from '../../components/VisualizationOptions/Options/HideEmptyRowItems';\nimport RegressionType from '../../components/VisualizationOptions/Options/RegressionType';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport SortOrder from '../../components/VisualizationOptions/Options/SortOrder';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport RangeAxisSteps from '../../components/VisualizationOptions/Options/RangeAxisSteps';\nimport RangeAxisDecimals from '../../components/VisualizationOptions/Options/RangeAxisDecimals';\nimport RangeAxisLabel from '../../components/VisualizationOptions/Options/RangeAxisLabel';\nimport DomainAxisLabel from '../../components/VisualizationOptions/Options/DomainAxisLabel';\nimport HideLegend from '../../components/VisualizationOptions/Options/HideLegend';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport Title from '../../components/VisualizationOptions/Options/Title';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport Subtitle from '../../components/VisualizationOptions/Options/Subtitle';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-section-1',\n    content: React.Children.toArray([<ShowData />, <PercentStackedValues />, <CumulativeValues />, <HideEmptyRowItems />, <RegressionType />, <TargetLine />, <BaseLine />, <SortOrder />, <AggregationType />])\n  }, {\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<CompletedOnly />])\n  }]\n}, {\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content: [{\n    key: 'axes-vertical-axis',\n    label: i18n.t('Vertical (y) axis'),\n    content: React.Children.toArray([<RangeAxisLabel />, <AxisRange />, <RangeAxisSteps />, <RangeAxisDecimals />])\n  }, {\n    key: 'axes-horizontal-axis',\n    label: i18n.t('Horizontal (x) axis'),\n    content: React.Children.toArray([<DomainAxisLabel />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-section-1',\n    content: React.Children.toArray([<HideLegend />, <Title />, <HideTitle />, <Subtitle />, <HideSubtitle />])\n  }]\n}];","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<AggregationType />, <CompletedOnly />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-titles',\n    label: i18n.t('Titles'),\n    content: React.Children.toArray([<HideTitle />, <HideSubtitle />])\n  }]\n}];","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport TargetLine from '../../components/VisualizationOptions/Options/TargetLine';\nimport BaseLine from '../../components/VisualizationOptions/Options/BaseLine';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport AxisRange from '../../components/VisualizationOptions/Options/AxisRange';\nimport Legend from '../../components/VisualizationOptions/Options/Legend';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-lines',\n    label: i18n.t('Lines'),\n    content: React.Children.toArray([<TargetLine />, <BaseLine />])\n  }, {\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<AggregationType />, <CompletedOnly />])\n  }]\n}, {\n  key: 'legend-tab',\n  label: i18n.t('Legend'),\n  content: [{\n    key: 'legend-section-1',\n    content: React.Children.toArray([<Legend />])\n  }]\n}, {\n  key: 'axes-tab',\n  label: i18n.t('Axes'),\n  content: [{\n    key: 'axes-vertical-axis',\n    label: i18n.t('Vertical (y) axis'),\n    content: React.Children.toArray([<AxisRange />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-titles',\n    label: i18n.t('Titles'),\n    content: React.Children.toArray([<HideTitle />, <HideSubtitle />])\n  }]\n}];","/* eslint-disable react/jsx-key */\nimport React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport AggregationType from '../../components/VisualizationOptions/Options/AggregationType';\nimport HideTitle from '../../components/VisualizationOptions/Options/HideTitle';\nimport HideSubtitle from '../../components/VisualizationOptions/Options/HideSubtitle';\nimport Legend from '../../components/VisualizationOptions/Options/Legend';\nimport CompletedOnly from '../../components/VisualizationOptions/Options/CompletedOnly';\nexport default [{\n  key: 'data-tab',\n  label: i18n.t('Data'),\n  content: [{\n    key: 'data-advanced',\n    label: i18n.t('Advanced'),\n    content: React.Children.toArray([<AggregationType />, <CompletedOnly />])\n  }]\n}, {\n  key: 'legend-tab',\n  label: i18n.t('Legend'),\n  content: [{\n    key: 'legend-section-1',\n    content: React.Children.toArray([<Legend hideStyleOptions={true} />])\n  }]\n}, {\n  key: 'style-tab',\n  label: i18n.t('Style'),\n  content: [{\n    key: 'style-titles',\n    label: i18n.t('Titles'),\n    content: React.Children.toArray([<HideTitle />, <HideSubtitle />])\n  }]\n}];","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FieldSet, Legend, TabBar, Tab } from '@dhis2/ui-core';\nimport { tabSection, tabSectionTitle, tabSectionOption, tabSectionOptionItem, tabSectionOptionToggleable, tabSectionOptionComplexInline, tabSectionOptionText, tabBar } from './styles/VisualizationOptions.style.js';\nimport { sGetUiType } from '../../reducers/ui';\nimport { getOptionsByType } from '../../modules/options/config';\nexport class VisualizationOptions extends Component {\n  state = {\n    activeTabKey: undefined\n  };\n  selectTab = tabKey => {\n    this.setState({\n      activeTabKey: tabKey\n    });\n  };\n  generateTabContent = sections => sections.map(({\n    key,\n    label,\n    content\n  }) => <div key={key} className={tabSection.className}>\n                <FieldSet>\n                    {label ? <Legend>\n                            <span className={tabSectionTitle.className}>\n                                {label}\n                            </span>\n                        </Legend> : null}\n                    {content}\n                </FieldSet>\n            </div>);\n  generateTabs = tabs => tabs.map(({\n    key,\n    label,\n    content\n  }) => ({\n    key,\n    label,\n    content: this.generateTabContent(content)\n  }));\n\n  render() {\n    const {\n      visualizationType\n    } = this.props;\n    const optionsConfig = getOptionsByType(visualizationType);\n    const tabs = this.generateTabs(optionsConfig);\n    let activeTabIndex = tabs.findIndex(tab => tab.key === this.state.activeTabKey);\n\n    if (activeTabIndex < 0) {\n      activeTabIndex = 0;\n    }\n\n    return <Fragment>\n                <div className={tabBar.className}>\n                    <TabBar>\n                        {tabs.map(({\n            key,\n            label\n          }, index) => <Tab key={key} onClick={() => this.selectTab(key)} selected={index === activeTabIndex}>\n                                {label}\n                            </Tab>)}\n                    </TabBar>\n                    {tabBar.styles}\n                </div>\n                {tabs[activeTabIndex].content}\n                {tabSection.styles}\n                {tabSectionTitle.styles}\n                {tabSectionOption.styles}\n                {tabSectionOptionItem.styles}\n                {tabSectionOptionToggleable.styles}\n                {tabSectionOptionComplexInline.styles}\n                {tabSectionOptionText.styles}\n            </Fragment>;\n  }\n\n}\nVisualizationOptions.propTypes = {\n  visualizationType: PropTypes.string.isRequired\n};\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps)(VisualizationOptions);","import { VIS_TYPE_COLUMN, VIS_TYPE_BAR, VIS_TYPE_STACKED_COLUMN, VIS_TYPE_STACKED_BAR, VIS_TYPE_PIVOT_TABLE, VIS_TYPE_LINE, VIS_TYPE_RADAR, VIS_TYPE_AREA, VIS_TYPE_PIE, VIS_TYPE_GAUGE, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_SINGLE_VALUE } from '@dhis2/analytics';\nimport pivotTableConfig from './pivotTableConfig';\nimport columnConfig from './columnConfig';\nimport stackedColumnConfig from './stackedColumnConfig';\nimport lineConfig from './lineConfig';\nimport areaConfig from './areaConfig';\nimport pieConfig from './pieConfig';\nimport gaugeConfig from './gaugeConfig';\nimport singleValueConfig from './singleValueConfig';\nexport const getOptionsByType = type => {\n  switch (type) {\n    case VIS_TYPE_COLUMN:\n    case VIS_TYPE_BAR:\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return columnConfig;\n\n    case VIS_TYPE_STACKED_COLUMN:\n    case VIS_TYPE_STACKED_BAR:\n      return stackedColumnConfig;\n\n    case VIS_TYPE_LINE:\n    case VIS_TYPE_RADAR:\n      return lineConfig;\n\n    case VIS_TYPE_AREA:\n      return areaConfig;\n\n    case VIS_TYPE_GAUGE:\n      return gaugeConfig;\n\n    case VIS_TYPE_PIE:\n      return pieConfig;\n\n    case VIS_TYPE_SINGLE_VALUE:\n      return singleValueConfig;\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return pivotTableConfig;\n\n    default:\n      // return all the options\n      return stackedColumnConfig;\n  }\n};","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { ButtonStrip, Modal, ModalTitle, ModalContent, ModalActions } from '@dhis2/ui-core';\nimport UpdateButton from '../UpdateButton/UpdateButton';\nimport HideButton from '../HideButton/HideButton';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer';\nimport VisualizationOptions from './VisualizationOptions';\nimport MenuButton from '../MenuButton/MenuButton';\n\nclass VisualizationOptionsManager extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dialogIsOpen: false\n    };\n  }\n\n  onClose = () => {\n    this.toggleVisualizationOptionsDialog();\n  };\n  toggleVisualizationOptionsDialog = () => {\n    this.setState({\n      dialogIsOpen: !this.state.dialogIsOpen\n    });\n  };\n  getPrimaryOnClick = handler => () => {\n    handler();\n    this.onClose();\n  };\n\n  render() {\n    return <Fragment>\n                <MenuButton className={this.props.className} onClick={this.toggleVisualizationOptionsDialog}>\n                    {i18n.t('Options')}\n                </MenuButton>\n                {this.state.dialogIsOpen && <Modal onClose={this.onClose} position=\"top\" large>\n                        <ModalTitle>{i18n.t('Options')}</ModalTitle>\n                        <ModalContent>\n                            <VisualizationOptions />\n                        </ModalContent>\n                        <ModalActions>\n                            <ButtonStrip>\n                                <HideButton onClick={this.onClose} />\n                                <UpdateVisualizationContainer renderComponent={handler => <UpdateButton onClick={this.getPrimaryOnClick(handler)} />} />\n                            </ButtonStrip>\n                        </ModalActions>\n                    </Modal>}\n            </Fragment>;\n  }\n\n}\n\nVisualizationOptionsManager.propTypes = {\n  className: PropTypes.string\n};\nexport default VisualizationOptionsManager;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport FileMenu from '@dhis2/d2-ui-file-menu';\nimport UpdateButton from '../UpdateButton/UpdateButton';\nimport DownloadMenu from '../DownloadMenu/DownloadMenu';\nimport InterpretationsButton from '../Interpretations/InterpretationsButton';\nimport VisualizationOptionsManager from '../VisualizationOptions/VisualizationOptionsManager';\nimport UpdateVisualizationContainer from '../UpdateButton/UpdateVisualizationContainer';\nimport * as fromActions from '../../actions';\nimport { sGetCurrent } from '../../reducers/current';\nimport history from '../../modules/history';\nimport { parseError } from '../../modules/error';\nimport styles from './styles/MenuBar.module.css';\n\nconst onOpen = id => {\n  const path = `/${id}`;\n\n  if (history.location.pathname === path) {\n    history.replace(path);\n  } else {\n    history.push(path);\n  }\n};\n\nconst onNew = () => history.push('/');\n\nconst getOnRename = props => details => props.onRenameVisualization(details);\n\nconst getOnSave = props => details => props.onSaveVisualization(details, false);\n\nconst getOnSaveAs = props => details => props.onSaveVisualization(details, true);\n\nconst getOnDelete = props => () => props.onDeleteVisualization();\n\nconst getOnError = props => error => props.onError(error);\n\nexport const MenuBar = ({ ...props\n}, context) => <div className={styles.menuBar}>\n        <UpdateVisualizationContainer renderComponent={handler => <UpdateButton className={styles.updateButton} small onClick={handler} />} />\n        <FileMenu d2={context.d2} fileId={props.id || null} fileType={props.apiObjectName} onOpen={onOpen} onNew={onNew} onRename={getOnRename(props)} onSave={getOnSave(props)} onSaveAs={getOnSaveAs(props)} onDelete={getOnDelete(props)} onError={getOnError(props)} />\n        <VisualizationOptionsManager />\n        <DownloadMenu />\n        <div className={styles.grow} />\n        <InterpretationsButton />\n    </div>;\nMenuBar.propTypes = {\n  apiObjectName: PropTypes.string,\n  id: PropTypes.string\n};\nMenuBar.contextTypes = {\n  d2: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  id: (sGetCurrent(state) || {}).id\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onRenameVisualization: details => dispatch(fromActions.tDoRenameVisualization(details)),\n  onSaveVisualization: (details, copy) => dispatch(fromActions.tDoSaveVisualization(details, copy)),\n  onDeleteVisualization: () => dispatch(fromActions.tDoDeleteVisualization()),\n  onError: error => {\n    const {\n      type,\n      message\n    } = parseError(error);\n    dispatch(fromActions.fromSnackbar.acReceivedSnackbarMessage({\n      variant: type,\n      message\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuBar);","import React from 'react';\n\nconst InterpretationIcon = () => {\n  return <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g id=\"Exp\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n                <g id=\"2---Home-+-Selected-Intp.\" transform=\"translate(-522.000000, -169.000000)\">\n                    <rect fill=\"#F4F6F8\" x=\"0\" y=\"0\" width=\"1280\" height=\"850\" />\n                    <g id=\"title-area\" transform=\"translate(298.000000, 165.000000)\">\n                        <g id=\"name-badge\" transform=\"translate(220.000000, 0.000000)\">\n                            <rect id=\"Rectangle-4\" fill=\"#FFFFFF\" opacity=\"0.700613839\" x=\"0\" y=\"0\" width=\"260\" height=\"24\" rx=\"4\" />\n                            <g id=\"undo\" transform=\"translate(4.000000, 4.000000)\">\n                                <rect id=\"frame\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" />\n                                <polyline id=\"Path\" stroke=\"#494949\" strokeLinecap=\"round\" strokeLinejoin=\"round\" points=\"2.375 2.374 2.375 6.124 6.125 6.124\" />\n                                <path d=\"M8,13.624 C10.8610015,13.6256787 13.2674888,11.4795583 13.5919996,8.63701982 C13.9165103,5.79448132 12.0556517,3.16119082 9.2678875,2.51799333 C6.48012327,1.87479584 3.65366782,3.42662163 2.7,6.124\" id=\"Path\" stroke=\"#494949\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                                <path d=\"M9,7.29289322 L11.1819805,9.47487373 C11.3772427,9.67013588 11.3772427,9.98671837 11.1819805,10.1819805 C10.9867184,10.3772427 10.6701359,10.3772427 10.4748737,10.1819805 L8.01023174,7.71733852 L8,7.7144165 L8,5.5 C8,5.22385763 8.22385763,5 8.5,5 C8.77614237,5 9,5.22385763 9,5.5 L9,7.29289322 Z\" id=\"Combined-Shape\" fill=\"#494949\" />\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>;\n};\n\nexport default InterpretationIcon;","import { colors } from '@dhis2/ui-core';\nexport default {\n  titleBar: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  cell: {\n    display: 'flex',\n    alignItems: 'center',\n    background: colors.white,\n    padding: '6px',\n    borderRadius: '5px',\n    margin: '4px'\n  },\n  title: {\n    fontSize: '14px'\n  },\n  suffix: {\n    paddingLeft: '4px'\n  },\n  interpretation: {\n    fontSize: '12px',\n    color: colors.grey700\n  },\n  interpretationIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '14px',\n    width: '14px',\n    marginRight: '3px'\n  },\n  titleUnsaved: {\n    color: colors.grey500,\n    fontStyle: 'italic'\n  },\n  titleDirty: {\n    color: colors.grey700\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetVisualization } from '../../reducers/visualization';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetUiLocale } from '../../reducers/settings';\nimport formatDate from '../../modules/formatDate';\nimport InterpretationIcon from '../../assets/InterpretationIcon';\nimport styles from './styles/TitleBar.style';\nimport { STATE_UNSAVED, STATE_SAVED, STATE_DIRTY, getVisualizationState } from '../../modules/visualization';\nexport const TITLE_UNSAVED = i18n.t('Unsaved visualization');\nexport const TITLE_DIRTY = i18n.t('Edited');\nconst defaultTitleStyle = { ...styles.cell,\n  ...styles.title\n};\nconst defaultInterpretationStyle = { ...styles.cell,\n  ...styles.interpretation\n};\n\nconst getTitleText = (titleState, visualization) => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return TITLE_UNSAVED;\n\n    case STATE_SAVED:\n    case STATE_DIRTY:\n      return visualization.name;\n\n    default:\n      return '';\n  }\n};\n\nconst getCustomTitleStyle = titleState => {\n  switch (titleState) {\n    case STATE_UNSAVED:\n      return styles.titleUnsaved;\n\n    default:\n      return null;\n  }\n};\n\nconst getSuffix = titleState => {\n  switch (titleState) {\n    case STATE_DIRTY:\n      return <div style={{ ...styles.suffix,\n        ...styles.titleDirty\n      }}>{`- ${TITLE_DIRTY}`}</div>;\n\n    default:\n      return '';\n  }\n};\n\nexport const TitleBar = ({\n  titleState,\n  titleText,\n  interpretationDate\n}) => {\n  const titleStyle = { ...defaultTitleStyle,\n    ...getCustomTitleStyle(titleState)\n  };\n  return titleText ? <div data-test=\"chart-title\" style={styles.titleBar}>\n            <div style={titleStyle}>\n                {titleText}\n                {getSuffix(titleState)}\n            </div>\n            {interpretationDate && <div style={defaultInterpretationStyle}>\n                    <div style={styles.interpretationIcon}>\n                        <InterpretationIcon />\n                    </div>\n                    <div>\n                        {i18n.t('Viewing interpretation from {{interpretationDate}}', {\n          interpretationDate\n        })}\n                    </div>\n                </div>}\n        </div> : null;\n};\nTitleBar.propTypes = {\n  interpretationDate: PropTypes.string,\n  titleState: PropTypes.string,\n  titleText: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visualization: sGetVisualization(state),\n  current: sGetCurrent(state),\n  interpretation: sGetUiInterpretation(state),\n  uiLocale: sGetUiLocale(state)\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => {\n  const {\n    visualization,\n    current,\n    interpretation,\n    uiLocale\n  } = stateProps;\n  const titleState = getVisualizationState(visualization, current);\n  return { ...dispatchProps,\n    ...ownProps,\n    titleState: titleState,\n    titleText: getTitleText(titleState, visualization),\n    interpretationDate: interpretation && interpretation.created ? formatDate(interpretation.created, uiLocale) : null\n  };\n};\n\nexport default connect(mapStateToProps, null, mergeProps)(TitleBar);","import { DIMENSION_ID_ORGUNIT, layoutGetAxisIdDimensionIdsObject } from '@dhis2/analytics';\nimport { getInverseLayout } from './layout';\nexport const getPathForOrgUnit = (orgUnit, parentGraphMap) => {\n  if (parentGraphMap[orgUnit.id] === undefined) {\n    return undefined;\n  } // if this is root org unit then in parentGraphMap object\n  // it has empty string as value and id as key\n\n\n  if (parentGraphMap[orgUnit.id] === '') {\n    return '/' + orgUnit.id;\n  }\n\n  return '/' + parentGraphMap[orgUnit.id] + '/' + orgUnit.id;\n};\nexport const appendPathsToOrgUnits = (current, ui) => {\n  const dimensionIdsByAxis = layoutGetAxisIdDimensionIdsObject(current);\n  const inverseLayout = getInverseLayout(dimensionIdsByAxis);\n  const ouAxis = inverseLayout[DIMENSION_ID_ORGUNIT];\n  const {\n    parentGraphMap\n  } = ui;\n\n  if (!ouAxis) {\n    return current;\n  }\n\n  return { ...current,\n    [ouAxis]: current[ouAxis].map(dimension => ({ ...dimension,\n      items: dimension.items.map(item => ({ ...item,\n        path: getPathForOrgUnit(item, parentGraphMap)\n      }))\n    }))\n  };\n};\nexport const removeUnnecessaryAttributesFromAnalyticalObject = current => ({ ...current,\n  id: undefined,\n  name: undefined,\n  displayName: undefined\n});\nexport const appendDimensionItemNamesToAnalyticalObject = (current, metadata) => {\n  const appendNames = dimension => ({ ...dimension,\n    items: dimension.items.map(item => ({ ...item,\n      name: metadata[item.id] ? metadata[item.id].name : undefined\n    }))\n  });\n\n  return { ...current,\n    columns: current.columns.map(appendNames),\n    filters: current.filters.map(appendNames),\n    rows: current.rows.map(appendNames)\n  };\n};\nexport const appendDimensionItemTypeToAnalyticalObject = (current, metadata) => {\n  const appendDimensionType = dimension => ({ ...dimension,\n    items: dimension.items.map(item => ({ ...item,\n      dimensionItemType: metadata[item.id] ? metadata[item.id].dimensionItemType : undefined\n    }))\n  });\n\n  return { ...current,\n    columns: current.columns.map(appendDimensionType),\n    filters: current.filters.map(appendDimensionType),\n    rows: current.rows.map(appendDimensionType)\n  };\n};\nexport const appendCompleteParentGraphMap = (current, {\n  parentGraphMap\n}) => ({ ...current,\n  parentGraphMap: { ...current.parentGraphMap,\n    ...parentGraphMap\n  }\n});\nexport const prepareCurrentAnalyticalObject = (current, metadata, ui) => {\n  let result;\n  result = removeUnnecessaryAttributesFromAnalyticalObject(current);\n  result = appendDimensionItemNamesToAnalyticalObject(result, metadata);\n  result = appendDimensionItemTypeToAnalyticalObject(result, metadata);\n  result = appendPathsToOrgUnits(result, ui);\n  result = appendCompleteParentGraphMap(result, ui);\n  return result;\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <rect fill=\"#63A4FF\" x=\"6\" y=\"14\" width=\"10\" height=\"32\" />\n            <rect fill=\"#1976D2\" x=\"20\" y=\"24\" width=\"10\" height=\"22\" />\n            <rect fill=\"#004BA0\" x=\"36\" y=\"4\" width=\"10\" height=\"42\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n        </g>\n    </svg>;\n\nColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default ColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <rect fill=\"#63A4FF\" x=\"6\" y=\"14\" width=\"10\" height=\"32\" />\n            <rect fill=\"#9EC6FF\" transform=\"translate(11.000000, 16.500000) scale(1, -1) translate(-11.000000, -16.500000) \" x=\"6\" y=\"7\" width=\"10\" height=\"19\" />\n            <rect fill=\"#1976D2\" x=\"20\" y=\"20\" width=\"10\" height=\"26\" />\n            <rect fill=\"#63A4FF\" transform=\"translate(25.000000, 15.500000) scale(1, -1) translate(-25.000000, -15.500000) \" x=\"20\" y=\"11\" width=\"10\" height=\"9\" />\n            <rect fill=\"#004BA0\" x=\"36\" y=\"33\" width=\"10\" height=\"13\" />\n            <rect fill=\"#1976D2\" transform=\"translate(41.000000, 23.500000) scale(1, -1) translate(-41.000000, -23.500000) \" x=\"36\" y=\"14\" width=\"10\" height=\"19\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n        </g>\n    </svg>;\n\nStackedColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst BarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <rect fill=\"#63A4FF\" x=\"2\" y=\"4\" width=\"17\" height=\"10\" />\n            <rect fill=\"#1976D2\" x=\"2\" y=\"18\" width=\"34\" height=\"10\" />\n            <rect fill=\"#004BA0\" x=\"2\" y=\"32\" width=\"40\" height=\"10\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n        </g>\n    </svg>;\n\nBarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default BarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StackedBarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <rect fill=\"#63A4FF\" x=\"2\" y=\"4\" width=\"17\" height=\"10\" />\n            <rect fill=\"#9EC6FF\" transform=\"translate(23.500000, 9.000000) scale(-1, 1) translate(-23.500000, -9.000000) \" x=\"19\" y=\"4\" width=\"9\" height=\"10\" />\n            <rect fill=\"#1976D2\" x=\"2\" y=\"18\" width=\"34\" height=\"10\" />\n            <rect fill=\"#63A4FF\" x=\"13\" y=\"18\" width=\"23\" height=\"10\" />\n            <rect fill=\"#004BA0\" x=\"2\" y=\"32\" width=\"40\" height=\"10\" />\n            <rect fill=\"#1976D2\" x=\"33\" y=\"32\" width=\"9\" height=\"10\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n            <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n        </g>\n    </svg>;\n\nStackedBarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default StackedBarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PieIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <defs>\n            <mask id=\"mask-4\" fill=\"white\">\n                <circle cx=\"24\" cy=\"24\" r=\"24\" />\n            </mask>\n        </defs>\n        <g stroke=\"none\" strokeWidth=\"0\" fill=\"none\" fillRule=\"evenodd\">\n            <g transform=\"translate(24.000000, 24.000000) rotate(-135.000000) translate(-24.000000, -24.000000) \">\n                <g stroke=\"none\" fill=\"none\" strokeDasharray=\"30.17142857142857,240\" mask=\"url(#mask-4)\" strokeWidth=\"48\">\n                    <path stroke=\"#63A4FF\" d=\"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z\" />\n                </g>\n                <g stroke=\"none\" fill=\"none\" strokeDasharray=\"82.97142857142858,240\" mask=\"url(#mask-4)\" transform=\"translate(24.000000, 24.000000) rotate(-72.000000) translate(-24.000000, -24.000000) \" strokeWidth=\"48\">\n                    <path stroke=\"#1976D2\" d=\"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z\" />\n                </g>\n                <g stroke=\"none\" fill=\"none\" strokeDasharray=\"37.71428571428572,240\" mask=\"url(#mask-4)\" transform=\"translate(24.000000, 24.000000) rotate(-270.000000) translate(-24.000000, -24.000000) \" strokeWidth=\"48\">\n                    <path stroke=\"#004BA0\" d=\"M24 48C37.254834 48 48 37.254834 48 24 48 10.745166 37.254834 0 24 0 10.745166 0 0 10.745166 0 24 0 37.254834 10.745166 48 24 48Z\" />\n                </g>\n            </g>\n        </g>\n    </svg>;\n\nPieIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default PieIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GaugeIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g transform=\"translate(0.000000, -12.000000)\">\n                <path d=\"M2,36 C2,23.8497355 11.8497355,14 24,14 C36.1502645,14 46,23.8497355 46,36 L48,36 C48,22.745166 37.254834,12 24,12 C10.745166,12 0,22.745166 0,36 L2,36 Z\" fill=\"#9E9E9E\" fillRule=\"nonzero\" />\n                <path d=\"M39.5630877,20.4405157 C39.0656993,19.9377314 38.5441136,19.4570095 38,19 C34.2678935,15.9151064 29.3575953,14 24,14 C11.8497355,14 2,23.8497355 2,36 L8,36 C8,27.163444 15.163444,20 24,20 C27.7876065,20 31.3827316,21.3146632 34.1773496,23.6246453 C34.5775703,23.9608232 34.9595684,24.3130995 35.3225781,24.6801975 L39.5630877,20.4405157 Z\" fill=\"#63A4FF\" fillRule=\"nonzero\" />\n            </g>\n        </g>\n    </svg>;\n\nGaugeIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default GaugeIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst LineIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <mask id=\"mask-line-icon\" fill=\"white\">\n                    <rect x=\"0\" y=\"0\" width=\"48\" height=\"48\" />\n                </mask>\n                <polygon stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-line-icon)\" points=\"4 28 16 16 26.7935166 26.7935166 33.0558406 20.5311926 53 36 53 51 0 51 0 28\" />\n                <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n                <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n            </g>\n        </g>\n    </svg>;\n\nLineIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default LineIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst AreaIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <mask id=\"mask-area-icon\" fill=\"white\">\n                    <rect x=\"0\" y=\"0\" width=\"48\" height=\"48\" />\n                </mask>\n                <g />\n                <polygon stroke=\"#1976D2\" strokeWidth=\"2\" fill=\"#63A4FF\" mask=\"url(#mask-area-icon)\" points=\"4 28 16 16 26.7935166 26.7935166 33.0558406 20.5311926 53 36 53 51 0 51 0 28\" />\n                <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n                <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n            </g>\n        </g>\n    </svg>;\n\nAreaIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default AreaIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst RadarIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <circle stroke=\"#9E9E9E\" strokeWidth=\"2\" cx=\"24\" cy=\"24\" r=\"23\" />\n            <circle stroke=\"#9E9E9E\" strokeWidth=\"2\" cx=\"24\" cy=\"24\" r=\"15\" />\n            <circle stroke=\"#9E9E9E\" strokeWidth=\"2\" cx=\"24\" cy=\"24\" r=\"5\" />\n            <circle fill=\"#1976D2\" cx=\"24\" cy=\"9\" r=\"2\" />\n            <circle fill=\"#1976D2\" cx=\"11\" cy=\"31\" r=\"2\" />\n            <circle fill=\"#63A4FF\" cx=\"24\" cy=\"39\" r=\"2\" />\n            <circle fill=\"#004BA0\" cx=\"39\" cy=\"24\" r=\"2\" />\n            <circle fill=\"#004BA0\" cx=\"40\" cy=\"40\" r=\"2\" />\n        </g>\n    </svg>;\n\nRadarIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default RadarIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst YearOverYearLineIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <mask id=\"mask-yoyl-icon\" fill=\"white\">\n                    <rect x=\"0\" y=\"0\" width=\"48\" height=\"48\" />\n                </mask>\n                <polygon stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-yoyl-icon)\" points=\"1 28 10 35 18 16 34 35 50 36 50 51 -3 51 -3 28\" />\n                <polygon stroke=\"#004BA0\" strokeWidth=\"2\" mask=\"url(#mask-yoyl-icon)\" points=\"1 20 8 20 19 29 36 17 50 28 50 51 -3 51 -3 20\" />\n                <polygon stroke=\"#63A4FF\" strokeWidth=\"2\" mask=\"url(#mask-yoyl-icon)\" points=\"1 35 19 39 28 31 38 28 50 43 50 66 -3 66 -3 35\" />\n                <rect fill=\"#9E9E9E\" x=\"0\" y=\"0\" width=\"2\" height=\"48\" />\n                <rect fill=\"#9E9E9E\" x=\"0\" y=\"46\" width=\"48\" height=\"2\" />\n            </g>\n        </g>\n    </svg>;\n\nYearOverYearLineIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default YearOverYearLineIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst YearOverYearColumnIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <polygon points=\"0 0 48 0 48 48 0 48\" />\n                <polygon fill=\"#63A4FF\" points=\"6 14 11 14 11 46 6 46\" />\n                <polygon fill=\"#63A4FF\" points=\"20 23 25 23 25 46 20 46\" />\n                <polygon fill=\"#63A4FF\" points=\"34 30 39 30 39 46 34 46\" />\n                <polygon fill=\"#004BA0\" points=\"11 26 16 26 16 46 11 46\" />\n                <polygon fill=\"#004BA0\" points=\"25 16 30 16 30 46 25 46\" />\n                <polygon fill=\"#004BA0\" points=\"39 9 44 9 44 46 39 46\" />\n                <polygon fill=\"#9E9E9E\" points=\"0 0 2 0 2 48 0 48\" />\n                <polygon fill=\"#9E9E9E\" points=\"0 46 48 46 48 48 0 48\" />\n            </g>\n        </g>\n    </svg>;\n\nYearOverYearColumnIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default YearOverYearColumnIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SingleValueIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <path d=\"M45,9.59a2,2,0,0,1,2,2v25a2,2,0,0,1-2,2H3a2,2,0,0,1-2-2v-25a2,2,0,0,1,2-2H45m0-1H3a3,3,0,0,0-3,3v25a3,3,0,0,0,3,3H45a3,3,0,0,0,3-3v-25a3,3,0,0,0-3-3Z\" fill=\"#9e9e9e\" />\n        <path d=\"M13.06,31H10.82V20.16L7.51,21.29V19.4l5.26-1.94h.29Z\" fill=\"#1976d2\" />\n        <path d=\"M27,31H18V29.46l4.5-4.91a10.45,10.45,0,0,0,1.38-1.81,2.91,2.91,0,0,0,.42-1.46,2.2,2.2,0,0,0-.55-1.56,1.86,1.86,0,0,0-1.46-.59,2.2,2.2,0,0,0-1.7.66,2.65,2.65,0,0,0-.6,1.83H17.69a4.36,4.36,0,0,1,.56-2.22,3.9,3.9,0,0,1,1.6-1.54,5.19,5.19,0,0,1,2.41-.54,4.54,4.54,0,0,1,3.1,1A3.41,3.41,0,0,1,26.5,21a4.66,4.66,0,0,1-.57,2.12,11.88,11.88,0,0,1-1.87,2.52l-3.3,3.53H27Z\" fill=\"#1976d2\" />\n        <path d=\"M32.68,23.23h1.38a2.47,2.47,0,0,0,1.64-.54,1.9,1.9,0,0,0,.61-1.53,2.1,2.1,0,0,0-.51-1.5,2,2,0,0,0-1.54-.53,2.13,2.13,0,0,0-1.49.52A1.76,1.76,0,0,0,32.18,21H29.93a3.39,3.39,0,0,1,.55-1.89A3.74,3.74,0,0,1,32,17.79a5.15,5.15,0,0,1,2.21-.47,4.68,4.68,0,0,1,3.18,1,3.57,3.57,0,0,1,1.15,2.83A2.87,2.87,0,0,1,38,22.87a3.53,3.53,0,0,1-1.49,1.21,3.28,3.28,0,0,1,1.69,1.2,3.24,3.24,0,0,1,.58,1.95,3.63,3.63,0,0,1-1.25,2.89,4.82,4.82,0,0,1-3.28,1.08,4.82,4.82,0,0,1-3.19-1,3.44,3.44,0,0,1-1.24-2.77h2.25a1.88,1.88,0,0,0,.6,1.45,2.29,2.29,0,0,0,1.61.56,2.34,2.34,0,0,0,1.65-.56,2.09,2.09,0,0,0,.6-1.61,2.13,2.13,0,0,0-.63-1.65A2.7,2.7,0,0,0,34,25H32.68Z\" fill=\"#1976d2\" />\n    </svg>;\n\nSingleValueIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default SingleValueIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GlobeIcon = ({\n  style = {\n    width: 24,\n    height: 24,\n    paddingRight: '8px'\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <g>\n                    <mask id=\"mask-globe-icon\" fill=\"white\">\n                        <rect x=\"0\" y=\"0\" width=\"48\" height=\"48\" />\n                    </mask>\n                    <circle stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-globe-icon)\" cx=\"24\" cy=\"24\" r=\"23\" />\n                    <polyline stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-globe-icon)\" points=\"1 21 4 24 8 26 9 24 6 19 11 18 18 12 14 9 16 6 15 3\" />\n                    <polyline stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-globe-icon)\" points=\"47 25 45 21 43 19 40 18 37 18 34 17 32 18 30 23 33 27 37 27 38 30 38 38 38.5 42\" />\n                    <polyline stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-globe-icon)\" points=\"38 6 37 7 34 6 32 8 34 10 33 12 33 15 37 14 39 15 43 12\" />\n                    <polyline stroke=\"#1976D2\" strokeWidth=\"2\" mask=\"url(#mask-globe-icon)\" points=\"18 46 16 41 15 36 13 34 10 31 11 28 14 26 18 27 20 29 23 30 25 32 25 36 23 40 21 47\" />\n                </g>\n            </g>\n        </g>\n    </svg>;\n\nGlobeIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default GlobeIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PivotTableIcon = ({\n  style = {\n    paddingRight: '8px',\n    width: 24,\n    height: 24\n  }\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0,0,48,48\" style={style}>\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <polygon points=\"0 0 48 0 48 48 0 48\" />\n            <rect stroke=\"#4A5768\" strokeWidth=\"2\" x=\"7\" y=\"11\" width=\"34\" height=\"26\" />\n            <rect fill=\"#4A5768\" x=\"8\" y=\"18\" width=\"32\" height=\"2\" />\n            <rect fill=\"#4A5768\" x=\"19\" y=\"11\" width=\"2\" height=\"26\" />\n            <rect fill=\"#4A5768\" x=\"8\" y=\"24\" width=\"32\" height=\"2\" />\n            <rect fill=\"#4A5768\" x=\"8\" y=\"30\" width=\"32\" height=\"2\" />\n        </g>\n    </svg>;\n\nPivotTableIcon.propTypes = {\n  style: PropTypes.object\n};\nexport default PivotTableIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { VIS_TYPE_COLUMN, VIS_TYPE_STACKED_COLUMN, VIS_TYPE_BAR, VIS_TYPE_STACKED_BAR, VIS_TYPE_LINE, VIS_TYPE_AREA, VIS_TYPE_PIE, VIS_TYPE_RADAR, VIS_TYPE_GAUGE, VIS_TYPE_YEAR_OVER_YEAR_LINE, VIS_TYPE_YEAR_OVER_YEAR_COLUMN, VIS_TYPE_SINGLE_VALUE, VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport ColumnIcon from '../../assets/ColumnIcon';\nimport StackedColumnIcon from '../../assets/StackedColumnIcon';\nimport BarIcon from '../../assets/BarIcon';\nimport StackedBarIcon from '../../assets/StackedBarIcon';\nimport PieIcon from '../../assets/PieIcon';\nimport GaugeIcon from '../../assets/GaugeIcon';\nimport LineIcon from '../../assets/LineIcon';\nimport AreaIcon from '../../assets/AreaIcon';\nimport RadarIcon from '../../assets/RadarIcon';\nimport YearOverYearLineIcon from '../../assets/YearOverYearLineIcon';\nimport YearOverYearColumnIcon from '../../assets/YearOverYearColumnIcon';\nimport SingleValueIcon from '../../assets/SingleValueIcon';\nimport GlobeIcon from '../../assets/GlobeIcon';\nimport PivotTableIcon from '../../assets/PivotTableIcon';\n\nconst ListItemIcon = ({\n  iconType,\n  style\n}) => {\n  switch (iconType) {\n    case VIS_TYPE_STACKED_COLUMN:\n      return <StackedColumnIcon style={style} />;\n\n    case VIS_TYPE_BAR:\n      return <BarIcon style={style} />;\n\n    case VIS_TYPE_STACKED_BAR:\n      return <StackedBarIcon style={style} />;\n\n    case VIS_TYPE_PIE:\n      return <PieIcon style={style} />;\n\n    case VIS_TYPE_GAUGE:\n      return <GaugeIcon style={style} />;\n\n    case VIS_TYPE_LINE:\n      return <LineIcon style={style} />;\n\n    case VIS_TYPE_AREA:\n      return <AreaIcon style={style} />;\n\n    case VIS_TYPE_RADAR:\n      return <RadarIcon style={style} />;\n\n    case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n      return <YearOverYearLineIcon style={style} />;\n\n    case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n      return <YearOverYearColumnIcon style={style} />;\n\n    case VIS_TYPE_SINGLE_VALUE:\n      return <SingleValueIcon style={style} />;\n\n    case 'MAP':\n      return <GlobeIcon style={style} />;\n\n    case VIS_TYPE_PIVOT_TABLE:\n      return <PivotTableIcon style={style} />;\n\n    case VIS_TYPE_COLUMN:\n    default:\n      return <ColumnIcon style={style} />;\n  }\n};\n\nListItemIcon.propTypes = {\n  iconType: PropTypes.string,\n  style: PropTypes.object\n};\nexport default ListItemIcon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from './ListItemIcon';\nimport styles from './styles/VisualizationTypeSelector.module.css';\n\nconst VisualizationTypeListItem = ({\n  iconType,\n  label,\n  disabled,\n  isSelected,\n  onClick\n}) => {\n  const classNames = [styles.listItem];\n\n  if (isSelected) {\n    classNames.push(styles.listItemActive);\n  }\n\n  if (disabled) {\n    classNames.push(styles.listItemDisabled);\n  }\n\n  return <div className={classNames.join(' ')} onClick={onClick}>\n            <span className={styles.listItemIcon}>\n                {<ListItemIcon iconType={iconType} style={{\n        width: 48,\n        height: 48\n      }} />}\n            </span>\n            <span className={styles.listItemText}>{label}</span>\n        </div>;\n};\n\nVisualizationTypeListItem.propTypes = {\n  disabled: PropTypes.bool,\n  iconType: PropTypes.string,\n  isSelected: PropTypes.bool,\n  label: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default VisualizationTypeListItem;","import React, { useState, createRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport { visTypeDisplayNames } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Divider, Popper } from '@dhis2/ui-core';\nimport { prepareCurrentAnalyticalObject } from '../../modules/currentAnalyticalObject';\nimport { getAdaptedUiByType } from '../../modules/ui';\nimport { sGetUi, sGetUiType } from '../../reducers/ui';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetMetadata } from '../../reducers/metadata';\nimport { acSetUi } from '../../actions/ui';\nimport { apiSaveAOInUserDataStore, CURRENT_AO_KEY } from '../../api/userDataStore';\nimport VisualizationTypeListItem from './VisualizationTypeListItem';\nimport ListItemIcon from './ListItemIcon';\nimport styles from './styles/VisualizationTypeSelector.module.css';\nexport const MAPS_APP_URL = 'dhis-web-maps';\nexport const VisualizationTypeSelector = ({\n  visualizationType,\n  ui,\n  setUi,\n  current,\n  metadata\n}, context) => {\n  const baseUrl = context.baseUrl;\n  const [listIsOpen, setListIsOpen] = useState(false);\n\n  const toggleList = () => setListIsOpen(!listIsOpen);\n\n  const handleListItemClick = type => () => {\n    setUi(getAdaptedUiByType({ ...ui,\n      type\n    }));\n    toggleList();\n  };\n\n  const handleOpenAsMapClick = async event => {\n    if (!current) {\n      event.stopPropagation();\n      return;\n    }\n\n    const currentAnalyticalObject = prepareCurrentAnalyticalObject(current, metadata, ui);\n    await apiSaveAOInUserDataStore(currentAnalyticalObject);\n    window.location.href = `${baseUrl}/${MAPS_APP_URL}?${CURRENT_AO_KEY}=true`;\n  };\n\n  const getVisTypes = () => Object.keys(visTypeDisplayNames);\n\n  const VisTypesList = <Card>\n            <div className={styles.listContainer}>\n                {getVisTypes().map(type => <VisualizationTypeListItem key={type} iconType={type} label={visTypeDisplayNames[type]} isSelected={type === visualizationType} onClick={handleListItemClick(type)} />)}\n                <Divider />\n                <VisualizationTypeListItem key={'MAP'} iconType={'MAP'} label={i18n.t('Open as Map')} // TODO: Open as: Map when i18next nsSeparator fixed\n      onClick={handleOpenAsMapClick} disabled={!current} />\n            </div>\n        </Card>;\n  const buttonRef = createRef();\n  return <>\n            <div onClick={toggleList} ref={buttonRef} className={styles.button}>\n                <ListItemIcon iconType={visualizationType} />\n                <span>{visTypeDisplayNames[visualizationType]}</span>\n                <ArrowDropDownIcon style={{\n        marginLeft: 'auto'\n      }} />\n            </div>\n            {listIsOpen && createPortal(<div onClick={toggleList} className={styles.backdrop}>\n                        <Popper reference={buttonRef} placement=\"bottom-start\">\n                            <div className={styles.cardContainer}>\n                                {VisTypesList}\n                            </div>\n                        </Popper>\n                    </div>, document.body)}\n        </>;\n};\nVisualizationTypeSelector.propTypes = {\n  current: PropTypes.object,\n  metadata: PropTypes.object,\n  setUi: PropTypes.func,\n  ui: PropTypes.object,\n  visualizationType: PropTypes.oneOf(Object.keys(visTypeDisplayNames))\n};\nVisualizationTypeSelector.contextTypes = {\n  baseUrl: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visualizationType: sGetUiType(state),\n  current: sGetCurrent(state),\n  metadata: sGetMetadata(state),\n  ui: sGetUi(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setUi: ui => dispatch(acSetUi(ui))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VisualizationTypeSelector);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getAvailableAxes, getAxisNameByLayoutType, getLayoutTypeByVisType } from '@dhis2/analytics';\nimport { SplitButton, Menu, MenuItem, Button } from '@dhis2/ui-core';\nimport i18n from '@dhis2/d2-i18n';\nimport { sGetUiActiveModalDialog, sGetUiType } from '../../../../reducers/ui';\nimport { acAddUiLayoutDimensions } from '../../../../actions/ui';\nimport styles from './styles/AddToLayoutButton.module.css';\nexport const AddToLayoutButton = ({\n  dialogId,\n  visType,\n  onAddDimension,\n  onClick\n}) => {\n  const availableAxes = getAvailableAxes(visType);\n  const AddToLayoutButton = availableAxes.length > 1 ? SplitButton : Button;\n\n  const clickHandler = axisId => {\n    onAddDimension({\n      [dialogId]: {\n        axisId\n      }\n    });\n    onClick();\n  };\n\n  const renderMenu = () => <Menu maxWidth=\"380px\">\n            {getAvailableAxes(visType).slice(1).map(axis => <MenuItem key={axis} onClick={() => clickHandler(axis)} label={i18n.t(`Add to {{axisName}}`, {\n      axisName: getAxisNameByLayoutType(axis, getLayoutTypeByVisType(visType))\n    })} />)}\n        </Menu>;\n\n  return <AddToLayoutButton component={availableAxes.length > 1 ? renderMenu() : null} onClick={() => clickHandler(availableAxes[0])} primary className={styles.button}>\n            {i18n.t(`Add to {{axisName}}`, {\n      axisName: getAxisNameByLayoutType(availableAxes[0], getLayoutTypeByVisType(visType))\n    })}\n        </AddToLayoutButton>;\n};\nAddToLayoutButton.propTypes = {\n  dialogId: PropTypes.string.isRequired,\n  visType: PropTypes.string.isRequired,\n  onAddDimension: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state),\n  dialogId: sGetUiActiveModalDialog(state)\n});\n\nexport default connect(mapStateToProps, {\n  onAddDimension: acAddUiLayoutDimensions\n})(AddToLayoutButton);","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport debounce from 'lodash-es/debounce';\nimport isEqual from 'lodash-es/isEqual';\nimport i18n from '@dhis2/d2-i18n';\nimport { DataDimension, DynamicDimension, PeriodDimension, OrgUnitDimension, ouIdHelper, DIMENSION_ID_DATA, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, getAxisMaxNumberOfItems, getDisplayNameByVisType, filterOutPredefinedDimensions, apiFetchRecommendedIds } from '@dhis2/analytics';\nimport { Modal, ModalContent, ModalActions, ButtonStrip, ModalTitle } from '@dhis2/ui-core';\nimport HideButton from '../../HideButton/HideButton';\nimport AddToLayoutButton from './AddToLayoutButton/AddToLayoutButton';\nimport UpdateVisualizationContainer from '../../UpdateButton/UpdateVisualizationContainer';\nimport { acSetUiActiveModalDialog, acRemoveUiItems, acAddUiItems, acSetUiItems, acAddParentGraphMap } from '../../../actions/ui';\nimport { acAddMetadata } from '../../../actions/metadata';\nimport { acSetRecommendedIds } from '../../../actions/recommendedIds';\nimport { sGetUiItems, sGetUiItemsByDimension, sGetUiActiveModalDialog, sGetUiParentGraphMap, sGetUiType, getAxisIdByDimensionId, sGetDimensionIdsFromLayout } from '../../../reducers/ui';\nimport { sGetDimensions } from '../../../reducers/dimensions';\nimport { sGetMetadata } from '../../../reducers/metadata';\nimport { sGetSettingsDisplayNameProperty } from '../../../reducers/settings';\nimport { removeLastPathSegment, getOuPath } from '../../../modules/orgUnit';\nimport UpdateButton from '../../UpdateButton/UpdateButton';\nexport class DialogManager extends Component {\n  state = {\n    onMounted: false\n  };\n  componentDidUpdate = prevProps => {\n    const shouldFetchIds = !isEqual(prevProps.dxIds, this.props.dxIds) || !isEqual(prevProps.ouIds, this.props.ouIds);\n\n    if (shouldFetchIds) {\n      this.fetchRecommended();\n    }\n\n    if (this.props.dialogId === DIMENSION_ID_ORGUNIT && !this.state.ouMounted) {\n      this.setState({\n        ouMounted: true\n      });\n    }\n  };\n  fetchRecommended = debounce(async () => {\n    const ids = await apiFetchRecommendedIds(this.context.d2, this.props.dxIds, this.props.ouIds);\n    this.props.setRecommendedIds(ids);\n  }, 1000);\n  selectUiItems = ({\n    dimensionId,\n    items\n  }) => {\n    this.props.setUiItems({\n      dimensionId,\n      itemIds: items.map(item => item.id)\n    });\n\n    switch (dimensionId) {\n      case DIMENSION_ID_ORGUNIT:\n        {\n          const forMetadata = {};\n          const forParentGraphMap = {};\n          items.forEach(ou => {\n            const id = ouIdHelper.removePrefix(ou.id);\n            forMetadata[id] = {\n              id,\n              name: ou.name || ou.displayName,\n              displayName: ou.displayName\n            };\n\n            if (ou.path) {\n              const path = removeLastPathSegment(ou.path);\n              forParentGraphMap[ou.id] = path === `/${ou.id}` ? '' : path.replace(/^\\//, '');\n            }\n          });\n          this.props.addMetadata(forMetadata);\n          this.props.addParentGraphMap(forParentGraphMap);\n          break;\n        }\n\n      default:\n        {\n          this.props.addMetadata(items.reduce((obj, item) => {\n            obj[item.id] = {\n              id: item.id,\n              name: item.name || item.displayName,\n              displayName: item.displayName\n            };\n            return obj;\n          }, {}));\n        }\n    }\n  };\n  closeDialog = () => this.props.closeDialog(null);\n  getSelectedItems = dialogId => {\n    return this.props.selectedItems[dialogId] ? this.props.selectedItems[dialogId].filter(id => this.props.metadata[id]).map(id => ({\n      id,\n      name: this.props.metadata[id].name\n    })) : [];\n  };\n  getOrgUnitsFromIds = (ids, metadata, parentGraphMap) => ids.filter(id => metadata[ouIdHelper.removePrefix(id)] !== undefined).map(id => {\n    const ouUid = ouIdHelper.removePrefix(id);\n    return {\n      id,\n      name: metadata[ouUid].displayName || metadata[ouUid].name,\n      path: getOuPath(ouUid, metadata, parentGraphMap)\n    };\n  }); // The OU content is persisted as mounted in order\n  // to cache the org unit tree data\n\n  renderPersistedContent = dimensionProps => {\n    const {\n      displayNameProperty,\n      ouIds,\n      metadata,\n      parentGraphMap,\n      dialogId\n    } = this.props;\n\n    if (this.state.ouMounted) {\n      const ouItems = this.getOrgUnitsFromIds(ouIds, metadata, parentGraphMap);\n      const display = DIMENSION_ID_ORGUNIT === dialogId ? 'block' : 'none';\n      return <div key={DIMENSION_ID_ORGUNIT} style={{\n        display\n      }}>\n                    <OrgUnitDimension displayNameProperty={displayNameProperty} ouItems={ouItems} {...dimensionProps} />\n                </div>;\n    }\n\n    return null;\n  };\n  renderDialogContent = () => {\n    const {\n      displayNameProperty,\n      dialogId,\n      type,\n      removeUiItems,\n      setUiItems\n    } = this.props;\n    const dimensionProps = {\n      d2: this.context.d2,\n      onSelect: this.selectUiItems,\n      onDeselect: removeUiItems,\n      onReorder: setUiItems\n    };\n\n    const dynamicContent = () => {\n      const selectedItems = this.getSelectedItems(dialogId);\n      let infoBoxMessage;\n      const axisId = this.props.getAxisIdByDimensionId(dialogId);\n      const visType = type;\n      const numberOfItems = selectedItems.length;\n      const axisMaxNumberOfItems = getAxisMaxNumberOfItems(visType, axisId);\n      const hasMaxNumberOfItemsRule = !!axisMaxNumberOfItems;\n\n      if (hasMaxNumberOfItemsRule && numberOfItems > axisMaxNumberOfItems) {\n        infoBoxMessage = axisMaxNumberOfItems === 1 ? i18n.t(`'{{visualizationType}}' is intended to show a single data item. Only the first item will be used and saved.`, {\n          visualizationType: getDisplayNameByVisType(visType)\n        }) : i18n.t(`'{{visualiationType}}' is intended to show maximum {{maxNumber}} number of items. Only the first {{maxNumber}} items will be used and saved.`, {\n          visualiationType: getDisplayNameByVisType(visType),\n          maxNumber: axisMaxNumberOfItems\n        });\n        selectedItems.forEach((item, index) => {\n          item.isActive = index < axisMaxNumberOfItems;\n        });\n      }\n\n      if (dialogId === DIMENSION_ID_DATA) {\n        return <DataDimension displayNameProp={displayNameProperty} selectedDimensions={selectedItems} infoBoxMessage={infoBoxMessage} {...dimensionProps} />;\n      }\n\n      if (dialogId === DIMENSION_ID_PERIOD) {\n        return <PeriodDimension selectedPeriods={selectedItems} {...dimensionProps} // TODO infoBoxMessage should ideally be implemented for all dimensions\n        />;\n      }\n\n      const nonPredefinedDimensions = filterOutPredefinedDimensions(Object.keys(this.props.dimensions));\n\n      if (nonPredefinedDimensions.includes(dialogId)) {\n        return <DynamicDimension selectedItems={selectedItems} dialogId={dialogId} {...dimensionProps} // TODO infoBoxMessage should ideally be implemented for all dimensions\n        />;\n      }\n\n      return null;\n    };\n\n    return <Fragment>\n                {this.renderPersistedContent(dimensionProps)}\n                {dialogId && dynamicContent()}\n            </Fragment>;\n  };\n  getPrimaryOnClick = handler => () => {\n    handler();\n    this.closeDialog();\n  };\n\n  render() {\n    const {\n      dialogId,\n      dimensions\n    } = this.props;\n    const nonPredefinedDimensions = filterOutPredefinedDimensions(Object.keys(this.props.dimensions));\n    let dialogTitle = '';\n\n    if (dialogId === DIMENSION_ID_DATA) {\n      dialogTitle = i18n.t('Data');\n    } else if (dialogId === DIMENSION_ID_PERIOD) {\n      dialogTitle = i18n.t('Period');\n    } else if (dialogId === DIMENSION_ID_ORGUNIT) {\n      dialogTitle = i18n.t('Organisation units');\n    } else if (nonPredefinedDimensions.includes(dialogId)) {\n      dialogTitle = dimensions[dialogId] && dimensions[dialogId].name;\n    }\n\n    return <Fragment>\n                {dialogId in dimensions && <Modal onClose={this.closeDialog} data-test=\"dialog-manager\" position=\"top\" large>\n                        <ModalTitle>{dialogTitle}</ModalTitle>\n                        <ModalContent>\n                            {this.renderDialogContent()}\n                        </ModalContent>\n                        <ModalActions>\n                            <ButtonStrip>\n                                <HideButton onClick={this.closeDialog} />\n                                <UpdateVisualizationContainer renderComponent={handler => this.props.dimensionIdsInLayout.includes(dialogId) ? <UpdateButton onClick={this.getPrimaryOnClick(handler)} /> : <AddToLayoutButton onClick={this.getPrimaryOnClick(handler)} />} />\n                            </ButtonStrip>\n                        </ModalActions>\n                    </Modal>}\n            </Fragment>;\n  }\n\n}\nDialogManager.contextTypes = {\n  d2: PropTypes.object\n};\nDialogManager.propTypes = {\n  closeDialog: PropTypes.func.isRequired,\n  dimensionIdsInLayout: PropTypes.array.isRequired,\n  ouIds: PropTypes.array.isRequired,\n  setRecommendedIds: PropTypes.func.isRequired,\n  addMetadata: PropTypes.func,\n  addParentGraphMap: PropTypes.func,\n  dialogId: PropTypes.string,\n  dimensions: PropTypes.object,\n  displayNameProperty: PropTypes.string,\n  dxIds: PropTypes.array,\n  getAxisIdByDimensionId: PropTypes.func,\n  metadata: PropTypes.object,\n  parentGraphMap: PropTypes.object,\n  removeUiItems: PropTypes.func,\n  selectedItems: PropTypes.object,\n  setUiItems: PropTypes.func,\n  type: PropTypes.string\n};\nDialogManager.defaultProps = {\n  dialogId: null,\n  dxIds: []\n};\n\nconst mapStateToProps = state => ({\n  displayNameProperty: sGetSettingsDisplayNameProperty(state),\n  dialogId: sGetUiActiveModalDialog(state),\n  dimensions: sGetDimensions(state),\n  metadata: sGetMetadata(state),\n  parentGraphMap: sGetUiParentGraphMap(state),\n  dxIds: sGetUiItemsByDimension(state, DIMENSION_ID_DATA),\n  ouIds: sGetUiItemsByDimension(state, DIMENSION_ID_ORGUNIT),\n  selectedItems: sGetUiItems(state),\n  type: sGetUiType(state),\n  getAxisIdByDimensionId: dimensionId => getAxisIdByDimensionId(state, dimensionId),\n  dimensionIdsInLayout: sGetDimensionIdsFromLayout(state)\n});\n\nexport default connect(mapStateToProps, {\n  closeDialog: acSetUiActiveModalDialog,\n  setRecommendedIds: acSetRecommendedIds,\n  setUiItems: acSetUiItems,\n  addMetadata: acAddMetadata,\n  addUiItems: acAddUiItems,\n  removeUiItems: acRemoveUiItems,\n  addParentGraphMap: acAddParentGraphMap\n})(DialogManager);","import { SET_RECOMMENDED_IDS } from '../reducers/recommendedIds';\nexport const acSetRecommendedIds = value => ({\n  type: SET_RECOMMENDED_IDS,\n  value\n});","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { DimensionItem } from '@dhis2/analytics';\nimport styles from './styles/DndDimensionItem.module.css';\nexport class DndDimensionItem extends Component {\n  render = () => {\n    const {\n      id,\n      index,\n      name,\n      isSelected,\n      isLocked,\n      isDeactivated,\n      isRecommended,\n      onClick,\n      onOptionsClick\n    } = this.props;\n    const itemCommonProps = {\n      id,\n      name,\n      isSelected,\n      isLocked,\n      isDeactivated,\n      isRecommended\n    };\n    return <Draggable draggableId={id} index={index} isDragDisabled={isSelected || isDeactivated || isLocked}>\n                {(provided, snapshot) => <>\n                        <DimensionItem innerRef={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps} className={snapshot.isDragging ? styles.dragging : styles.notDragging} onClick={onClick} onOptionsClick={onOptionsClick} {...itemCommonProps} />\n                        {snapshot.isDragging && <DimensionItem className={styles.dimensionItemClone} {...itemCommonProps} />}\n                    </>}\n            </Draggable>;\n  };\n}\nDndDimensionItem.propTypes = {\n  id: PropTypes.string,\n  index: PropTypes.number,\n  isDeactivated: PropTypes.bool,\n  isLocked: PropTypes.bool,\n  isRecommended: PropTypes.bool,\n  isSelected: PropTypes.bool,\n  name: PropTypes.string,\n  onClick: PropTypes.func,\n  onOptionsClick: PropTypes.func\n};\nexport default DndDimensionItem;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Droppable } from 'react-beautiful-dnd';\nimport { createSelector } from 'reselect';\nimport { getDisallowedDimensions, getAllLockedDimensionIds, getFixedDimensions, getDynamicDimensions, getPredefinedDimensions } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport DndDimensionItem from './DndDimensionItem';\nimport * as fromReducers from '../../reducers';\nimport { acSetUiActiveModalDialog } from '../../actions/ui';\nimport { SOURCE_DIMENSIONS } from '../../modules/layout';\nimport styles from './styles/DndDimensionList.module.css';\nexport class DndDimensionList extends Component {\n  dndIndex = 0;\n  nameContainsFilterText = dimension => dimension.name.toLowerCase().includes(this.props.filterText.toLowerCase());\n  isSelected = id => this.props.selectedIds.includes(id);\n  isDisabledDimension = id => this.props.disallowedDimensions.includes(id);\n  isLockedDimension = id => this.props.lockedDimensions.includes(id);\n  isRecommendedDimension = id => this.props.recommendedIds.includes(id);\n  renderItem = ({\n    id,\n    name\n  }) => {\n    const itemProps = {\n      id,\n      name,\n      index: this.dndIndex++,\n      isSelected: this.isSelected(id),\n      isLocked: this.isLockedDimension(id),\n      isDeactivated: this.isDisabledDimension(id),\n      isRecommended: this.isRecommendedDimension(id),\n      onClick: this.props.onDimensionClick,\n      onOptionsClick: this.props.onDimensionOptionsClick\n    };\n    return <DndDimensionItem key={`${SOURCE_DIMENSIONS}-${id}`} {...itemProps} />;\n  };\n  getDimensionItemsByFilter = filter => this.props.dimensions.filter(filter).filter(this.nameContainsFilterText).map(this.renderItem);\n\n  render() {\n    this.dndIndex = 0;\n    const fixedDimensions = this.getDimensionItemsByFilter(dimension => Object.values(getFixedDimensions()).some(fixedDim => fixedDim.id === dimension.id));\n    const dynamicDimensions = this.getDimensionItemsByFilter(dimension => Object.values(getDynamicDimensions()).some(dynDim => dynDim.id === dimension.id));\n    const nonPredefinedDimensions = this.getDimensionItemsByFilter(dimension => !Object.values(getPredefinedDimensions()).some(predefDim => predefDim.id === dimension.id));\n    return <Droppable droppableId={SOURCE_DIMENSIONS} isDropDisabled={true}>\n                {provided => <div className={styles.container} ref={provided.innerRef} {...provided.droppableProps}>\n                        <div className={styles.wrapper}>\n                            <div className={styles.section}>\n                                <h3 className={styles.header}>\n                                    {i18n.t('Main dimensions')}\n                                </h3>\n                                <ul className={styles.list}>\n                                    {fixedDimensions}\n                                </ul>\n                            </div>\n                            <div className={styles.section}>\n                                <h3 className={styles.header}>\n                                    {i18n.t('Other dimensions')}\n                                </h3>\n                                <ul className={styles.list}>\n                                    {dynamicDimensions}\n                                </ul>\n                            </div>\n                            <div className={styles.section}>\n                                <h3 className={styles.header}>\n                                    {i18n.t('Your dimensions')}\n                                </h3>\n                                <ul className={styles.list}>\n                                    {nonPredefinedDimensions}\n                                </ul>\n                            </div>\n                        </div>\n                        {provided.placeholder}\n                    </div>}\n            </Droppable>;\n  }\n\n}\nDndDimensionList.propTypes = {\n  dimensions: PropTypes.array,\n  disallowedDimensions: PropTypes.array,\n  filterText: PropTypes.string,\n  lockedDimensions: PropTypes.array,\n  recommendedIds: PropTypes.array,\n  selectedIds: PropTypes.array,\n  onDimensionClick: PropTypes.func,\n  onDimensionOptionsClick: PropTypes.func\n};\nconst getDisallowedDimensionsMemo = createSelector([fromReducers.fromUi.sGetUiType], type => getDisallowedDimensions(type));\nconst getisLockedDimensionsMemo = createSelector([fromReducers.fromUi.sGetUiType], type => getAllLockedDimensionIds(type));\n\nconst mapStateToProps = state => ({\n  dimensions: Object.values(fromReducers.fromDimensions.sGetDimensions(state)),\n  selectedIds: fromReducers.fromUi.sGetDimensionIdsFromLayout(state),\n  recommendedIds: fromReducers.fromRecommendedIds.sGetRecommendedIds(state),\n  disallowedDimensions: getDisallowedDimensionsMemo(state),\n  lockedDimensions: getisLockedDimensionsMemo(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onDimensionClick: id => dispatch(acSetUiActiveModalDialog(id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DndDimensionList);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { DimensionFilter } from '@dhis2/analytics';\nimport { colors } from '@dhis2/ui-core';\nimport DndDimensionList from './DndDimensionList';\nimport styles from './styles/DndDimensionsPanel.module.css';\nexport class DndDimensionsPanel extends Component {\n  state = {\n    filterText: ''\n  };\n  onClearFilter = () => {\n    this.setState({\n      filterText: ''\n    });\n  };\n  onFilterTextChange = filterText => {\n    this.setState({\n      filterText\n    });\n  };\n\n  render() {\n    return <div className={styles.container}>\n                <DimensionFilter style={{\n        marginBottom: '6px',\n        background: '#fff',\n        border: `1px solid ${colors.grey400}`,\n        borderRadius: '5px',\n        marginRight: '8px'\n      }} placeholder={i18n.t('Filter dimensions')} text={this.state.filterText} onChange={this.onFilterTextChange} onClear={this.onClearFilter} disableUnderline={true} />\n                <DndDimensionList filterText={this.state.filterText} onDimensionOptionsClick={this.props.onDimensionOptionsClick} />\n            </div>;\n  }\n\n}\nDndDimensionsPanel.propTypes = {\n  onDimensionOptionsClick: PropTypes.func\n};\nexport default DndDimensionsPanel;","import { colors } from '@dhis2/ui-core';\nexport const styles = {\n  divContainer: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: colors.grey050\n  }\n};","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableHead, TableRow, TableCell, TableBody, Button, Radio, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip } from '@dhis2/ui-core';\nimport styles from './styles/AxisSetup.module.css';\nimport { axis1, axis2 } from './constants';\nimport { sGetUiActiveModalDialog, DEFAULT_UI, sGetUi } from '../../reducers/ui';\nimport { sGetAxisSetupItems } from '../../reducers';\nimport { acSetAxes, acSetUiActiveModalDialog } from '../../actions/ui';\nimport { acSetCurrentFromUi } from '../../actions/current';\nexport const AXIS_SETUP_DIALOG_ID = 'axisSetup';\n\nconst AxisSetup = ({\n  isOpen,\n  onUpdateClick,\n  initItems,\n  onCancelClick\n}) => {\n  const [items, setItems] = useState();\n  useEffect(() => {\n    setItems(initItems.reduce((itemsMap, item) => {\n      itemsMap[item.id] = item;\n      return itemsMap;\n    }, {}));\n  }, [initItems]);\n\n  const onAxisChange = (item, axis) => {\n    setItems({ ...items,\n      [item.id]: { ...item,\n        axis\n      }\n    });\n  };\n\n  const getAxes = () => {\n    const axes = Object.keys(items).reduce((map, id) => {\n      const axis = items[id].axis;\n\n      if (axis > 0) {\n        map[id] = axis;\n      }\n\n      return map;\n    }, {});\n    return Object.keys(axes).length > 0 ? axes : DEFAULT_UI.axes;\n  };\n\n  const renderTable = () => {\n    return <Table className={styles.table}>\n                <colgroup>\n                    <col className={styles.nameColumn} />\n                    <col className={styles.coloredColumn} />\n                    <col className={styles.axisColumn} />\n                </colgroup>\n                <TableHead>\n                    <TableRow>\n                        <TableCell />\n                        <TableCell className={styles.centered}>\n                            {i18n.t('Axis 1')}\n                        </TableCell>\n                        <TableCell className={styles.centered}>\n                            {i18n.t('Axis 2')}\n                        </TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {Object.keys(items).map(id => {\n          const item = items[id];\n          return <TableRow key={`multiaxis-table-row-${id}`}>\n                                <TableCell>{item.name}</TableCell>\n                                <TableCell>\n                                    <Radio onChange={() => onAxisChange(item, axis1)} checked={item.axis === axis1} />\n                                </TableCell>\n                                <TableCell className={styles.centered}>\n                                    <Radio onChange={() => onAxisChange(item, axis2)} checked={item.axis === axis2} />\n                                </TableCell>\n                            </TableRow>;\n        })}\n                </TableBody>\n            </Table>;\n  };\n\n  return isOpen && <Modal onClose={onCancelClick}>\n                <ModalTitle>{i18n.t('Manage axes')}</ModalTitle>\n                <ModalContent>\n                    <p>\n                        {i18n.t('A chart can have two axes. Each axis will have its own scale. Set the axis for each data selection below.')}\n                    </p>\n                    {items && renderTable()}\n                </ModalContent>\n                <ModalActions>\n                    <ButtonStrip end>\n                        <Button onClick={onCancelClick}>\n                            {i18n.t('Cancel')}\n                        </Button>\n                        <Button primary onClick={() => onUpdateClick(getAxes())}>\n                            {i18n.t('Update')}\n                        </Button>\n                    </ButtonStrip>\n                </ModalActions>\n            </Modal>;\n};\n\nAxisSetup.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onUpdateClick: PropTypes.func.isRequired,\n  initItems: PropTypes.arrayOf(PropTypes.shape({\n    axis: PropTypes.number.isRequired,\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })),\n  onCancelClick: PropTypes.func\n};\nAxisSetup.defaultProps = {\n  isOpen: false,\n  initItems: [],\n  onUpdateClick: Function.prototype,\n  onCancelClick: Function.prototype\n};\n\nconst mapStateToProps = state => ({\n  isOpen: sGetUiActiveModalDialog(state) === AXIS_SETUP_DIALOG_ID,\n  initItems: sGetAxisSetupItems(state)\n});\n\nconst mapDispatchToProps = {\n  onUpdateClick: axes => (dispatch, getState) => {\n    dispatch(acSetAxes(axes));\n    dispatch(acSetCurrentFromUi({ ...sGetUi(getState()),\n      axes\n    }));\n    dispatch(acSetUiActiveModalDialog());\n  },\n  onCancelClick: () => dispatch => dispatch(acSetUiActiveModalDialog())\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(AxisSetup);","export const axis1 = 0;\nexport const axis2 = 1;\nexport default {\n  axis1,\n  axis2\n};","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { DimensionMenu, DIMENSION_ID_ASSIGNED_CATEGORIES } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport DialogManager from './Dialogs/DialogManager';\nimport DndDimensionsPanel from './DndDimensionsPanel';\nimport * as fromReducers from '../../reducers';\nimport { styles } from './styles/DimensionsPanel.style';\nimport { AXIS_SETUP_DIALOG_ID } from '../AxisSetup/AxisSetup';\nimport { acSetUiActiveModalDialog, acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui';\nexport class Dimensions extends Component {\n  state = {\n    dimensionMenuAnchorEl: null,\n    dimensionId: null\n  };\n  openOptionsMenuForDimension = (event, id) => {\n    event.stopPropagation();\n    this.setState({\n      dimensionMenuAnchorEl: event.currentTarget,\n      dimensionId: id\n    });\n  };\n  closeOptionsMenuForDimension = () => this.setState({\n    dimensionMenuAnchorEl: null,\n    dimensionId: null\n  });\n  getNumberOfDimensionItems = () => (this.props.itemsByDimension[this.state.dimensionId] || []).length;\n\n  render() {\n    return <div style={styles.divContainer}>\n                <DndDimensionsPanel onDimensionOptionsClick={this.openOptionsMenuForDimension} />\n                <DimensionMenu dimensionId={this.state.dimensionId} currentAxisId={this.props.getCurrentAxisId(this.state.dimensionId)} visType={this.props.ui.type} numberOfDimensionItems={this.getNumberOfDimensionItems()} dualAxisItemHandler={this.props.dualAxisItemHandler} isAssignedCategoriesInLayout={this.props.layoutHasAssignedCategories} assignedCategoriesItemHandler={destination => this.props.assignedCategoriesItemHandler(this.props.layoutHasAssignedCategories, destination)} axisItemHandler={this.props.axisItemHandler} removeItemHandler={this.props.removeItemHandler} anchorEl={this.state.dimensionMenuAnchorEl} onClose={this.closeOptionsMenuForDimension} />\n                <DialogManager />\n            </div>;\n  }\n\n}\nDimensions.propTypes = {\n  assignedCategoriesItemHandler: PropTypes.func,\n  axisItemHandler: PropTypes.func,\n  dualAxisItemHandler: PropTypes.func,\n  getCurrentAxisId: PropTypes.func,\n  itemsByDimension: PropTypes.object,\n  layoutHasAssignedCategories: PropTypes.bool,\n  removeItemHandler: PropTypes.func,\n  ui: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  ui: fromReducers.fromUi.sGetUi(state),\n  dimensions: fromReducers.fromDimensions.sGetDimensions(state),\n  layout: fromReducers.fromUi.sGetUiLayout(state),\n  itemsByDimension: fromReducers.fromUi.sGetUiItems(state),\n  layoutHasAssignedCategories: fromReducers.fromUi.sLayoutHasAssignedCategories(state),\n  getCurrentAxisId: dimensionId => fromReducers.fromUi.getAxisIdByDimensionId(state, dimensionId)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  dualAxisItemHandler: () => dispatch(acSetUiActiveModalDialog(AXIS_SETUP_DIALOG_ID)),\n  axisItemHandler: ({\n    dimensionId,\n    axisId,\n    numberOfDimensionItems,\n    requireItems,\n    isDimensionInLayout\n  }) => {\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }));\n\n    if (numberOfDimensionItems === 0 && requireItems && !isDimensionInLayout) {\n      dispatch(acSetUiActiveModalDialog(dimensionId));\n    }\n  },\n  removeItemHandler: dimensionId => {\n    dispatch(acRemoveUiLayoutDimensions(dimensionId));\n  },\n  assignedCategoriesItemHandler: (layoutHasAssignedCategories, axisId) => {\n    dispatch(layoutHasAssignedCategories ? acRemoveUiLayoutDimensions(DIMENSION_ID_ASSIGNED_CATEGORIES) : acAddUiLayoutDimensions({\n      [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        axisId\n      }\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dimensions);","export default {\n  wrapper: {\n    position: 'relative',\n    width: '380px'\n  },\n  container: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%'\n  }\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport InterpretationsComponent from '@dhis2/d2-ui-interpretations';\nimport { sGetUiInterpretation } from '../../reducers/ui';\nimport { acSetUiInterpretation, acClearUiInterpretation } from '../../actions/ui';\nimport history from '../../modules/history';\nimport styles from './styles/Interpretations.style';\nexport class Interpretations extends Component {\n  onInterpretationChange = interpretation => {\n    if (interpretation) {\n      const interpretationUrl = `/${this.props.id}/interpretation/${interpretation.id}`; // this covers the case when the URL contains already an interpretation id,\n      // the Interpretations component loads it and fires this callback passing the interpretation\n      // object, the URL is not changing in this case.\n      // the other scenario is when the URL changes because of a click inside the Interpretations component\n\n      if (history.location.pathname !== interpretationUrl) {\n        history.push(interpretationUrl);\n        this.props.acSetUiInterpretation({\n          id: interpretation.id,\n          created: interpretation.created\n        });\n      }\n    } else {\n      history.push(`/${this.props.id}`);\n    }\n  };\n\n  render() {\n    const {\n      type,\n      id,\n      interpretationId\n    } = this.props;\n    return id ? <div style={styles.wrapper}>\n                <div style={styles.container}>\n                    <InterpretationsComponent d2={this.context.d2} type={type} id={id} currentInterpretationId={interpretationId} onCurrentInterpretationChange={this.onInterpretationChange} />\n                </div>\n            </div> : null;\n  }\n\n}\nInterpretations.defaultProps = {\n  type: 'chart'\n};\nInterpretations.propTypes = {\n  acSetUiInterpretation: PropTypes.func,\n  id: PropTypes.string,\n  interpretationId: PropTypes.string,\n  type: PropTypes.string\n};\nInterpretations.contextTypes = {\n  d2: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  interpretationId: sGetUiInterpretation(state).id || null\n});\n\nexport default connect(mapStateToProps, {\n  acSetUiInterpretation,\n  acClearUiInterpretation\n})(Interpretations);","export default {\n  chartCanvas: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-start',\n    height: '100%'\n  },\n  loadingCover: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    left: 0,\n    top: 0,\n    zIndex: 100,\n    background: '#ffffffab'\n  }\n};","const legendSetsQuery = {\n    legendSets: {\n        resource: 'legendSets',\n        params: ({ ids }) => ({\n            fields:\n                'id,legends[id,displayName~rename(name),startValue,endValue,color]',\n            filter: `id:in:[${ids.join(',')}]`,\n        }),\n    },\n}\n\nexport const apiFetchLegendSets = (dataEngine, ids) =>\n    dataEngine.query(legendSetsQuery, { variables: { ids } })\n","import React, { useRef, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { isSingleValue, createVisualization } from '@dhis2/analytics'\n\nconst ChartPlugin = ({\n    visualization,\n    responses,\n    extraOptions,\n    legendSets,\n    id: renderCounter,\n    style,\n    onChartGenerated,\n    animation: defaultAnimation,\n}) => {\n    const canvasRef = useRef(undefined)\n\n    const renderVisualization = useCallback(\n        animation => {\n            const visualizationConfig = createVisualization(\n                responses,\n                visualization,\n                canvasRef.current,\n                {\n                    ...extraOptions,\n                    animation,\n                    legendSets,\n                },\n                undefined,\n                undefined,\n                isSingleValue(visualization.type) ? 'dhis' : 'highcharts' // output format\n            )\n\n            if (isSingleValue(visualization.type)) {\n                onChartGenerated(visualizationConfig.visualization)\n            } else {\n                onChartGenerated(\n                    visualizationConfig.visualization.getSVGForExport({\n                        sourceHeight: 768,\n                        sourceWidth: 1024,\n                    })\n                )\n            }\n        },\n        [\n            canvasRef,\n            visualization,\n            onChartGenerated,\n            responses,\n            extraOptions,\n            legendSets,\n        ]\n    )\n\n    useEffect(() => {\n        renderVisualization(defaultAnimation)\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [visualization, responses, extraOptions])\n\n    useEffect(() => {\n        renderVisualization(0)\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [renderCounter, style])\n\n    return <div ref={canvasRef} style={style} />\n}\n\nChartPlugin.defaultProps = {\n    visualization: {},\n    filters: {},\n    style: {},\n    animation: 200,\n    onChartGenerated: Function.prototype,\n}\n\nChartPlugin.propTypes = {\n    extraOptions: PropTypes.object.isRequired,\n    legendSets: PropTypes.arrayOf(PropTypes.object).isRequired,\n    responses: PropTypes.arrayOf(PropTypes.object).isRequired,\n    visualization: PropTypes.object.isRequired,\n    animation: PropTypes.number,\n    id: PropTypes.number,\n    style: PropTypes.object,\n    onChartGenerated: PropTypes.func,\n}\n\nexport default ChartPlugin\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { PivotTable } from '@dhis2/analytics'\n\nconst PivotPlugin = ({\n    responses,\n    legendSets,\n    visualization,\n    style,\n    id: renderCounter,\n}) => {\n    return (\n        <div style={style}>\n            <PivotTable\n                visualization={visualization}\n                data={responses[0].response}\n                legendSets={legendSets}\n                renderCounter={renderCounter}\n            />\n        </div>\n    )\n}\n\nPivotPlugin.defaultProps = {\n    style: {},\n}\n\nPivotPlugin.propTypes = {\n    legendSets: PropTypes.arrayOf(PropTypes.object).isRequired,\n    responses: PropTypes.arrayOf(PropTypes.object).isRequired,\n    visualization: PropTypes.object.isRequired,\n    id: PropTypes.number,\n    style: PropTypes.object,\n}\n\nexport default PivotPlugin\n","import { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics'\n\nconst peId = 'pe'\n\nexport const apiFetchAnalytics = async (d2, current, options) => {\n    const req = new d2.analytics.request()\n        .fromModel(current)\n        .withParameters(options)\n        .withIncludeNumDen(current.type === VIS_TYPE_PIVOT_TABLE)\n\n    const rawResponse = await d2.analytics.aggregate.get(req)\n\n    return [new d2.analytics.response(rawResponse)]\n}\n\nexport const apiFetchAnalyticsForYearOverYear = async (\n    d2,\n    current,\n    options\n) => {\n    let yearlySeriesReq = new d2.analytics.request()\n        .addPeriodDimension(current.yearlySeries)\n        .withSkipData(true)\n        .withSkipMeta(false)\n        .withIncludeMetadataDetails(true)\n\n    if (options.relativePeriodDate) {\n        yearlySeriesReq = yearlySeriesReq.withRelativePeriodDate(\n            options.relativePeriodDate\n        )\n    }\n\n    const yearlySeriesRes = await d2.analytics.aggregate.fetch(yearlySeriesReq)\n\n    const requests = []\n    const yearlySeriesLabels = []\n\n    const now = new Date()\n    const currentDay = ('' + now.getDate()).padStart(2, 0)\n    const currentMonth = ('' + (now.getMonth() + 1)).padStart(2, 0)\n\n    yearlySeriesRes.metaData.dimensions[peId].forEach(period => {\n        yearlySeriesLabels.push(yearlySeriesRes.metaData.items[period].name)\n\n        const startDate = `${period}-${currentMonth}-${currentDay}`\n\n        const req = new d2.analytics.request()\n            .fromModel(current)\n            .withParameters(options)\n            .withRelativePeriodDate(startDate)\n\n        requests.push(d2.analytics.aggregate.get(req))\n    })\n\n    return Promise.all(requests).then(responses => ({\n        responses: responses.map(res => new d2.analytics.response(res)),\n        yearlySeriesLabels,\n    }))\n}\n","export const computeGenericPeriodNames = responses => {\n    const xAxisRes = responses.reduce((out, res) => {\n        if (out.metaData) {\n            if (\n                res.metaData.dimensions.pe.length >\n                out.metaData.dimensions.pe.length\n            ) {\n                out = res\n            }\n        } else {\n            out = res\n        }\n\n        return out\n    }, {})\n\n    const metadata = xAxisRes.metaData\n\n    return metadata.dimensions.pe.reduce((genericPeriodNames, periodId) => {\n        const name = metadata.items[periodId].name\n\n        // until the day the backend will support this in the API:\n        // trim off the trailing year in the period name\n        // english names should all have the year at the end of the string\n        genericPeriodNames.push(name.replace(/\\s+\\d{4}$/, ''))\n\n        return genericPeriodNames\n    }, [])\n}\n","import pick from 'lodash-es/pick'\n\nexport const options = {\n    baseLineLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    baseLineValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    // colorSet:\n    cumulativeValues: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    domainAxisLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyRowItems: {\n        defaultValue: 'NONE',\n        requestable: false,\n        savable: true,\n    },\n    hideLegend: { defaultValue: false, requestable: false, savable: true },\n    noSpaceBetweenColumns: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    percentStackedValues: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisDecimals: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisMaxValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisMinValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisSteps: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    regressionType: { defaultValue: 'NONE', requestable: false, savable: true },\n    showData: { defaultValue: true, requestable: false, savable: true },\n    targetLineLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    targetLineValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    aggregationType: {\n        defaultValue: 'DEFAULT',\n        requestable: true,\n        savable: true,\n    },\n    completedOnly: { defaultValue: false, requestable: true, savable: true },\n    hideSubtitle: { defaultValue: false, requestable: false, savable: true },\n    hideTitle: { defaultValue: false, requestable: false, savable: true },\n    sortOrder: { defaultValue: '0', requestable: false, savable: true },\n    subtitle: { defaultValue: undefined, requestable: false, savable: true },\n    title: { defaultValue: undefined, requestable: false, savable: true },\n\n    // only for PT\n    colTotals: { defaultValue: false, requestable: false, savable: true },\n    colSubTotals: { defaultValue: false, requestable: false, savable: true },\n    rowTotals: { defaultValue: false, requestable: false, savable: true },\n    rowSubTotals: { defaultValue: false, requestable: false, savable: true },\n    showDimensionLabels: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyColumns: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyRows: { defaultValue: false, requestable: false, savable: true },\n    skipRounding: { defaultValue: false, requestable: true, savable: true },\n    numberType: { defaultValue: 'VALUE', requestable: false, savable: true },\n    showHierarchy: { defaultValue: false, requestable: true, savable: true },\n    legendSet: { defaultValue: undefined, requestable: false, savable: true },\n    legendDisplayStrategy: {\n        defaultValue: 'FIXED',\n        requestable: false,\n        savable: true,\n    },\n    legendDisplayStyle: {\n        defaultValue: 'FILL',\n        requestable: false,\n        savable: true,\n    },\n    displayDensity: {\n        defaultValue: 'NORMAL',\n        requestable: false,\n        savable: true,\n    },\n    fontSize: { defaultValue: 'NORMAL', requestable: false, savable: true },\n    digitGroupSeparator: {\n        defaultValue: 'SPACE',\n        requestable: false,\n        savable: true,\n    },\n    approvalLevel: {\n        defaultValue: undefined,\n        requestable: true,\n        savable: false,\n    },\n\n    // these are stored in the AO under reportingParams\n    reportingPeriod: { defaultValue: false, requestable: false, savable: true },\n    organisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    parentOrganisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    // not exposed in UI\n    grandParentOrganisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    regression: { defaultValue: false, requestable: false, savable: true },\n    cumulative: { defaultValue: false, requestable: false, savable: true },\n    measureCriteria: {\n        defaultValue: undefined,\n        requestable: true,\n        savable: true,\n    },\n    topLimit: { defaultValue: '0', requestable: false, savable: true },\n}\n\nexport const computedOptions = {\n    baseLine: { defaultValue: false, requestable: false, savable: false },\n    targetLine: { defaultValue: false, requestable: false, savable: false },\n    axisRange: { defaultValue: undefined, requestable: false, savable: false },\n    legend: { defaultValue: undefined, requestable: false, savable: false },\n}\n\nexport default options\n\nexport const getOptionsForUi = () => {\n    return Object.entries({ ...options, ...computedOptions }).reduce(\n        (map, [option, props]) => {\n            map[option] = props.defaultValue\n\n            return map\n        },\n        {}\n    )\n}\n\nexport const getOptionsForRequest = () => {\n    return Object.entries(options).filter(\n        entry => entry[1].requestable // entry = [option, props]\n    )\n}\n\nconst isNotDefault = (optionsFromVisualization, prop) => {\n    return Boolean(\n        optionsFromVisualization[prop] &&\n            optionsFromVisualization[prop] !== options[prop].defaultValue\n    )\n}\n\nexport const getOptionsFromVisualization = visualization => {\n    const optionsFromVisualization = {\n        ...getOptionsForUi(),\n        ...pick(visualization, Object.keys(options)),\n    }\n\n    optionsFromVisualization.baseLine =\n        isNotDefault(optionsFromVisualization, 'baseLineLabel') ||\n        isNotDefault(optionsFromVisualization, 'baseLineValue')\n\n    optionsFromVisualization.targetLine =\n        isNotDefault(optionsFromVisualization, 'targetLineLabel') ||\n        isNotDefault(optionsFromVisualization, 'targetLineValue')\n\n    // nested options under reportingParams\n    if (visualization.reportingParams) {\n        optionsFromVisualization.organisationUnit =\n            visualization.reportingParams.organisationUnit\n        optionsFromVisualization.reportingPeriod =\n            visualization.reportingParams.reportingPeriod\n        optionsFromVisualization.parentOrganisationUnit =\n            visualization.reportingParams.parentOrganisationUnit\n        optionsFromVisualization.grandParentOrganisationUnit =\n            visualization.reportingParams.grandParentOrganisationUnit\n    }\n\n    // cast option values from Number for some options\n    ;['baseLineValue', 'targetLineValue', 'sortOrder', 'topLimit'].forEach(\n        option => {\n            if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n                optionsFromVisualization[option] = String(visualization[option])\n            }\n        }\n    )\n\n    return optionsFromVisualization\n}\n","import { getOptionsForRequest } from './options'\n\nexport const getRequestOptions = (visualization, filters) => {\n    const options = getOptionsForRequest().reduce((map, [option, props]) => {\n        // only add parameter if value !== default\n        if (\n            visualization[option] !== undefined &&\n            visualization[option] !== props.defaultValue\n        ) {\n            map[option] = visualization[option]\n        }\n\n        return map\n    }, {})\n\n    // interpretation filter\n    if (filters.relativePeriodDate) {\n        options.relativePeriodDate = filters.relativePeriodDate\n    }\n\n    // global filters\n    // userOrgUnit\n    if (filters.userOrgUnit && filters.userOrgUnit.length) {\n        const ouIds = filters.userOrgUnit.map(\n            ouPath => ouPath.split('/').slice(-1)[0]\n        )\n\n        options.userOrgUnit = ouIds.join(';')\n    }\n\n    return options\n}\n","import i18n from '@dhis2/d2-i18n'\nimport { isYearOverYear } from '@dhis2/analytics'\nimport {\n    apiFetchAnalyticsForYearOverYear,\n    apiFetchAnalytics,\n} from '../api/analytics'\nimport { computeGenericPeriodNames } from './analytics'\nimport { getRequestOptions } from './getRequestOptions'\n\nexport const fetchData = async ({\n    visualization,\n    filters,\n    d2,\n    forDashboard,\n}) => {\n    const options = getRequestOptions(visualization, filters)\n\n    const extraOptions = {\n        dashboard: forDashboard,\n        noData: { text: i18n.t('No data') },\n    }\n\n    if (isYearOverYear(visualization.type)) {\n        const {\n            responses,\n            yearlySeriesLabels,\n        } = await apiFetchAnalyticsForYearOverYear(d2, visualization, options)\n\n        return {\n            responses,\n            extraOptions: {\n                ...extraOptions,\n                yearlySeries: yearlySeriesLabels,\n                xAxisLabels: computeGenericPeriodNames(responses),\n            },\n        }\n    }\n\n    return {\n        responses: await apiFetchAnalytics(d2, visualization, options),\n        extraOptions,\n    }\n}\n","import React, { useEffect, useState, useCallback } from 'react'\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics'\nimport { useDataEngine } from '@dhis2/app-runtime'\nimport PropTypes from 'prop-types'\n\nimport { apiFetchLegendSets } from './api/legendSets'\nimport ChartPlugin from './ChartPlugin'\nimport PivotPlugin from './PivotPlugin'\nimport { fetchData } from './modules/fetchData'\n\nconst LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM'\nconst LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED'\n\nexport const VisualizationPlugin = ({\n    d2,\n    visualization,\n    filters,\n    forDashboard,\n    onError,\n    onLoadingComplete,\n    onResponsesReceived,\n    ...props\n}) => {\n    const engine = useDataEngine()\n    const [fetchResult, setFetchResult] = useState(null)\n\n    const doFetchData = useCallback(async () => {\n        const result = await fetchData({\n            visualization,\n            filters,\n            d2,\n            forDashboard,\n        })\n\n        if (result.responses.length) {\n            onResponsesReceived(result.responses)\n        }\n\n        return result\n    }, [d2, filters, forDashboard, onResponsesReceived, visualization])\n\n    const doFetchLegendSets = useCallback(\n        async legendSetIds => {\n            if (!legendSetIds.length) {\n                return []\n            }\n\n            const response = await apiFetchLegendSets(engine, legendSetIds)\n\n            if (response && response.legendSets) {\n                return response.legendSets.legendSets\n            }\n        },\n        [engine]\n    )\n\n    useEffect(() => {\n        setFetchResult(null)\n        const doFetchAll = async () => {\n            const { responses, extraOptions } = await doFetchData(\n                visualization,\n                filters,\n                forDashboard\n            )\n\n            const legendSetIds = []\n\n            switch (visualization.legendDisplayStrategy) {\n                case LEGEND_DISPLAY_STRATEGY_FIXED:\n                    if (visualization.legendSet && visualization.legendSet.id) {\n                        legendSetIds.push(visualization.legendSet.id)\n                    }\n                    break\n                case LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM: {\n                    // parse responses to extract legendSet ids from metaData\n                    // multiple responses are only for YOY which does not support legends\n                    // safe to use only the 1st\n                    // dx dimensions might not be present, the empty array covers that case\n                    const dxIds = responses[0].metaData.dimensions.dx || []\n\n                    dxIds.forEach(dxId => {\n                        const legendSetId =\n                            responses[0].metaData.items[dxId].legendSet\n\n                        if (legendSetId) {\n                            legendSetIds.push(legendSetId)\n                        }\n                    })\n\n                    break\n                }\n            }\n\n            const legendSets = await doFetchLegendSets(legendSetIds)\n\n            setFetchResult({\n                visualization,\n                legendSets,\n                responses,\n                extraOptions,\n            })\n            onLoadingComplete()\n        }\n\n        doFetchAll().catch(error => {\n            onError(error)\n        })\n\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [visualization, filters, forDashboard])\n\n    if (!fetchResult) {\n        return null\n    }\n\n    if (\n        !fetchResult.visualization.type ||\n        fetchResult.visualization.type === VIS_TYPE_PIVOT_TABLE\n    ) {\n        return (\n            <PivotPlugin\n                visualization={fetchResult.visualization}\n                responses={fetchResult.responses}\n                legendSets={fetchResult.legendSets}\n                {...props}\n            />\n        )\n    } else {\n        return (\n            <ChartPlugin\n                visualization={fetchResult.visualization}\n                responses={fetchResult.responses}\n                extraOptions={fetchResult.extraOptions}\n                legendSets={fetchResult.legendSets}\n                {...props}\n            />\n        )\n    }\n}\n\nVisualizationPlugin.defaultProps = {\n    filters: {},\n    forDashboard: false,\n    onError: Function.prototype,\n    onLoadingComplete: Function.prototype,\n    onResponsesReceived: Function.prototype,\n    visualization: {},\n}\nVisualizationPlugin.propTypes = {\n    d2: PropTypes.object.isRequired,\n    visualization: PropTypes.object.isRequired,\n    filters: PropTypes.object,\n    forDashboard: PropTypes.bool,\n    onError: PropTypes.func,\n    onLoadingComplete: PropTypes.func,\n    onResponsesReceived: PropTypes.func,\n}\n","export const apiFetchMostViewedVisualizations = (engine, pageSize) => {\n  const visualizationQuery = {\n    visualization: {\n      resource: 'dataStatistics/favorites',\n      params: {\n        eventType: 'VISUALIZATION_VIEW',\n        pageSize: pageSize || 10\n      }\n    }\n  };\n  return engine.query(visualizationQuery);\n};","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { visTypeIcons } from '@dhis2/analytics';\nimport styles from './styles/StartScreen.module.css';\nimport { sGetLoadError } from '../../reducers/loader';\nimport { apiFetchMostViewedVisualizations } from '../../api/mostViewedVisualizations';\nimport history from '../../modules/history';\nimport { VisualizationError, genericErrorTitle } from '../../modules/error';\nimport { GenericError } from '../../assets/ErrorIcons';\nimport { apiFetchVisualizations } from '../../api/visualization';\n\nconst StartScreen = ({\n  error\n}) => {\n  const [mostViewedVisualizations, setMostViewedVisualizations] = useState([]);\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function populateMostViewedVisualizations(engine) {\n      const mostViewedVisualizationsResult = await apiFetchMostViewedVisualizations(engine, 6);\n      const visualizations = mostViewedVisualizationsResult.visualization;\n\n      if (visualizations && visualizations.length) {\n        const visualizationsResult = await apiFetchVisualizations(engine, visualizations.map(vis => vis.id));\n        const visualizationsWithType = visualizationsResult.visualization.visualizations;\n        const result = visualizations.map(vis => ({ ...visualizationsWithType.find(visWithType => visWithType.id === vis.id && visWithType),\n          ...vis\n        }));\n        setMostViewedVisualizations(result);\n      }\n    }\n\n    populateMostViewedVisualizations(engine);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const getContent = () => error ? getErrorContent() : <div>\n                <div className={styles.section}>\n                    <h3 className={styles.title}>\n                        {i18n.t('Getting started')}\n                    </h3>\n                    <ul className={styles.guide}>\n                        <li className={styles.guideItem}>\n                            {i18n.t('All dimensions that you can use to build visualizations are shown in the left sidebar')}\n                        </li>\n                        <li className={styles.guideItem}>\n                            {i18n.t('Add dimensions to the layout above')}\n                        </li>\n                        <li className={styles.guideItem}>\n                            {i18n.t('Click a dimension to add or remove items')}\n                        </li>\n                    </ul>\n                </div>\n                {mostViewedVisualizations.length > 0 && <div className={styles.section}>\n                        <h3 className={styles.title}>\n                            {i18n.t('Your most viewed charts and tables')}\n                        </h3>\n                        {mostViewedVisualizations.map((visualization, index) => <p key={index} className={styles.visualization} onClick={() => history.push(`/${visualization.id}`)}>\n                                    <span className={styles.visIcon}>\n                                        {visTypeIcons[visualization.type]}\n                                    </span>\n                                    <span>{visualization.name}</span>\n                                </p>)}\n                    </div>}\n            </div>;\n\n  const getErrorContent = () => error instanceof VisualizationError ? <div className={styles.errorContainer}>\n                <div className={styles.errorIcon}>{error.icon()}</div>\n                <p className={styles.errorTitle}>{error.title}</p>\n                <p className={styles.errorDescription}>{error.description}</p>\n            </div> : <div className={styles.errorContainer}>\n                <div className={styles.errorIcon}>{GenericError()}</div>\n                <p className={styles.errorTitle}>{genericErrorTitle}</p>\n                <p className={styles.errorDescription}>\n                    {error.message || error}\n                </p>\n            </div>;\n\n  return <div className={styles.outer}>\n            <div className={styles.inner}>{getContent()}</div>\n        </div>;\n};\n\nStartScreen.propTypes = {\n  error: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  error: sGetLoadError(state)\n});\n\nexport default connect(mapStateToProps)(StartScreen);","import React from 'react';\nimport styles from './styles/LoadingMask.module.css';\nimport { CircularLoader } from '@dhis2/ui-core';\n\nfunction LoadingMask() {\n  return <div className={styles.outer}>\n            <CircularLoader className={styles.progress} />\n        </div>;\n}\n\nexport default LoadingMask;","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport debounce from 'lodash-es/debounce';\nimport styles from './styles/Visualization.style';\nimport VisualizationPlugin from '@dhis2/data-visualizer-plugin';\nimport { sGetVisualization } from '../../reducers/visualization';\nimport { sGetCurrent } from '../../reducers/current';\nimport { sGetUiRightSidebarOpen, sGetUiInterpretation } from '../../reducers/ui';\nimport { sGetLoadError, sGetIsPluginLoading } from '../../reducers/loader';\nimport { acAddMetadata } from '../../actions/metadata';\nimport { acSetChart } from '../../actions/chart';\nimport { acSetLoadError, acSetPluginLoading } from '../../actions/loader';\nimport StartScreen from './StartScreen';\nimport { AssignedCategoriesDataElementsError, GenericServerError, EmptyResponseError, AssignedCategoriesAsFilterError, MultipleIndicatorAsFilterError, NoDataOrDataElementGroupSetError, CombinationDEGSRRError } from '../../modules/error';\nimport LoadingMask from '../../widgets/LoadingMask';\nexport class Visualization extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      renderId: null\n    };\n  }\n\n  onError = response => {\n    let error;\n\n    if (response) {\n      switch (response.errorCode) {\n        case 'E7114':\n          error = new AssignedCategoriesDataElementsError();\n          break;\n\n        case 'E7110':\n          error = new AssignedCategoriesAsFilterError();\n          break;\n\n        case 'E7108':\n          error = new MultipleIndicatorAsFilterError();\n          break;\n\n        case 'E7102':\n          error = new NoDataOrDataElementGroupSetError(this.props.visualization.type);\n          break;\n\n        case 'E7112':\n          error = new CombinationDEGSRRError();\n          break;\n\n        default:\n          error = response;\n      }\n    } else {\n      error = new GenericServerError();\n    }\n\n    this.props.setLoadError(error);\n  };\n  onChartGenerated = svg => this.props.setChart(svg);\n  onResponsesReceived = responses => {\n    const forMetadata = {};\n\n    if (!responses.some(response => response.rows && response.rows.length)) {\n      throw new EmptyResponseError();\n    }\n\n    responses.forEach(response => {\n      Object.entries(response.metaData.items).forEach(([id, item]) => {\n        forMetadata[id] = {\n          id,\n          name: item.name || item.displayName,\n          displayName: item.displayName,\n          dimensionItemType: item.dimensionItemType\n        };\n      });\n    });\n    this.props.addMetadata(forMetadata);\n  };\n  getNewRenderId = () => this.setState({\n    renderId: typeof this.state.renderId === 'number' ? this.state.renderId + 1 : 1\n  });\n  addResizeHandler = () => {\n    window.addEventListener('resize', debounce(() => {\n      this.getNewRenderId();\n    }, 300));\n  };\n\n  componentDidMount() {\n    this.addResizeHandler();\n  }\n\n  componentDidUpdate(prevProps) {\n    // open sidebar\n    if (this.props.rightSidebarOpen !== prevProps.rightSidebarOpen) {\n      this.getNewRenderId();\n    }\n  }\n\n  render() {\n    const {\n      visualization,\n      visFilters,\n      error\n    } = this.props;\n    const {\n      renderId\n    } = this.state;\n    return !visualization || error ? <StartScreen /> : <Fragment>\n                {this.props.isLoading ? <div style={styles.loadingCover}>\n                        <LoadingMask />\n                    </div> : null}\n                <VisualizationPlugin id={renderId} d2={this.context.d2} visualization={visualization} filters={visFilters} onChartGenerated={this.onChartGenerated} onLoadingComplete={this.props.onLoadingComplete} onResponsesReceived={this.onResponsesReceived} onError={this.onError} style={styles.chartCanvas} />\n            </Fragment>;\n  }\n\n}\nVisualization.contextTypes = {\n  d2: PropTypes.object\n};\nVisualization.propTypes = {\n  addMetadata: PropTypes.func,\n  error: PropTypes.object,\n  isLoading: PropTypes.bool,\n  rightSidebarOpen: PropTypes.bool,\n  setChart: PropTypes.func,\n  setLoadError: PropTypes.func,\n  visFilters: PropTypes.object,\n  visualization: PropTypes.object,\n  onLoadingComplete: PropTypes.func\n};\nexport const visualizationSelector = createSelector([sGetCurrent, sGetVisualization, sGetUiInterpretation], (current, visualization, interpretation) => interpretation.id ? visualization : current);\nexport const visFiltersSelector = createSelector([sGetUiInterpretation], interpretation => interpretation.created ? {\n  relativePeriodDate: interpretation.created\n} : {});\n\nconst mapStateToProps = state => ({\n  visualization: visualizationSelector(state),\n  visFilters: visFiltersSelector(state),\n  rightSidebarOpen: sGetUiRightSidebarOpen(state),\n  error: sGetLoadError(state),\n  isLoading: sGetIsPluginLoading(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoadingComplete: () => dispatch(acSetPluginLoading(false)),\n  addMetadata: metadata => dispatch(acAddMetadata(metadata)),\n  setChart: chart => dispatch(acSetChart(chart)),\n  setLoadError: error => dispatch(acSetLoadError(error))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Visualization);","import { SET_CHART } from '../reducers/chart';\nexport const acSetChart = value => ({\n  type: SET_CHART,\n  value\n});","import { colors } from '@dhis2/ui-core';\nexport const styles = {\n  icon: {\n    width: 22,\n    height: 22,\n    background: 'none',\n    color: colors.black,\n    padding: 0\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport { DimensionMenu, DIMENSION_ID_ASSIGNED_CATEGORIES } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport * as fromReducers from '../../reducers';\nimport MoreHorizontalIcon from '../../assets/MoreHorizontalIcon';\nimport { styles } from './styles/Menu.style';\nimport { acSetUiActiveModalDialog, acAddUiLayoutDimensions, acRemoveUiLayoutDimensions } from '../../actions/ui';\nimport { AXIS_SETUP_DIALOG_ID } from '../AxisSetup/AxisSetup';\n\nclass ChipMenu extends React.Component {\n  state = {\n    anchorEl: null\n  };\n  handleClick = event => {\n    event.stopPropagation();\n    this.setState({\n      anchorEl: event.currentTarget\n    });\n  };\n  handleClose = () => {\n    // event.stopPropagation();\n    this.setState({\n      anchorEl: null\n    });\n  };\n  getMenuId = () => `menu-for-${this.props.id}`;\n\n  render() {\n    return <React.Fragment>\n                <IconButton aria-owns={this.state.anchorEl ? this.getMenuId() : null} aria-haspopup=\"true\" onClick={this.handleClick} style={styles.icon}>\n                    <MoreHorizontalIcon style={styles.icon} />\n                </IconButton>\n                <DimensionMenu dimensionId={this.props.dimensionId} currentAxisId={this.props.currentAxisId} visType={this.props.visType} numberOfDimensionItems={this.props.numberOfDimensionItems} dualAxisItemHandler={this.props.dualAxisItemHandler} isAssignedCategoriesInLayout={this.props.layoutHasAssignedCategories} assignedCategoriesItemHandler={destination => this.props.assignedCategoriesItemHandler(this.props.layoutHasAssignedCategories, destination)} axisItemHandler={this.props.axisItemHandler} removeItemHandler={this.props.removeItemHandler} anchorEl={this.state.anchorEl} onClose={this.handleClose} />\n            </React.Fragment>;\n  }\n\n}\n\nChipMenu.propTypes = {\n  assignedCategoriesItemHandler: PropTypes.func,\n  axisItemHandler: PropTypes.func,\n  currentAxisId: PropTypes.string,\n  dimensionId: PropTypes.string,\n  dualAxisItemHandler: PropTypes.func,\n  id: PropTypes.string,\n  layoutHasAssignedCategories: PropTypes.bool,\n  numberOfDimensionItems: PropTypes.number,\n  removeItemHandler: PropTypes.func,\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => {\n  return {\n    layoutHasAssignedCategories: fromReducers.fromUi.sLayoutHasAssignedCategories(state)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  dualAxisItemHandler: () => dispatch(acSetUiActiveModalDialog(AXIS_SETUP_DIALOG_ID)),\n  axisItemHandler: ({\n    dimensionId,\n    axisId\n  }) => {\n    dispatch(acAddUiLayoutDimensions({\n      [dimensionId]: {\n        axisId\n      }\n    }));\n  },\n  removeItemHandler: dimensionId => {\n    dispatch(acRemoveUiLayoutDimensions(dimensionId));\n  },\n  assignedCategoriesItemHandler: (layoutHasAssignedCategories, axisId) => {\n    dispatch(layoutHasAssignedCategories ? acRemoveUiLayoutDimensions(DIMENSION_ID_ASSIGNED_CATEGORIES) : acAddUiLayoutDimensions({\n      [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        axisId\n      }\n    }));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChipMenu);","import { colors } from '@dhis2/ui-core';\nexport const styles = {\n  tooltip: {\n    fontFamily: 'roboto',\n    padding: '7px 9px',\n    color: colors.white,\n    fontSize: '12px',\n    backgroundColor: colors.grey900,\n    boxShadow: 'none',\n    borderRadius: '3px',\n    position: 'relative',\n    top: '5px',\n    maxWidth: '300px'\n  },\n  list: {\n    listStyleType: 'none',\n    margin: '0px',\n    marginBottom: '-3px',\n    padding: '0px'\n  },\n  item: {\n    marginBottom: '3px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  icon: {\n    fontSize: '13px',\n    marginRight: '6px'\n  },\n  iconWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '5px'\n  },\n  warningLabel: {\n    whiteSpace: 'normal'\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Popper from '@material-ui/core/Popper';\nimport Paper from '@material-ui/core/Paper';\nimport LockIcon from '@material-ui/icons/Lock';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport i18n from '@dhis2/d2-i18n';\nimport { ouIdHelper } from '@dhis2/analytics';\nimport { sGetMetadata } from '../../reducers/metadata';\nimport { styles } from './styles/Tooltip.style';\nconst labels = {\n  noneSelected: i18n.t('None selected'),\n  onlyOneInUse: name => i18n.t(\"Only '{{- name}}' in use\", {\n    name\n  }),\n  onlyLimitedNumberInUse: number => i18n.t(\"Only '{{number}}' in use\", {\n    number\n  })\n};\nexport class Tooltip extends React.Component {\n  getWarningLabel = () => {\n    const {\n      itemIds,\n      metadata,\n      displayLimitedAmount\n    } = this.props;\n    const warningLabel = itemIds.length === 1 ? labels.onlyOneInUse(metadata[itemIds[0]] ? metadata[itemIds[0]].name : itemIds[0]) : labels.onlyLimitedNumberInUse(itemIds.length);\n    return displayLimitedAmount ? warningLabel : null;\n  };\n  getNameList = (idList, label, metadata) => idList.reduce((levelString, levelId, index) => `${levelString}${index > 0 ? `, ` : ``}${metadata[levelId] ? metadata[levelId].name : levelId}`, `${label}: `);\n  getItemDisplayNames = () => {\n    const {\n      itemIds,\n      metadata,\n      displayLimitedAmount\n    } = this.props;\n    const levelIds = [];\n    const groupIds = [];\n    const itemDisplayNames = [];\n\n    if (!displayLimitedAmount) {\n      itemIds.forEach(id => {\n        if (ouIdHelper.hasLevelPrefix(id)) {\n          levelIds.push(ouIdHelper.removePrefix(id));\n        } else if (ouIdHelper.hasGroupPrefix(id)) {\n          groupIds.push(ouIdHelper.removePrefix(id));\n        } else {\n          itemDisplayNames.push(metadata[id] ? metadata[id].name : id);\n        }\n      });\n      levelIds.length && itemDisplayNames.push(this.getNameList(levelIds, i18n.t('Levels'), metadata));\n      groupIds.length && itemDisplayNames.push(this.getNameList(groupIds, i18n.t('Groups'), metadata));\n    }\n\n    return itemDisplayNames;\n  };\n  renderWarningLabel = warningLabel => <li style={styles.item}>\n            <div style={styles.iconWrapper}>\n                <WarningIcon style={styles.icon} />\n                <span style={styles.warningLabel}>{warningLabel}</span>\n            </div>\n        </li>;\n  renderItems = itemDisplayNames => itemDisplayNames.map(name => <li key={`${this.props.dimensionId}-${name}`} style={styles.item}>\n                {name}\n            </li>);\n  renderLockedLabel = () => <li style={styles.item}>\n            <div style={styles.iconWrapper}>\n                <LockIcon style={styles.icon} />\n                <span>{this.props.lockedLabel}</span>\n            </div>\n        </li>;\n  renderNoItemsLabel = () => <li key={`${this.props.dimensionId}-${labels.noneSelected}`} style={styles.item}>\n            {labels.noneSelected}\n        </li>;\n\n  render() {\n    const itemDisplayNames = this.getItemDisplayNames();\n    const warningLabel = this.getWarningLabel();\n    const hasNoItemsLabel = !itemDisplayNames.length && !warningLabel;\n    return <Popper anchorEl={this.props.anchorEl} open={this.props.open} placement=\"bottom-start\">\n                <Paper style={styles.tooltip}>\n                    {<ul style={styles.list}>\n                            {warningLabel && this.renderWarningLabel(warningLabel)}\n                            {this.props.lockedLabel && this.renderLockedLabel()}\n                            {itemDisplayNames && this.renderItems(itemDisplayNames)}\n                            {hasNoItemsLabel && this.renderNoItemsLabel()}\n                        </ul>}\n                </Paper>\n            </Popper>;\n  }\n\n}\nTooltip.propTypes = {\n  anchorEl: PropTypes.object.isRequired,\n  dimensionId: PropTypes.string.isRequired,\n  metadata: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired,\n  displayLimitedAmount: PropTypes.bool,\n  itemIds: PropTypes.array,\n  lockedLabel: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  metadata: sGetMetadata(state)\n});\n\nexport default connect(mapStateToProps)(Tooltip);","const DATA_TYPE_TEXT = 'text';\nexport const setDataTransfer = (e, source) => {\n  e.dataTransfer.setData(DATA_TYPE_TEXT, JSON.stringify({\n    dimensionId: e.target.dataset.dimensionid,\n    source\n  }));\n};\nexport const decodeDataTransfer = e => JSON.parse(e.dataTransfer.getData(DATA_TYPE_TEXT));","import React from 'react';\n\nconst DynamicDimensionIcon = () => {\n  return <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g id=\"Exp\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n                <g id=\"Artboard\" transform=\"translate(-80.000000, -9.000000)\">\n                    <g id=\"icon_dimension_new\" transform=\"translate(80.000000, 9.000000)\">\n                        <rect id=\"frame\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" />\n                        <g id=\"module\" transform=\"translate(4.000000, 4.000000)\" stroke=\"#000000\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                            <path d=\"M0.33209728,1.1742111 L3.16308174,0.0641666694 C3.37911767,-0.0213888898 3.61963794,-0.0213888898 3.83567387,0.0641666694 L6.66665833,1.1742111 C6.87300668,1.26220739 7.00497003,1.467 6.99984343,1.69127776 L6.99984343,5.30887771 C7.00517859,5.53285411 6.87376309,5.73756106 6.66790272,5.82594437 L3.83691826,6.93629991 C3.62076407,7.02123336 3.38048032,7.02123336 3.16432613,6.93629991 L0.333341668,5.82594437 C0.126993317,5.73794808 -0.00497002591,5.53315547 0.000156574133,5.30887771 L0.000156574133,1.69127776 C-0.00517858533,1.46730136 0.126236906,1.26259441 0.33209728,1.1742111 Z\" id=\"Shape\" />\n                            <path d=\"M3.5,2.72795833 L0.322,1.48195833\" id=\"Shape\" />\n                            <path d=\"M3.5,2.72795833 L6.678,1.48195833\" id=\"Shape\" />\n                            <path d=\"M3.5,6.78125 L3.5,2.72795833\" id=\"Shape\" />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>;\n};\n\nexport default DynamicDimensionIcon;","import { colors, theme } from '@dhis2/ui-core'; // Layout\n\nexport const LAYOUT_HEIGHT = '78px'; // Axis\n\nexport const AXIS_PADDING = '4px 4px 2px 6px';\nexport const AXIS_LABEL_PADDING = '2px 0px 0px 4px';\nexport const AXIS_BORDER_COLOR = colors.grey300;\nexport const AXIS_BORDER_STYLE = 'solid';\nexport const AXIS_BORDER_WIDTH = '0px 0px 1px 1px';\nexport const AXIS_BACKGROUND_COLOR = colors.white; // Chip\n\nexport const CHIP_COLOR = colors.grey900;\nexport const CHIP_FONT_WEIGHT = 400;\nexport const CHIP_FONT_SIZE = '14px';\nexport const CHIP_BACKGROUND_COLOR = theme.secondary200;\nexport const CHIP_HEIGHT = '14px';\nexport const CHIP_MARGIN = '4px';\nexport const CHIP_PADDING = '1px 6px';\nexport const CHIP_BORDER_RADIUS = '2px';","import { colors } from '@dhis2/ui-core';\nimport * as layoutStyle from './style';\nconst baseChip = {\n  padding: layoutStyle.CHIP_PADDING,\n  fontSize: layoutStyle.CHIP_FONT_SIZE,\n  fontWeight: layoutStyle.CHIP_FONT_WEIGHT,\n  color: layoutStyle.CHIP_COLOR,\n  cursor: 'pointer',\n  minHeight: 24,\n  userSelect: 'none'\n};\nexport const styles = {\n  chipWrapper: {\n    display: 'flex',\n    margin: layoutStyle.CHIP_MARGIN,\n    backgroundColor: layoutStyle.CHIP_BACKGROUND_COLOR,\n    borderRadius: layoutStyle.CHIP_BORDER_RADIUS,\n    alignItems: 'center',\n    maxWidth: '400px'\n  },\n  chip: { ...baseChip,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  },\n  chipEmpty: {\n    backgroundColor: colors.grey300\n  },\n  fixedDimensionIcon: {\n    paddingRight: '6px'\n  },\n  iconWrapper: {\n    paddingRight: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  warningIcon: {\n    fontSize: layoutStyle.CHIP_FONT_SIZE\n  },\n  warningIconWrapper: {\n    paddingLeft: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  lockIcon: {\n    fontSize: layoutStyle.CHIP_FONT_SIZE\n  },\n  lockIconWrapper: {\n    paddingLeft: '6px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  label: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  }\n};\nstyles.chipLeft = { ...baseChip,\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  display: 'flex',\n  borderTopRightRadius: '0px',\n  borderBottomRightRadius: '0px',\n  alignItems: 'center'\n};\nstyles.chipRight = { ...baseChip,\n  paddingLeft: '0px',\n  borderTopLeftRadius: '0px',\n  borderBottomLeftRadius: '0px'\n};","// TODO: Refactor chip to contain less logic\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport LockIcon from '@material-ui/icons/Lock';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPredefinedDimensionProp, getAxisMaxNumberOfItems, hasAxisTooManyItems, getDisplayNameByVisType, getAxisNameByLayoutType, getLayoutTypeByVisType, DIMENSION_ID_ASSIGNED_CATEGORIES, isDimensionLocked, DIMENSION_PROP_NO_ITEMS } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport Menu from './Menu';\nimport Tooltip from './Tooltip';\nimport { setDataTransfer } from '../../modules/dnd';\nimport { sGetDimensions } from '../../reducers/dimensions';\nimport { sGetUiItemsByDimension, sGetUiType } from '../../reducers/ui';\nimport DynamicDimensionIcon from '../../assets/DynamicDimensionIcon';\nimport { styles } from './styles/Chip.style';\nimport { acSetUiActiveModalDialog } from '../../actions/ui';\nconst TOOLTIP_ENTER_DELAY = 500;\nconst LockIconWrapper = <div style={styles.lockIconWrapper}>\n        <LockIcon style={styles.lockIcon} />\n    </div>;\nconst WarningIconWrapper = <div style={styles.warningIconWrapper}>\n        <WarningIcon style={styles.warningIcon} />\n    </div>;\n\nclass Chip extends React.Component {\n  state = {\n    tooltipOpen: false\n  };\n  id = Math.random().toString(36);\n  timeout = null;\n  isLocked = () => isDimensionLocked(this.props.type, this.props.dimensionId);\n  getMaxNumberOfItems = () => getAxisMaxNumberOfItems(this.props.type, this.props.axisId);\n  handleMouseOver = () => {\n    if (this.timeout === null) {\n      this.timeout = setTimeout(() => this.setState({\n        tooltipOpen: true\n      }), TOOLTIP_ENTER_DELAY);\n    }\n  };\n  handleMouseOut = () => {\n    if (typeof this.timeout === 'number') {\n      clearTimeout(this.timeout);\n      this.timeout = null;\n      this.setState({\n        tooltipOpen: false\n      });\n    }\n  };\n  handleClick = () => {\n    if (!getPredefinedDimensionProp(this.props.dimensionId, DIMENSION_PROP_NO_ITEMS)) {\n      this.props.getOpenHandler(this.props.dimensionId);\n    }\n\n    this.handleMouseOut();\n  };\n  getDragStartHandler = () => event => {\n    this.handleMouseOut();\n    setDataTransfer(event, this.props.axisId);\n  };\n  getAnchorEl = () => document.getElementById(this.id);\n  getWrapperStyles = () => ({ ...styles.chipWrapper,\n    ...(!getPredefinedDimensionProp(this.props.dimensionId, DIMENSION_PROP_NO_ITEMS) && !this.props.items.length ? styles.chipEmpty : {})\n  });\n  renderChipLabelSuffix = () => {\n    const numberOfItems = this.props.items.length;\n    const getItemsLabel = !!this.getMaxNumberOfItems() && numberOfItems > this.getMaxNumberOfItems() ? i18n.t(`{{total}} of {{axisMaxNumberOfItems}} selected`, {\n      total: numberOfItems,\n      axisMaxNumberOfItems: this.getMaxNumberOfItems()\n    }) : i18n.t('{{total}} selected', {\n      total: numberOfItems\n    });\n    return `${this.props.items.length > 0 ? `: ${getItemsLabel}` : ''}`;\n  };\n  renderChipIcon = () => {\n    const Icon = getPredefinedDimensionProp(this.props.dimensionId, 'icon');\n    return Icon ? <Icon style={styles.fixedDimensionIcon} /> : <DynamicDimensionIcon style={styles.dynamicDimensionIcon} />;\n  };\n  renderMenu = () => <div style={styles.chipRight}>\n            <Menu dimensionId={this.props.dimensionId} currentAxisId={this.props.axisId} visType={this.props.type} numberOfDimensionItems={this.props.items.length} />\n        </div>;\n  renderTooltip = () => {\n    if (this.props.dimensionId !== DIMENSION_ID_ASSIGNED_CATEGORIES) {\n      const activeItemIds = this.getMaxNumberOfItems() ? this.props.items.slice(0, this.getMaxNumberOfItems()) : this.props.items;\n      const lockedLabel = this.isLocked() ? i18n.t(`{{dimensionName}} is locked to {{axisName}} for {{visTypeName}}`, {\n        dimensionName: this.props.dimensionName,\n        axisName: getAxisNameByLayoutType(this.props.axisId, getLayoutTypeByVisType(this.props.type)),\n        visTypeName: getDisplayNameByVisType(this.props.type)\n      }) : null;\n      return <Tooltip dimensionId={this.props.dimensionId} itemIds={activeItemIds} lockedLabel={lockedLabel} displayLimitedAmount={this.props.items.length > activeItemIds.length} open={this.state.tooltipOpen} anchorEl={this.getAnchorEl()} />;\n    }\n  };\n  render = () => <div style={this.getWrapperStyles()} data-dimensionid={this.props.dimensionId} draggable={!this.isLocked()} onDragStart={this.getDragStartHandler()}>\n            <div id={this.id} style={styles.chipLeft} onClick={this.handleClick} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n                <div style={styles.iconWrapper}>{this.renderChipIcon()}</div>\n                <span style={styles.label}>{this.props.dimensionName}</span>\n                <span>{this.renderChipLabelSuffix()}</span>\n                {hasAxisTooManyItems(this.props.type, this.props.axisId, this.props.items.length) && WarningIconWrapper}\n                {this.isLocked() && LockIconWrapper}\n            </div>\n            {!this.isLocked() && this.renderMenu()}\n            {this.getAnchorEl() && this.renderTooltip()}\n        </div>;\n}\n\nChip.propTypes = {\n  axisId: PropTypes.string.isRequired,\n  dimensionId: PropTypes.string.isRequired,\n  dimensionName: PropTypes.string.isRequired,\n  getOpenHandler: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n  items: PropTypes.array\n};\nChip.defaultProps = {\n  items: []\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n  dimensionName: (sGetDimensions(state)[ownProps.dimensionId] || {}).name,\n  items: sGetUiItemsByDimension(state, ownProps.dimensionId) || [],\n  type: sGetUiType(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOpenHandler: dimensionId => dispatch(acSetUiActiveModalDialog(dimensionId))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chip);","import { colors } from '@dhis2/ui-core';\nimport * as layoutStyle from '../../styles/style';\nexport default {\n  axisContainer: {\n    display: 'flex',\n    backgroundColor: layoutStyle.AXIS_BACKGROUND_COLOR,\n    borderColor: layoutStyle.AXIS_BORDER_COLOR,\n    borderStyle: layoutStyle.AXIS_BORDER_STYLE,\n    borderWidth: layoutStyle.AXIS_BORDER_WIDTH,\n    padding: layoutStyle.AXIS_PADDING\n  },\n  axisContainerLeft: {\n    borderLeftWidth: 0\n  },\n  label: {\n    minWidth: 55,\n    maxWidth: 55,\n    padding: '2px 0px 0px 0px',\n    fontSize: 11,\n    color: colors.grey700,\n    userSelect: 'none',\n    letterSpacing: '0.2px'\n  },\n  content: {\n    width: '100%',\n    display: 'flex',\n    alignItems: 'flex-start',\n    alignContent: 'flex-start',\n    flexWrap: 'wrap',\n    minHeight: 32,\n    '& > div': {\n      cursor: 'pointer'\n    }\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\nimport { getAxisNameByLayoutType, getLayoutTypeByVisType, isDimensionLocked } from '@dhis2/analytics';\nimport { withStyles } from '@material-ui/core';\nimport Chip from '../Chip';\nimport { sGetUi, sGetUiLayout, sGetUiType } from '../../../reducers/ui';\nimport { acSetUiActiveModalDialog } from '../../../actions/ui';\nimport styles from './styles/DefaultAxis.style';\n\nclass Axis extends React.Component {\n  onDragOver = e => {\n    e.preventDefault();\n  };\n\n  render() {\n    const {\n      axisId,\n      axis,\n      style,\n      type,\n      getOpenHandler\n    } = this.props;\n    return <div id={axisId} style={{ ...styles.axisContainer,\n      ...style\n    }} onDragOver={this.onDragOver}>\n                <div style={styles.label}>\n                    {this.props.label || getAxisNameByLayoutType(axisId, getLayoutTypeByVisType(type))}\n                </div>\n                <Droppable droppableId={axisId} direction=\"horizontal\">\n                    {provided => <div className={this.props.classes.content} ref={provided.innerRef} {...provided.droppableProps}>\n                            {axis.map((dimensionId, index) => {\n            const key = `${axisId}-${dimensionId}`;\n            return <Draggable key={key} draggableId={key} index={index} isDragDisabled={isDimensionLocked(type, dimensionId)}>\n                                        {provided => <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n                                                <Chip onClick={getOpenHandler(dimensionId)} axisId={axisId} dimensionId={dimensionId} />\n                                            </div>}\n                                    </Draggable>;\n          })}\n                            {provided.placeholder}\n                        </div>}\n                </Droppable>\n            </div>;\n  }\n\n}\n\nAxis.propTypes = {\n  axis: PropTypes.array,\n  axisId: PropTypes.string,\n  classes: PropTypes.object,\n  getMoveHandler: PropTypes.func,\n  getOpenHandler: PropTypes.func,\n  getRemoveHandler: PropTypes.func,\n  label: PropTypes.string,\n  layout: PropTypes.object,\n  style: PropTypes.object,\n  type: PropTypes.string,\n  ui: PropTypes.object,\n  onOpenAxisSetup: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  ui: sGetUi(state),\n  type: sGetUiType(state),\n  layout: sGetUiLayout(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getOpenHandler: dimensionId => () => dispatch(acSetUiActiveModalDialog(dimensionId))\n});\n\nconst mergeProps = (stateProps, dispatchProps, ownProps) => {\n  return { ...stateProps,\n    ...dispatchProps,\n    ...ownProps,\n    axis: stateProps.ui.layout[ownProps.axisId]\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(withStyles(styles)(Axis));","import { LAYOUT_HEIGHT } from '../../styles/style'; // Axis\n\nexport const FILTER_AXIS_WIDTH = '67%';\nexport const DIMENSION_AXIS_CONTENT_HEIGHT = '36px'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  ct: {\n    display: 'flex',\n    minHeight: LAYOUT_HEIGHT\n  },\n  axisGroup: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  },\n  columns: {\n    flexBasis: '50%'\n  },\n  rows: {\n    flexBasis: '50%'\n  },\n  filters: {\n    flexBasis: '100%'\n  }\n};","import React from 'react';\nimport DefaultAxis from './DefaultAxis';\nimport styles from './styles/DefaultLayout.style';\nimport defaultAxisStyles from './styles/DefaultAxis.style';\n\nconst Layout = () => <div id=\"layout-ct\" style={styles.ct}>\n        <div id=\"axis-group-1\" style={{ ...styles.axisGroup,\n    ...styles.axisGroupLeft\n  }}>\n            <DefaultAxis axisId=\"columns\" style={{ ...styles.columns,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n            <DefaultAxis axisId=\"rows\" style={{ ...styles.rows,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...styles.axisGroup,\n    ...styles.axisGroupRight\n  }}>\n            <DefaultAxis axisId=\"filters\" style={styles.filters} />\n        </div>\n    </div>;\n\nLayout.displayName = 'Layout';\nexport default Layout;","export default {\n  content: {\n    flex: '1 1 0%'\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getAxisNameByLayoutType, LAYOUT_TYPE_YEAR_OVER_YEAR } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport { sGetUiYearOverYearSeries, sGetUiYearOverYearCategory } from '../../../reducers/ui';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport YearOverYearAxisStyles from './styles/YearOverYearAxis.style';\n\nconst YearOverYearAxis = props => <div id={props.axisId} style={{ ...defaultAxisStyles.axisContainer,\n  ...props.style\n}}>\n        <div className=\"label\" style={defaultAxisStyles.label}>\n            {getAxisNameByLayoutType(props.axisId, LAYOUT_TYPE_YEAR_OVER_YEAR)}\n        </div>\n        <div className=\"content\" style={{ ...defaultAxisStyles.content,\n    ...YearOverYearAxisStyles.content\n  }}>\n            {props.children}\n        </div>\n    </div>;\n\nYearOverYearAxis.propTypes = {\n  axisId: PropTypes.string,\n  children: PropTypes.node,\n  style: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  yearOverYearSeries: sGetUiYearOverYearSeries(state),\n  yearOverYearCategory: sGetUiYearOverYearCategory(state)\n});\n\nexport default connect(mapStateToProps)(YearOverYearAxis);","import i18n from '@dhis2/d2-i18n'; // Fixed years generator\n\nconst getFixedYears = len => {\n  let year = new Date().getFullYear();\n  return new Array(len).fill(null).map(() => ({\n    id: String(year),\n    name: String(year--)\n  }));\n}; // Options for the year on year series dropdown\n\n\nexport const seriesOptions = [{\n  id: 'THIS_YEAR',\n  name: i18n.t('This year')\n}, {\n  id: 'LAST_YEAR',\n  name: i18n.t('Last year')\n}, {\n  id: 'LAST_5_YEARS',\n  name: i18n.t('Last 5 years')\n}, ...getFixedYears(10)]; // Options for the year on year category dropdown\n\nexport const categoryOptions = [{\n  id: 'LAST_3_DAYS',\n  name: i18n.t('Last 3 days')\n}, {\n  id: 'LAST_7_DAYS',\n  name: i18n.t('Last 7 days')\n}, {\n  id: 'LAST_14_DAYS',\n  name: i18n.t('Last 14 days')\n}, {\n  id: 'LAST_4_WEEKS',\n  name: i18n.t('Last 4 weeks')\n}, {\n  id: 'LAST_12_WEEKS',\n  name: i18n.t('Last 12 weeks')\n}, {\n  id: 'LAST_52_WEEKS',\n  name: i18n.t('Last 52 weeks')\n}, {\n  id: 'WEEKS_THIS_YEAR',\n  name: i18n.t('Weeks per year')\n}, {\n  id: 'LAST_3_MONTHS',\n  name: i18n.t('Last 3 months')\n}, {\n  id: 'LAST_6_MONTHS',\n  name: i18n.t('Last 6 months')\n}, {\n  id: 'LAST_12_MONTHS',\n  name: i18n.t('Last 12 months')\n}, {\n  id: 'MONTHS_THIS_YEAR',\n  name: i18n.t('Months per year')\n}, {\n  id: 'LAST_6_BIMONTHS',\n  name: i18n.t('Last 6 bimonths')\n}, {\n  id: 'BIMONTHS_THIS_YEAR',\n  name: i18n.t('Bimonths per year')\n}, {\n  id: 'LAST_4_QUARTERS',\n  name: i18n.t('Last 4 quarters')\n}, {\n  id: 'QUARTERS_THIS_YEAR',\n  name: i18n.t('Quarters per year')\n}, {\n  id: 'LAST_2_SIXMONTHS',\n  name: i18n.t('Last 2 six-months')\n}];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seriesOptions, categoryOptions } from '../../../modules/yearOverYear';\nimport { MultiSelect, MultiSelectOption, SingleSelect, SingleSelectOption } from '@dhis2/ui-core';\n\nconst SinglePeriodSelector = ({\n  options,\n  selected,\n  onChange\n}) => <SingleSelect onChange={onChange} selected={selected} dense>\n        {options.map(option => <SingleSelectOption key={option.id} value={option.id} label={option.name} />)}\n    </SingleSelect>;\n\nSinglePeriodSelector.propTypes = {\n  options: PropTypes.array,\n  selected: PropTypes.object,\n  onChange: PropTypes.func\n};\n\nconst MultiPeriodSelector = ({\n  options,\n  selected,\n  onChange\n}) => <MultiSelect onChange={onChange} selected={selected} placeholder=\"Select years\" dense>\n        {options.map(option => <MultiSelectOption key={option.id} value={option.id} label={option.name} />)}\n    </MultiSelect>;\n\nMultiPeriodSelector.propTypes = {\n  options: PropTypes.array,\n  selected: PropTypes.array,\n  onChange: PropTypes.func\n};\n\nconst YearOverYearSelect = ({\n  multiple,\n  value,\n  ...props\n}) => {\n  if (multiple === 'true') {\n    const selected = [];\n\n    if (Array.isArray(value)) {\n      value.forEach(value => selected.push({\n        value,\n        label: seriesOptions.find(({\n          id\n        }) => id === value).name\n      }));\n    }\n\n    return <MultiPeriodSelector selected={selected} {...props} />;\n  } else {\n    const selected = {};\n\n    if (value) {\n      selected.value = value;\n      selected.label = categoryOptions.find(({\n        id\n      }) => id === value).name;\n    }\n\n    return <SinglePeriodSelector selected={selected} {...props} />;\n  }\n};\n\nYearOverYearSelect.propTypes = {\n  multiple: PropTypes.string,\n  options: PropTypes.array,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  onChange: PropTypes.func\n};\nexport default YearOverYearSelect;","import { FILTER_AXIS_WIDTH } from '../../DefaultLayout/styles/DefaultLayout.style'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { AXIS_ID_FILTERS, AXIS_ID_COLUMNS, AXIS_ID_ROWS } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport YearOverYearAxis from './YearOverYearAxis';\nimport YearOverYearSelect from './YearOverYearSelect';\nimport YearOverYearLayoutStyles from './styles/YearOverYearLayout.style';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport { sGetUiYearOverYearSeries, sGetUiYearOverYearCategory } from '../../../reducers/ui';\nimport { acSetUiYearOverYearSeries, acSetUiYearOverYearCategory } from '../../../actions/ui';\nimport { seriesOptions, categoryOptions } from '../../../modules/yearOverYear';\n\nconst Layout = props => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...YearOverYearLayoutStyles.axisGroupLeft\n  }}>\n            <YearOverYearAxis axisId={AXIS_ID_COLUMNS} style={{ ...defaultLayoutStyles.columns,\n      ...defaultAxisStyles.axisContainerLeft\n    }}>\n                <YearOverYearSelect multiple=\"true\" value={props.yearOverYearSeries} onChange={props.onSeriesChange} options={seriesOptions} />\n            </YearOverYearAxis>\n            <YearOverYearAxis axisId={AXIS_ID_ROWS} style={{ ...defaultLayoutStyles.rows,\n      ...defaultAxisStyles.axisContainerLeft\n    }}>\n                <YearOverYearSelect value={props.yearOverYearCategory[0]} onChange={props.onCategoryChange} options={categoryOptions} />\n            </YearOverYearAxis>\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...YearOverYearLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nLayout.displayName = 'Layout';\nLayout.propTypes = {\n  yearOverYearCategory: PropTypes.array,\n  yearOverYearSeries: PropTypes.array,\n  onCategoryChange: PropTypes.func,\n  onSeriesChange: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  yearOverYearSeries: sGetUiYearOverYearSeries(state),\n  yearOverYearCategory: sGetUiYearOverYearCategory(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onSeriesChange: ({\n    selected\n  }) => {\n    dispatch(acSetUiYearOverYearSeries(selected?.length ? selected.map(({\n      value\n    }) => value) : null));\n  },\n  onCategoryChange: ({\n    selected\n  }) => {\n    if (selected?.value) {\n      dispatch(acSetUiYearOverYearCategory(selected.value));\n    }\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Layout);","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\n\nconst Layout = () => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...defaultLayoutStyles.axisGroupLeft\n  }}>\n            <DefaultAxis axisId={AXIS_ID_COLUMNS} style={{ ...defaultLayoutStyles.filters,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...defaultLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nexport default Layout;","// Axis\nexport const FILTER_AXIS_WIDTH = '50%'; // Axis (generated)\n\nexport const DIMENSION_AXIS_WIDTH = `${100 - parseInt(FILTER_AXIS_WIDTH, 10)}%`;\nexport default {\n  axisGroupLeft: {\n    flexBasis: DIMENSION_AXIS_WIDTH\n  },\n  axisGroupRight: {\n    flexBasis: FILTER_AXIS_WIDTH\n  }\n};","import React from 'react';\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from '@dhis2/analytics';\nimport DefaultAxis from '../DefaultLayout/DefaultAxis';\nimport defaultAxisStyles from '../DefaultLayout/styles/DefaultAxis.style';\nimport defaultLayoutStyles from '../DefaultLayout/styles/DefaultLayout.style';\nimport pivotTableLayoutStyles from './styles/PivotTableLayout.style';\n\nconst Layout = () => <div id=\"layout-ct\" style={defaultLayoutStyles.ct}>\n        <div id=\"axis-group-1\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...pivotTableLayoutStyles.axisGroupLeft\n  }}>\n            <DefaultAxis axisId={AXIS_ID_COLUMNS} style={{ ...defaultLayoutStyles.columns,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n            <DefaultAxis axisId={AXIS_ID_ROWS} style={{ ...defaultLayoutStyles.rows,\n      ...defaultAxisStyles.axisContainerLeft\n    }} />\n        </div>\n        <div id=\"axis-group-2\" style={{ ...defaultLayoutStyles.axisGroup,\n    ...pivotTableLayoutStyles.axisGroupRight\n  }}>\n            <DefaultAxis axisId={AXIS_ID_FILTERS} style={defaultLayoutStyles.filters} />\n        </div>\n    </div>;\n\nLayout.displayName = 'Layout';\nexport default Layout;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { LAYOUT_TYPE_DEFAULT, LAYOUT_TYPE_PIE, LAYOUT_TYPE_YEAR_OVER_YEAR, LAYOUT_TYPE_PIVOT_TABLE, getLayoutTypeByVisType } from '@dhis2/analytics';\nimport DefaultLayout from './DefaultLayout/DefaultLayout';\nimport YearOverYearLayout from './YearOverYearLayout/YearOverYearLayout';\nimport PieLayout from './PieLayout/PieLayout';\nimport { sGetUiType } from '../../reducers/ui';\nimport PivotTableLayout from './PivotTableLayout/PivotTableLayout';\nconst componentMap = {\n  [LAYOUT_TYPE_DEFAULT]: DefaultLayout,\n  [LAYOUT_TYPE_PIE]: PieLayout,\n  [LAYOUT_TYPE_YEAR_OVER_YEAR]: YearOverYearLayout,\n  [LAYOUT_TYPE_PIVOT_TABLE]: PivotTableLayout\n};\n\nconst Layout = ({\n  visType\n}) => {\n  const layoutType = getLayoutTypeByVisType(visType);\n  const LayoutComponent = componentMap[layoutType];\n  return <LayoutComponent visType={visType} />;\n};\n\nLayout.propTypes = {\n  visType: PropTypes.string\n};\n\nconst mapStateToProps = state => ({\n  visType: sGetUiType(state)\n});\n\nexport default connect(mapStateToProps, null)(Layout);","import i18n from '@dhis2/d2-i18n';\nexport const relativePeriods = {\n  TODAY: i18n.t('Today'),\n  YESTERDAY: i18n.t('Yesterday'),\n  LAST_3_DAYS: i18n.t('Last 3 days'),\n  LAST_7_DAYS: i18n.t('Last 7 days'),\n  LAST_14_DAYS: i18n.t('Last 14 days'),\n  THIS_WEEK: i18n.t('This week'),\n  LAST_WEEK: i18n.t('Last week'),\n  LAST_4_WEEKS: i18n.t('Last 4 weeks'),\n  LAST_12_WEEKS: i18n.t('Last 12 weeks'),\n  LAST_52_WEEKS: i18n.t('Last 52 weeks'),\n  WEEKS_THIS_YEAR: i18n.t('Weeks this year'),\n  THIS_MONTH: i18n.t('This month'),\n  LAST_MONTH: i18n.t('Last month'),\n  LAST_3_MONTHS: i18n.t('Last 3 months'),\n  LAST_6_MONTHS: i18n.t('Last 6 months'),\n  LAST_12_MONTHS: i18n.t('Last 12 months'),\n  MONTHS_THIS_YEAR: i18n.t('Months this year'),\n  THIS_BIMONTH: i18n.t('This bimonth'),\n  LAST_BIMONTH: i18n.t('Last bimonth'),\n  LAST_6_BIMONTHS: i18n.t('Last 6 bimonths'),\n  BIMONTHS_THIS_YEAR: i18n.t('Bimonths this year'),\n  THIS_QUARTER: i18n.t('This quarter'),\n  LAST_QUARTER: i18n.t('Last quarter'),\n  LAST_4_QUARTERS: i18n.t('Last 4 quarters'),\n  QUARTERS_THIS_YEAR: i18n.t('Quarters this year'),\n  THIS_SIX_MONTH: i18n.t('This six-month'),\n  LAST_SIX_MONTH: i18n.t('Last six-month'),\n  LAST_2_SIXMONTHS: i18n.t('Last 2 six-months'),\n  THIS_FINANCIAL_YEAR: i18n.t('This financial year'),\n  LAST_FINANCIAL_YEAR: i18n.t('Last financial year'),\n  LAST_5_FINANCIAL_YEARS: i18n.t('Last 5 financial years'),\n  THIS_YEAR: i18n.t('This year'),\n  LAST_YEAR: i18n.t('Last year'),\n  LAST_5_YEARS: i18n.t('Last 5 years')\n};\nexport const organisationUnits = {\n  USER_ORGUNIT: i18n.t('User org unit'),\n  USER_ORGUNIT_CHILDREN: i18n.t('User org unit children'),\n  USER_ORGUNIT_GRANDCHILDREN: i18n.t('User org unit grand children')\n}; // return {name: <string>} as value\n\nexport default (function () {\n  return Object.entries({ ...relativePeriods,\n    ...organisationUnits\n  }).reduce((obj, [key, value]) => ({ ...obj,\n    [key]: {\n      name: value\n    }\n  }), {});\n})();","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { CssVariables, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button } from '@dhis2/ui-core';\nimport DndContext from './DndContext';\nimport Snackbar from '../components/Snackbar/Snackbar';\nimport MenuBar from './MenuBar/MenuBar';\nimport TitleBar from './TitleBar/TitleBar';\nimport VisualizationTypeSelector from './VisualizationTypeSelector/VisualizationTypeSelector';\nimport DimensionsPanel from './DimensionsPanel/DimensionsPanel';\nimport Interpretations from './Interpretations/Interpretations';\nimport Visualization from './Visualization/Visualization';\nimport Layout from './Layout/Layout';\nimport * as fromReducers from '../reducers';\nimport * as fromActions from '../actions';\nimport history from '../modules/history';\nimport defaultMetadata from '../modules/metadata';\nimport { apiFetchAOFromUserDataStore, CURRENT_AO_KEY } from '../api/userDataStore';\nimport './App.css';\nimport './scrollbar.css';\nimport { getParentGraphMapFromVisualization } from '../modules/ui';\nimport AxisSetup from './AxisSetup/AxisSetup';\nimport { APPROVAL_LEVEL_OPTION_AUTH } from './VisualizationOptions/Options/ApprovalLevel';\nimport { sGetVisualization } from '../reducers/visualization';\nimport { STATE_DIRTY, getVisualizationState } from '../modules/visualization';\nexport class App extends Component {\n  unlisten = null;\n  apiObjectName = 'visualization';\n  state = {\n    previousLocation: null,\n    initialLoadIsComplete: false,\n    locationToConfirm: false\n  };\n  /**\n   * The following cases require a fetch/refetch of the AO\n   * - enter a new url (causing a page load)\n   * - file->open (same or different AO)\n   * - file->saveAs\n   */\n\n  refetch = location => {\n    if (!this.state.previousLocation) {\n      return true;\n    }\n\n    const id = location.pathname.slice(1).split('/')[0];\n    const prevId = this.state.previousLocation.slice(1).split('/')[0];\n\n    if (id !== prevId || this.state.previousLocation === location.pathname) {\n      return true;\n    }\n\n    return false;\n  };\n  loadVisualization = async location => {\n    const {\n      store\n    } = this.context;\n\n    if (location.pathname.length > 1) {\n      // /currentAnalyticalObject\n      // /${id}/\n      // /${id}/interpretation/${interpretationId}\n      const pathParts = location.pathname.slice(1).split('/');\n      const id = pathParts[0];\n      const interpretationId = pathParts[2];\n      const urlContainsCurrentAOKey = id === CURRENT_AO_KEY;\n\n      if (urlContainsCurrentAOKey) {\n        const AO = await apiFetchAOFromUserDataStore();\n        this.props.addParentGraphMap(getParentGraphMapFromVisualization(AO)); // clear visualization and current\n        // to avoid leave them \"dirty\" when navigating to\n        // /currentAnalyticalObject from a previous saved AO\n\n        this.props.clearVisualization();\n        this.props.clearCurrent();\n        this.props.setUiFromVisualization(AO);\n        this.props.setCurrentFromUi(this.props.ui);\n      }\n\n      if (!urlContainsCurrentAOKey && this.refetch(location)) {\n        await store.dispatch(fromActions.tDoLoadVisualization({\n          id,\n          interpretationId,\n          ouLevels: this.props.ouLevels\n        }));\n      }\n\n      if (!interpretationId) {\n        store.dispatch(fromActions.fromUi.acClearUiInterpretation());\n      }\n    } else {\n      fromActions.clearVisualization(store.dispatch, store.getState);\n      fromActions.fromUi.acClearUiInterpretation(store.dispatch);\n    }\n\n    this.setState({\n      initialLoadIsComplete: true\n    });\n    this.setState({\n      previousLocation: location.pathname\n    });\n  };\n  componentDidMount = async () => {\n    const {\n      store\n    } = this.context;\n    const {\n      d2,\n      userSettings\n    } = this.props;\n    await store.dispatch(fromActions.fromSettings.tAddSettings(userSettings));\n    store.dispatch(fromActions.fromUser.acReceivedUser(d2.currentUser));\n    store.dispatch(fromActions.fromUser.tLoadUserAuthority(APPROVAL_LEVEL_OPTION_AUTH));\n    store.dispatch(fromActions.fromDimensions.tSetDimensions(d2));\n    const rootOrgUnit = this.props.settings.rootOrganisationUnit;\n\n    if (rootOrgUnit && rootOrgUnit.id) {\n      store.dispatch(fromActions.fromMetadata.acAddMetadata({ ...defaultMetadata,\n        [rootOrgUnit.id]: { ...rootOrgUnit,\n          path: `/${rootOrgUnit.id}`\n        }\n      }));\n    }\n\n    this.loadVisualization(this.props.location);\n    this.unlisten = history.listen(location => {\n      const isSaving = location.state?.isSaving;\n\n      if (getVisualizationState(this.props.visualization, this.props.current) === STATE_DIRTY && this.state.locationToConfirm !== location && !isSaving) {\n        this.setState({\n          locationToConfirm: location\n        });\n      } else {\n        this.setState({\n          locationToConfirm: null\n        });\n        this.loadVisualization(location);\n      }\n    });\n    document.body.addEventListener('keyup', e => e.key === 'Enter' && e.ctrlKey === true && this.props.setCurrentFromUi(this.props.ui));\n    window.addEventListener('beforeunload', event => {\n      if (getVisualizationState(this.props.visualization, this.props.current) === STATE_DIRTY) {\n        event.preventDefault();\n        event.returnValue = i18n.t('You have unsaved changes.');\n      }\n    });\n  };\n\n  componentWillUnmount() {\n    if (this.unlisten) {\n      this.unlisten();\n    }\n  }\n\n  getChildContext() {\n    return {\n      baseUrl: this.props.baseUrl,\n      i18n,\n      d2: this.props.d2\n    };\n  }\n\n  render() {\n    return <>\n                <AxisSetup />\n                <div className=\"data-visualizer-app flex-ct flex-dir-col\">\n                    <div className=\"section-toolbar flex-ct\">\n                        <div className=\"toolbar-type\">\n                            <VisualizationTypeSelector />\n                        </div>\n                        <div className=\"toolbar-menubar flex-grow-1\">\n                            <MenuBar apiObjectName={this.apiObjectName} />\n                        </div>\n                    </div>\n                    <div className=\"section-main flex-grow-1 flex-ct\">\n                        <DndContext>\n                            <div className=\"main-left\">\n                                <DimensionsPanel />\n                            </div>\n                            <div className=\"main-center flex-grow-1 flex-basis-0 flex-ct flex-dir-col\">\n                                <div className=\"main-center-layout\">\n                                    <Layout />\n                                </div>\n                                <div className=\"main-center-titlebar\">\n                                    <TitleBar />\n                                </div>\n                                <div className=\"main-center-canvas flex-grow-1\">\n                                    {this.state.initialLoadIsComplete && <Visualization />}\n                                </div>\n                            </div>\n                        </DndContext>\n                        {this.props.ui.rightSidebarOpen && this.props.current && <div className=\"main-right\">\n                                <Interpretations type={this.apiObjectName} id={this.props.current.id} />\n                            </div>}\n                    </div>\n                </div>\n                {this.state.locationToConfirm && <Modal small>\n                        <ModalTitle>\n                            {i18n.t('Discard unsaved changes?')}\n                        </ModalTitle>\n                        <ModalContent>\n                            {i18n.t('Are you sure you want to leave this visualization? Any unsaved changes will be lost.')}\n                        </ModalContent>\n                        <ModalActions>\n                            <ButtonStrip end>\n                                <Button secondary onClick={() => this.setState({\n              locationToConfirm: null\n            })}>\n                                    {i18n.t('No, cancel')}\n                                </Button>\n\n                                <Button onClick={() => history.push(this.state.locationToConfirm)} primary>\n                                    {i18n.t('Yes, leave')}\n                                </Button>\n                            </ButtonStrip>\n                        </ModalActions>\n                    </Modal>}\n                <Snackbar />\n                <CssVariables colors spacers />\n            </>;\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  settings: fromReducers.fromSettings.sGetSettings(state),\n  current: fromReducers.fromCurrent.sGetCurrent(state),\n  interpretations: fromReducers.fromVisualization.sGetInterpretations(state),\n  ui: fromReducers.fromUi.sGetUi(state),\n  visualization: sGetVisualization(state),\n  snackbar: fromReducers.fromSnackbar.sGetSnackbar(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentFromUi: ui => dispatch(fromActions.fromCurrent.acSetCurrentFromUi(ui)),\n  clearVisualization: () => dispatch(fromActions.fromVisualization.acClear()),\n  clearCurrent: () => dispatch(fromActions.fromCurrent.acClear()),\n  setUiFromVisualization: visualization => dispatch(fromActions.fromUi.acSetUiFromVisualization(visualization)),\n  addParentGraphMap: parentGraphMap => dispatch(fromActions.fromUi.acAddParentGraphMap(parentGraphMap)),\n  clearSnackbar: () => dispatch(fromActions.fromSnackbar.acClearSnackbar())\n});\n\nApp.contextTypes = {\n  store: PropTypes.object\n};\nApp.childContextTypes = {\n  d2: PropTypes.object,\n  baseUrl: PropTypes.string,\n  i18n: PropTypes.object\n};\nApp.propTypes = {\n  addParentGraphMap: PropTypes.func,\n  baseUrl: PropTypes.string,\n  clearCurrent: PropTypes.func,\n  clearVisualization: PropTypes.func,\n  current: PropTypes.object,\n  d2: PropTypes.object,\n  location: PropTypes.object,\n  ouLevels: PropTypes.array,\n  setCurrentFromUi: PropTypes.func,\n  setUiFromVisualization: PropTypes.func,\n  settings: PropTypes.object,\n  ui: PropTypes.object,\n  userSettings: PropTypes.object,\n  visualization: PropTypes.object\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import { createMuiTheme } from '@material-ui/core/styles';\nimport dhis2theme from '@dhis2/d2-ui-core/theme/mui3.theme';\nexport const theme = { ...dhis2theme\n};\nexport default createMuiTheme(theme);","import React from 'react';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { D2Shim } from './D2Shim';\nimport configureStore from './configureStore';\nimport metadataMiddleware from './middleware/metadata';\nimport App from './components/App';\nimport muiTheme from './modules/theme';\n\nconst AppWrapper = () => {\n  const engine = useDataEngine();\n  const store = configureStore([thunk.withExtraArgument(engine), metadataMiddleware]);\n\n  if (window.Cypress) {\n    window.store = store;\n  }\n\n  const schemas = ['visualization', 'organisationUnit', 'userGroup'];\n  return <Provider store={store}>\n            <MuiThemeProvider theme={muiTheme}>\n                <D2Shim schemas={schemas}>\n                    {params => <App {...params} />}\n                </D2Shim>\n            </MuiThemeProvider>\n        </Provider>;\n};\n\nexport default AppWrapper;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"VisualizationTypeSelector_backdrop__84wtM\",\"button\":\"VisualizationTypeSelector_button__1d_Dv\",\"cardContainer\":\"VisualizationTypeSelector_cardContainer__2ZbJX\",\"listContainer\":\"VisualizationTypeSelector_listContainer__2ofGu\",\"listItem\":\"VisualizationTypeSelector_listItem__3Faru\",\"listItemActive\":\"VisualizationTypeSelector_listItemActive__1jCF3\",\"listItemDisabled\":\"VisualizationTypeSelector_listItemDisabled__2vjjv\",\"listItemSvg\":\"VisualizationTypeSelector_listItemSvg__30TD2\",\"listItemIcon\":\"VisualizationTypeSelector_listItemIcon__2vUNZ\",\"listItemText\":\"VisualizationTypeSelector_listItemText__3F6jt\"};"],"sourceRoot":""}